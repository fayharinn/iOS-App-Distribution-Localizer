function DU(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const r=Object.getOwnPropertyDescriptor(i,a);r&&Object.defineProperty(n,a,r.get?r:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();function Tb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var d_={exports:{}},xg={};var UE;function UU(){if(UE)return xg;UE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,r){var o=null;if(r!==void 0&&(o=""+r),a.key!==void 0&&(o=""+a.key),"key"in a){r={};for(var c in a)c!=="key"&&(r[c]=a[c])}else r=a;return a=r.ref,{$$typeof:n,type:i,key:o,ref:a!==void 0?a:null,props:r}}return xg.Fragment=e,xg.jsx=t,xg.jsxs=t,xg}var OE;function OU(){return OE||(OE=1,d_.exports=UU()),d_.exports}var x=OU(),f_={exports:{}},gn={};var LE;function LU(){if(LE)return gn;LE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function _(j){return j===null||typeof j!="object"?null:(j=y&&j[y]||j["@@iterator"],typeof j=="function"?j:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function w(j,ee,ne){this.props=j,this.context=ee,this.refs=T,this.updater=ne||S}w.prototype.isReactComponent={},w.prototype.setState=function(j,ee){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ee,"setState")},w.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function N(){}N.prototype=w.prototype;function D(j,ee,ne){this.props=j,this.context=ee,this.refs=T,this.updater=ne||S}var U=D.prototype=new N;U.constructor=D,A(U,w.prototype),U.isPureReactComponent=!0;var O=Array.isArray;function B(){}var z={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function L(j,ee,ne){var oe=ne.ref;return{$$typeof:n,type:j,key:ee,ref:oe!==void 0?oe:null,props:ne}}function I(j,ee){return L(j.type,ee,j.props)}function Y(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function q(j){var ee={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ne){return ee[ne]})}var K=/\/+/g;function $(j,ee){return typeof j=="object"&&j!==null&&j.key!=null?q(""+j.key):ee.toString(36)}function ce(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(B,B):(j.status="pending",j.then(function(ee){j.status==="pending"&&(j.status="fulfilled",j.value=ee)},function(ee){j.status==="pending"&&(j.status="rejected",j.reason=ee)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function G(j,ee,ne,oe,re){var se=typeof j;(se==="undefined"||se==="boolean")&&(j=null);var le=!1;if(j===null)le=!0;else switch(se){case"bigint":case"string":case"number":le=!0;break;case"object":switch(j.$$typeof){case n:case e:le=!0;break;case m:return le=j._init,G(le(j._payload),ee,ne,oe,re)}}if(le)return re=re(j),le=oe===""?"."+$(j,0):oe,O(re)?(ne="",le!=null&&(ne=le.replace(K,"$&/")+"/"),G(re,ee,ne,"",function(qe){return qe})):re!=null&&(Y(re)&&(re=I(re,ne+(re.key==null||j&&j.key===re.key?"":(""+re.key).replace(K,"$&/")+"/")+le)),ee.push(re)),1;le=0;var ve=oe===""?".":oe+":";if(O(j))for(var ze=0;ze<j.length;ze++)oe=j[ze],se=ve+$(oe,ze),le+=G(oe,ee,ne,se,re);else if(ze=_(j),typeof ze=="function")for(j=ze.call(j),ze=0;!(oe=j.next()).done;)oe=oe.value,se=ve+$(oe,ze++),le+=G(oe,ee,ne,se,re);else if(se==="object"){if(typeof j.then=="function")return G(ce(j),ee,ne,oe,re);throw ee=String(j),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return le}function W(j,ee,ne){if(j==null)return j;var oe=[],re=0;return G(j,oe,"","",function(se){return ee.call(ne,se,re++)}),oe}function Q(j){if(j._status===-1){var ee=j._result;ee=ee(),ee.then(function(ne){(j._status===0||j._status===-1)&&(j._status=1,j._result=ne)},function(ne){(j._status===0||j._status===-1)&&(j._status=2,j._result=ne)}),j._status===-1&&(j._status=0,j._result=ee)}if(j._status===1)return j._result.default;throw j._result}var ue=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},de={map:W,forEach:function(j,ee,ne){W(j,function(){ee.apply(this,arguments)},ne)},count:function(j){var ee=0;return W(j,function(){ee++}),ee},toArray:function(j){return W(j,function(ee){return ee})||[]},only:function(j){if(!Y(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return gn.Activity=g,gn.Children=de,gn.Component=w,gn.Fragment=t,gn.Profiler=a,gn.PureComponent=D,gn.StrictMode=i,gn.Suspense=d,gn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,gn.__COMPILER_RUNTIME={__proto__:null,c:function(j){return z.H.useMemoCache(j)}},gn.cache=function(j){return function(){return j.apply(null,arguments)}},gn.cacheSignal=function(){return null},gn.cloneElement=function(j,ee,ne){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var oe=A({},j.props),re=j.key;if(ee!=null)for(se in ee.key!==void 0&&(re=""+ee.key),ee)!F.call(ee,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&ee.ref===void 0||(oe[se]=ee[se]);var se=arguments.length-2;if(se===1)oe.children=ne;else if(1<se){for(var le=Array(se),ve=0;ve<se;ve++)le[ve]=arguments[ve+2];oe.children=le}return L(j.type,re,oe)},gn.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:r,_context:j},j},gn.createElement=function(j,ee,ne){var oe,re={},se=null;if(ee!=null)for(oe in ee.key!==void 0&&(se=""+ee.key),ee)F.call(ee,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(re[oe]=ee[oe]);var le=arguments.length-2;if(le===1)re.children=ne;else if(1<le){for(var ve=Array(le),ze=0;ze<le;ze++)ve[ze]=arguments[ze+2];re.children=ve}if(j&&j.defaultProps)for(oe in le=j.defaultProps,le)re[oe]===void 0&&(re[oe]=le[oe]);return L(j,se,re)},gn.createRef=function(){return{current:null}},gn.forwardRef=function(j){return{$$typeof:c,render:j}},gn.isValidElement=Y,gn.lazy=function(j){return{$$typeof:m,_payload:{_status:-1,_result:j},_init:Q}},gn.memo=function(j,ee){return{$$typeof:f,type:j,compare:ee===void 0?null:ee}},gn.startTransition=function(j){var ee=z.T,ne={};z.T=ne;try{var oe=j(),re=z.S;re!==null&&re(ne,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(B,ue)}catch(se){ue(se)}finally{ee!==null&&ne.types!==null&&(ee.types=ne.types),z.T=ee}},gn.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},gn.use=function(j){return z.H.use(j)},gn.useActionState=function(j,ee,ne){return z.H.useActionState(j,ee,ne)},gn.useCallback=function(j,ee){return z.H.useCallback(j,ee)},gn.useContext=function(j){return z.H.useContext(j)},gn.useDebugValue=function(){},gn.useDeferredValue=function(j,ee){return z.H.useDeferredValue(j,ee)},gn.useEffect=function(j,ee){return z.H.useEffect(j,ee)},gn.useEffectEvent=function(j){return z.H.useEffectEvent(j)},gn.useId=function(){return z.H.useId()},gn.useImperativeHandle=function(j,ee,ne){return z.H.useImperativeHandle(j,ee,ne)},gn.useInsertionEffect=function(j,ee){return z.H.useInsertionEffect(j,ee)},gn.useLayoutEffect=function(j,ee){return z.H.useLayoutEffect(j,ee)},gn.useMemo=function(j,ee){return z.H.useMemo(j,ee)},gn.useOptimistic=function(j,ee){return z.H.useOptimistic(j,ee)},gn.useReducer=function(j,ee,ne){return z.H.useReducer(j,ee,ne)},gn.useRef=function(j){return z.H.useRef(j)},gn.useState=function(j){return z.H.useState(j)},gn.useSyncExternalStore=function(j,ee,ne){return z.H.useSyncExternalStore(j,ee,ne)},gn.useTransition=function(){return z.H.useTransition()},gn.version="19.2.3",gn}var zE;function jp(){return zE||(zE=1,f_.exports=LU()),f_.exports}var k=jp();const St=Tb(k),J2=DU({__proto__:null,default:St},[k]);var h_={exports:{}},yg={},p_={exports:{}},m_={};var PE;function zU(){return PE||(PE=1,(function(n){function e(G,W){var Q=G.length;G.push(W);e:for(;0<Q;){var ue=Q-1>>>1,de=G[ue];if(0<a(de,W))G[ue]=W,G[Q]=de,Q=ue;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var W=G[0],Q=G.pop();if(Q!==W){G[0]=Q;e:for(var ue=0,de=G.length,j=de>>>1;ue<j;){var ee=2*(ue+1)-1,ne=G[ee],oe=ee+1,re=G[oe];if(0>a(ne,Q))oe<de&&0>a(re,ne)?(G[ue]=re,G[oe]=Q,ue=oe):(G[ue]=ne,G[ee]=Q,ue=ee);else if(oe<de&&0>a(re,Q))G[ue]=re,G[oe]=Q,ue=oe;else break e}}return W}function a(G,W){var Q=G.sortIndex-W.sortIndex;return Q!==0?Q:G.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var d=[],f=[],m=1,g=null,y=3,_=!1,S=!1,A=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(G){for(var W=t(f);W!==null;){if(W.callback===null)i(f);else if(W.startTime<=G)i(f),W.sortIndex=W.expirationTime,e(d,W);else break;W=t(f)}}function O(G){if(A=!1,U(G),!S)if(t(d)!==null)S=!0,B||(B=!0,q());else{var W=t(f);W!==null&&ce(O,W.startTime-G)}}var B=!1,z=-1,F=5,L=-1;function I(){return T?!0:!(n.unstable_now()-L<F)}function Y(){if(T=!1,B){var G=n.unstable_now();L=G;var W=!0;try{e:{S=!1,A&&(A=!1,N(z),z=-1),_=!0;var Q=y;try{t:{for(U(G),g=t(d);g!==null&&!(g.expirationTime>G&&I());){var ue=g.callback;if(typeof ue=="function"){g.callback=null,y=g.priorityLevel;var de=ue(g.expirationTime<=G);if(G=n.unstable_now(),typeof de=="function"){g.callback=de,U(G),W=!0;break t}g===t(d)&&i(d),U(G)}else i(d);g=t(d)}if(g!==null)W=!0;else{var j=t(f);j!==null&&ce(O,j.startTime-G),W=!1}}break e}finally{g=null,y=Q,_=!1}W=void 0}}finally{W?q():B=!1}}}var q;if(typeof D=="function")q=function(){D(Y)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,$=K.port2;K.port1.onmessage=Y,q=function(){$.postMessage(null)}}else q=function(){w(Y,0)};function ce(G,W){z=w(function(){G(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(G){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var Q=y;y=W;try{return G()}finally{y=Q}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=y;y=G;try{return W()}finally{y=Q}},n.unstable_scheduleCallback=function(G,W,Q){var ue=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ue+Q:ue):Q=ue,G){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Q+de,G={id:m++,callback:W,priorityLevel:G,startTime:Q,expirationTime:de,sortIndex:-1},Q>ue?(G.sortIndex=Q,e(f,G),t(d)===null&&G===t(f)&&(A?(N(z),z=-1):A=!0,ce(O,Q-ue))):(G.sortIndex=de,e(d,G),S||_||(S=!0,B||(B=!0,q()))),G},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(G){var W=y;return function(){var Q=y;y=W;try{return G.apply(this,arguments)}finally{y=Q}}}})(m_)),m_}var IE;function PU(){return IE||(IE=1,p_.exports=zU()),p_.exports}var g_={exports:{}},Er={};var BE;function IU(){if(BE)return Er;BE=1;var n=jp();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function r(d,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:d,containerInfo:f,implementation:m}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Er.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return r(d,f,null,m)},Er.flushSync=function(d){var f=o.T,m=i.p;try{if(o.T=null,i.p=2,d)return d()}finally{o.T=f,i.p=m,i.d.f()}},Er.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Er.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Er.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,g=c(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:_}):m==="script"&&i.d.X(d,{crossOrigin:g,integrity:y,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Er.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Er.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=c(m,f.crossOrigin);i.d.L(d,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Er.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Er.requestFormReset=function(d){i.d.r(d)},Er.unstable_batchedUpdates=function(d,f){return d(f)},Er.useFormState=function(d,f,m){return o.H.useFormState(d,f,m)},Er.useFormStatus=function(){return o.H.useHostTransitionStatus()},Er.version="19.2.3",Er}var kE;function yC(){if(kE)return g_.exports;kE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),g_.exports=IU(),g_.exports}var FE;function BU(){if(FE)return yg;FE=1;var n=PU(),e=jp(),t=yC();function i(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function r(s){var l=s,p=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(p=l.return),s=l.return;while(s)}return l.tag===3?p:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function d(s){if(r(s)!==s)throw Error(i(188))}function f(s){var l=s.alternate;if(!l){if(l=r(s),l===null)throw Error(i(188));return l!==s?null:s}for(var p=s,v=l;;){var M=p.return;if(M===null)break;var C=M.alternate;if(C===null){if(v=M.return,v!==null){p=v;continue}break}if(M.child===C.child){for(C=M.child;C;){if(C===p)return d(M),s;if(C===v)return d(M),l;C=C.sibling}throw Error(i(188))}if(p.return!==v.return)p=M,v=C;else{for(var H=!1,te=M.child;te;){if(te===p){H=!0,p=M,v=C;break}if(te===v){H=!0,v=M,p=C;break}te=te.sibling}if(!H){for(te=C.child;te;){if(te===p){H=!0,p=C,v=M;break}if(te===v){H=!0,v=C,p=M;break}te=te.sibling}if(!H)throw Error(i(189))}}if(p.alternate!==v)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?s:l}function m(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=m(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),D=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var K=Symbol.for("react.client.reference");function $(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===K?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case w:return"Profiler";case T:return"StrictMode";case O:return"Suspense";case B:return"SuspenseList";case L:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case D:return s.displayName||"Context";case N:return(s._context.displayName||"Context")+".Consumer";case U:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return l=s.displayName||null,l!==null?l:$(s.type)||"Memo";case F:l=s._payload,s=s._init;try{return $(s(l))}catch{}}return null}var ce=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ue=[],de=-1;function j(s){return{current:s}}function ee(s){0>de||(s.current=ue[de],ue[de]=null,de--)}function ne(s,l){de++,ue[de]=s.current,s.current=l}var oe=j(null),re=j(null),se=j(null),le=j(null);function ve(s,l){switch(ne(se,l),ne(re,s),ne(oe,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?tE(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=tE(l),s=nE(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(oe),ne(oe,s)}function ze(){ee(oe),ee(re),ee(se)}function qe(s){s.memoizedState!==null&&ne(le,s);var l=oe.current,p=nE(l,s.type);l!==p&&(ne(re,s),ne(oe,p))}function Ke(s){re.current===s&&(ee(oe),ee(re)),le.current===s&&(ee(le),pg._currentValue=Q)}var Pe,gt;function Te(s){if(Pe===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);Pe=l&&l[1]||"",gt=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+s+gt}var je=!1;function Le(s,l){if(!s||je)return"";je=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Qe){var Ye=Qe}Reflect.construct(s,[],dt)}else{try{dt.call()}catch(Qe){Ye=Qe}s.call(dt.prototype)}}else{try{throw Error()}catch(Qe){Ye=Qe}(dt=s())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Qe){if(Qe&&Ye&&typeof Qe.stack=="string")return[Qe.stack,Ye.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=v.DetermineComponentFrameRoot(),H=C[0],te=C[1];if(H&&te){var be=H.split(`
`),Ve=te.split(`
`);for(M=v=0;v<be.length&&!be[v].includes("DetermineComponentFrameRoot");)v++;for(;M<Ve.length&&!Ve[M].includes("DetermineComponentFrameRoot");)M++;if(v===be.length||M===Ve.length)for(v=be.length-1,M=Ve.length-1;1<=v&&0<=M&&be[v]!==Ve[M];)M--;for(;1<=v&&0<=M;v--,M--)if(be[v]!==Ve[M]){if(v!==1||M!==1)do if(v--,M--,0>M||be[v]!==Ve[M]){var at=`
`+be[v].replace(" at new "," at ");return s.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",s.displayName)),at}while(1<=v&&0<=M);break}}}finally{je=!1,Error.prepareStackTrace=p}return(p=s?s.displayName||s.name:"")?Te(p):""}function $e(s,l){switch(s.tag){case 26:case 27:case 5:return Te(s.type);case 16:return Te("Lazy");case 13:return s.child!==l&&l!==null?Te("Suspense Fallback"):Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return Le(s.type,!1);case 11:return Le(s.type.render,!1);case 1:return Le(s.type,!0);case 31:return Te("Activity");default:return""}}function J(s){try{var l="",p=null;do l+=$e(s,p),p=s,s=s.return;while(s);return l}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var et=Object.prototype.hasOwnProperty,We=n.unstable_scheduleCallback,Se=n.unstable_cancelCallback,Ee=n.unstable_shouldYield,X=n.unstable_requestPaint,V=n.unstable_now,fe=n.unstable_getCurrentPriorityLevel,Ce=n.unstable_ImmediatePriority,Ae=n.unstable_UserBlockingPriority,we=n.unstable_NormalPriority,ot=n.unstable_LowPriority,it=n.unstable_IdlePriority,ht=n.log,xt=n.unstable_setDisableYieldValue,ke=null,Fe=null;function Ze(s){if(typeof ht=="function"&&xt(s),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(ke,s)}catch{}}var rt=Math.clz32?Math.clz32:me,ut=Math.log,Ut=Math.LN2;function me(s){return s>>>=0,s===0?32:31-(ut(s)/Ut|0)|0}var tt=256,nt=262144,ge=4194304;function xe(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function pe(s,l,p){var v=s.pendingLanes;if(v===0)return 0;var M=0,C=s.suspendedLanes,H=s.pingedLanes;s=s.warmLanes;var te=v&134217727;return te!==0?(v=te&~C,v!==0?M=xe(v):(H&=te,H!==0?M=xe(H):p||(p=te&~s,p!==0&&(M=xe(p))))):(te=v&~C,te!==0?M=xe(te):H!==0?M=xe(H):p||(p=v&~s,p!==0&&(M=xe(p)))),M===0?0:l!==0&&l!==M&&(l&C)===0&&(C=M&-M,p=l&-l,C>=p||C===32&&(p&4194048)!==0)?l:M}function Ie(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function pt(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var s=ge;return ge<<=1,(ge&62914560)===0&&(ge=4194304),s}function Nt(s){for(var l=[],p=0;31>p;p++)l.push(s);return l}function Kt(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function dn(s,l,p,v,M,C){var H=s.pendingLanes;s.pendingLanes=p,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=p,s.entangledLanes&=p,s.errorRecoveryDisabledLanes&=p,s.shellSuspendCounter=0;var te=s.entanglements,be=s.expirationTimes,Ve=s.hiddenUpdates;for(p=H&~p;0<p;){var at=31-rt(p),dt=1<<at;te[at]=0,be[at]=-1;var Ye=Ve[at];if(Ye!==null)for(Ve[at]=null,at=0;at<Ye.length;at++){var Qe=Ye[at];Qe!==null&&(Qe.lane&=-536870913)}p&=~dt}v!==0&&Xn(s,v,0),C!==0&&M===0&&s.tag!==0&&(s.suspendedLanes|=C&~(H&~l))}function Xn(s,l,p){s.pendingLanes|=l,s.suspendedLanes&=~l;var v=31-rt(l);s.entangledLanes|=l,s.entanglements[v]=s.entanglements[v]|1073741824|p&261930}function Rn(s,l){var p=s.entangledLanes|=l;for(s=s.entanglements;p;){var v=31-rt(p),M=1<<v;M&l|s[v]&l&&(s[v]|=l),p&=~M}}function Jn(s,l){var p=l&-l;return p=(p&42)!==0?1:Qn(p),(p&(s.suspendedLanes|l))!==0?0:p}function Qn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Si(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ui(){var s=W.p;return s!==0?s:(s=window.event,s===void 0?32:EE(s.type))}function ai(s,l){var p=W.p;try{return W.p=s,l()}finally{W.p=p}}var jn=Math.random().toString(36).slice(2),on="__reactFiber$"+jn,bt="__reactProps$"+jn,$n="__reactContainer$"+jn,ja="__reactEvents$"+jn,ls="__reactListeners$"+jn,Os="__reactHandles$"+jn,zr="__reactResources$"+jn,Pr="__reactMarker$"+jn;function Ha(s){delete s[on],delete s[bt],delete s[ja],delete s[ls],delete s[Os]}function hi(s){var l=s[on];if(l)return l;for(var p=s.parentNode;p;){if(l=p[$n]||p[on]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(s=cE(s);s!==null;){if(p=s[on])return p;s=cE(s)}return l}s=p,p=s.parentNode}return null}function zn(s){if(s=s[on]||s[$n]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function ba(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(i(33))}function kt(s){var l=s[zr];return l||(l=s[zr]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Z(s){s[Pr]=!0}var Me=new Set,Ge={};function Be(s,l){Ue(s,l),Ue(s+"Capture",l)}function Ue(s,l){for(Ge[s]=l,s=0;s<l.length;s++)Me.add(l[s])}var wt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),At={},Mt={};function zt(s){return et.call(Mt,s)?!0:et.call(At,s)?!1:wt.test(s)?Mt[s]=!0:(At[s]=!0,!1)}function It(s,l,p){if(zt(l))if(p===null)s.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+p)}}function Zt(s,l,p){if(p===null)s.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+p)}}function Bt(s,l,p,v){if(v===null)s.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(p);return}s.setAttributeNS(l,p,""+v)}}function $t(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Tn(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ei(s,l,p){var v=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var M=v.get,C=v.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return M.call(this)},set:function(H){p=""+H,C.call(this,H)}}),Object.defineProperty(s,l,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function(H){p=""+H},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Pn(s){if(!s._valueTracker){var l=Tn(s)?"checked":"value";s._valueTracker=ei(s,l,""+s[l])}}function Un(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var p=l.getValue(),v="";return s&&(v=Tn(s)?s.checked?"true":"false":s.value),s=v,s!==p?(l.setValue(s),!0):!1}function Ft(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var _n=/[\n"\\]/g;function qt(s){return s.replace(_n,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Hi(s,l,p,v,M,C,H,te){s.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?s.type=H:s.removeAttribute("type"),l!=null?H==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+$t(l)):s.value!==""+$t(l)&&(s.value=""+$t(l)):H!=="submit"&&H!=="reset"||s.removeAttribute("value"),l!=null?wi(s,H,$t(l)):p!=null?wi(s,H,$t(p)):v!=null&&s.removeAttribute("value"),M==null&&C!=null&&(s.defaultChecked=!!C),M!=null&&(s.checked=M&&typeof M!="function"&&typeof M!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?s.name=""+$t(te):s.removeAttribute("name")}function Na(s,l,p,v,M,C,H,te){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.type=C),l!=null||p!=null){if(!(C!=="submit"&&C!=="reset"||l!=null)){Pn(s);return}p=p!=null?""+$t(p):"",l=l!=null?""+$t(l):p,te||l===s.value||(s.value=l),s.defaultValue=l}v=v??M,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=te?s.checked:!!v,s.defaultChecked=!!v,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(s.name=H),Pn(s)}function wi(s,l,p){l==="number"&&Ft(s.ownerDocument)===s||s.defaultValue===""+p||(s.defaultValue=""+p)}function _a(s,l,p,v){if(s=s.options,l){l={};for(var M=0;M<p.length;M++)l["$"+p[M]]=!0;for(p=0;p<s.length;p++)M=l.hasOwnProperty("$"+s[p].value),s[p].selected!==M&&(s[p].selected=M),M&&v&&(s[p].defaultSelected=!0)}else{for(p=""+$t(p),l=null,M=0;M<s.length;M++){if(s[M].value===p){s[M].selected=!0,v&&(s[M].defaultSelected=!0);return}l!==null||s[M].disabled||(l=s[M])}l!==null&&(l.selected=!0)}}function Sn(s,l,p){if(l!=null&&(l=""+$t(l),l!==s.value&&(s.value=l),p==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=p!=null?""+$t(p):""}function di(s,l,p,v){if(l==null){if(v!=null){if(p!=null)throw Error(i(92));if(ce(v)){if(1<v.length)throw Error(i(93));v=v[0]}p=v}p==null&&(p=""),l=p}p=$t(l),s.defaultValue=p,v=s.textContent,v===p&&v!==""&&v!==null&&(s.value=v),Pn(s)}function Mi(s,l){if(l){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=l;return}}s.textContent=l}var Oi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Li(s,l,p){var v=l.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":v?s.setProperty(l,p):typeof p!="number"||p===0||Oi.has(l)?l==="float"?s.cssFloat=p:s[l]=(""+p).trim():s[l]=p+"px"}function fr(s,l,p){if(l!=null&&typeof l!="object")throw Error(i(62));if(s=s.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var M in l)v=l[M],l.hasOwnProperty(M)&&p[M]!==v&&Li(s,M,v)}else for(var C in l)l.hasOwnProperty(C)&&Li(s,C,l[C])}function ae(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var De=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),st=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Et(s){return st.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Dt(){}var Ct=null;function mt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var jt=null,Vt=null;function On(s){var l=zn(s);if(l&&(s=l.stateNode)){var p=s[bt]||null;e:switch(s=l.stateNode,l.type){case"input":if(Hi(s,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),l=p.name,p.type==="radio"&&l!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+qt(""+l)+'"][type="radio"]'),l=0;l<p.length;l++){var v=p[l];if(v!==s&&v.form===s.form){var M=v[bt]||null;if(!M)throw Error(i(90));Hi(v,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(l=0;l<p.length;l++)v=p[l],v.form===s.form&&Un(v)}break e;case"textarea":Sn(s,p.value,p.defaultValue);break e;case"select":l=p.value,l!=null&&_a(s,!!p.multiple,l,!1)}}}var Wt=!1;function yi(s,l,p){if(Wt)return s(l,p);Wt=!0;try{var v=s(l);return v}finally{if(Wt=!1,(jt!==null||Vt!==null)&&(ie(),jt&&(l=jt,s=Vt,Vt=jt=null,On(l),s)))for(l=0;l<s.length;l++)On(s[l])}}function ji(s,l){var p=s.stateNode;if(p===null)return null;var v=p[bt]||null;if(v===null)return null;p=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(i(231,l,typeof p));return p}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ei=!1;if(pi)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){Ei=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{Ei=!1}var Sa=null,ao=null,us=null;function fc(){if(us)return us;var s,l=ao,p=l.length,v,M="value"in Sa?Sa.value:Sa.textContent,C=M.length;for(s=0;s<p&&l[s]===M[s];s++);var H=p-s;for(v=1;v<=H&&l[p-v]===M[C-v];v++);return us=M.slice(s,1<v?1-v:void 0)}function ro(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ls(){return!0}function zo(){return!1}function zi(s){function l(p,v,M,C,H){this._reactName=p,this._targetInst=M,this.type=v,this.nativeEvent=C,this.target=H,this.currentTarget=null;for(var te in s)s.hasOwnProperty(te)&&(p=s[te],this[te]=p?p(C):C[te]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ls:zo,this.isPropagationStopped=zo,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),l}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=zi(zs),nr=g({},zs,{view:0,detail:0}),so=zi(nr),hc,Ps,oo,ha=g({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==oo&&(oo&&s.type==="mousemove"?(hc=s.screenX-oo.screenX,Ps=s.screenY-oo.screenY):Ps=hc=0,oo=s),hc)},movementY:function(s){return"movementY"in s?s.movementY:Ps}}),Vf=zi(ha),Wi=g({},ha,{dataTransfer:0}),pc=zi(Wi),vd=g({},nr,{relatedTarget:0}),lu=zi(vd),Ra=g({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),hr=zi(Ra),la=g({},zs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ds=zi(la),xd=g({},zs,{data:0}),$p=zi(xd),X0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},em={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y0(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=tm[s])?!!l[s]:!1}function yd(){return Y0}var nm=g({},nr,{key:function(s){if(s.key){var l=X0[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=ro(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?em[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yd,charCode:function(s){return s.type==="keypress"?ro(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ro(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),im=zi(nm),q0=g({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gf=zi(q0),K0=g({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yd}),Io=zi(K0),am=g({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),R1=zi(am),Z0=g({},ha,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),gl=zi(Z0),Bo=g({},zs,{newState:0,oldState:0}),rm=zi(Bo),sm=[9,13,27,32],mc=pi&&"CompositionEvent"in window,vl=null;pi&&"documentMode"in document&&(vl=document.documentMode);var gc=pi&&"TextEvent"in window&&!vl,Da=pi&&(!mc||vl&&8<vl&&11>=vl),bd=" ",om=!1;function Wf(s,l){switch(s){case"keyup":return sm.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cu(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var xl=!1;function Xf(s,l){switch(s){case"compositionend":return cu(l);case"keypress":return l.which!==32?null:(om=!0,bd);case"textInput":return s=l.data,s===bd&&om?null:s;default:return null}}function J0(s,l){if(xl)return s==="compositionend"||!mc&&Wf(s,l)?(s=fc(),us=ao=Sa=null,xl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Da&&l.locale!=="ko"?null:l.data;default:return null}}var Ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lm(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Ir[s.type]:l==="textarea"}function Yf(s,l,p,v){jt?Vt?Vt.push(v):Vt=[v]:jt=v,l=Hv(l,"onChange"),0<l.length&&(p=new Po("onChange","change",null,p,v),s.push({event:p,listeners:l}))}var uu=null,du=null;function cm(s){KM(s,0)}function fu(s){var l=ba(s);if(Un(l))return s}function um(s,l){if(s==="change")return l}var _d=!1;if(pi){var vc;if(pi){var Pi="oninput"in document;if(!Pi){var Q0=document.createElement("div");Q0.setAttribute("oninput","return;"),Pi=typeof Q0.oninput=="function"}vc=Pi}else vc=!1;_d=vc&&(!document.documentMode||9<document.documentMode)}function $0(){uu&&(uu.detachEvent("onpropertychange",dm),du=uu=null)}function dm(s){if(s.propertyName==="value"&&fu(du)){var l=[];Yf(l,du,s,mt(s)),yi(cm,l)}}function Sd(s,l,p){s==="focusin"?($0(),uu=l,du=p,uu.attachEvent("onpropertychange",dm)):s==="focusout"&&$0()}function yl(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return fu(du)}function ev(s,l){if(s==="click")return fu(l)}function tv(s,l){if(s==="input"||s==="change")return fu(l)}function xc(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Ii=typeof Object.is=="function"?Object.is:xc;function hu(s,l){if(Ii(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var p=Object.keys(s),v=Object.keys(l);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var M=p[v];if(!et.call(l,M)||!Ii(s[M],l[M]))return!1}return!0}function fm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function hm(s,l){var p=fm(s);s=0;for(var v;p;){if(p.nodeType===3){if(v=s+p.textContent.length,s<=l&&v>=l)return{node:p,offset:l-s};s=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=fm(p)}}function qf(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?qf(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Kf(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Ft(s.document);l instanceof s.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)s=l.contentWindow;else break;l=Ft(s.document)}return l}function pu(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var nv=pi&&"documentMode"in document&&11>=document.documentMode,mu=null,Zf=null,gu=null,Br=!1;function Jf(s,l,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Br||mu==null||mu!==Ft(v)||(v=mu,"selectionStart"in v&&pu(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),gu&&hu(gu,v)||(gu=v,v=Hv(Zf,"onSelect"),0<v.length&&(l=new Po("onSelect","select",null,l,p),s.push({event:l,listeners:v}),l.target=mu)))}function bl(s,l){var p={};return p[s.toLowerCase()]=l.toLowerCase(),p["Webkit"+s]="webkit"+l,p["Moz"+s]="moz"+l,p}var vu={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionrun:bl("Transition","TransitionRun"),transitionstart:bl("Transition","TransitionStart"),transitioncancel:bl("Transition","TransitionCancel"),transitionend:bl("Transition","TransitionEnd")},wd={},ir={};pi&&(ir=document.createElement("div").style,"AnimationEvent"in window||(delete vu.animationend.animation,delete vu.animationiteration.animation,delete vu.animationstart.animation),"TransitionEvent"in window||delete vu.transitionend.transition);function _l(s){if(wd[s])return wd[s];if(!vu[s])return s;var l=vu[s],p;for(p in l)if(l.hasOwnProperty(p)&&p in ir)return wd[s]=l[p];return s}var pr=_l("animationend"),pm=_l("animationiteration"),lo=_l("animationstart"),xu=_l("transitionrun"),Sl=_l("transitionstart"),mm=_l("transitioncancel"),Qf=_l("transitionend"),ko=new Map,$f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$f.push("scrollEnd");function Va(s,l){ko.set(s,l),Be(l,[s])}var wl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},wa=[],yc=0,eh=0;function Ml(){for(var s=yc,l=eh=yc=0;l<s;){var p=wa[l];wa[l++]=null;var v=wa[l];wa[l++]=null;var M=wa[l];wa[l++]=null;var C=wa[l];if(wa[l++]=null,v!==null&&M!==null){var H=v.pending;H===null?M.next=M:(M.next=H.next,H.next=M),v.pending=M}C!==0&&th(p,M,C)}}function Md(s,l,p,v){wa[yc++]=s,wa[yc++]=l,wa[yc++]=p,wa[yc++]=v,eh|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function yu(s,l,p,v){return Md(s,l,p,v),bu(s)}function El(s,l){return Md(s,null,null,l),bu(s)}function th(s,l,p){s.lanes|=p;var v=s.alternate;v!==null&&(v.lanes|=p);for(var M=!1,C=s.return;C!==null;)C.childLanes|=p,v=C.alternate,v!==null&&(v.childLanes|=p),C.tag===22&&(s=C.stateNode,s===null||s._visibility&1||(M=!0)),s=C,C=C.return;return s.tag===3?(C=s.stateNode,M&&l!==null&&(M=31-rt(p),s=C.hiddenUpdates,v=s[M],v===null?s[M]=[l]:v.push(l),l.lane=p|536870912),C):null}function bu(s){if(50<Pc)throw Pc=0,Ic=null,Error(i(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Tl={};function iv(s,l,p,v){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(s,l,p,v){return new iv(s,l,p,v)}function rr(s){return s=s.prototype,!(!s||!s.isReactComponent)}function co(s,l){var p=s.alternate;return p===null?(p=ar(s.tag,l,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=l,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&65011712,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,l=s.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p.refCleanup=s.refCleanup,p}function Ga(s,l){s.flags&=65011714;var p=s.alternate;return p===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=p.childLanes,s.lanes=p.lanes,s.child=p.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=p.memoizedProps,s.memoizedState=p.memoizedState,s.updateQueue=p.updateQueue,s.type=p.type,l=p.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Ed(s,l,p,v,M,C){var H=0;if(v=s,typeof s=="function")rr(s)&&(H=1);else if(typeof s=="string")H=yU(s,p,oe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case L:return s=ar(31,p,l,M),s.elementType=L,s.lanes=C,s;case A:return Fo(p.children,M,C,l);case T:H=8,M|=24;break;case w:return s=ar(12,p,l,M|2),s.elementType=w,s.lanes=C,s;case O:return s=ar(13,p,l,M),s.elementType=O,s.lanes=C,s;case B:return s=ar(19,p,l,M),s.elementType=B,s.lanes=C,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:H=10;break e;case N:H=9;break e;case U:H=11;break e;case z:H=14;break e;case F:H=16,v=null;break e}H=29,p=Error(i(130,s===null?"null":typeof s,"")),v=null}return l=ar(H,p,l,M),l.elementType=s,l.type=v,l.lanes=C,l}function Fo(s,l,p,v){return s=ar(7,s,v,l),s.lanes=p,s}function nh(s,l,p){return s=ar(6,s,null,l),s.lanes=p,s}function av(s){var l=ar(18,null,null,0);return l.stateNode=s,l}function Is(s,l,p){return l=ar(4,s.children!==null?s.children:[],s.key,l),l.lanes=p,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var gm=new WeakMap;function mr(s,l){if(typeof s=="object"&&s!==null){var p=gm.get(s);return p!==void 0?p:(l={value:s,source:l,stack:J(l)},gm.set(s,l),l)}return{value:s,source:l,stack:J(l)}}var Bs=[],bc=0,Td=null,_u=0,kr=[],gr=0,uo=null,fo=1,ho="";function jo(s,l){Bs[bc++]=_u,Bs[bc++]=Td,Td=s,_u=l}function vm(s,l,p){kr[gr++]=fo,kr[gr++]=ho,kr[gr++]=uo,uo=s;var v=fo;s=ho;var M=32-rt(v)-1;v&=~(1<<M),p+=1;var C=32-rt(l)+M;if(30<C){var H=M-M%5;C=(v&(1<<H)-1).toString(32),v>>=H,M-=H,fo=1<<32-rt(l)+M|p<<M|v,ho=C+s}else fo=1<<C|p<<M|v,ho=s}function ih(s){s.return!==null&&(jo(s,1),vm(s,1,0))}function Al(s){for(;s===Td;)Td=Bs[--bc],Bs[bc]=null,_u=Bs[--bc],Bs[bc]=null;for(;s===uo;)uo=kr[--gr],kr[gr]=null,ho=kr[--gr],kr[gr]=null,fo=kr[--gr],kr[gr]=null}function Ad(s,l){kr[gr++]=fo,kr[gr++]=ho,kr[gr++]=uo,fo=l.id,ho=l.overflow,uo=s}var Ma=null,Ti=null,kn=!1,Ho=null,Ea=!1,ah=Error(i(519));function In(s){var l=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cd(mr(l,s)),ah}function rh(s){var l=s.stateNode,p=s.type,v=s.memoizedProps;switch(l[on]=s,l[bt]=v,p){case"dialog":Fn("cancel",l),Fn("close",l);break;case"iframe":case"object":case"embed":Fn("load",l);break;case"video":case"audio":for(p=0;p<cg.length;p++)Fn(cg[p],l);break;case"source":Fn("error",l);break;case"img":case"image":case"link":Fn("error",l),Fn("load",l);break;case"details":Fn("toggle",l);break;case"input":Fn("invalid",l),Na(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":Fn("invalid",l);break;case"textarea":Fn("invalid",l),di(l,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||l.textContent===""+p||v.suppressHydrationWarning===!0||$M(l.textContent,p)?(v.popover!=null&&(Fn("beforetoggle",l),Fn("toggle",l)),v.onScroll!=null&&Fn("scroll",l),v.onScrollEnd!=null&&Fn("scrollend",l),v.onClick!=null&&(l.onclick=Dt),l=!0):l=!1,l||In(s,!0)}function rv(s){for(Ma=s.return;Ma;)switch(Ma.tag){case 5:case 31:case 13:Ea=!1;return;case 27:case 3:Ea=!0;return;default:Ma=Ma.return}}function _c(s){if(s!==Ma)return!1;if(!kn)return rv(s),kn=!0,!1;var l=s.tag,p;if((p=l!==3&&l!==27)&&((p=l===5)&&(p=s.type,p=!(p!=="form"&&p!=="button")||Z1(s.type,s.memoizedProps)),p=!p),p&&Ti&&In(s),rv(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ti=lE(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ti=lE(s)}else l===27?(l=Ti,Fu(s.type)?(s=t_,t_=null,Ti=s):Ti=l):Ti=Ma?Mo(s.stateNode.nextSibling):null;return!0}function Sc(){Ti=Ma=null,kn=!1}function xm(){var s=Ho;return s!==null&&(Za===null?Za=s:Za.push.apply(Za,s),Ho=null),s}function Cd(s){Ho===null?Ho=[s]:Ho.push(s)}var ym=j(null),Vo=null,Wa=null;function Go(s,l,p){ne(ym,l._currentValue),l._currentValue=p}function fs(s){s._currentValue=ym.current,ee(ym)}function Wo(s,l,p){for(;s!==null;){var v=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),s===p)break;s=s.return}}function sh(s,l,p,v){var M=s.child;for(M!==null&&(M.return=s);M!==null;){var C=M.dependencies;if(C!==null){var H=M.child;C=C.firstContext;e:for(;C!==null;){var te=C;C=M;for(var be=0;be<l.length;be++)if(te.context===l[be]){C.lanes|=p,te=C.alternate,te!==null&&(te.lanes|=p),Wo(C.return,p,s),v||(H=null);break e}C=te.next}}else if(M.tag===18){if(H=M.return,H===null)throw Error(i(341));H.lanes|=p,C=H.alternate,C!==null&&(C.lanes|=p),Wo(H,p,s),H=null}else H=M.child;if(H!==null)H.return=M;else for(H=M;H!==null;){if(H===s){H=null;break}if(M=H.sibling,M!==null){M.return=H.return,H=M;break}H=H.return}M=H}}function Cl(s,l,p,v){s=null;for(var M=l,C=!1;M!==null;){if(!C){if((M.flags&524288)!==0)C=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var H=M.alternate;if(H===null)throw Error(i(387));if(H=H.memoizedProps,H!==null){var te=M.type;Ii(M.pendingProps.value,H.value)||(s!==null?s.push(te):s=[te])}}else if(M===le.current){if(H=M.alternate,H===null)throw Error(i(387));H.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(s!==null?s.push(pg):s=[pg])}M=M.return}s!==null&&sh(l,s,p,v),l.flags|=262144}function Su(s){for(s=s.firstContext;s!==null;){if(!Ii(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function wc(s){Vo=s,Wa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ta(s){return bm(Vo,s)}function Nd(s,l){return Vo===null&&wc(s),bm(s,l)}function bm(s,l){var p=l._currentValue;if(l={context:l,memoizedValue:p,next:null},Wa===null){if(s===null)throw Error(i(308));Wa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Wa=Wa.next=l;return p}var sv=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(p,v){s.push(v)}};this.abort=function(){l.aborted=!0,s.forEach(function(p){return p()})}},ov=n.unstable_scheduleCallback,_m=n.unstable_NormalPriority,tn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sm(){return{controller:new sv,data:new Map,refCount:0}}function Ua(s){s.refCount--,s.refCount===0&&ov(_m,function(){s.controller.abort()})}var Mc=null,wm=0,Xo=0,ks=null;function wu(s,l){if(Mc===null){var p=Mc=[];wm=0,Xo=j1(),ks={status:"pending",value:void 0,then:function(v){p.push(v)}}}return wm++,l.then(Mm,Mm),l}function Mm(){if(--wm===0&&Mc!==null){ks!==null&&(ks.status="fulfilled");var s=Mc;Mc=null,Xo=0,ks=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Em(s,l){var p=[],v={status:"pending",value:null,reason:null,then:function(M){p.push(M)}};return s.then(function(){v.status="fulfilled",v.value=l;for(var M=0;M<p.length;M++)(0,p[M])(l)},function(M){for(v.status="rejected",v.reason=M,M=0;M<p.length;M++)(0,p[M])(void 0)}),v}var lv=G.S;G.S=function(s,l){Iu=V(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&wu(s,l),lv!==null&&lv(s,l)};var Nl=j(null);function po(){var s=Nl.current;return s!==null?s:si.pooledCache}function Mu(s,l){l===null?ne(Nl,Nl.current):ne(Nl,l.pool)}function oh(){var s=po();return s===null?null:{parent:tn._currentValue,pool:s}}var Rl=Error(i(460)),Rd=Error(i(474)),Fs=Error(i(542)),Dd={then:function(){}};function cv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Tm(s,l,p){switch(p=s[p],p===void 0?s.push(l):p!==l&&(l.then(Dt,Dt),l=p),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Am(s),s;default:if(typeof l.status=="string")l.then(Dt,Dt);else{if(s=si,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=l,s.status="pending",s.then(function(v){if(l.status==="pending"){var M=l;M.status="fulfilled",M.value=v}},function(v){if(l.status==="pending"){var M=l;M.status="rejected",M.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Am(s),s}throw sn=l,Rl}}function Ec(s){try{var l=s._init;return l(s._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(sn=p,Rl):p}}var sn=null;function lh(){if(sn===null)throw Error(i(459));var s=sn;return sn=null,s}function Am(s){if(s===Rl||s===Fs)throw Error(i(483))}var Dl=null,Ul=0;function ch(s){var l=Ul;return Ul+=1,Dl===null&&(Dl=[]),Tm(Dl,s,l)}function Ud(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Od(s,l){throw l.$$typeof===y?Error(i(525)):(s=Object.prototype.toString.call(l),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function Eu(s){function l(Re,_e){if(s){var He=Re.deletions;He===null?(Re.deletions=[_e],Re.flags|=16):He.push(_e)}}function p(Re,_e){if(!s)return null;for(;_e!==null;)l(Re,_e),_e=_e.sibling;return null}function v(Re){for(var _e=new Map;Re!==null;)Re.key!==null?_e.set(Re.key,Re):_e.set(Re.index,Re),Re=Re.sibling;return _e}function M(Re,_e){return Re=co(Re,_e),Re.index=0,Re.sibling=null,Re}function C(Re,_e,He){return Re.index=He,s?(He=Re.alternate,He!==null?(He=He.index,He<_e?(Re.flags|=67108866,_e):He):(Re.flags|=67108866,_e)):(Re.flags|=1048576,_e)}function H(Re){return s&&Re.alternate===null&&(Re.flags|=67108866),Re}function te(Re,_e,He,ct){return _e===null||_e.tag!==6?(_e=nh(He,Re.mode,ct),_e.return=Re,_e):(_e=M(_e,He),_e.return=Re,_e)}function be(Re,_e,He,ct){var rn=He.type;return rn===A?at(Re,_e,He.props.children,ct,He.key):_e!==null&&(_e.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===F&&Ec(rn)===_e.type)?(_e=M(_e,He.props),Ud(_e,He),_e.return=Re,_e):(_e=Ed(He.type,He.key,He.props,null,Re.mode,ct),Ud(_e,He),_e.return=Re,_e)}function Ve(Re,_e,He,ct){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==He.containerInfo||_e.stateNode.implementation!==He.implementation?(_e=Is(He,Re.mode,ct),_e.return=Re,_e):(_e=M(_e,He.children||[]),_e.return=Re,_e)}function at(Re,_e,He,ct,rn){return _e===null||_e.tag!==7?(_e=Fo(He,Re.mode,ct,rn),_e.return=Re,_e):(_e=M(_e,He),_e.return=Re,_e)}function dt(Re,_e,He){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=nh(""+_e,Re.mode,He),_e.return=Re,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case _:return He=Ed(_e.type,_e.key,_e.props,null,Re.mode,He),Ud(He,_e),He.return=Re,He;case S:return _e=Is(_e,Re.mode,He),_e.return=Re,_e;case F:return _e=Ec(_e),dt(Re,_e,He)}if(ce(_e)||q(_e))return _e=Fo(_e,Re.mode,He,null),_e.return=Re,_e;if(typeof _e.then=="function")return dt(Re,ch(_e),He);if(_e.$$typeof===D)return dt(Re,Nd(Re,_e),He);Od(Re,_e)}return null}function Ye(Re,_e,He,ct){var rn=_e!==null?_e.key:null;if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return rn!==null?null:te(Re,_e,""+He,ct);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case _:return He.key===rn?be(Re,_e,He,ct):null;case S:return He.key===rn?Ve(Re,_e,He,ct):null;case F:return He=Ec(He),Ye(Re,_e,He,ct)}if(ce(He)||q(He))return rn!==null?null:at(Re,_e,He,ct,null);if(typeof He.then=="function")return Ye(Re,_e,ch(He),ct);if(He.$$typeof===D)return Ye(Re,_e,Nd(Re,He),ct);Od(Re,He)}return null}function Qe(Re,_e,He,ct,rn){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Re=Re.get(He)||null,te(_e,Re,""+ct,rn);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case _:return Re=Re.get(ct.key===null?He:ct.key)||null,be(_e,Re,ct,rn);case S:return Re=Re.get(ct.key===null?He:ct.key)||null,Ve(_e,Re,ct,rn);case F:return ct=Ec(ct),Qe(Re,_e,He,ct,rn)}if(ce(ct)||q(ct))return Re=Re.get(He)||null,at(_e,Re,ct,rn,null);if(typeof ct.then=="function")return Qe(Re,_e,He,ch(ct),rn);if(ct.$$typeof===D)return Qe(Re,_e,He,Nd(_e,ct),rn);Od(_e,ct)}return null}function Gt(Re,_e,He,ct){for(var rn=null,li=null,Jt=_e,Cn=_e=0,Gn=null;Jt!==null&&Cn<He.length;Cn++){Jt.index>Cn?(Gn=Jt,Jt=null):Gn=Jt.sibling;var ci=Ye(Re,Jt,He[Cn],ct);if(ci===null){Jt===null&&(Jt=Gn);break}s&&Jt&&ci.alternate===null&&l(Re,Jt),_e=C(ci,_e,Cn),li===null?rn=ci:li.sibling=ci,li=ci,Jt=Gn}if(Cn===He.length)return p(Re,Jt),kn&&jo(Re,Cn),rn;if(Jt===null){for(;Cn<He.length;Cn++)Jt=dt(Re,He[Cn],ct),Jt!==null&&(_e=C(Jt,_e,Cn),li===null?rn=Jt:li.sibling=Jt,li=Jt);return kn&&jo(Re,Cn),rn}for(Jt=v(Jt);Cn<He.length;Cn++)Gn=Qe(Jt,Re,Cn,He[Cn],ct),Gn!==null&&(s&&Gn.alternate!==null&&Jt.delete(Gn.key===null?Cn:Gn.key),_e=C(Gn,_e,Cn),li===null?rn=Gn:li.sibling=Gn,li=Gn);return s&&Jt.forEach(function(Wu){return l(Re,Wu)}),kn&&jo(Re,Cn),rn}function ln(Re,_e,He,ct){if(He==null)throw Error(i(151));for(var rn=null,li=null,Jt=_e,Cn=_e=0,Gn=null,ci=He.next();Jt!==null&&!ci.done;Cn++,ci=He.next()){Jt.index>Cn?(Gn=Jt,Jt=null):Gn=Jt.sibling;var Wu=Ye(Re,Jt,ci.value,ct);if(Wu===null){Jt===null&&(Jt=Gn);break}s&&Jt&&Wu.alternate===null&&l(Re,Jt),_e=C(Wu,_e,Cn),li===null?rn=Wu:li.sibling=Wu,li=Wu,Jt=Gn}if(ci.done)return p(Re,Jt),kn&&jo(Re,Cn),rn;if(Jt===null){for(;!ci.done;Cn++,ci=He.next())ci=dt(Re,ci.value,ct),ci!==null&&(_e=C(ci,_e,Cn),li===null?rn=ci:li.sibling=ci,li=ci);return kn&&jo(Re,Cn),rn}for(Jt=v(Jt);!ci.done;Cn++,ci=He.next())ci=Qe(Jt,Re,Cn,ci.value,ct),ci!==null&&(s&&ci.alternate!==null&&Jt.delete(ci.key===null?Cn:ci.key),_e=C(ci,_e,Cn),li===null?rn=ci:li.sibling=ci,li=ci);return s&&Jt.forEach(function(RU){return l(Re,RU)}),kn&&jo(Re,Cn),rn}function Ni(Re,_e,He,ct){if(typeof He=="object"&&He!==null&&He.type===A&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case _:e:{for(var rn=He.key;_e!==null;){if(_e.key===rn){if(rn=He.type,rn===A){if(_e.tag===7){p(Re,_e.sibling),ct=M(_e,He.props.children),ct.return=Re,Re=ct;break e}}else if(_e.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===F&&Ec(rn)===_e.type){p(Re,_e.sibling),ct=M(_e,He.props),Ud(ct,He),ct.return=Re,Re=ct;break e}p(Re,_e);break}else l(Re,_e);_e=_e.sibling}He.type===A?(ct=Fo(He.props.children,Re.mode,ct,He.key),ct.return=Re,Re=ct):(ct=Ed(He.type,He.key,He.props,null,Re.mode,ct),Ud(ct,He),ct.return=Re,Re=ct)}return H(Re);case S:e:{for(rn=He.key;_e!==null;){if(_e.key===rn)if(_e.tag===4&&_e.stateNode.containerInfo===He.containerInfo&&_e.stateNode.implementation===He.implementation){p(Re,_e.sibling),ct=M(_e,He.children||[]),ct.return=Re,Re=ct;break e}else{p(Re,_e);break}else l(Re,_e);_e=_e.sibling}ct=Is(He,Re.mode,ct),ct.return=Re,Re=ct}return H(Re);case F:return He=Ec(He),Ni(Re,_e,He,ct)}if(ce(He))return Gt(Re,_e,He,ct);if(q(He)){if(rn=q(He),typeof rn!="function")throw Error(i(150));return He=rn.call(He),ln(Re,_e,He,ct)}if(typeof He.then=="function")return Ni(Re,_e,ch(He),ct);if(He.$$typeof===D)return Ni(Re,_e,Nd(Re,He),ct);Od(Re,He)}return typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint"?(He=""+He,_e!==null&&_e.tag===6?(p(Re,_e.sibling),ct=M(_e,He),ct.return=Re,Re=ct):(p(Re,_e),ct=nh(He,Re.mode,ct),ct.return=Re,Re=ct),H(Re)):p(Re,_e)}return function(Re,_e,He,ct){try{Ul=0;var rn=Ni(Re,_e,He,ct);return Dl=null,rn}catch(Jt){if(Jt===Rl||Jt===Fs)throw Jt;var li=ar(29,Jt,null,Re.mode);return li.lanes=ct,li.return=Re,li}finally{}}}var Tc=Eu(!0),uv=Eu(!1),Ol=!1;function Cm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nm(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function mo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Yo(s,l,p){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Hn&2)!==0){var M=v.pending;return M===null?l.next=l:(l.next=M.next,M.next=l),v.pending=l,l=bu(s),th(s,null,p),l}return Md(s,v,l,p),bu(s)}function Ll(s,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194048)!==0)){var v=l.lanes;v&=s.pendingLanes,p|=v,l.lanes=p,Rn(s,p)}}function uh(s,l){var p=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var M=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var H={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};C===null?M=C=H:C=C.next=H,p=p.next}while(p!==null);C===null?M=C=l:C=C.next=l}else M=C=l;p={baseState:v.baseState,firstBaseUpdate:M,lastBaseUpdate:C,shared:v.shared,callbacks:v.callbacks},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=l:s.next=l,p.lastBaseUpdate=l}var Rm=!1;function Ld(){if(Rm){var s=ks;if(s!==null)throw s}}function Ac(s,l,p,v){Rm=!1;var M=s.updateQueue;Ol=!1;var C=M.firstBaseUpdate,H=M.lastBaseUpdate,te=M.shared.pending;if(te!==null){M.shared.pending=null;var be=te,Ve=be.next;be.next=null,H===null?C=Ve:H.next=Ve,H=be;var at=s.alternate;at!==null&&(at=at.updateQueue,te=at.lastBaseUpdate,te!==H&&(te===null?at.firstBaseUpdate=Ve:te.next=Ve,at.lastBaseUpdate=be))}if(C!==null){var dt=M.baseState;H=0,at=Ve=be=null,te=C;do{var Ye=te.lane&-536870913,Qe=Ye!==te.lane;if(Qe?(Bn&Ye)===Ye:(v&Ye)===Ye){Ye!==0&&Ye===Xo&&(Rm=!0),at!==null&&(at=at.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var Gt=s,ln=te;Ye=l;var Ni=p;switch(ln.tag){case 1:if(Gt=ln.payload,typeof Gt=="function"){dt=Gt.call(Ni,dt,Ye);break e}dt=Gt;break e;case 3:Gt.flags=Gt.flags&-65537|128;case 0:if(Gt=ln.payload,Ye=typeof Gt=="function"?Gt.call(Ni,dt,Ye):Gt,Ye==null)break e;dt=g({},dt,Ye);break e;case 2:Ol=!0}}Ye=te.callback,Ye!==null&&(s.flags|=64,Qe&&(s.flags|=8192),Qe=M.callbacks,Qe===null?M.callbacks=[Ye]:Qe.push(Ye))}else Qe={lane:Ye,tag:te.tag,payload:te.payload,callback:te.callback,next:null},at===null?(Ve=at=Qe,be=dt):at=at.next=Qe,H|=Ye;if(te=te.next,te===null){if(te=M.shared.pending,te===null)break;Qe=te,te=Qe.next,Qe.next=null,M.lastBaseUpdate=Qe,M.shared.pending=null}}while(!0);at===null&&(be=dt),M.baseState=be,M.firstBaseUpdate=Ve,M.lastBaseUpdate=at,C===null&&(M.shared.lanes=0),Zr|=H,s.lanes=H,s.memoizedState=dt}}function go(s,l){if(typeof s!="function")throw Error(i(191,s));s.call(l)}function Oa(s,l){var p=s.callbacks;if(p!==null)for(s.callbacks=null,s=0;s<p.length;s++)go(p[s],l)}var Fr=j(null),sr=j(0);function Dm(s,l){s=ia,ne(sr,s),ne(Fr,l),ia=s|l.baseLanes}function Um(){ne(sr,ia),ne(Fr,Fr.current)}function Xa(){ia=sr.current,ee(Fr),ee(sr)}var pa=j(null),hs=null;function zl(s){var l=s.alternate;ne(Xi,Xi.current&1),ne(pa,s),hs===null&&(l===null||Fr.current!==null||l.memoizedState!==null)&&(hs=s)}function Om(s){ne(Xi,Xi.current),ne(pa,s),hs===null&&(hs=s)}function dv(s){s.tag===22?(ne(Xi,Xi.current),ne(pa,s),hs===null&&(hs=s)):qo()}function qo(){ne(Xi,Xi.current),ne(pa,pa.current)}function jr(s){ee(pa),hs===s&&(hs=null),ee(Xi)}var Xi=j(0);function dh(s){for(var l=s;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||$1(p)||e_(p)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var vr=0,cn=null,mi=null,ca=null,fh=!1,vo=!1,Cc=!1,hh=0,zd=0,xo=null,D1=0;function Yi(){throw Error(i(321))}function Lm(s,l){if(l===null)return!1;for(var p=0;p<l.length&&p<s.length;p++)if(!Ii(s[p],l[p]))return!1;return!0}function zm(s,l,p,v,M,C){return vr=C,cn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,G.H=s===null||s.memoizedState===null?Dv:Cu,Cc=!1,C=p(v,M),Cc=!1,vo&&(C=hv(l,p,v,M)),fv(s),C}function fv(s){G.H=Fd;var l=mi!==null&&mi.next!==null;if(vr=0,ca=mi=cn=null,fh=!1,zd=0,xo=null,l)throw Error(i(300));s===null||Bi||(s=s.dependencies,s!==null&&Su(s)&&(Bi=!0))}function hv(s,l,p,v){cn=s;var M=0;do{if(vo&&(xo=null),zd=0,vo=!1,25<=M)throw Error(i(301));if(M+=1,ca=mi=null,s.updateQueue!=null){var C=s.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}G.H=jd,C=l(p,v)}while(vo);return C}function U1(){var s=G.H,l=s.useState()[0];return l=typeof l.then=="function"?Id(l):l,s=s.useState()[0],(mi!==null?mi.memoizedState:null)!==s&&(cn.flags|=1024),l}function Pm(){var s=hh!==0;return hh=0,s}function Im(s,l,p){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~p}function Bm(s){if(fh){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}fh=!1}vr=0,ca=mi=cn=null,vo=!1,zd=hh=0,xo=null}function or(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ca===null?cn.memoizedState=ca=s:ca=ca.next=s,ca}function $i(){if(mi===null){var s=cn.alternate;s=s!==null?s.memoizedState:null}else s=mi.next;var l=ca===null?cn.memoizedState:ca.next;if(l!==null)ca=l,mi=s;else{if(s===null)throw cn.alternate===null?Error(i(467)):Error(i(310));mi=s,s={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},ca===null?cn.memoizedState=ca=s:ca=ca.next=s}return ca}function Pd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Id(s){var l=zd;return zd+=1,xo===null&&(xo=[]),s=Tm(xo,s,l),l=cn,(ca===null?l.memoizedState:ca.next)===null&&(l=l.alternate,G.H=l===null||l.memoizedState===null?Dv:Cu),s}function ph(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Id(s);if(s.$$typeof===D)return Ta(s)}throw Error(i(438,String(s)))}function km(s){var l=null,p=cn.updateQueue;if(p!==null&&(l=p.memoCache),l==null){var v=cn.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(M){return M.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),p===null&&(p=Pd(),cn.updateQueue=p),p.memoCache=l,p=l.data[l.index],p===void 0)for(p=l.data[l.index]=Array(s),v=0;v<s;v++)p[v]=I;return l.index++,p}function Ko(s,l){return typeof l=="function"?l(s):l}function mh(s){var l=$i();return Fm(l,mi,s)}function Fm(s,l,p){var v=s.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=p;var M=s.baseQueue,C=v.pending;if(C!==null){if(M!==null){var H=M.next;M.next=C.next,C.next=H}l.baseQueue=M=C,v.pending=null}if(C=s.baseState,M===null)s.memoizedState=C;else{l=M.next;var te=H=null,be=null,Ve=l,at=!1;do{var dt=Ve.lane&-536870913;if(dt!==Ve.lane?(Bn&dt)===dt:(vr&dt)===dt){var Ye=Ve.revertLane;if(Ye===0)be!==null&&(be=be.next={lane:0,revertLane:0,gesture:null,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),dt===Xo&&(at=!0);else if((vr&Ye)===Ye){Ve=Ve.next,Ye===Xo&&(at=!0);continue}else dt={lane:0,revertLane:Ve.revertLane,gesture:null,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},be===null?(te=be=dt,H=C):be=be.next=dt,cn.lanes|=Ye,Zr|=Ye;dt=Ve.action,Cc&&p(C,dt),C=Ve.hasEagerState?Ve.eagerState:p(C,dt)}else Ye={lane:dt,revertLane:Ve.revertLane,gesture:Ve.gesture,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},be===null?(te=be=Ye,H=C):be=be.next=Ye,cn.lanes|=dt,Zr|=dt;Ve=Ve.next}while(Ve!==null&&Ve!==l);if(be===null?H=C:be.next=te,!Ii(C,s.memoizedState)&&(Bi=!0,at&&(p=ks,p!==null)))throw p;s.memoizedState=C,s.baseState=H,s.baseQueue=be,v.lastRenderedState=C}return M===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function gh(s){var l=$i(),p=l.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=s;var v=p.dispatch,M=p.pending,C=l.memoizedState;if(M!==null){p.pending=null;var H=M=M.next;do C=s(C,H.action),H=H.next;while(H!==M);Ii(C,l.memoizedState)||(Bi=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),p.lastRenderedState=C}return[C,v]}function jm(s,l,p){var v=cn,M=$i(),C=kn;if(C){if(p===void 0)throw Error(i(407));p=p()}else p=l();var H=!Ii((mi||M).memoizedState,p);if(H&&(M.memoizedState=p,Bi=!0),M=M.queue,Xm(Vm.bind(null,v,M,s),[s]),M.getSnapshot!==l||H||ca!==null&&ca.memoizedState.tag&1){if(v.flags|=2048,Tu(9,{destroy:void 0},Hm.bind(null,v,M,p,l),null),si===null)throw Error(i(349));C||(vr&127)!==0||pv(v,l,p)}return p}function pv(s,l,p){s.flags|=16384,s={getSnapshot:l,value:p},l=cn.updateQueue,l===null?(l=Pd(),cn.updateQueue=l,l.stores=[s]):(p=l.stores,p===null?l.stores=[s]:p.push(s))}function Hm(s,l,p,v){l.value=p,l.getSnapshot=v,Gm(l)&&vh(s)}function Vm(s,l,p){return p(function(){Gm(l)&&vh(s)})}function Gm(s){var l=s.getSnapshot;s=s.value;try{var p=l();return!Ii(s,p)}catch{return!0}}function vh(s){var l=El(s,2);l!==null&&h(l,s,2)}function Bd(s){var l=or();if(typeof s=="function"){var p=s;if(s=p(),Cc){Ze(!0);try{p()}finally{Ze(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:s},l}function mv(s,l,p,v){return s.baseState=p,Fm(s,mi,typeof v=="function"?v:Ko)}function O1(s,l,p,v,M){if(Zo(s))throw Error(i(485));if(s=l.action,s!==null){var C={payload:M,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){C.listeners.push(H)}};G.T!==null?p(!0):C.isTransition=!1,v(C),p=l.pending,p===null?(C.next=l.pending=C,gv(l,C)):(C.next=p.next,l.pending=p.next=C)}}function gv(s,l){var p=l.action,v=l.payload,M=s.state;if(l.isTransition){var C=G.T,H={};G.T=H;try{var te=p(M,v),be=G.S;be!==null&&be(H,te),vv(s,l,te)}catch(Ve){xh(s,l,Ve)}finally{C!==null&&H.types!==null&&(C.types=H.types),G.T=C}}else try{C=p(M,v),vv(s,l,C)}catch(Ve){xh(s,l,Ve)}}function vv(s,l,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){Wm(s,l,v)},function(v){return xh(s,l,v)}):Wm(s,l,p)}function Wm(s,l,p){l.status="fulfilled",l.value=p,xv(l),s.state=p,l=s.pending,l!==null&&(p=l.next,p===l?s.pending=null:(p=p.next,l.next=p,gv(s,p)))}function xh(s,l,p){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=p,xv(l),l=l.next;while(l!==v)}s.action=null}function xv(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function yv(s,l){return l}function bv(s,l){if(kn){var p=si.formState;if(p!==null){e:{var v=cn;if(kn){if(Ti){t:{for(var M=Ti,C=Ea;M.nodeType!==8;){if(!C){M=null;break t}if(M=Mo(M.nextSibling),M===null){M=null;break t}}C=M.data,M=C==="F!"||C==="F"?M:null}if(M){Ti=Mo(M.nextSibling),v=M.data==="F!";break e}}In(v)}v=!1}v&&(l=p[0])}}return p=or(),p.memoizedState=p.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yv,lastRenderedState:l},p.queue=v,p=Rv.bind(null,cn,v),v.dispatch=p,v=Bd(!1),C=kd.bind(null,cn,!1,v.queue),v=or(),M={state:l,dispatch:null,action:s,pending:null},v.queue=M,p=O1.bind(null,cn,M,C,p),M.dispatch=p,v.memoizedState=s,[l,p,!1]}function _v(s){var l=$i();return Sv(l,mi,s)}function Sv(s,l,p){if(l=Fm(s,l,yv)[0],s=mh(Ko)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=Id(l)}catch(H){throw H===Rl?Fs:H}else v=l;l=$i();var M=l.queue,C=M.dispatch;return p!==l.memoizedState&&(cn.flags|=2048,Tu(9,{destroy:void 0},L1.bind(null,M,p),null)),[v,C,s]}function L1(s,l){s.action=l}function wv(s){var l=$i(),p=mi;if(p!==null)return Sv(l,p,s);$i(),l=l.memoizedState,p=$i();var v=p.queue.dispatch;return p.memoizedState=s,[l,v,!1]}function Tu(s,l,p,v){return s={tag:s,create:p,deps:v,inst:l,next:null},l=cn.updateQueue,l===null&&(l=Pd(),cn.updateQueue=l),p=l.lastEffect,p===null?l.lastEffect=s.next=s:(v=p.next,p.next=s,s.next=v,l.lastEffect=s),s}function Mv(){return $i().memoizedState}function yh(s,l,p,v){var M=or();cn.flags|=s,M.memoizedState=Tu(1|l,{destroy:void 0},p,v===void 0?null:v)}function bh(s,l,p,v){var M=$i();v=v===void 0?null:v;var C=M.memoizedState.inst;mi!==null&&v!==null&&Lm(v,mi.memoizedState.deps)?M.memoizedState=Tu(l,C,p,v):(cn.flags|=s,M.memoizedState=Tu(1|l,C,p,v))}function Ev(s,l){yh(8390656,8,s,l)}function Xm(s,l){bh(2048,8,s,l)}function Tv(s){cn.flags|=4;var l=cn.updateQueue;if(l===null)l=Pd(),cn.updateQueue=l,l.events=[s];else{var p=l.events;p===null?l.events=[s]:p.push(s)}}function Av(s){var l=$i().memoizedState;return Tv({ref:l,nextImpl:s}),function(){if((Hn&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}function Cv(s,l){return bh(4,2,s,l)}function Hr(s,l){return bh(4,4,s,l)}function Ym(s,l){if(typeof l=="function"){s=s();var p=l(s);return function(){typeof p=="function"?p():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function _h(s,l,p){p=p!=null?p.concat([s]):null,bh(4,4,Ym.bind(null,l,s),p)}function Sh(){}function qm(s,l){var p=$i();l=l===void 0?null:l;var v=p.memoizedState;return l!==null&&Lm(l,v[1])?v[0]:(p.memoizedState=[s,l],s)}function Km(s,l){var p=$i();l=l===void 0?null:l;var v=p.memoizedState;if(l!==null&&Lm(l,v[1]))return v[0];if(v=s(),Cc){Ze(!0);try{s()}finally{Ze(!1)}}return p.memoizedState=[v,l],v}function Zm(s,l,p){return p===void 0||(vr&1073741824)!==0&&(Bn&261930)===0?s.memoizedState=l:(s.memoizedState=p,s=u(),cn.lanes|=s,Zr|=s,p)}function Jm(s,l,p,v){return Ii(p,l)?p:Fr.current!==null?(s=Zm(s,p,v),Ii(s,l)||(Bi=!0),s):(vr&42)===0||(vr&1073741824)!==0&&(Bn&261930)===0?(Bi=!0,s.memoizedState=p):(s=u(),cn.lanes|=s,Zr|=s,l)}function Qm(s,l,p,v,M){var C=W.p;W.p=C!==0&&8>C?C:8;var H=G.T,te={};G.T=te,kd(s,!1,l,p);try{var be=M(),Ve=G.S;if(Ve!==null&&Ve(te,be),be!==null&&typeof be=="object"&&typeof be.then=="function"){var at=Em(be,v);Au(s,l,at,cr(s))}else Au(s,l,v,cr(s))}catch(dt){Au(s,l,{then:function(){},status:"rejected",reason:dt},cr())}finally{W.p=C,H!==null&&te.types!==null&&(H.types=te.types),G.T=H}}function z1(){}function $m(s,l,p,v){if(s.tag!==5)throw Error(i(476));var M=Nv(s).queue;Qm(s,M,l,Q,p===null?z1:function(){return eg(s),p(v)})}function Nv(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:Q},next:null};var p={};return l.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:p},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function eg(s){var l=Nv(s);l.next===null&&(l=s.alternate.memoizedState),Au(s,l.next.queue,{},cr())}function tg(){return Ta(pg)}function La(){return $i().memoizedState}function ng(){return $i().memoizedState}function P1(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var p=cr();s=mo(p);var v=Yo(l,s,p);v!==null&&(h(v,l,p),Ll(v,l,p)),l={cache:Sm()},s.payload=l;return}l=l.return}}function I1(s,l,p){var v=cr();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Zo(s)?Nc(l,p):(p=yu(s,l,p,v),p!==null&&(h(p,s,v),xr(p,l,v)))}function Rv(s,l,p){var v=cr();Au(s,l,p,v)}function Au(s,l,p,v){var M={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Zo(s))Nc(l,M);else{var C=s.alternate;if(s.lanes===0&&(C===null||C.lanes===0)&&(C=l.lastRenderedReducer,C!==null))try{var H=l.lastRenderedState,te=C(H,p);if(M.hasEagerState=!0,M.eagerState=te,Ii(te,H))return Md(s,l,M,0),si===null&&Ml(),!1}catch{}finally{}if(p=yu(s,l,M,v),p!==null)return h(p,s,v),xr(p,l,v),!0}return!1}function kd(s,l,p,v){if(v={lane:2,revertLane:j1(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Zo(s)){if(l)throw Error(i(479))}else l=yu(s,p,v,2),l!==null&&h(l,s,2)}function Zo(s){var l=s.alternate;return s===cn||l!==null&&l===cn}function Nc(s,l){vo=fh=!0;var p=s.pending;p===null?l.next=l:(l.next=p.next,p.next=l),s.pending=l}function xr(s,l,p){if((p&4194048)!==0){var v=l.lanes;v&=s.pendingLanes,p|=v,l.lanes=p,Rn(s,p)}}var Fd={readContext:Ta,use:ph,useCallback:Yi,useContext:Yi,useEffect:Yi,useImperativeHandle:Yi,useLayoutEffect:Yi,useInsertionEffect:Yi,useMemo:Yi,useReducer:Yi,useRef:Yi,useState:Yi,useDebugValue:Yi,useDeferredValue:Yi,useTransition:Yi,useSyncExternalStore:Yi,useId:Yi,useHostTransitionStatus:Yi,useFormState:Yi,useActionState:Yi,useOptimistic:Yi,useMemoCache:Yi,useCacheRefresh:Yi};Fd.useEffectEvent=Yi;var Dv={readContext:Ta,use:ph,useCallback:function(s,l){return or().memoizedState=[s,l===void 0?null:l],s},useContext:Ta,useEffect:Ev,useImperativeHandle:function(s,l,p){p=p!=null?p.concat([s]):null,yh(4194308,4,Ym.bind(null,l,s),p)},useLayoutEffect:function(s,l){return yh(4194308,4,s,l)},useInsertionEffect:function(s,l){yh(4,2,s,l)},useMemo:function(s,l){var p=or();l=l===void 0?null:l;var v=s();if(Cc){Ze(!0);try{s()}finally{Ze(!1)}}return p.memoizedState=[v,l],v},useReducer:function(s,l,p){var v=or();if(p!==void 0){var M=p(l);if(Cc){Ze(!0);try{p(l)}finally{Ze(!1)}}}else M=l;return v.memoizedState=v.baseState=M,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:M},v.queue=s,s=s.dispatch=I1.bind(null,cn,s),[v.memoizedState,s]},useRef:function(s){var l=or();return s={current:s},l.memoizedState=s},useState:function(s){s=Bd(s);var l=s.queue,p=Rv.bind(null,cn,l);return l.dispatch=p,[s.memoizedState,p]},useDebugValue:Sh,useDeferredValue:function(s,l){var p=or();return Zm(p,s,l)},useTransition:function(){var s=Bd(!1);return s=Qm.bind(null,cn,s.queue,!0,!1),or().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,p){var v=cn,M=or();if(kn){if(p===void 0)throw Error(i(407));p=p()}else{if(p=l(),si===null)throw Error(i(349));(Bn&127)!==0||pv(v,l,p)}M.memoizedState=p;var C={value:p,getSnapshot:l};return M.queue=C,Ev(Vm.bind(null,v,C,s),[s]),v.flags|=2048,Tu(9,{destroy:void 0},Hm.bind(null,v,C,p,l),null),p},useId:function(){var s=or(),l=si.identifierPrefix;if(kn){var p=ho,v=fo;p=(v&~(1<<32-rt(v)-1)).toString(32)+p,l="_"+l+"R_"+p,p=hh++,0<p&&(l+="H"+p.toString(32)),l+="_"}else p=D1++,l="_"+l+"r_"+p.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:tg,useFormState:bv,useActionState:bv,useOptimistic:function(s){var l=or();l.memoizedState=l.baseState=s;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=p,l=kd.bind(null,cn,!0,p),p.dispatch=l,[s,l]},useMemoCache:km,useCacheRefresh:function(){return or().memoizedState=P1.bind(null,cn)},useEffectEvent:function(s){var l=or(),p={impl:s};return l.memoizedState=p,function(){if((Hn&2)!==0)throw Error(i(440));return p.impl.apply(void 0,arguments)}}},Cu={readContext:Ta,use:ph,useCallback:qm,useContext:Ta,useEffect:Xm,useImperativeHandle:_h,useInsertionEffect:Cv,useLayoutEffect:Hr,useMemo:Km,useReducer:mh,useRef:Mv,useState:function(){return mh(Ko)},useDebugValue:Sh,useDeferredValue:function(s,l){var p=$i();return Jm(p,mi.memoizedState,s,l)},useTransition:function(){var s=mh(Ko)[0],l=$i().memoizedState;return[typeof s=="boolean"?s:Id(s),l]},useSyncExternalStore:jm,useId:La,useHostTransitionStatus:tg,useFormState:_v,useActionState:_v,useOptimistic:function(s,l){var p=$i();return mv(p,mi,s,l)},useMemoCache:km,useCacheRefresh:ng};Cu.useEffectEvent=Av;var jd={readContext:Ta,use:ph,useCallback:qm,useContext:Ta,useEffect:Xm,useImperativeHandle:_h,useInsertionEffect:Cv,useLayoutEffect:Hr,useMemo:Km,useReducer:gh,useRef:Mv,useState:function(){return gh(Ko)},useDebugValue:Sh,useDeferredValue:function(s,l){var p=$i();return mi===null?Zm(p,s,l):Jm(p,mi.memoizedState,s,l)},useTransition:function(){var s=gh(Ko)[0],l=$i().memoizedState;return[typeof s=="boolean"?s:Id(s),l]},useSyncExternalStore:jm,useId:La,useHostTransitionStatus:tg,useFormState:wv,useActionState:wv,useOptimistic:function(s,l){var p=$i();return mi!==null?mv(p,mi,s,l):(p.baseState=s,[s,p.queue.dispatch])},useMemoCache:km,useCacheRefresh:ng};jd.useEffectEvent=Av;function Nu(s,l,p,v){l=s.memoizedState,p=p(v,l),p=p==null?l:g({},l,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var Hd={enqueueSetState:function(s,l,p){s=s._reactInternals;var v=cr(),M=mo(v);M.payload=l,p!=null&&(M.callback=p),l=Yo(s,M,v),l!==null&&(h(l,s,v),Ll(l,s,v))},enqueueReplaceState:function(s,l,p){s=s._reactInternals;var v=cr(),M=mo(v);M.tag=1,M.payload=l,p!=null&&(M.callback=p),l=Yo(s,M,v),l!==null&&(h(l,s,v),Ll(l,s,v))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var p=cr(),v=mo(p);v.tag=2,l!=null&&(v.callback=l),l=Yo(s,v,p),l!==null&&(h(l,s,p),Ll(l,s,p))}};function Uv(s,l,p,v,M,C,H){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,C,H):l.prototype&&l.prototype.isPureReactComponent?!hu(p,v)||!hu(M,C):!0}function Ov(s,l,p,v){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,v),l.state!==s&&Hd.enqueueReplaceState(l,l.state,null)}function za(s,l){var p=l;if("ref"in l){p={};for(var v in l)v!=="ref"&&(p[v]=l[v])}if(s=s.defaultProps){p===l&&(p=g({},p));for(var M in s)p[M]===void 0&&(p[M]=s[M])}return p}function ig(s){wl(s)}function Lv(s){console.error(s)}function wh(s){wl(s)}function Mh(s,l){try{var p=s.onUncaughtError;p(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function zv(s,l,p){try{var v=s.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function ag(s,l,p){return p=mo(p),p.tag=3,p.payload={element:null},p.callback=function(){Mh(s,l)},p}function Ru(s){return s=mo(s),s.tag=3,s}function yr(s,l,p,v){var M=p.type.getDerivedStateFromError;if(typeof M=="function"){var C=v.value;s.payload=function(){return M(C)},s.callback=function(){zv(l,p,v)}}var H=p.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(s.callback=function(){zv(l,p,v),typeof M!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var te=v.stack;this.componentDidCatch(v.value,{componentStack:te!==null?te:""})})}function Vr(s,l,p,v,M){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=p.alternate,l!==null&&Cl(l,p,M,!0),p=pa.current,p!==null){switch(p.tag){case 31:case 13:return hs===null?pn():p.alternate===null&&oi===0&&(oi=3),p.flags&=-257,p.flags|=65536,p.lanes=M,v===Dd?p.flags|=16384:(l=p.updateQueue,l===null?p.updateQueue=new Set([v]):l.add(v),B1(s,v,M)),!1;case 22:return p.flags|=65536,v===Dd?p.flags|=16384:(l=p.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=l):(p=l.retryQueue,p===null?l.retryQueue=new Set([v]):p.add(v)),B1(s,v,M)),!1}throw Error(i(435,p.tag))}return B1(s,v,M),pn(),!1}if(kn)return l=pa.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=M,v!==ah&&(s=Error(i(422),{cause:v}),Cd(mr(s,p)))):(v!==ah&&(l=Error(i(423),{cause:v}),Cd(mr(l,p))),s=s.current.alternate,s.flags|=65536,M&=-M,s.lanes|=M,v=mr(v,p),M=ag(s.stateNode,v,M),uh(s,M),oi!==4&&(oi=2)),!1;var C=Error(i(520),{cause:v});if(C=mr(C,p),Ws===null?Ws=[C]:Ws.push(C),oi!==4&&(oi=2),l===null)return!0;v=mr(v,p),p=l;do{switch(p.tag){case 3:return p.flags|=65536,s=M&-M,p.lanes|=s,s=ag(p.stateNode,v,s),uh(p,s),!1;case 1:if(l=p.type,C=p.stateNode,(p.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(wo===null||!wo.has(C))))return p.flags|=65536,M&=-M,p.lanes|=M,M=Ru(M),yr(M,s,p,v),uh(p,M),!1}p=p.return}while(p!==null);return!1}var Eh=Error(i(461)),Bi=!1;function qi(s,l,p,v){l.child=s===null?uv(l,null,p,v):Tc(l,s.child,p,v)}function Vd(s,l,p,v,M){p=p.render;var C=l.ref;if("ref"in v){var H={};for(var te in v)te!=="ref"&&(H[te]=v[te])}else H=v;return wc(l),v=zm(s,l,p,H,C,M),te=Pm(),s!==null&&!Bi?(Im(s,l,M),Vs(s,l,M)):(kn&&te&&ih(l),l.flags|=1,qi(s,l,v,M),l.child)}function Gd(s,l,p,v,M){if(s===null){var C=p.type;return typeof C=="function"&&!rr(C)&&C.defaultProps===void 0&&p.compare===null?(l.tag=15,l.type=C,Gr(s,l,C,v,M)):(s=Ed(p.type,null,v,l,l.mode,M),s.ref=l.ref,s.return=l,l.child=s)}if(C=s.child,!Il(s,M)){var H=C.memoizedProps;if(p=p.compare,p=p!==null?p:hu,p(H,v)&&s.ref===l.ref)return Vs(s,l,M)}return l.flags|=1,s=co(C,v),s.ref=l.ref,s.return=l,l.child=s}function Gr(s,l,p,v,M){if(s!==null){var C=s.memoizedProps;if(hu(C,v)&&s.ref===l.ref)if(Bi=!1,l.pendingProps=v=C,Il(s,M))(s.flags&131072)!==0&&(Bi=!0);else return l.lanes=s.lanes,Vs(s,l,M)}return Du(s,l,p,v,M)}function Wr(s,l,p,v){var M=v.children,C=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((l.flags&128)!==0){if(C=C!==null?C.baseLanes|p:p,s!==null){for(v=l.child=s.child,M=0;v!==null;)M=M|v.lanes|v.childLanes,v=v.sibling;v=M&~C}else v=0,l.child=null;return yo(s,l,C,p,v)}if((p&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Mu(l,C!==null?C.cachePool:null),C!==null?Dm(l,C):Um(),dv(l);else return v=l.lanes=536870912,yo(s,l,C!==null?C.baseLanes|p:p,p,v)}else C!==null?(Mu(l,C.cachePool),Dm(l,C),qo(),l.memoizedState=null):(s!==null&&Mu(l,null),Um(),qo());return qi(s,l,M,p),l.child}function js(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function yo(s,l,p,v,M){var C=po();return C=C===null?null:{parent:tn._currentValue,pool:C},l.memoizedState={baseLanes:p,cachePool:C},s!==null&&Mu(l,null),Um(),dv(l),s!==null&&Cl(s,l,v,!0),l.childLanes=M,null}function ps(s,l){return l=Uu({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function Aa(s,l,p){return Tc(l,s.child,null,p),s=ps(l,l.pendingProps),s.flags|=2,jr(l),l.memoizedState=null,s}function Wd(s,l,p){var v=l.pendingProps,M=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(kn){if(v.mode==="hidden")return s=ps(l,v),l.lanes=536870912,js(null,s);if(Om(l),(s=Ti)?(s=oE(s,Ea),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:uo!==null?{id:fo,overflow:ho}:null,retryLane:536870912,hydrationErrors:null},p=av(s),p.return=l,l.child=p,Ma=l,Ti=null)):s=null,s===null)throw In(l);return l.lanes=536870912,null}return ps(l,v)}var C=s.memoizedState;if(C!==null){var H=C.dehydrated;if(Om(l),M)if(l.flags&256)l.flags&=-257,l=Aa(s,l,p);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(i(558));else if(Bi||Cl(s,l,p,!1),M=(p&s.childLanes)!==0,Bi||M){if(v=si,v!==null&&(H=Jn(v,p),H!==0&&H!==C.retryLane))throw C.retryLane=H,El(s,H),h(v,s,H),Eh;pn(),l=Aa(s,l,p)}else s=C.treeContext,Ti=Mo(H.nextSibling),Ma=l,kn=!0,Ho=null,Ea=!1,s!==null&&Ad(l,s),l=ps(l,v),l.flags|=4096;return l}return s=co(s.child,{mode:v.mode,children:v.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Hs(s,l){var p=l.ref;if(p===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(s===null||s.ref!==p)&&(l.flags|=4194816)}}function Du(s,l,p,v,M){return wc(l),p=zm(s,l,p,v,void 0,M),v=Pm(),s!==null&&!Bi?(Im(s,l,M),Vs(s,l,M)):(kn&&v&&ih(l),l.flags|=1,qi(s,l,p,M),l.child)}function Ya(s,l,p,v,M,C){return wc(l),l.updateQueue=null,p=hv(l,v,p,M),fv(s),v=Pm(),s!==null&&!Bi?(Im(s,l,C),Vs(s,l,C)):(kn&&v&&ih(l),l.flags|=1,qi(s,l,p,C),l.child)}function Pa(s,l,p,v,M){if(wc(l),l.stateNode===null){var C=Tl,H=p.contextType;typeof H=="object"&&H!==null&&(C=Ta(H)),C=new p(v,C),l.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Hd,l.stateNode=C,C._reactInternals=l,C=l.stateNode,C.props=v,C.state=l.memoizedState,C.refs={},Cm(l),H=p.contextType,C.context=typeof H=="object"&&H!==null?Ta(H):Tl,C.state=l.memoizedState,H=p.getDerivedStateFromProps,typeof H=="function"&&(Nu(l,p,H,v),C.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(H=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),H!==C.state&&Hd.enqueueReplaceState(C,C.state,null),Ac(l,v,C,M),Ld(),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(s===null){C=l.stateNode;var te=l.memoizedProps,be=za(p,te);C.props=be;var Ve=C.context,at=p.contextType;H=Tl,typeof at=="object"&&at!==null&&(H=Ta(at));var dt=p.getDerivedStateFromProps;at=typeof dt=="function"||typeof C.getSnapshotBeforeUpdate=="function",te=l.pendingProps!==te,at||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(te||Ve!==H)&&Ov(l,C,v,H),Ol=!1;var Ye=l.memoizedState;C.state=Ye,Ac(l,v,C,M),Ld(),Ve=l.memoizedState,te||Ye!==Ve||Ol?(typeof dt=="function"&&(Nu(l,p,dt,v),Ve=l.memoizedState),(be=Ol||Uv(l,p,be,v,Ye,Ve,H))?(at||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(l.flags|=4194308)):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=Ve),C.props=v,C.state=Ve,C.context=H,v=be):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{C=l.stateNode,Nm(s,l),H=l.memoizedProps,at=za(p,H),C.props=at,dt=l.pendingProps,Ye=C.context,Ve=p.contextType,be=Tl,typeof Ve=="object"&&Ve!==null&&(be=Ta(Ve)),te=p.getDerivedStateFromProps,(Ve=typeof te=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(H!==dt||Ye!==be)&&Ov(l,C,v,be),Ol=!1,Ye=l.memoizedState,C.state=Ye,Ac(l,v,C,M),Ld();var Qe=l.memoizedState;H!==dt||Ye!==Qe||Ol||s!==null&&s.dependencies!==null&&Su(s.dependencies)?(typeof te=="function"&&(Nu(l,p,te,v),Qe=l.memoizedState),(at=Ol||Uv(l,p,at,v,Ye,Qe,be)||s!==null&&s.dependencies!==null&&Su(s.dependencies))?(Ve||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(v,Qe,be),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(v,Qe,be)),typeof C.componentDidUpdate=="function"&&(l.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof C.componentDidUpdate!="function"||H===s.memoizedProps&&Ye===s.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||H===s.memoizedProps&&Ye===s.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=Qe),C.props=v,C.state=Qe,C.context=be,v=at):(typeof C.componentDidUpdate!="function"||H===s.memoizedProps&&Ye===s.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||H===s.memoizedProps&&Ye===s.memoizedState||(l.flags|=1024),v=!1)}return C=v,Hs(s,l),v=(l.flags&128)!==0,C||v?(C=l.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:C.render(),l.flags|=1,s!==null&&v?(l.child=Tc(l,s.child,null,M),l.child=Tc(l,null,p,M)):qi(s,l,p,M),l.memoizedState=C.state,s=l.child):s=Vs(s,l,M),s}function Yn(s,l,p,v){return Sc(),l.flags|=256,qi(s,l,p,v),l.child}var Xr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ms(s){return{baseLanes:s,cachePool:oh()}}function Xd(s,l,p){return s=s!==null?s.childLanes&~p:0,l&&(s|=Vn),s}function Yr(s,l,p){var v=l.pendingProps,M=!1,C=(l.flags&128)!==0,H;if((H=C)||(H=s!==null&&s.memoizedState===null?!1:(Xi.current&2)!==0),H&&(M=!0,l.flags&=-129),H=(l.flags&32)!==0,l.flags&=-33,s===null){if(kn){if(M?zl(l):qo(),(s=Ti)?(s=oE(s,Ea),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:uo!==null?{id:fo,overflow:ho}:null,retryLane:536870912,hydrationErrors:null},p=av(s),p.return=l,l.child=p,Ma=l,Ti=null)):s=null,s===null)throw In(l);return e_(s)?l.lanes=32:l.lanes=536870912,null}var te=v.children;return v=v.fallback,M?(qo(),M=l.mode,te=Uu({mode:"hidden",children:te},M),v=Fo(v,M,p,null),te.return=l,v.return=l,te.sibling=v,l.child=te,v=l.child,v.memoizedState=ms(p),v.childLanes=Xd(s,H,p),l.memoizedState=Xr,js(null,v)):(zl(l),Pl(l,te))}var be=s.memoizedState;if(be!==null&&(te=be.dehydrated,te!==null)){if(C)l.flags&256?(zl(l),l.flags&=-257,l=Ou(s,l,p)):l.memoizedState!==null?(qo(),l.child=s.child,l.flags|=128,l=null):(qo(),te=v.fallback,M=l.mode,v=Uu({mode:"visible",children:v.children},M),te=Fo(te,M,p,null),te.flags|=2,v.return=l,te.return=l,v.sibling=te,l.child=v,Tc(l,s.child,null,p),v=l.child,v.memoizedState=ms(p),v.childLanes=Xd(s,H,p),l.memoizedState=Xr,l=js(null,v));else if(zl(l),e_(te)){if(H=te.nextSibling&&te.nextSibling.dataset,H)var Ve=H.dgst;H=Ve,v=Error(i(419)),v.stack="",v.digest=H,Cd({value:v,source:null,stack:null}),l=Ou(s,l,p)}else if(Bi||Cl(s,l,p,!1),H=(p&s.childLanes)!==0,Bi||H){if(H=si,H!==null&&(v=Jn(H,p),v!==0&&v!==be.retryLane))throw be.retryLane=v,El(s,v),h(H,s,v),Eh;$1(te)||pn(),l=Ou(s,l,p)}else $1(te)?(l.flags|=192,l.child=s.child,l=null):(s=be.treeContext,Ti=Mo(te.nextSibling),Ma=l,kn=!0,Ho=null,Ea=!1,s!==null&&Ad(l,s),l=Pl(l,v.children),l.flags|=4096);return l}return M?(qo(),te=v.fallback,M=l.mode,be=s.child,Ve=be.sibling,v=co(be,{mode:"hidden",children:v.children}),v.subtreeFlags=be.subtreeFlags&65011712,Ve!==null?te=co(Ve,te):(te=Fo(te,M,p,null),te.flags|=2),te.return=l,v.return=l,v.sibling=te,l.child=v,js(null,v),v=l.child,te=s.child.memoizedState,te===null?te=ms(p):(M=te.cachePool,M!==null?(be=tn._currentValue,M=M.parent!==be?{parent:be,pool:be}:M):M=oh(),te={baseLanes:te.baseLanes|p,cachePool:M}),v.memoizedState=te,v.childLanes=Xd(s,H,p),l.memoizedState=Xr,js(s.child,v)):(zl(l),p=s.child,s=p.sibling,p=co(p,{mode:"visible",children:v.children}),p.return=l,p.sibling=null,s!==null&&(H=l.deletions,H===null?(l.deletions=[s],l.flags|=16):H.push(s)),l.child=p,l.memoizedState=null,p)}function Pl(s,l){return l=Uu({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Uu(s,l){return s=ar(22,s,null,l),s.lanes=0,s}function Ou(s,l,p){return Tc(l,s.child,null,p),s=Pl(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Rc(s,l,p){s.lanes|=l;var v=s.alternate;v!==null&&(v.lanes|=l),Wo(s.return,l,p)}function Yd(s,l,p,v,M,C){var H=s.memoizedState;H===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:M,treeForkCount:C}:(H.isBackwards=l,H.rendering=null,H.renderingStartTime=0,H.last=v,H.tail=p,H.tailMode=M,H.treeForkCount=C)}function qd(s,l,p){var v=l.pendingProps,M=v.revealOrder,C=v.tail;v=v.children;var H=Xi.current,te=(H&2)!==0;if(te?(H=H&1|2,l.flags|=128):H&=1,ne(Xi,H),qi(s,l,v,p),v=kn?_u:0,!te&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Rc(s,p,l);else if(s.tag===19)Rc(s,p,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(M){case"forwards":for(p=l.child,M=null;p!==null;)s=p.alternate,s!==null&&dh(s)===null&&(M=p),p=p.sibling;p=M,p===null?(M=l.child,l.child=null):(M=p.sibling,p.sibling=null),Yd(l,!1,M,p,C,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,M=l.child,l.child=null;M!==null;){if(s=M.alternate,s!==null&&dh(s)===null){l.child=M;break}s=M.sibling,M.sibling=p,p=M,M=s}Yd(l,!0,p,null,C,v);break;case"together":Yd(l,!1,null,null,void 0,v);break;default:l.memoizedState=null}return l.child}function Vs(s,l,p){if(s!==null&&(l.dependencies=s.dependencies),Zr|=l.lanes,(p&l.childLanes)===0)if(s!==null){if(Cl(s,l,p,!1),(p&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(i(153));if(l.child!==null){for(s=l.child,p=co(s,s.pendingProps),l.child=p,p.return=l;s.sibling!==null;)s=s.sibling,p=p.sibling=co(s,s.pendingProps),p.return=l;p.sibling=null}return l.child}function Il(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Su(s)))}function Kd(s,l,p){switch(l.tag){case 3:ve(l,l.stateNode.containerInfo),Go(l,tn,s.memoizedState.cache),Sc();break;case 27:case 5:qe(l);break;case 4:ve(l,l.stateNode.containerInfo);break;case 10:Go(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Om(l),null;break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(zl(l),l.flags|=128,null):(p&l.child.childLanes)!==0?Yr(s,l,p):(zl(l),s=Vs(s,l,p),s!==null?s.sibling:null);zl(l);break;case 19:var M=(s.flags&128)!==0;if(v=(p&l.childLanes)!==0,v||(Cl(s,l,p,!1),v=(p&l.childLanes)!==0),M){if(v)return qd(s,l,p);l.flags|=128}if(M=l.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),ne(Xi,Xi.current),v)break;return null;case 22:return l.lanes=0,Wr(s,l,p,l.pendingProps);case 24:Go(l,tn,s.memoizedState.cache)}return Vs(s,l,p)}function Th(s,l,p){if(s!==null)if(s.memoizedProps!==l.pendingProps)Bi=!0;else{if(!Il(s,p)&&(l.flags&128)===0)return Bi=!1,Kd(s,l,p);Bi=(s.flags&131072)!==0}else Bi=!1,kn&&(l.flags&1048576)!==0&&vm(l,_u,l.index);switch(l.lanes=0,l.tag){case 16:e:{var v=l.pendingProps;if(s=Ec(l.elementType),l.type=s,typeof s=="function")rr(s)?(v=za(s,v),l.tag=1,l=Pa(null,l,s,v,p)):(l.tag=0,l=Du(null,l,s,v,p));else{if(s!=null){var M=s.$$typeof;if(M===U){l.tag=11,l=Vd(null,l,s,v,p);break e}else if(M===z){l.tag=14,l=Gd(null,l,s,v,p);break e}}throw l=$(s)||s,Error(i(306,l,""))}}return l;case 0:return Du(s,l,l.type,l.pendingProps,p);case 1:return v=l.type,M=za(v,l.pendingProps),Pa(s,l,v,M,p);case 3:e:{if(ve(l,l.stateNode.containerInfo),s===null)throw Error(i(387));v=l.pendingProps;var C=l.memoizedState;M=C.element,Nm(s,l),Ac(l,v,null,p);var H=l.memoizedState;if(v=H.cache,Go(l,tn,v),v!==C.cache&&sh(l,[tn],p,!0),Ld(),v=H.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:H.cache},l.updateQueue.baseState=C,l.memoizedState=C,l.flags&256){l=Yn(s,l,v,p);break e}else if(v!==M){M=mr(Error(i(424)),l),Cd(M),l=Yn(s,l,v,p);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ti=Mo(s.firstChild),Ma=l,kn=!0,Ho=null,Ea=!0,p=uv(l,null,v,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Sc(),v===M){l=Vs(s,l,p);break e}qi(s,l,v,p)}l=l.child}return l;case 26:return Hs(s,l),s===null?(p=hE(l.type,null,l.pendingProps,null))?l.memoizedState=p:kn||(p=l.type,s=l.pendingProps,v=Vv(se.current).createElement(p),v[on]=l,v[bt]=s,ur(v,p,s),Z(v),l.stateNode=v):l.memoizedState=hE(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return qe(l),s===null&&kn&&(v=l.stateNode=uE(l.type,l.pendingProps,se.current),Ma=l,Ea=!0,M=Ti,Fu(l.type)?(t_=M,Ti=Mo(v.firstChild)):Ti=M),qi(s,l,l.pendingProps.children,p),Hs(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&kn&&((M=v=Ti)&&(v=sU(v,l.type,l.pendingProps,Ea),v!==null?(l.stateNode=v,Ma=l,Ti=Mo(v.firstChild),Ea=!1,M=!0):M=!1),M||In(l)),qe(l),M=l.type,C=l.pendingProps,H=s!==null?s.memoizedProps:null,v=C.children,Z1(M,C)?v=null:H!==null&&Z1(M,H)&&(l.flags|=32),l.memoizedState!==null&&(M=zm(s,l,U1,null,null,p),pg._currentValue=M),Hs(s,l),qi(s,l,v,p),l.child;case 6:return s===null&&kn&&((s=p=Ti)&&(p=oU(p,l.pendingProps,Ea),p!==null?(l.stateNode=p,Ma=l,Ti=null,s=!0):s=!1),s||In(l)),null;case 13:return Yr(s,l,p);case 4:return ve(l,l.stateNode.containerInfo),v=l.pendingProps,s===null?l.child=Tc(l,null,v,p):qi(s,l,v,p),l.child;case 11:return Vd(s,l,l.type,l.pendingProps,p);case 7:return qi(s,l,l.pendingProps,p),l.child;case 8:return qi(s,l,l.pendingProps.children,p),l.child;case 12:return qi(s,l,l.pendingProps.children,p),l.child;case 10:return v=l.pendingProps,Go(l,l.type,v.value),qi(s,l,v.children,p),l.child;case 9:return M=l.type._context,v=l.pendingProps.children,wc(l),M=Ta(M),v=v(M),l.flags|=1,qi(s,l,v,p),l.child;case 14:return Gd(s,l,l.type,l.pendingProps,p);case 15:return Gr(s,l,l.type,l.pendingProps,p);case 19:return qd(s,l,p);case 31:return Wd(s,l,p);case 22:return Wr(s,l,p,l.pendingProps);case 24:return wc(l),v=Ta(tn),s===null?(M=po(),M===null&&(M=si,C=Sm(),M.pooledCache=C,C.refCount++,C!==null&&(M.pooledCacheLanes|=p),M=C),l.memoizedState={parent:v,cache:M},Cm(l),Go(l,tn,M)):((s.lanes&p)!==0&&(Nm(s,l),Ac(l,null,null,p),Ld()),M=s.memoizedState,C=l.memoizedState,M.parent!==v?(M={parent:v,cache:v},l.memoizedState=M,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=M),Go(l,tn,v)):(v=C.cache,Go(l,tn,v),v!==M.cache&&sh(l,[tn],p,!0))),qi(s,l,l.pendingProps.children,p),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function br(s){s.flags|=4}function Bl(s,l,p,v,M){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(M&335544128)===M)if(s.stateNode.complete)s.flags|=8192;else if(_t())s.flags|=8192;else throw sn=Dd,Rd}else s.flags&=-16777217}function Jo(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!xE(l))if(_t())s.flags|=8192;else throw sn=Dd,Rd}function Lu(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?yt():536870912,s.lanes|=l,Jr|=l)}function Zd(s,l){if(!kn)switch(s.tailMode){case"hidden":l=s.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function fi(s){var l=s.alternate!==null&&s.alternate.child===s.child,p=0,v=0;if(l)for(var M=s.child;M!==null;)p|=M.lanes|M.childLanes,v|=M.subtreeFlags&65011712,v|=M.flags&65011712,M.return=s,M=M.sibling;else for(M=s.child;M!==null;)p|=M.lanes|M.childLanes,v|=M.subtreeFlags,v|=M.flags,M.return=s,M=M.sibling;return s.subtreeFlags|=v,s.childLanes=p,l}function rg(s,l,p){var v=l.pendingProps;switch(Al(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(l),null;case 1:return fi(l),null;case 3:return p=l.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),fs(tn),ze(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(_c(l)?br(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,xm())),fi(l),null;case 26:var M=l.type,C=l.memoizedState;return s===null?(br(l),C!==null?(fi(l),Jo(l,C)):(fi(l),Bl(l,M,null,v,p))):C?C!==s.memoizedState?(br(l),fi(l),Jo(l,C)):(fi(l),l.flags&=-16777217):(s=s.memoizedProps,s!==v&&br(l),fi(l),Bl(l,M,s,v,p)),null;case 27:if(Ke(l),p=se.current,M=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==v&&br(l);else{if(!v){if(l.stateNode===null)throw Error(i(166));return fi(l),null}s=oe.current,_c(l)?rh(l):(s=uE(M,v,p),l.stateNode=s,br(l))}return fi(l),null;case 5:if(Ke(l),M=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==v&&br(l);else{if(!v){if(l.stateNode===null)throw Error(i(166));return fi(l),null}if(C=oe.current,_c(l))rh(l);else{var H=Vv(se.current);switch(C){case 1:C=H.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:C=H.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":C=H.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":C=H.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":C=H.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof v.is=="string"?H.createElement("select",{is:v.is}):H.createElement("select"),v.multiple?C.multiple=!0:v.size&&(C.size=v.size);break;default:C=typeof v.is=="string"?H.createElement(M,{is:v.is}):H.createElement(M)}}C[on]=l,C[bt]=v;e:for(H=l.child;H!==null;){if(H.tag===5||H.tag===6)C.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===l)break e;for(;H.sibling===null;){if(H.return===null||H.return===l)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}l.stateNode=C;e:switch(ur(C,M,v),M){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&br(l)}}return fi(l),Bl(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,p),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==v&&br(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(i(166));if(s=se.current,_c(l)){if(s=l.stateNode,p=l.memoizedProps,v=null,M=Ma,M!==null)switch(M.tag){case 27:case 5:v=M.memoizedProps}s[on]=l,s=!!(s.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||$M(s.nodeValue,p)),s||In(l,!0)}else s=Vv(s).createTextNode(v),s[on]=l,l.stateNode=s}return fi(l),null;case 31:if(p=l.memoizedState,s===null||s.memoizedState!==null){if(v=_c(l),p!==null){if(s===null){if(!v)throw Error(i(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[on]=l}else Sc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;fi(l),s=!1}else p=xm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),s=!0;if(!s)return l.flags&256?(jr(l),l):(jr(l),null);if((l.flags&128)!==0)throw Error(i(558))}return fi(l),null;case 13:if(v=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(M=_c(l),v!==null&&v.dehydrated!==null){if(s===null){if(!M)throw Error(i(318));if(M=l.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(i(317));M[on]=l}else Sc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;fi(l),M=!1}else M=xm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=M),M=!0;if(!M)return l.flags&256?(jr(l),l):(jr(l),null)}return jr(l),(l.flags&128)!==0?(l.lanes=p,l):(p=v!==null,s=s!==null&&s.memoizedState!==null,p&&(v=l.child,M=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(M=v.alternate.memoizedState.cachePool.pool),C=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(C=v.memoizedState.cachePool.pool),C!==M&&(v.flags|=2048)),p!==s&&p&&(l.child.flags|=8192),Lu(l,l.updateQueue),fi(l),null);case 4:return ze(),s===null&&W1(l.stateNode.containerInfo),fi(l),null;case 10:return fs(l.type),fi(l),null;case 19:if(ee(Xi),v=l.memoizedState,v===null)return fi(l),null;if(M=(l.flags&128)!==0,C=v.rendering,C===null)if(M)Zd(v,!1);else{if(oi!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(C=dh(s),C!==null){for(l.flags|=128,Zd(v,!1),s=C.updateQueue,l.updateQueue=s,Lu(l,s),l.subtreeFlags=0,s=p,p=l.child;p!==null;)Ga(p,s),p=p.sibling;return ne(Xi,Xi.current&1|2),kn&&jo(l,v.treeForkCount),l.child}s=s.sibling}v.tail!==null&&V()>Qr&&(l.flags|=128,M=!0,Zd(v,!1),l.lanes=4194304)}else{if(!M)if(s=dh(C),s!==null){if(l.flags|=128,M=!0,s=s.updateQueue,l.updateQueue=s,Lu(l,s),Zd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!C.alternate&&!kn)return fi(l),null}else 2*V()-v.renderingStartTime>Qr&&p!==536870912&&(l.flags|=128,M=!0,Zd(v,!1),l.lanes=4194304);v.isBackwards?(C.sibling=l.child,l.child=C):(s=v.last,s!==null?s.sibling=C:l.child=C,v.last=C)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=V(),s.sibling=null,p=Xi.current,ne(Xi,M?p&1|2:p&1),kn&&jo(l,v.treeForkCount),s):(fi(l),null);case 22:case 23:return jr(l),Xa(),v=l.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(p&536870912)!==0&&(l.flags&128)===0&&(fi(l),l.subtreeFlags&6&&(l.flags|=8192)):fi(l),p=l.updateQueue,p!==null&&Lu(l,p.retryQueue),p=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==p&&(l.flags|=2048),s!==null&&ee(Nl),null;case 24:return p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),fs(tn),fi(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function Ah(s,l){switch(Al(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return fs(tn),ze(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ke(l),null;case 31:if(l.memoizedState!==null){if(jr(l),l.alternate===null)throw Error(i(340));Sc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(jr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Sc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return ee(Xi),null;case 4:return ze(),null;case 10:return fs(l.type),null;case 22:case 23:return jr(l),Xa(),s!==null&&ee(Nl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return fs(tn),null;case 25:return null;default:return null}}function Dc(s,l){switch(Al(l),l.tag){case 3:fs(tn),ze();break;case 26:case 27:case 5:Ke(l);break;case 4:ze();break;case 31:l.memoizedState!==null&&jr(l);break;case 13:jr(l);break;case 19:ee(Xi);break;case 10:fs(l.type);break;case 22:case 23:jr(l),Xa(),s!==null&&ee(Nl);break;case 24:fs(tn)}}function bo(s,l){try{var p=l.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var M=v.next;p=M;do{if((p.tag&s)===s){v=void 0;var C=p.create,H=p.inst;v=C(),H.destroy=v}p=p.next}while(p!==M)}}catch(te){bi(l,l.return,te)}}function gs(s,l,p){try{var v=l.updateQueue,M=v!==null?v.lastEffect:null;if(M!==null){var C=M.next;v=C;do{if((v.tag&s)===s){var H=v.inst,te=H.destroy;if(te!==void 0){H.destroy=void 0,M=l;var be=p,Ve=te;try{Ve()}catch(at){bi(M,be,at)}}}v=v.next}while(v!==C)}}catch(at){bi(l,l.return,at)}}function kl(s){var l=s.updateQueue;if(l!==null){var p=s.stateNode;try{Oa(l,p)}catch(v){bi(s,s.return,v)}}}function sg(s,l,p){p.props=za(s.type,s.memoizedProps),p.state=s.memoizedState;try{p.componentWillUnmount()}catch(v){bi(s,l,v)}}function _o(s,l){try{var p=s.ref;if(p!==null){switch(s.tag){case 26:case 27:case 5:var v=s.stateNode;break;case 30:v=s.stateNode;break;default:v=s.stateNode}typeof p=="function"?s.refCleanup=p(v):p.current=v}}catch(M){bi(s,l,M)}}function qr(s,l){var p=s.ref,v=s.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(M){bi(s,l,M)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(M){bi(s,l,M)}else p.current=null}function Kr(s){var l=s.type,p=s.memoizedProps,v=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(M){bi(s,s.return,M)}}function vs(s,l,p){try{var v=s.stateNode;eU(v,s.type,p,l),v[bt]=l}catch(M){bi(s,s.return,M)}}function ua(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Fu(s.type)||s.tag===4}function So(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ua(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Fu(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function yn(s,l,p){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(s,l):(l=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,l.appendChild(s),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=Dt));else if(v!==4&&(v===27&&Fu(s.type)&&(p=s.stateNode,l=null),s=s.child,s!==null))for(yn(s,l,p),s=s.sibling;s!==null;)yn(s,l,p),s=s.sibling}function ti(s,l,p){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?p.insertBefore(s,l):p.appendChild(s);else if(v!==4&&(v===27&&Fu(s.type)&&(p=s.stateNode),s=s.child,s!==null))for(ti(s,l,p),s=s.sibling;s!==null;)ti(s,l,p),s=s.sibling}function ea(s){var l=s.stateNode,p=s.memoizedProps;try{for(var v=s.type,M=l.attributes;M.length;)l.removeAttributeNode(M[0]);ur(l,v,p),l[on]=s,l[bt]=p}catch(C){bi(s,s.return,C)}}var xs=!1,ki=!1,Qo=!1,Jd=typeof WeakSet=="function"?WeakSet:Set,Ki=null;function zu(s,l){if(s=s.containerInfo,q1=Zv,s=Kf(s),pu(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var M=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{p.nodeType,C.nodeType}catch{p=null;break e}var H=0,te=-1,be=-1,Ve=0,at=0,dt=s,Ye=null;t:for(;;){for(var Qe;dt!==p||M!==0&&dt.nodeType!==3||(te=H+M),dt!==C||v!==0&&dt.nodeType!==3||(be=H+v),dt.nodeType===3&&(H+=dt.nodeValue.length),(Qe=dt.firstChild)!==null;)Ye=dt,dt=Qe;for(;;){if(dt===s)break t;if(Ye===p&&++Ve===M&&(te=H),Ye===C&&++at===v&&(be=H),(Qe=dt.nextSibling)!==null)break;dt=Ye,Ye=dt.parentNode}dt=Qe}p=te===-1||be===-1?null:{start:te,end:be}}else p=null}p=p||{start:0,end:0}}else p=null;for(K1={focusedElem:s,selectionRange:p},Zv=!1,Ki=l;Ki!==null;)if(l=Ki,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Ki=s;else for(;Ki!==null;){switch(l=Ki,C=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(p=0;p<s.length;p++)M=s[p],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&C!==null){s=void 0,p=l,M=C.memoizedProps,C=C.memoizedState,v=p.stateNode;try{var Gt=za(p.type,M);s=v.getSnapshotBeforeUpdate(Gt,C),v.__reactInternalSnapshotBeforeUpdate=s}catch(ln){bi(p,p.return,ln)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,p=s.nodeType,p===9)Q1(s);else if(p===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Q1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=l.sibling,s!==null){s.return=l.return,Ki=s;break}Ki=l.return}}function Pv(s,l,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:$o(s,p),v&4&&bo(5,p);break;case 1:if($o(s,p),v&4)if(s=p.stateNode,l===null)try{s.componentDidMount()}catch(H){bi(p,p.return,H)}else{var M=za(p.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(M,l,s.__reactInternalSnapshotBeforeUpdate)}catch(H){bi(p,p.return,H)}}v&64&&kl(p),v&512&&_o(p,p.return);break;case 3:if($o(s,p),v&64&&(s=p.updateQueue,s!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=p.child.stateNode;break;case 1:l=p.child.stateNode}try{Oa(s,l)}catch(H){bi(p,p.return,H)}}break;case 27:l===null&&v&4&&ea(p);case 26:case 5:$o(s,p),l===null&&v&4&&Kr(p),v&512&&_o(p,p.return);break;case 12:$o(s,p);break;case 31:$o(s,p),v&4&&Nh(s,p);break;case 13:$o(s,p),v&4&&og(s,p),v&64&&(s=p.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(p=H4.bind(null,p),lU(s,p))));break;case 22:if(v=p.memoizedState!==null||xs,!v){l=l!==null&&l.memoizedState!==null||ki,M=xs;var C=ki;xs=v,(ki=l)&&!C?ri(s,p,(p.subtreeFlags&8772)!==0):$o(s,p),xs=M,ki=C}break;case 30:break;default:$o(s,p)}}function Ch(s){var l=s.alternate;l!==null&&(s.alternate=null,Ch(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Ha(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var qn=null,da=!1;function qa(s,l,p){for(p=p.child;p!==null;)Fl(s,l,p),p=p.sibling}function Fl(s,l,p){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(ke,p)}catch{}switch(p.tag){case 26:ki||qr(p,l),qa(s,l,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:ki||qr(p,l);var v=qn,M=da;Fu(p.type)&&(qn=p.stateNode,da=!1),qa(s,l,p),dg(p.stateNode),qn=v,da=M;break;case 5:ki||qr(p,l);case 6:if(v=qn,M=da,qn=null,qa(s,l,p),qn=v,da=M,qn!==null)if(da)try{(qn.nodeType===9?qn.body:qn.nodeName==="HTML"?qn.ownerDocument.body:qn).removeChild(p.stateNode)}catch(C){bi(p,l,C)}else try{qn.removeChild(p.stateNode)}catch(C){bi(p,l,C)}break;case 18:qn!==null&&(da?(s=qn,rE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,p.stateNode),Fh(s)):rE(qn,p.stateNode));break;case 4:v=qn,M=da,qn=p.stateNode.containerInfo,da=!0,qa(s,l,p),qn=v,da=M;break;case 0:case 11:case 14:case 15:gs(2,p,l),ki||gs(4,p,l),qa(s,l,p);break;case 1:ki||(qr(p,l),v=p.stateNode,typeof v.componentWillUnmount=="function"&&sg(p,l,v)),qa(s,l,p);break;case 21:qa(s,l,p);break;case 22:ki=(v=ki)||p.memoizedState!==null,qa(s,l,p),ki=v;break;default:qa(s,l,p)}}function Nh(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Fh(s)}catch(p){bi(l,l.return,p)}}}function og(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Fh(s)}catch(p){bi(l,l.return,p)}}function Iv(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new Jd),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new Jd),l;default:throw Error(i(435,s.tag))}}function ta(s,l){var p=Iv(s);l.forEach(function(v){if(!p.has(v)){p.add(v);var M=V4.bind(null,s,v);v.then(M,M)}})}function Ka(s,l){var p=l.deletions;if(p!==null)for(var v=0;v<p.length;v++){var M=p[v],C=s,H=l,te=H;e:for(;te!==null;){switch(te.tag){case 27:if(Fu(te.type)){qn=te.stateNode,da=!1;break e}break;case 5:qn=te.stateNode,da=!1;break e;case 3:case 4:qn=te.stateNode.containerInfo,da=!0;break e}te=te.return}if(qn===null)throw Error(i(160));Fl(C,H,M),qn=null,da=!1,C=M.alternate,C!==null&&(C.return=null),M.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)jl(l,s),l=l.sibling}var _r=null;function jl(s,l){var p=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ka(l,s),Zi(s),v&4&&(gs(3,s,s.return),bo(3,s),gs(5,s,s.return));break;case 1:Ka(l,s),Zi(s),v&512&&(ki||p===null||qr(p,p.return)),v&64&&xs&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(p=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var M=_r;if(Ka(l,s),Zi(s),v&512&&(ki||p===null||qr(p,p.return)),v&4){var C=p!==null?p.memoizedState:null;if(v=s.memoizedState,p===null)if(v===null)if(s.stateNode===null){e:{v=s.type,p=s.memoizedProps,M=M.ownerDocument||M;t:switch(v){case"title":C=M.getElementsByTagName("title")[0],(!C||C[Pr]||C[on]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=M.createElement(v),M.head.insertBefore(C,M.querySelector("head > title"))),ur(C,v,p),C[on]=s,Z(C),v=C;break e;case"link":var H=gE("link","href",M).get(v+(p.href||""));if(H){for(var te=0;te<H.length;te++)if(C=H[te],C.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&C.getAttribute("rel")===(p.rel==null?null:p.rel)&&C.getAttribute("title")===(p.title==null?null:p.title)&&C.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){H.splice(te,1);break t}}C=M.createElement(v),ur(C,v,p),M.head.appendChild(C);break;case"meta":if(H=gE("meta","content",M).get(v+(p.content||""))){for(te=0;te<H.length;te++)if(C=H[te],C.getAttribute("content")===(p.content==null?null:""+p.content)&&C.getAttribute("name")===(p.name==null?null:p.name)&&C.getAttribute("property")===(p.property==null?null:p.property)&&C.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&C.getAttribute("charset")===(p.charSet==null?null:p.charSet)){H.splice(te,1);break t}}C=M.createElement(v),ur(C,v,p),M.head.appendChild(C);break;default:throw Error(i(468,v))}C[on]=s,Z(C),v=C}s.stateNode=v}else vE(M,s.type,s.stateNode);else s.stateNode=mE(M,v,s.memoizedProps);else C!==v?(C===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):C.count--,v===null?vE(M,s.type,s.stateNode):mE(M,v,s.memoizedProps)):v===null&&s.stateNode!==null&&vs(s,s.memoizedProps,p.memoizedProps)}break;case 27:Ka(l,s),Zi(s),v&512&&(ki||p===null||qr(p,p.return)),p!==null&&v&4&&vs(s,s.memoizedProps,p.memoizedProps);break;case 5:if(Ka(l,s),Zi(s),v&512&&(ki||p===null||qr(p,p.return)),s.flags&32){M=s.stateNode;try{Mi(M,"")}catch(Gt){bi(s,s.return,Gt)}}v&4&&s.stateNode!=null&&(M=s.memoizedProps,vs(s,M,p!==null?p.memoizedProps:M)),v&1024&&(Qo=!0);break;case 6:if(Ka(l,s),Zi(s),v&4){if(s.stateNode===null)throw Error(i(162));v=s.memoizedProps,p=s.stateNode;try{p.nodeValue=v}catch(Gt){bi(s,s.return,Gt)}}break;case 3:if(Xv=null,M=_r,_r=Gv(l.containerInfo),Ka(l,s),_r=M,Zi(s),v&4&&p!==null&&p.memoizedState.isDehydrated)try{Fh(l.containerInfo)}catch(Gt){bi(s,s.return,Gt)}Qo&&(Qo=!1,Bv(s));break;case 4:v=_r,_r=Gv(s.stateNode.containerInfo),Ka(l,s),Zi(s),_r=v;break;case 12:Ka(l,s),Zi(s);break;case 31:Ka(l,s),Zi(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,ta(s,v)));break;case 13:Ka(l,s),Zi(s),s.child.flags&8192&&s.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(nl=V()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,ta(s,v)));break;case 22:M=s.memoizedState!==null;var be=p!==null&&p.memoizedState!==null,Ve=xs,at=ki;if(xs=Ve||M,ki=at||be,Ka(l,s),ki=at,xs=Ve,Zi(s),v&8192)e:for(l=s.stateNode,l._visibility=M?l._visibility&-2:l._visibility|1,M&&(p===null||be||xs||ki||Uc(s)),p=null,l=s;;){if(l.tag===5||l.tag===26){if(p===null){be=p=l;try{if(C=be.stateNode,M)H=C.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{te=be.stateNode;var dt=be.memoizedProps.style,Ye=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;te.style.display=Ye==null||typeof Ye=="boolean"?"":(""+Ye).trim()}}catch(Gt){bi(be,be.return,Gt)}}}else if(l.tag===6){if(p===null){be=l;try{be.stateNode.nodeValue=M?"":be.memoizedProps}catch(Gt){bi(be,be.return,Gt)}}}else if(l.tag===18){if(p===null){be=l;try{var Qe=be.stateNode;M?sE(Qe,!0):sE(be.stateNode,!1)}catch(Gt){bi(be,be.return,Gt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;p===l&&(p=null),l=l.return}p===l&&(p=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=s.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,ta(s,p))));break;case 19:Ka(l,s),Zi(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,ta(s,v)));break;case 30:break;case 21:break;default:Ka(l,s),Zi(s)}}function Zi(s){var l=s.flags;if(l&2){try{for(var p,v=s.return;v!==null;){if(ua(v)){p=v;break}v=v.return}if(p==null)throw Error(i(160));switch(p.tag){case 27:var M=p.stateNode,C=So(s);ti(s,C,M);break;case 5:var H=p.stateNode;p.flags&32&&(Mi(H,""),p.flags&=-33);var te=So(s);ti(s,te,H);break;case 3:case 4:var be=p.stateNode.containerInfo,Ve=So(s);yn(s,Ve,be);break;default:throw Error(i(161))}}catch(at){bi(s,s.return,at)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function Bv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;Bv(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function $o(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Pv(s,l.alternate,l),l=l.sibling}function Uc(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:gs(4,l,l.return),Uc(l);break;case 1:qr(l,l.return);var p=l.stateNode;typeof p.componentWillUnmount=="function"&&sg(l,l.return,p),Uc(l);break;case 27:dg(l.stateNode);case 26:case 5:qr(l,l.return),Uc(l);break;case 22:l.memoizedState===null&&Uc(l);break;case 30:Uc(l);break;default:Uc(l)}s=s.sibling}}function ri(s,l,p){for(p=p&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,M=s,C=l,H=C.flags;switch(C.tag){case 0:case 11:case 15:ri(M,C,p),bo(4,C);break;case 1:if(ri(M,C,p),v=C,M=v.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(Ve){bi(v,v.return,Ve)}if(v=C,M=v.updateQueue,M!==null){var te=v.stateNode;try{var be=M.shared.hiddenCallbacks;if(be!==null)for(M.shared.hiddenCallbacks=null,M=0;M<be.length;M++)go(be[M],te)}catch(Ve){bi(v,v.return,Ve)}}p&&H&64&&kl(C),_o(C,C.return);break;case 27:ea(C);case 26:case 5:ri(M,C,p),p&&v===null&&H&4&&Kr(C),_o(C,C.return);break;case 12:ri(M,C,p);break;case 31:ri(M,C,p),p&&H&4&&Nh(M,C);break;case 13:ri(M,C,p),p&&H&4&&og(M,C);break;case 22:C.memoizedState===null&&ri(M,C,p),_o(C,C.return);break;case 30:break;default:ri(M,C,p)}l=l.sibling}}function Rh(s,l){var p=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==p&&(s!=null&&s.refCount++,p!=null&&Ua(p))}function el(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Ua(s))}function ma(s,l,p,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Vi(s,l,p,v),l=l.sibling}function Vi(s,l,p,v){var M=l.flags;switch(l.tag){case 0:case 11:case 15:ma(s,l,p,v),M&2048&&bo(9,l);break;case 1:ma(s,l,p,v);break;case 3:ma(s,l,p,v),M&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Ua(s)));break;case 12:if(M&2048){ma(s,l,p,v),s=l.stateNode;try{var C=l.memoizedProps,H=C.id,te=C.onPostCommit;typeof te=="function"&&te(H,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(be){bi(l,l.return,be)}}else ma(s,l,p,v);break;case 31:ma(s,l,p,v);break;case 13:ma(s,l,p,v);break;case 23:break;case 22:C=l.stateNode,H=l.alternate,l.memoizedState!==null?C._visibility&2?ma(s,l,p,v):Pu(s,l):C._visibility&2?ma(s,l,p,v):(C._visibility|=2,Hl(s,l,p,v,(l.subtreeFlags&10256)!==0||!1)),M&2048&&Rh(H,l);break;case 24:ma(s,l,p,v),M&2048&&el(l.alternate,l);break;default:ma(s,l,p,v)}}function Hl(s,l,p,v,M){for(M=M&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var C=s,H=l,te=p,be=v,Ve=H.flags;switch(H.tag){case 0:case 11:case 15:Hl(C,H,te,be,M),bo(8,H);break;case 23:break;case 22:var at=H.stateNode;H.memoizedState!==null?at._visibility&2?Hl(C,H,te,be,M):Pu(C,H):(at._visibility|=2,Hl(C,H,te,be,M)),M&&Ve&2048&&Rh(H.alternate,H);break;case 24:Hl(C,H,te,be,M),M&&Ve&2048&&el(H.alternate,H);break;default:Hl(C,H,te,be,M)}l=l.sibling}}function Pu(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var p=s,v=l,M=v.flags;switch(v.tag){case 22:Pu(p,v),M&2048&&Rh(v.alternate,v);break;case 24:Pu(p,v),M&2048&&el(v.alternate,v);break;default:Pu(p,v)}l=l.sibling}}var Ji=8192;function Oc(s,l,p){if(s.subtreeFlags&Ji)for(s=s.child;s!==null;)na(s,l,p),s=s.sibling}function na(s,l,p){switch(s.tag){case 26:Oc(s,l,p),s.flags&Ji&&s.memoizedState!==null&&bU(p,_r,s.memoizedState,s.memoizedProps);break;case 5:Oc(s,l,p);break;case 3:case 4:var v=_r;_r=Gv(s.stateNode.containerInfo),Oc(s,l,p),_r=v;break;case 22:s.memoizedState===null&&(v=s.alternate,v!==null&&v.memoizedState!==null?(v=Ji,Ji=16777216,Oc(s,l,p),Ji=v):Oc(s,l,p));break;default:Oc(s,l,p)}}function Sr(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function lr(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var v=l[p];Ki=v,Qd(v,s)}Sr(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Lc(s),s=s.sibling}function Lc(s){switch(s.tag){case 0:case 11:case 15:lr(s),s.flags&2048&&gs(9,s,s.return);break;case 3:lr(s);break;case 12:lr(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Dh(s)):lr(s);break;default:lr(s)}}function Dh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var v=l[p];Ki=v,Qd(v,s)}Sr(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:gs(8,l,l.return),Dh(l);break;case 22:p=l.stateNode,p._visibility&2&&(p._visibility&=-3,Dh(l));break;default:Dh(l)}s=s.sibling}}function Qd(s,l){for(;Ki!==null;){var p=Ki;switch(p.tag){case 0:case 11:case 15:gs(8,p,l);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Ua(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Ki=v;else e:for(p=s;Ki!==null;){v=Ki;var M=v.sibling,C=v.return;if(Ch(v),v===p){Ki=null;break e}if(M!==null){M.return=C,Ki=M;break e}Ki=C}}}var Uh={getCacheForType:function(s){var l=Ta(tn),p=l.data.get(s);return p===void 0&&(p=s(),l.data.set(s,p)),p},cacheSignal:function(){return Ta(tn).controller.signal}},Oh=typeof WeakMap=="function"?WeakMap:Map,Hn=0,si=null,bn=null,Bn=0,nn=0,Dn=null,mn=!1,An=!1,gi=!1,ia=0,oi=0,Zr=0,tl=0,Gs=0,Vn=0,Jr=0,Ws=null,Za=null,wr=!1,nl=0,Iu=0,Qr=1/0,Bu=null,wo=null,Gi=0,Xs=null,$r=null,ys=0,il=0,zc=null,Lh=null,Pc=0,Ic=null;function cr(){return(Hn&2)!==0&&Bn!==0?Bn&-Bn:G.T!==null?j1():Ui()}function u(){if(Vn===0)if((Bn&536870912)===0||kn){var s=nt;nt<<=1,(nt&3932160)===0&&(nt=262144),Vn=s}else Vn=536870912;return s=pa.current,s!==null&&(s.flags|=32),Vn}function h(s,l,p){(s===si&&(nn===2||nn===9)||s.cancelPendingCommit!==null)&&(Oe(s,0),P(s,Bn,Vn,!1)),Kt(s,p),((Hn&2)===0||s!==si)&&(s===si&&((Hn&2)===0&&(tl|=p),oi===4&&P(s,Bn,Vn,!1)),Vl(s))}function b(s,l,p){if((Hn&6)!==0)throw Error(i(327));var v=!p&&(l&127)===0&&(l&s.expiredLanes)===0||Ie(s,l),M=v?Bc(s,l):Mr(s,l,!0),C=v;do{if(M===0){An&&!v&&P(s,l,0,!1);break}else{if(p=s.current.alternate,C&&!R(p)){M=Mr(s,l,!1),C=!1;continue}if(M===2){if(C=l,s.errorRecoveryDisabledLanes&C)var H=0;else H=s.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){l=H;e:{var te=s;M=Ws;var be=te.current.memoizedState.isDehydrated;if(be&&(Oe(te,H).flags|=256),H=Mr(te,H,!1),H!==2){if(gi&&!be){te.errorRecoveryDisabledLanes|=C,tl|=C,M=4;break e}C=Za,Za=M,C!==null&&(Za===null?Za=C:Za.push.apply(Za,C))}M=H}if(C=!1,M!==2)continue}}if(M===1){Oe(s,0),P(s,l,0,!0);break}e:{switch(v=s,C=M,C){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:P(v,l,Vn,!mn);break e;case 2:Za=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(M=nl+300-V(),10<M)){if(P(v,l,Vn,!mn),pe(v,0,!0)!==0)break e;ys=l,v.timeoutHandle=iE(E.bind(null,v,p,Za,Bu,wr,l,Vn,tl,Jr,mn,C,"Throttled",-0,0),M);break e}E(v,p,Za,Bu,wr,l,Vn,tl,Jr,mn,C,null,-0,0)}}break}while(!0);Vl(s)}function E(s,l,p,v,M,C,H,te,be,Ve,at,dt,Ye,Qe){if(s.timeoutHandle=-1,dt=l.subtreeFlags,dt&8192||(dt&16785408)===16785408){dt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt},na(l,C,dt);var Gt=(C&62914560)===C?nl-V():(C&4194048)===C?Iu-V():0;if(Gt=_U(dt,Gt),Gt!==null){ys=C,s.cancelPendingCommit=Gt(un.bind(null,s,l,C,p,v,M,H,te,be,at,dt,null,Ye,Qe)),P(s,C,H,!Ve);return}}un(s,l,C,p,v,M,H,te,be)}function R(s){for(var l=s;;){var p=l.tag;if((p===0||p===11||p===15)&&l.flags&16384&&(p=l.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var M=p[v],C=M.getSnapshot;M=M.value;try{if(!Ii(C(),M))return!1}catch{return!1}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function P(s,l,p,v){l&=~Gs,l&=~tl,s.suspendedLanes|=l,s.pingedLanes&=~l,v&&(s.warmLanes|=l),v=s.expirationTimes;for(var M=l;0<M;){var C=31-rt(M),H=1<<C;v[C]=-1,M&=~H}p!==0&&Xn(s,p,l)}function ie(){return(Hn&6)===0?(lg(0),!1):!0}function ye(){if(bn!==null){if(nn===0)var s=bn.return;else s=bn,Wa=Vo=null,Bm(s),Dl=null,Ul=0,s=bn;for(;s!==null;)Dc(s.alternate,s),s=s.return;bn=null}}function Oe(s,l){var p=s.timeoutHandle;p!==-1&&(s.timeoutHandle=-1,iU(p)),p=s.cancelPendingCommit,p!==null&&(s.cancelPendingCommit=null,p()),ys=0,ye(),si=s,bn=p=co(s.current,null),Bn=l,nn=0,Dn=null,mn=!1,An=Ie(s,l),gi=!1,Jr=Vn=Gs=tl=Zr=oi=0,Za=Ws=null,wr=!1,(l&8)!==0&&(l|=l&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=l;0<v;){var M=31-rt(v),C=1<<M;l|=s[M],v&=~C}return ia=l,Ml(),p}function lt(s,l){cn=null,G.H=Fd,l===Rl||l===Fs?(l=lh(),nn=3):l===Rd?(l=lh(),nn=4):nn=l===Eh?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Dn=l,bn===null&&(oi=1,Mh(s,mr(l,s.current)))}function _t(){var s=pa.current;return s===null?!0:(Bn&4194048)===Bn?hs===null:(Bn&62914560)===Bn||(Bn&536870912)!==0?s===hs:!1}function Ot(){var s=G.H;return G.H=Fd,s===null?Fd:s}function Pt(){var s=G.A;return G.A=Uh,s}function pn(){oi=4,mn||(Bn&4194048)!==Bn&&pa.current!==null||(An=!0),(Zr&134217727)===0&&(tl&134217727)===0||si===null||P(si,Bn,Vn,!1)}function Mr(s,l,p){var v=Hn;Hn|=2;var M=Ot(),C=Pt();(si!==s||Bn!==l)&&(Bu=null,Oe(s,l)),l=!1;var H=oi;e:do try{if(nn!==0&&bn!==null){var te=bn,be=Dn;switch(nn){case 8:ye(),H=6;break e;case 3:case 2:case 9:case 6:pa.current===null&&(l=!0);var Ve=nn;if(nn=0,Dn=null,vt(s,te,be,Ve),p&&An){H=0;break e}break;default:Ve=nn,nn=0,Dn=null,vt(s,te,be,Ve)}}$d(),H=oi;break}catch(at){lt(s,at)}while(!0);return l&&s.shellSuspendCounter++,Wa=Vo=null,Hn=v,G.H=M,G.A=C,bn===null&&(si=null,Bn=0,Ml()),H}function $d(){for(;bn!==null;)Ne(bn)}function Bc(s,l){var p=Hn;Hn|=2;var v=Ot(),M=Pt();si!==s||Bn!==l?(Bu=null,Qr=V()+500,Oe(s,l)):An=Ie(s,l);e:do try{if(nn!==0&&bn!==null){l=bn;var C=Dn;t:switch(nn){case 1:nn=0,Dn=null,vt(s,l,C,1);break;case 2:case 9:if(cv(C)){nn=0,Dn=null,Je(l);break}l=function(){nn!==2&&nn!==9||si!==s||(nn=7),Vl(s)},C.then(l,l);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:cv(C)?(nn=0,Dn=null,Je(l)):(nn=0,Dn=null,vt(s,l,C,7));break;case 5:var H=null;switch(bn.tag){case 26:H=bn.memoizedState;case 5:case 27:var te=bn;if(H?xE(H):te.stateNode.complete){nn=0,Dn=null;var be=te.sibling;if(be!==null)bn=be;else{var Ve=te.return;Ve!==null?(bn=Ve,Qt(Ve)):bn=null}break t}}nn=0,Dn=null,vt(s,l,C,5);break;case 6:nn=0,Dn=null,vt(s,l,C,6);break;case 8:ye(),oi=6;break e;default:throw Error(i(462))}}Xe();break}catch(at){lt(s,at)}while(!0);return Wa=Vo=null,G.H=v,G.A=M,Hn=p,bn!==null?0:(si=null,Bn=0,Ml(),oi)}function Xe(){for(;bn!==null&&!Ee();)Ne(bn)}function Ne(s){var l=Th(s.alternate,s,ia);s.memoizedProps=s.pendingProps,l===null?Qt(s):bn=l}function Je(s){var l=s,p=l.alternate;switch(l.tag){case 15:case 0:l=Ya(p,l,l.pendingProps,l.type,void 0,Bn);break;case 11:l=Ya(p,l,l.pendingProps,l.type.render,l.ref,Bn);break;case 5:Bm(l);default:Dc(p,l),l=bn=Ga(l,ia),l=Th(p,l,ia)}s.memoizedProps=s.pendingProps,l===null?Qt(s):bn=l}function vt(s,l,p,v){Wa=Vo=null,Bm(l),Dl=null,Ul=0;var M=l.return;try{if(Vr(s,M,l,p,Bn)){oi=1,Mh(s,mr(p,s.current)),bn=null;return}}catch(C){if(M!==null)throw bn=M,C;oi=1,Mh(s,mr(p,s.current)),bn=null;return}l.flags&32768?(kn||v===1?s=!0:An||(Bn&536870912)!==0?s=!1:(mn=s=!0,(v===2||v===9||v===3||v===6)&&(v=pa.current,v!==null&&v.tag===13&&(v.flags|=16384))),Ai(l,s)):Qt(l)}function Qt(s){var l=s;do{if((l.flags&32768)!==0){Ai(l,mn);return}s=l.return;var p=rg(l.alternate,l,ia);if(p!==null){bn=p;return}if(l=l.sibling,l!==null){bn=l;return}bn=l=s}while(l!==null);oi===0&&(oi=5)}function Ai(s,l){do{var p=Ah(s.alternate,s);if(p!==null){p.flags&=32767,bn=p;return}if(p=s.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!l&&(s=s.sibling,s!==null)){bn=s;return}bn=s=p}while(s!==null);oi=6,bn=null}function un(s,l,p,v,M,C,H,te,be){s.cancelPendingCommit=null;do zh();while(Gi!==0);if((Hn&6)!==0)throw Error(i(327));if(l!==null){if(l===s.current)throw Error(i(177));if(C=l.lanes|l.childLanes,C|=eh,dn(s,p,C,H,te,be),s===si&&(bn=si=null,Bn=0),$r=l,Xs=s,ys=p,il=C,zc=M,Lh=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,G4(we,function(){return FM(),null})):(s.callbackNode=null,s.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=G.T,G.T=null,M=W.p,W.p=2,H=Hn,Hn|=4;try{zu(s,l,p)}finally{Hn=H,W.p=M,G.T=v}}Gi=1,Kn(),ga(),Zn()}}function Kn(){if(Gi===1){Gi=0;var s=Xs,l=$r,p=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||p){p=G.T,G.T=null;var v=W.p;W.p=2;var M=Hn;Hn|=4;try{jl(l,s);var C=K1,H=Kf(s.containerInfo),te=C.focusedElem,be=C.selectionRange;if(H!==te&&te&&te.ownerDocument&&qf(te.ownerDocument.documentElement,te)){if(be!==null&&pu(te)){var Ve=be.start,at=be.end;if(at===void 0&&(at=Ve),"selectionStart"in te)te.selectionStart=Ve,te.selectionEnd=Math.min(at,te.value.length);else{var dt=te.ownerDocument||document,Ye=dt&&dt.defaultView||window;if(Ye.getSelection){var Qe=Ye.getSelection(),Gt=te.textContent.length,ln=Math.min(be.start,Gt),Ni=be.end===void 0?ln:Math.min(be.end,Gt);!Qe.extend&&ln>Ni&&(H=Ni,Ni=ln,ln=H);var Re=hm(te,ln),_e=hm(te,Ni);if(Re&&_e&&(Qe.rangeCount!==1||Qe.anchorNode!==Re.node||Qe.anchorOffset!==Re.offset||Qe.focusNode!==_e.node||Qe.focusOffset!==_e.offset)){var He=dt.createRange();He.setStart(Re.node,Re.offset),Qe.removeAllRanges(),ln>Ni?(Qe.addRange(He),Qe.extend(_e.node,_e.offset)):(He.setEnd(_e.node,_e.offset),Qe.addRange(He))}}}}for(dt=[],Qe=te;Qe=Qe.parentNode;)Qe.nodeType===1&&dt.push({element:Qe,left:Qe.scrollLeft,top:Qe.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<dt.length;te++){var ct=dt[te];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}Zv=!!q1,K1=q1=null}finally{Hn=M,W.p=v,G.T=p}}s.current=l,Gi=2}}function ga(){if(Gi===2){Gi=0;var s=Xs,l=$r,p=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||p){p=G.T,G.T=null;var v=W.p;W.p=2;var M=Hn;Hn|=4;try{Pv(s,l.alternate,l)}finally{Hn=M,W.p=v,G.T=p}}Gi=3}}function Zn(){if(Gi===4||Gi===3){Gi=0,X();var s=Xs,l=$r,p=ys,v=Lh;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Gi=5:(Gi=0,$r=Xs=null,al(s,s.pendingLanes));var M=s.pendingLanes;if(M===0&&(wo=null),Si(p),l=l.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(ke,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=G.T,M=W.p,W.p=2,G.T=null;try{for(var C=s.onRecoverableError,H=0;H<v.length;H++){var te=v[H];C(te.value,{componentStack:te.stack})}}finally{G.T=l,W.p=M}}(ys&3)!==0&&zh(),Vl(s),M=s.pendingLanes,(p&261930)!==0&&(M&42)!==0?s===Ic?Pc++:(Pc=0,Ic=s):Pc=0,lg(0)}}function al(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Ua(l)))}function zh(){return Kn(),ga(),Zn(),FM()}function FM(){if(Gi!==5)return!1;var s=Xs,l=il;il=0;var p=Si(ys),v=G.T,M=W.p;try{W.p=32>p?32:p,G.T=null,p=zc,zc=null;var C=Xs,H=ys;if(Gi=0,$r=Xs=null,ys=0,(Hn&6)!==0)throw Error(i(331));var te=Hn;if(Hn|=4,Lc(C.current),Vi(C,C.current,H,p),Hn=te,lg(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(ke,C)}catch{}return!0}finally{W.p=M,G.T=v,al(s,l)}}function jM(s,l,p){l=mr(p,l),l=ag(s.stateNode,l,2),s=Yo(s,l,2),s!==null&&(Kt(s,2),Vl(s))}function bi(s,l,p){if(s.tag===3)jM(s,s,p);else for(;l!==null;){if(l.tag===3){jM(l,s,p);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(wo===null||!wo.has(v))){s=mr(p,s),p=Ru(2),v=Yo(l,p,2),v!==null&&(yr(p,v,l,s),Kt(v,2),Vl(v));break}}l=l.return}}function B1(s,l,p){var v=s.pingCache;if(v===null){v=s.pingCache=new Oh;var M=new Set;v.set(l,M)}else M=v.get(l),M===void 0&&(M=new Set,v.set(l,M));M.has(p)||(gi=!0,M.add(p),s=j4.bind(null,s,l,p),l.then(s,s))}function j4(s,l,p){var v=s.pingCache;v!==null&&v.delete(l),s.pingedLanes|=s.suspendedLanes&p,s.warmLanes&=~p,si===s&&(Bn&p)===p&&(oi===4||oi===3&&(Bn&62914560)===Bn&&300>V()-nl?(Hn&2)===0&&Oe(s,0):Gs|=p,Jr===Bn&&(Jr=0)),Vl(s)}function HM(s,l){l===0&&(l=yt()),s=El(s,l),s!==null&&(Kt(s,l),Vl(s))}function H4(s){var l=s.memoizedState,p=0;l!==null&&(p=l.retryLane),HM(s,p)}function V4(s,l){var p=0;switch(s.tag){case 31:case 13:var v=s.stateNode,M=s.memoizedState;M!==null&&(p=M.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(i(314))}v!==null&&v.delete(l),HM(s,p)}function G4(s,l){return We(s,l)}var kv=null,Ph=null,k1=!1,Fv=!1,F1=!1,ku=0;function Vl(s){s!==Ph&&s.next===null&&(Ph===null?kv=Ph=s:Ph=Ph.next=s),Fv=!0,k1||(k1=!0,X4())}function lg(s,l){if(!F1&&Fv){F1=!0;do for(var p=!1,v=kv;v!==null;){if(s!==0){var M=v.pendingLanes;if(M===0)var C=0;else{var H=v.suspendedLanes,te=v.pingedLanes;C=(1<<31-rt(42|s)+1)-1,C&=M&~(H&~te),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(p=!0,XM(v,C))}else C=Bn,C=pe(v,v===si?C:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(C&3)===0||Ie(v,C)||(p=!0,XM(v,C));v=v.next}while(p);F1=!1}}function W4(){VM()}function VM(){Fv=k1=!1;var s=0;ku!==0&&nU()&&(s=ku);for(var l=V(),p=null,v=kv;v!==null;){var M=v.next,C=GM(v,l);C===0?(v.next=null,p===null?kv=M:p.next=M,M===null&&(Ph=p)):(p=v,(s!==0||(C&3)!==0)&&(Fv=!0)),v=M}Gi!==0&&Gi!==5||lg(s),ku!==0&&(ku=0)}function GM(s,l){for(var p=s.suspendedLanes,v=s.pingedLanes,M=s.expirationTimes,C=s.pendingLanes&-62914561;0<C;){var H=31-rt(C),te=1<<H,be=M[H];be===-1?((te&p)===0||(te&v)!==0)&&(M[H]=pt(te,l)):be<=l&&(s.expiredLanes|=te),C&=~te}if(l=si,p=Bn,p=pe(s,s===l?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v=s.callbackNode,p===0||s===l&&(nn===2||nn===9)||s.cancelPendingCommit!==null)return v!==null&&v!==null&&Se(v),s.callbackNode=null,s.callbackPriority=0;if((p&3)===0||Ie(s,p)){if(l=p&-p,l===s.callbackPriority)return l;switch(v!==null&&Se(v),Si(p)){case 2:case 8:p=Ae;break;case 32:p=we;break;case 268435456:p=it;break;default:p=we}return v=WM.bind(null,s),p=We(p,v),s.callbackPriority=l,s.callbackNode=p,l}return v!==null&&v!==null&&Se(v),s.callbackPriority=2,s.callbackNode=null,2}function WM(s,l){if(Gi!==0&&Gi!==5)return s.callbackNode=null,s.callbackPriority=0,null;var p=s.callbackNode;if(zh()&&s.callbackNode!==p)return null;var v=Bn;return v=pe(s,s===si?v:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v===0?null:(b(s,v,l),GM(s,V()),s.callbackNode!=null&&s.callbackNode===p?WM.bind(null,s):null)}function XM(s,l){if(zh())return null;b(s,l,!0)}function X4(){aU(function(){(Hn&6)!==0?We(Ce,W4):VM()})}function j1(){if(ku===0){var s=Xo;s===0&&(s=tt,tt<<=1,(tt&261888)===0&&(tt=256)),ku=s}return ku}function YM(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Et(""+s)}function qM(s,l){var p=l.ownerDocument.createElement("input");return p.name=l.name,p.value=l.value,s.id&&p.setAttribute("form",s.id),l.parentNode.insertBefore(p,l),s=new FormData(s),p.parentNode.removeChild(p),s}function Y4(s,l,p,v,M){if(l==="submit"&&p&&p.stateNode===M){var C=YM((M[bt]||null).action),H=v.submitter;H&&(l=(l=H[bt]||null)?YM(l.formAction):H.getAttribute("formAction"),l!==null&&(C=l,H=null));var te=new Po("action","action",null,v,M);s.push({event:te,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(ku!==0){var be=H?qM(M,H):new FormData(M);$m(p,{pending:!0,data:be,method:M.method,action:C},null,be)}}else typeof C=="function"&&(te.preventDefault(),be=H?qM(M,H):new FormData(M),$m(p,{pending:!0,data:be,method:M.method,action:C},C,be))},currentTarget:M}]})}}for(var H1=0;H1<$f.length;H1++){var V1=$f[H1],q4=V1.toLowerCase(),K4=V1[0].toUpperCase()+V1.slice(1);Va(q4,"on"+K4)}Va(pr,"onAnimationEnd"),Va(pm,"onAnimationIteration"),Va(lo,"onAnimationStart"),Va("dblclick","onDoubleClick"),Va("focusin","onFocus"),Va("focusout","onBlur"),Va(xu,"onTransitionRun"),Va(Sl,"onTransitionStart"),Va(mm,"onTransitionCancel"),Va(Qf,"onTransitionEnd"),Ue("onMouseEnter",["mouseout","mouseover"]),Ue("onMouseLeave",["mouseout","mouseover"]),Ue("onPointerEnter",["pointerout","pointerover"]),Ue("onPointerLeave",["pointerout","pointerover"]),Be("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Be("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Be("onBeforeInput",["compositionend","keypress","textInput","paste"]),Be("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Be("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Be("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cg));function KM(s,l){l=(l&4)!==0;for(var p=0;p<s.length;p++){var v=s[p],M=v.event;v=v.listeners;e:{var C=void 0;if(l)for(var H=v.length-1;0<=H;H--){var te=v[H],be=te.instance,Ve=te.currentTarget;if(te=te.listener,be!==C&&M.isPropagationStopped())break e;C=te,M.currentTarget=Ve;try{C(M)}catch(at){wl(at)}M.currentTarget=null,C=be}else for(H=0;H<v.length;H++){if(te=v[H],be=te.instance,Ve=te.currentTarget,te=te.listener,be!==C&&M.isPropagationStopped())break e;C=te,M.currentTarget=Ve;try{C(M)}catch(at){wl(at)}M.currentTarget=null,C=be}}}}function Fn(s,l){var p=l[ja];p===void 0&&(p=l[ja]=new Set);var v=s+"__bubble";p.has(v)||(ZM(l,s,2,!1),p.add(v))}function G1(s,l,p){var v=0;l&&(v|=4),ZM(p,s,v,l)}var jv="_reactListening"+Math.random().toString(36).slice(2);function W1(s){if(!s[jv]){s[jv]=!0,Me.forEach(function(p){p!=="selectionchange"&&(Z4.has(p)||G1(p,!1,s),G1(p,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[jv]||(l[jv]=!0,G1("selectionchange",!1,l))}}function ZM(s,l,p,v){switch(EE(l)){case 2:var M=MU;break;case 8:M=EU;break;default:M=s_}p=M.bind(null,l,p,s),M=void 0,!Ei||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(M=!0),v?M!==void 0?s.addEventListener(l,p,{capture:!0,passive:M}):s.addEventListener(l,p,!0):M!==void 0?s.addEventListener(l,p,{passive:M}):s.addEventListener(l,p,!1)}function X1(s,l,p,v,M){var C=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var H=v.tag;if(H===3||H===4){var te=v.stateNode.containerInfo;if(te===M)break;if(H===4)for(H=v.return;H!==null;){var be=H.tag;if((be===3||be===4)&&H.stateNode.containerInfo===M)return;H=H.return}for(;te!==null;){if(H=hi(te),H===null)return;if(be=H.tag,be===5||be===6||be===26||be===27){v=C=H;continue e}te=te.parentNode}}v=v.return}yi(function(){var Ve=C,at=mt(p),dt=[];e:{var Ye=ko.get(s);if(Ye!==void 0){var Qe=Po,Gt=s;switch(s){case"keypress":if(ro(p)===0)break e;case"keydown":case"keyup":Qe=im;break;case"focusin":Gt="focus",Qe=lu;break;case"focusout":Gt="blur",Qe=lu;break;case"beforeblur":case"afterblur":Qe=lu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=Vf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=Io;break;case pr:case pm:case lo:Qe=hr;break;case Qf:Qe=R1;break;case"scroll":case"scrollend":Qe=so;break;case"wheel":Qe=gl;break;case"copy":case"cut":case"paste":Qe=ds;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=Gf;break;case"toggle":case"beforetoggle":Qe=rm}var ln=(l&4)!==0,Ni=!ln&&(s==="scroll"||s==="scrollend"),Re=ln?Ye!==null?Ye+"Capture":null:Ye;ln=[];for(var _e=Ve,He;_e!==null;){var ct=_e;if(He=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||He===null||Re===null||(ct=ji(_e,Re),ct!=null&&ln.push(ug(_e,ct,He))),Ni)break;_e=_e.return}0<ln.length&&(Ye=new Qe(Ye,Gt,null,p,at),dt.push({event:Ye,listeners:ln}))}}if((l&7)===0){e:{if(Ye=s==="mouseover"||s==="pointerover",Qe=s==="mouseout"||s==="pointerout",Ye&&p!==Ct&&(Gt=p.relatedTarget||p.fromElement)&&(hi(Gt)||Gt[$n]))break e;if((Qe||Ye)&&(Ye=at.window===at?at:(Ye=at.ownerDocument)?Ye.defaultView||Ye.parentWindow:window,Qe?(Gt=p.relatedTarget||p.toElement,Qe=Ve,Gt=Gt?hi(Gt):null,Gt!==null&&(Ni=r(Gt),ln=Gt.tag,Gt!==Ni||ln!==5&&ln!==27&&ln!==6)&&(Gt=null)):(Qe=null,Gt=Ve),Qe!==Gt)){if(ln=Vf,ct="onMouseLeave",Re="onMouseEnter",_e="mouse",(s==="pointerout"||s==="pointerover")&&(ln=Gf,ct="onPointerLeave",Re="onPointerEnter",_e="pointer"),Ni=Qe==null?Ye:ba(Qe),He=Gt==null?Ye:ba(Gt),Ye=new ln(ct,_e+"leave",Qe,p,at),Ye.target=Ni,Ye.relatedTarget=He,ct=null,hi(at)===Ve&&(ln=new ln(Re,_e+"enter",Gt,p,at),ln.target=He,ln.relatedTarget=Ni,ct=ln),Ni=ct,Qe&&Gt)t:{for(ln=J4,Re=Qe,_e=Gt,He=0,ct=Re;ct;ct=ln(ct))He++;ct=0;for(var rn=_e;rn;rn=ln(rn))ct++;for(;0<He-ct;)Re=ln(Re),He--;for(;0<ct-He;)_e=ln(_e),ct--;for(;He--;){if(Re===_e||_e!==null&&Re===_e.alternate){ln=Re;break t}Re=ln(Re),_e=ln(_e)}ln=null}else ln=null;Qe!==null&&JM(dt,Ye,Qe,ln,!1),Gt!==null&&Ni!==null&&JM(dt,Ni,Gt,ln,!0)}}e:{if(Ye=Ve?ba(Ve):window,Qe=Ye.nodeName&&Ye.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&Ye.type==="file")var li=um;else if(lm(Ye))if(_d)li=tv;else{li=yl;var Jt=Sd}else Qe=Ye.nodeName,!Qe||Qe.toLowerCase()!=="input"||Ye.type!=="checkbox"&&Ye.type!=="radio"?Ve&&ae(Ve.elementType)&&(li=um):li=ev;if(li&&(li=li(s,Ve))){Yf(dt,li,p,at);break e}Jt&&Jt(s,Ye,Ve),s==="focusout"&&Ve&&Ye.type==="number"&&Ve.memoizedProps.value!=null&&wi(Ye,"number",Ye.value)}switch(Jt=Ve?ba(Ve):window,s){case"focusin":(lm(Jt)||Jt.contentEditable==="true")&&(mu=Jt,Zf=Ve,gu=null);break;case"focusout":gu=Zf=mu=null;break;case"mousedown":Br=!0;break;case"contextmenu":case"mouseup":case"dragend":Br=!1,Jf(dt,p,at);break;case"selectionchange":if(nv)break;case"keydown":case"keyup":Jf(dt,p,at)}var Cn;if(mc)e:{switch(s){case"compositionstart":var Gn="onCompositionStart";break e;case"compositionend":Gn="onCompositionEnd";break e;case"compositionupdate":Gn="onCompositionUpdate";break e}Gn=void 0}else xl?Wf(s,p)&&(Gn="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(Gn="onCompositionStart");Gn&&(Da&&p.locale!=="ko"&&(xl||Gn!=="onCompositionStart"?Gn==="onCompositionEnd"&&xl&&(Cn=fc()):(Sa=at,ao="value"in Sa?Sa.value:Sa.textContent,xl=!0)),Jt=Hv(Ve,Gn),0<Jt.length&&(Gn=new $p(Gn,s,null,p,at),dt.push({event:Gn,listeners:Jt}),Cn?Gn.data=Cn:(Cn=cu(p),Cn!==null&&(Gn.data=Cn)))),(Cn=gc?Xf(s,p):J0(s,p))&&(Gn=Hv(Ve,"onBeforeInput"),0<Gn.length&&(Jt=new $p("onBeforeInput","beforeinput",null,p,at),dt.push({event:Jt,listeners:Gn}),Jt.data=Cn)),Y4(dt,s,Ve,p,at)}KM(dt,l)})}function ug(s,l,p){return{instance:s,listener:l,currentTarget:p}}function Hv(s,l){for(var p=l+"Capture",v=[];s!==null;){var M=s,C=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||C===null||(M=ji(s,p),M!=null&&v.unshift(ug(s,M,C)),M=ji(s,l),M!=null&&v.push(ug(s,M,C))),s.tag===3)return v;s=s.return}return[]}function J4(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function JM(s,l,p,v,M){for(var C=l._reactName,H=[];p!==null&&p!==v;){var te=p,be=te.alternate,Ve=te.stateNode;if(te=te.tag,be!==null&&be===v)break;te!==5&&te!==26&&te!==27||Ve===null||(be=Ve,M?(Ve=ji(p,C),Ve!=null&&H.unshift(ug(p,Ve,be))):M||(Ve=ji(p,C),Ve!=null&&H.push(ug(p,Ve,be)))),p=p.return}H.length!==0&&s.push({event:l,listeners:H})}var Q4=/\r\n?/g,$4=/\u0000|\uFFFD/g;function QM(s){return(typeof s=="string"?s:""+s).replace(Q4,`
`).replace($4,"")}function $M(s,l){return l=QM(l),QM(s)===l}function Ci(s,l,p,v,M,C){switch(p){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||Mi(s,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&Mi(s,""+v);break;case"className":Zt(s,"class",v);break;case"tabIndex":Zt(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Zt(s,p,v);break;case"style":fr(s,v,C);break;case"data":if(l!=="object"){Zt(s,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||p!=="href")){s.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(p);break}v=Et(""+v),s.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(p==="formAction"?(l!=="input"&&Ci(s,l,"name",M.name,M,null),Ci(s,l,"formEncType",M.formEncType,M,null),Ci(s,l,"formMethod",M.formMethod,M,null),Ci(s,l,"formTarget",M.formTarget,M,null)):(Ci(s,l,"encType",M.encType,M,null),Ci(s,l,"method",M.method,M,null),Ci(s,l,"target",M.target,M,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(p);break}v=Et(""+v),s.setAttribute(p,v);break;case"onClick":v!=null&&(s.onclick=Dt);break;case"onScroll":v!=null&&Fn("scroll",s);break;case"onScrollEnd":v!=null&&Fn("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(p=v.__html,p!=null){if(M.children!=null)throw Error(i(60));s.innerHTML=p}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}p=Et(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(p,""+v):s.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(p,""):s.removeAttribute(p);break;case"capture":case"download":v===!0?s.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(p,v):s.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(p,v):s.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(p):s.setAttribute(p,v);break;case"popover":Fn("beforetoggle",s),Fn("toggle",s),It(s,"popover",v);break;case"xlinkActuate":Bt(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Bt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Bt(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Bt(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Bt(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Bt(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Bt(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Bt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Bt(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":It(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=De.get(p)||p,It(s,p,v))}}function Y1(s,l,p,v,M,C){switch(p){case"style":fr(s,v,C);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(p=v.__html,p!=null){if(M.children!=null)throw Error(i(60));s.innerHTML=p}}break;case"children":typeof v=="string"?Mi(s,v):(typeof v=="number"||typeof v=="bigint")&&Mi(s,""+v);break;case"onScroll":v!=null&&Fn("scroll",s);break;case"onScrollEnd":v!=null&&Fn("scrollend",s);break;case"onClick":v!=null&&(s.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ge.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(M=p.endsWith("Capture"),l=p.slice(2,M?p.length-7:void 0),C=s[bt]||null,C=C!=null?C[p]:null,typeof C=="function"&&s.removeEventListener(l,C,M),typeof v=="function")){typeof C!="function"&&C!==null&&(p in s?s[p]=null:s.hasAttribute(p)&&s.removeAttribute(p)),s.addEventListener(l,v,M);break e}p in s?s[p]=v:v===!0?s.setAttribute(p,""):It(s,p,v)}}}function ur(s,l,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fn("error",s),Fn("load",s);var v=!1,M=!1,C;for(C in p)if(p.hasOwnProperty(C)){var H=p[C];if(H!=null)switch(C){case"src":v=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Ci(s,l,C,H,p,null)}}M&&Ci(s,l,"srcSet",p.srcSet,p,null),v&&Ci(s,l,"src",p.src,p,null);return;case"input":Fn("invalid",s);var te=C=H=M=null,be=null,Ve=null;for(v in p)if(p.hasOwnProperty(v)){var at=p[v];if(at!=null)switch(v){case"name":M=at;break;case"type":H=at;break;case"checked":be=at;break;case"defaultChecked":Ve=at;break;case"value":C=at;break;case"defaultValue":te=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,l));break;default:Ci(s,l,v,at,p,null)}}Na(s,C,te,be,Ve,H,M,!1);return;case"select":Fn("invalid",s),v=H=C=null;for(M in p)if(p.hasOwnProperty(M)&&(te=p[M],te!=null))switch(M){case"value":C=te;break;case"defaultValue":H=te;break;case"multiple":v=te;default:Ci(s,l,M,te,p,null)}l=C,p=H,s.multiple=!!v,l!=null?_a(s,!!v,l,!1):p!=null&&_a(s,!!v,p,!0);return;case"textarea":Fn("invalid",s),C=M=v=null;for(H in p)if(p.hasOwnProperty(H)&&(te=p[H],te!=null))switch(H){case"value":v=te;break;case"defaultValue":M=te;break;case"children":C=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(91));break;default:Ci(s,l,H,te,p,null)}di(s,v,M,C);return;case"option":for(be in p)if(p.hasOwnProperty(be)&&(v=p[be],v!=null))switch(be){case"selected":s.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Ci(s,l,be,v,p,null)}return;case"dialog":Fn("beforetoggle",s),Fn("toggle",s),Fn("cancel",s),Fn("close",s);break;case"iframe":case"object":Fn("load",s);break;case"video":case"audio":for(v=0;v<cg.length;v++)Fn(cg[v],s);break;case"image":Fn("error",s),Fn("load",s);break;case"details":Fn("toggle",s);break;case"embed":case"source":case"link":Fn("error",s),Fn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ve in p)if(p.hasOwnProperty(Ve)&&(v=p[Ve],v!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Ci(s,l,Ve,v,p,null)}return;default:if(ae(l)){for(at in p)p.hasOwnProperty(at)&&(v=p[at],v!==void 0&&Y1(s,l,at,v,p,void 0));return}}for(te in p)p.hasOwnProperty(te)&&(v=p[te],v!=null&&Ci(s,l,te,v,p,null))}function eU(s,l,p,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,C=null,H=null,te=null,be=null,Ve=null,at=null;for(Qe in p){var dt=p[Qe];if(p.hasOwnProperty(Qe)&&dt!=null)switch(Qe){case"checked":break;case"value":break;case"defaultValue":be=dt;default:v.hasOwnProperty(Qe)||Ci(s,l,Qe,null,v,dt)}}for(var Ye in v){var Qe=v[Ye];if(dt=p[Ye],v.hasOwnProperty(Ye)&&(Qe!=null||dt!=null))switch(Ye){case"type":C=Qe;break;case"name":M=Qe;break;case"checked":Ve=Qe;break;case"defaultChecked":at=Qe;break;case"value":H=Qe;break;case"defaultValue":te=Qe;break;case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(i(137,l));break;default:Qe!==dt&&Ci(s,l,Ye,Qe,v,dt)}}Hi(s,H,te,be,Ve,at,C,M);return;case"select":Qe=H=te=Ye=null;for(C in p)if(be=p[C],p.hasOwnProperty(C)&&be!=null)switch(C){case"value":break;case"multiple":Qe=be;default:v.hasOwnProperty(C)||Ci(s,l,C,null,v,be)}for(M in v)if(C=v[M],be=p[M],v.hasOwnProperty(M)&&(C!=null||be!=null))switch(M){case"value":Ye=C;break;case"defaultValue":te=C;break;case"multiple":H=C;default:C!==be&&Ci(s,l,M,C,v,be)}l=te,p=H,v=Qe,Ye!=null?_a(s,!!p,Ye,!1):!!v!=!!p&&(l!=null?_a(s,!!p,l,!0):_a(s,!!p,p?[]:"",!1));return;case"textarea":Qe=Ye=null;for(te in p)if(M=p[te],p.hasOwnProperty(te)&&M!=null&&!v.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:Ci(s,l,te,null,v,M)}for(H in v)if(M=v[H],C=p[H],v.hasOwnProperty(H)&&(M!=null||C!=null))switch(H){case"value":Ye=M;break;case"defaultValue":Qe=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:M!==C&&Ci(s,l,H,M,v,C)}Sn(s,Ye,Qe);return;case"option":for(var Gt in p)if(Ye=p[Gt],p.hasOwnProperty(Gt)&&Ye!=null&&!v.hasOwnProperty(Gt))switch(Gt){case"selected":s.selected=!1;break;default:Ci(s,l,Gt,null,v,Ye)}for(be in v)if(Ye=v[be],Qe=p[be],v.hasOwnProperty(be)&&Ye!==Qe&&(Ye!=null||Qe!=null))switch(be){case"selected":s.selected=Ye&&typeof Ye!="function"&&typeof Ye!="symbol";break;default:Ci(s,l,be,Ye,v,Qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ln in p)Ye=p[ln],p.hasOwnProperty(ln)&&Ye!=null&&!v.hasOwnProperty(ln)&&Ci(s,l,ln,null,v,Ye);for(Ve in v)if(Ye=v[Ve],Qe=p[Ve],v.hasOwnProperty(Ve)&&Ye!==Qe&&(Ye!=null||Qe!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(i(137,l));break;default:Ci(s,l,Ve,Ye,v,Qe)}return;default:if(ae(l)){for(var Ni in p)Ye=p[Ni],p.hasOwnProperty(Ni)&&Ye!==void 0&&!v.hasOwnProperty(Ni)&&Y1(s,l,Ni,void 0,v,Ye);for(at in v)Ye=v[at],Qe=p[at],!v.hasOwnProperty(at)||Ye===Qe||Ye===void 0&&Qe===void 0||Y1(s,l,at,Ye,v,Qe);return}}for(var Re in p)Ye=p[Re],p.hasOwnProperty(Re)&&Ye!=null&&!v.hasOwnProperty(Re)&&Ci(s,l,Re,null,v,Ye);for(dt in v)Ye=v[dt],Qe=p[dt],!v.hasOwnProperty(dt)||Ye===Qe||Ye==null&&Qe==null||Ci(s,l,dt,Ye,v,Qe)}function eE(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tU(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var M=p[v],C=M.transferSize,H=M.initiatorType,te=M.duration;if(C&&te&&eE(H)){for(H=0,te=M.responseEnd,v+=1;v<p.length;v++){var be=p[v],Ve=be.startTime;if(Ve>te)break;var at=be.transferSize,dt=be.initiatorType;at&&eE(dt)&&(be=be.responseEnd,H+=at*(be<te?1:(te-Ve)/(be-Ve)))}if(--v,l+=8*(C+H)/(M.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var q1=null,K1=null;function Vv(s){return s.nodeType===9?s:s.ownerDocument}function tE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nE(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Z1(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var J1=null;function nU(){var s=window.event;return s&&s.type==="popstate"?s===J1?!1:(J1=s,!0):(J1=null,!1)}var iE=typeof setTimeout=="function"?setTimeout:void 0,iU=typeof clearTimeout=="function"?clearTimeout:void 0,aE=typeof Promise=="function"?Promise:void 0,aU=typeof queueMicrotask=="function"?queueMicrotask:typeof aE<"u"?function(s){return aE.resolve(null).then(s).catch(rU)}:iE;function rU(s){setTimeout(function(){throw s})}function Fu(s){return s==="head"}function rE(s,l){var p=l,v=0;do{var M=p.nextSibling;if(s.removeChild(p),M&&M.nodeType===8)if(p=M.data,p==="/$"||p==="/&"){if(v===0){s.removeChild(M),Fh(l);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")dg(s.ownerDocument.documentElement);else if(p==="head"){p=s.ownerDocument.head,dg(p);for(var C=p.firstChild;C;){var H=C.nextSibling,te=C.nodeName;C[Pr]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&C.rel.toLowerCase()==="stylesheet"||p.removeChild(C),C=H}}else p==="body"&&dg(s.ownerDocument.body);p=M}while(p);Fh(l)}function sE(s,l){var p=s;s=0;do{var v=p.nextSibling;if(p.nodeType===1?l?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(l?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(s===0)break;s--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||s++;p=v}while(p)}function Q1(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var p=l;switch(l=l.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Q1(p),Ha(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}s.removeChild(p)}}function sU(s,l,p,v){for(;s.nodeType===1;){var M=p;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[Pr])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(C=s.getAttribute("rel"),C==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(C!==M.rel||s.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||s.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||s.getAttribute("title")!==(M.title==null?null:M.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(C=s.getAttribute("src"),(C!==(M.src==null?null:M.src)||s.getAttribute("type")!==(M.type==null?null:M.type)||s.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&C&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var C=M.name==null?null:""+M.name;if(M.type==="hidden"&&s.getAttribute("name")===C)return s}else return s;if(s=Mo(s.nextSibling),s===null)break}return null}function oU(s,l,p){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!p||(s=Mo(s.nextSibling),s===null))return null;return s}function oE(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Mo(s.nextSibling),s===null))return null;return s}function $1(s){return s.data==="$?"||s.data==="$~"}function e_(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function lU(s,l){var p=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||p.readyState!=="loading")l();else{var v=function(){l(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),s._reactRetry=v}}function Mo(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var t_=null;function lE(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"||p==="/&"){if(l===0)return Mo(s.nextSibling);l--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||l++}s=s.nextSibling}return null}function cE(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(l===0)return s;l--}else p!=="/$"&&p!=="/&"||l++}s=s.previousSibling}return null}function uE(s,l,p){switch(l=Vv(p),s){case"html":if(s=l.documentElement,!s)throw Error(i(452));return s;case"head":if(s=l.head,!s)throw Error(i(453));return s;case"body":if(s=l.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function dg(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Ha(s)}var Eo=new Map,dE=new Set;function Gv(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var kc=W.d;W.d={f:cU,r:uU,D:dU,C:fU,L:hU,m:pU,X:gU,S:mU,M:vU};function cU(){var s=kc.f(),l=ie();return s||l}function uU(s){var l=zn(s);l!==null&&l.tag===5&&l.type==="form"?eg(l):kc.r(s)}var Ih=typeof document>"u"?null:document;function fE(s,l,p){var v=Ih;if(v&&typeof l=="string"&&l){var M=qt(l);M='link[rel="'+s+'"][href="'+M+'"]',typeof p=="string"&&(M+='[crossorigin="'+p+'"]'),dE.has(M)||(dE.add(M),s={rel:s,crossOrigin:p,href:l},v.querySelector(M)===null&&(l=v.createElement("link"),ur(l,"link",s),Z(l),v.head.appendChild(l)))}}function dU(s){kc.D(s),fE("dns-prefetch",s,null)}function fU(s,l){kc.C(s,l),fE("preconnect",s,l)}function hU(s,l,p){kc.L(s,l,p);var v=Ih;if(v&&s&&l){var M='link[rel="preload"][as="'+qt(l)+'"]';l==="image"&&p&&p.imageSrcSet?(M+='[imagesrcset="'+qt(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(M+='[imagesizes="'+qt(p.imageSizes)+'"]')):M+='[href="'+qt(s)+'"]';var C=M;switch(l){case"style":C=Bh(s);break;case"script":C=kh(s)}Eo.has(C)||(s=g({rel:"preload",href:l==="image"&&p&&p.imageSrcSet?void 0:s,as:l},p),Eo.set(C,s),v.querySelector(M)!==null||l==="style"&&v.querySelector(fg(C))||l==="script"&&v.querySelector(hg(C))||(l=v.createElement("link"),ur(l,"link",s),Z(l),v.head.appendChild(l)))}}function pU(s,l){kc.m(s,l);var p=Ih;if(p&&s){var v=l&&typeof l.as=="string"?l.as:"script",M='link[rel="modulepreload"][as="'+qt(v)+'"][href="'+qt(s)+'"]',C=M;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=kh(s)}if(!Eo.has(C)&&(s=g({rel:"modulepreload",href:s},l),Eo.set(C,s),p.querySelector(M)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(hg(C)))return}v=p.createElement("link"),ur(v,"link",s),Z(v),p.head.appendChild(v)}}}function mU(s,l,p){kc.S(s,l,p);var v=Ih;if(v&&s){var M=kt(v).hoistableStyles,C=Bh(s);l=l||"default";var H=M.get(C);if(!H){var te={loading:0,preload:null};if(H=v.querySelector(fg(C)))te.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},p),(p=Eo.get(C))&&n_(s,p);var be=H=v.createElement("link");Z(be),ur(be,"link",s),be._p=new Promise(function(Ve,at){be.onload=Ve,be.onerror=at}),be.addEventListener("load",function(){te.loading|=1}),be.addEventListener("error",function(){te.loading|=2}),te.loading|=4,Wv(H,l,v)}H={type:"stylesheet",instance:H,count:1,state:te},M.set(C,H)}}}function gU(s,l){kc.X(s,l);var p=Ih;if(p&&s){var v=kt(p).hoistableScripts,M=kh(s),C=v.get(M);C||(C=p.querySelector(hg(M)),C||(s=g({src:s,async:!0},l),(l=Eo.get(M))&&i_(s,l),C=p.createElement("script"),Z(C),ur(C,"link",s),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(M,C))}}function vU(s,l){kc.M(s,l);var p=Ih;if(p&&s){var v=kt(p).hoistableScripts,M=kh(s),C=v.get(M);C||(C=p.querySelector(hg(M)),C||(s=g({src:s,async:!0,type:"module"},l),(l=Eo.get(M))&&i_(s,l),C=p.createElement("script"),Z(C),ur(C,"link",s),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(M,C))}}function hE(s,l,p,v){var M=(M=se.current)?Gv(M):null;if(!M)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(l=Bh(p.href),p=kt(M).hoistableStyles,v=p.get(l),v||(v={type:"style",instance:null,count:0,state:null},p.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){s=Bh(p.href);var C=kt(M).hoistableStyles,H=C.get(s);if(H||(M=M.ownerDocument||M,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(s,H),(C=M.querySelector(fg(s)))&&!C._p&&(H.instance=C,H.state.loading=5),Eo.has(s)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Eo.set(s,p),C||xU(M,s,p,H.state))),l&&v===null)throw Error(i(528,""));return H}if(l&&v!==null)throw Error(i(529,""));return null;case"script":return l=p.async,p=p.src,typeof p=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=kh(p),p=kt(M).hoistableScripts,v=p.get(l),v||(v={type:"script",instance:null,count:0,state:null},p.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Bh(s){return'href="'+qt(s)+'"'}function fg(s){return'link[rel="stylesheet"]['+s+"]"}function pE(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function xU(s,l,p,v){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=s.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),ur(l,"link",p),Z(l),s.head.appendChild(l))}function kh(s){return'[src="'+qt(s)+'"]'}function hg(s){return"script[async]"+s}function mE(s,l,p){if(l.count++,l.instance===null)switch(l.type){case"style":var v=s.querySelector('style[data-href~="'+qt(p.href)+'"]');if(v)return l.instance=v,Z(v),v;var M=g({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),Z(v),ur(v,"style",M),Wv(v,p.precedence,s),l.instance=v;case"stylesheet":M=Bh(p.href);var C=s.querySelector(fg(M));if(C)return l.state.loading|=4,l.instance=C,Z(C),C;v=pE(p),(M=Eo.get(M))&&n_(v,M),C=(s.ownerDocument||s).createElement("link"),Z(C);var H=C;return H._p=new Promise(function(te,be){H.onload=te,H.onerror=be}),ur(C,"link",v),l.state.loading|=4,Wv(C,p.precedence,s),l.instance=C;case"script":return C=kh(p.src),(M=s.querySelector(hg(C)))?(l.instance=M,Z(M),M):(v=p,(M=Eo.get(C))&&(v=g({},p),i_(v,M)),s=s.ownerDocument||s,M=s.createElement("script"),Z(M),ur(M,"link",v),s.head.appendChild(M),l.instance=M);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,Wv(v,p.precedence,s));return l.instance}function Wv(s,l,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=v.length?v[v.length-1]:null,C=M,H=0;H<v.length;H++){var te=v[H];if(te.dataset.precedence===l)C=te;else if(C!==M)break}C?C.parentNode.insertBefore(s,C.nextSibling):(l=p.nodeType===9?p.head:p,l.insertBefore(s,l.firstChild))}function n_(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function i_(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Xv=null;function gE(s,l,p){if(Xv===null){var v=new Map,M=Xv=new Map;M.set(p,v)}else M=Xv,v=M.get(p),v||(v=new Map,M.set(p,v));if(v.has(s))return v;for(v.set(s,null),p=p.getElementsByTagName(s),M=0;M<p.length;M++){var C=p[M];if(!(C[Pr]||C[on]||s==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var H=C.getAttribute(l)||"";H=s+H;var te=v.get(H);te?te.push(C):v.set(H,[C])}}return v}function vE(s,l,p){s=s.ownerDocument||s,s.head.insertBefore(p,l==="title"?s.querySelector("head > title"):null)}function yU(s,l,p){if(p===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function xE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function bU(s,l,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var M=Bh(v.href),C=l.querySelector(fg(M));if(C){l=C._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Yv.bind(s),l.then(s,s)),p.state.loading|=4,p.instance=C,Z(C);return}C=l.ownerDocument||l,v=pE(v),(M=Eo.get(M))&&n_(v,M),C=C.createElement("link"),Z(C);var H=C;H._p=new Promise(function(te,be){H.onload=te,H.onerror=be}),ur(C,"link",v),p.instance=C}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(p,l),(l=p.state.preload)&&(p.state.loading&3)===0&&(s.count++,p=Yv.bind(s),l.addEventListener("load",p),l.addEventListener("error",p))}}var a_=0;function _U(s,l){return s.stylesheets&&s.count===0&&Kv(s,s.stylesheets),0<s.count||0<s.imgCount?function(p){var v=setTimeout(function(){if(s.stylesheets&&Kv(s,s.stylesheets),s.unsuspend){var C=s.unsuspend;s.unsuspend=null,C()}},6e4+l);0<s.imgBytes&&a_===0&&(a_=62500*tU());var M=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Kv(s,s.stylesheets),s.unsuspend)){var C=s.unsuspend;s.unsuspend=null,C()}},(s.imgBytes>a_?50:800)+l);return s.unsuspend=p,function(){s.unsuspend=null,clearTimeout(v),clearTimeout(M)}}:null}function Yv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kv(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var qv=null;function Kv(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,qv=new Map,l.forEach(SU,s),qv=null,Yv.call(s))}function SU(s,l){if(!(l.state.loading&4)){var p=qv.get(s);if(p)var v=p.get(null);else{p=new Map,qv.set(s,p);for(var M=s.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<M.length;C++){var H=M[C];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(p.set(H.dataset.precedence,H),v=H)}v&&p.set(null,v)}M=l.instance,H=M.getAttribute("data-precedence"),C=p.get(H)||v,C===v&&p.set(null,M),p.set(H,M),this.count++,v=Yv.bind(this),M.addEventListener("load",v),M.addEventListener("error",v),C?C.parentNode.insertBefore(M,C.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(M,s.firstChild)),l.state.loading|=4}}var pg={$$typeof:D,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function wU(s,l,p,v,M,C,H,te,be){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=v,this.onUncaughtError=M,this.onCaughtError=C,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function yE(s,l,p,v,M,C,H,te,be,Ve,at,dt){return s=new wU(s,l,p,H,be,Ve,at,dt,te),l=1,C===!0&&(l|=24),C=ar(3,null,null,l),s.current=C,C.stateNode=s,l=Sm(),l.refCount++,s.pooledCache=l,l.refCount++,C.memoizedState={element:v,isDehydrated:p,cache:l},Cm(C),s}function bE(s){return s?(s=Tl,s):Tl}function _E(s,l,p,v,M,C){M=bE(M),v.context===null?v.context=M:v.pendingContext=M,v=mo(l),v.payload={element:p},C=C===void 0?null:C,C!==null&&(v.callback=C),p=Yo(s,v,l),p!==null&&(h(p,s,l),Ll(p,s,l))}function SE(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<l?p:l}}function r_(s,l){SE(s,l),(s=s.alternate)&&SE(s,l)}function wE(s){if(s.tag===13||s.tag===31){var l=El(s,67108864);l!==null&&h(l,s,67108864),r_(s,67108864)}}function ME(s){if(s.tag===13||s.tag===31){var l=cr();l=Qn(l);var p=El(s,l);p!==null&&h(p,s,l),r_(s,l)}}var Zv=!0;function MU(s,l,p,v){var M=G.T;G.T=null;var C=W.p;try{W.p=2,s_(s,l,p,v)}finally{W.p=C,G.T=M}}function EU(s,l,p,v){var M=G.T;G.T=null;var C=W.p;try{W.p=8,s_(s,l,p,v)}finally{W.p=C,G.T=M}}function s_(s,l,p,v){if(Zv){var M=o_(v);if(M===null)X1(s,l,v,Jv,p),TE(s,v);else if(AU(M,s,l,p,v))v.stopPropagation();else if(TE(s,v),l&4&&-1<TU.indexOf(s)){for(;M!==null;){var C=zn(M);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var H=xe(C.pendingLanes);if(H!==0){var te=C;for(te.pendingLanes|=2,te.entangledLanes|=2;H;){var be=1<<31-rt(H);te.entanglements[1]|=be,H&=~be}Vl(C),(Hn&6)===0&&(Qr=V()+500,lg(0))}}break;case 31:case 13:te=El(C,2),te!==null&&h(te,C,2),ie(),r_(C,2)}if(C=o_(v),C===null&&X1(s,l,v,Jv,p),C===M)break;M=C}M!==null&&v.stopPropagation()}else X1(s,l,v,null,p)}}function o_(s){return s=mt(s),l_(s)}var Jv=null;function l_(s){if(Jv=null,s=hi(s),s!==null){var l=r(s);if(l===null)s=null;else{var p=l.tag;if(p===13){if(s=o(l),s!==null)return s;s=null}else if(p===31){if(s=c(l),s!==null)return s;s=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Jv=s,null}function EE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case Ce:return 2;case Ae:return 8;case we:case ot:return 32;case it:return 268435456;default:return 32}default:return 32}}var c_=!1,ju=null,Hu=null,Vu=null,mg=new Map,gg=new Map,Gu=[],TU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TE(s,l){switch(s){case"focusin":case"focusout":ju=null;break;case"dragenter":case"dragleave":Hu=null;break;case"mouseover":case"mouseout":Vu=null;break;case"pointerover":case"pointerout":mg.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":gg.delete(l.pointerId)}}function vg(s,l,p,v,M,C){return s===null||s.nativeEvent!==C?(s={blockedOn:l,domEventName:p,eventSystemFlags:v,nativeEvent:C,targetContainers:[M]},l!==null&&(l=zn(l),l!==null&&wE(l)),s):(s.eventSystemFlags|=v,l=s.targetContainers,M!==null&&l.indexOf(M)===-1&&l.push(M),s)}function AU(s,l,p,v,M){switch(l){case"focusin":return ju=vg(ju,s,l,p,v,M),!0;case"dragenter":return Hu=vg(Hu,s,l,p,v,M),!0;case"mouseover":return Vu=vg(Vu,s,l,p,v,M),!0;case"pointerover":var C=M.pointerId;return mg.set(C,vg(mg.get(C)||null,s,l,p,v,M)),!0;case"gotpointercapture":return C=M.pointerId,gg.set(C,vg(gg.get(C)||null,s,l,p,v,M)),!0}return!1}function AE(s){var l=hi(s.target);if(l!==null){var p=r(l);if(p!==null){if(l=p.tag,l===13){if(l=o(p),l!==null){s.blockedOn=l,ai(s.priority,function(){ME(p)});return}}else if(l===31){if(l=c(p),l!==null){s.blockedOn=l,ai(s.priority,function(){ME(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Qv(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var p=o_(s.nativeEvent);if(p===null){p=s.nativeEvent;var v=new p.constructor(p.type,p);Ct=v,p.target.dispatchEvent(v),Ct=null}else return l=zn(p),l!==null&&wE(l),s.blockedOn=p,!1;l.shift()}return!0}function CE(s,l,p){Qv(s)&&p.delete(l)}function CU(){c_=!1,ju!==null&&Qv(ju)&&(ju=null),Hu!==null&&Qv(Hu)&&(Hu=null),Vu!==null&&Qv(Vu)&&(Vu=null),mg.forEach(CE),gg.forEach(CE)}function $v(s,l){s.blockedOn===l&&(s.blockedOn=null,c_||(c_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,CU)))}var ex=null;function NE(s){ex!==s&&(ex=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ex===s&&(ex=null);for(var l=0;l<s.length;l+=3){var p=s[l],v=s[l+1],M=s[l+2];if(typeof v!="function"){if(l_(v||p)===null)continue;break}var C=zn(p);C!==null&&(s.splice(l,3),l-=3,$m(C,{pending:!0,data:M,method:p.method,action:v},v,M))}}))}function Fh(s){function l(be){return $v(be,s)}ju!==null&&$v(ju,s),Hu!==null&&$v(Hu,s),Vu!==null&&$v(Vu,s),mg.forEach(l),gg.forEach(l);for(var p=0;p<Gu.length;p++){var v=Gu[p];v.blockedOn===s&&(v.blockedOn=null)}for(;0<Gu.length&&(p=Gu[0],p.blockedOn===null);)AE(p),p.blockedOn===null&&Gu.shift();if(p=(s.ownerDocument||s).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var M=p[v],C=p[v+1],H=M[bt]||null;if(typeof C=="function")H||NE(p);else if(H){var te=null;if(C&&C.hasAttribute("formAction")){if(M=C,H=C[bt]||null)te=H.formAction;else if(l_(M)!==null)continue}else te=H.action;typeof te=="function"?p[v+1]=te:(p.splice(v,3),v-=3),NE(p)}}}function RE(){function s(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(H){return M=H})},focusReset:"manual",scroll:"manual"})}function l(){M!==null&&(M(),M=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,M=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),M!==null&&(M(),M=null)}}}function u_(s){this._internalRoot=s}tx.prototype.render=u_.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(i(409));var p=l.current,v=cr();_E(p,v,s,l,null,null)},tx.prototype.unmount=u_.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;_E(s.current,2,null,s,null,null),ie(),l[$n]=null}};function tx(s){this._internalRoot=s}tx.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ui();s={blockedOn:null,target:s,priority:l};for(var p=0;p<Gu.length&&l!==0&&l<Gu[p].priority;p++);Gu.splice(p,0,s),p===0&&AE(s)}};var DE=e.version;if(DE!=="19.2.3")throw Error(i(527,DE,"19.2.3"));W.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(l),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var NU={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nx.isDisabled&&nx.supportsFiber)try{ke=nx.inject(NU),Fe=nx}catch{}}return yg.createRoot=function(s,l){if(!a(s))throw Error(i(299));var p=!1,v="",M=ig,C=Lv,H=wh;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(M=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(H=l.onRecoverableError)),l=yE(s,1,!1,null,null,p,v,null,M,C,H,RE),s[$n]=l.current,W1(s),new u_(l)},yg.hydrateRoot=function(s,l,p){if(!a(s))throw Error(i(299));var v=!1,M="",C=ig,H=Lv,te=wh,be=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(M=p.identifierPrefix),p.onUncaughtError!==void 0&&(C=p.onUncaughtError),p.onCaughtError!==void 0&&(H=p.onCaughtError),p.onRecoverableError!==void 0&&(te=p.onRecoverableError),p.formState!==void 0&&(be=p.formState)),l=yE(s,1,!0,l,p??null,v,M,be,C,H,te,RE),l.context=bE(null),p=l.current,v=cr(),v=Qn(v),M=mo(v),M.callback=null,Yo(p,M,v),p=v,l.current.lanes=p,Kt(l,p),Vl(l),s[$n]=l.current,W1(s),new tx(l)},yg.version="19.2.3",yg}var jE;function kU(){if(jE)return h_.exports;jE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),h_.exports=BU(),h_.exports}var FU=kU(),Q2=yC();const bC=Tb(Q2);function jU(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const HU=n=>{switch(n){case"success":return WU;case"info":return YU;case"warning":return XU;case"error":return qU;default:return null}},VU=Array(12).fill(0),GU=({visible:n,className:e})=>St.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},St.createElement("div",{className:"sonner-spinner"},VU.map((t,i)=>St.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),WU=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),XU=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),YU=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),qU=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),KU=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},St.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),St.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ZU=()=>{const[n,e]=St.useState(document.hidden);return St.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let $S=1;class JU{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:i,...a}=e,r=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:$S++,o=this.toasts.find(d=>d.id===r),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),o?this.toasts=this.toasts.map(d=>d.id===r?(this.publish({...d,...e,id:r,title:i}),{...d,...e,id:r,dismissible:c,title:i}):d):this.addToast({title:i,...a,dismissible:c,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let r=i!==void 0,o;const c=a.then(async f=>{if(o=["resolve",f],St.isValidElement(f))r=!1,this.create({id:i,type:"default",message:f});else if($U(f)&&!f.ok){r=!1;const g=typeof t.error=="function"?await t.error(`HTTP error! status: ${f.status}`):t.error,y=typeof t.description=="function"?await t.description(`HTTP error! status: ${f.status}`):t.description,S=typeof g=="object"&&!St.isValidElement(g)?g:{message:g};this.create({id:i,type:"error",description:y,...S})}else if(f instanceof Error){r=!1;const g=typeof t.error=="function"?await t.error(f):t.error,y=typeof t.description=="function"?await t.description(f):t.description,S=typeof g=="object"&&!St.isValidElement(g)?g:{message:g};this.create({id:i,type:"error",description:y,...S})}else if(t.success!==void 0){r=!1;const g=typeof t.success=="function"?await t.success(f):t.success,y=typeof t.description=="function"?await t.description(f):t.description,S=typeof g=="object"&&!St.isValidElement(g)?g:{message:g};this.create({id:i,type:"success",description:y,...S})}}).catch(async f=>{if(o=["reject",f],t.error!==void 0){r=!1;const m=typeof t.error=="function"?await t.error(f):t.error,g=typeof t.description=="function"?await t.description(f):t.description,_=typeof m=="object"&&!St.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:g,..._})}}).finally(()=>{r&&(this.dismiss(i),i=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((f,m)=>c.then(()=>o[0]==="reject"?m(o[1]):f(o[1])).catch(m));return typeof i!="string"&&typeof i!="number"?{unwrap:d}:Object.assign(i,{unwrap:d})},this.custom=(e,t)=>{const i=t?.id||$S++;return this.create({jsx:e(i),id:i,...t}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ss=new JU,QU=(n,e)=>{const t=e?.id||$S++;return Ss.addToast({title:n,...e,id:t}),t},$U=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",eO=QU,tO=()=>Ss.toasts,nO=()=>Ss.getActiveToasts(),v_=Object.assign(eO,{success:Ss.success,info:Ss.info,warning:Ss.warning,error:Ss.error,custom:Ss.custom,message:Ss.message,promise:Ss.promise,dismiss:Ss.dismiss,loading:Ss.loading},{getHistory:tO,getToasts:nO});jU("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function ix(n){return n.label!==void 0}const iO=3,aO="24px",rO="16px",HE=4e3,sO=356,oO=14,lO=45,cO=200;function Gl(...n){return n.filter(Boolean).join(" ")}function uO(n){const[e,t]=n.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}const dO=n=>{var e,t,i,a,r,o,c,d,f;const{invert:m,toast:g,unstyled:y,interacting:_,setHeights:S,visibleToasts:A,heights:T,index:w,toasts:N,expanded:D,removeToast:U,defaultRichColors:O,closeButton:B,style:z,cancelButtonStyle:F,actionButtonStyle:L,className:I="",descriptionClassName:Y="",duration:q,position:K,gap:$,expandByDefault:ce,classNames:G,icons:W,closeButtonAriaLabel:Q="Close toast"}=n,[ue,de]=St.useState(null),[j,ee]=St.useState(null),[ne,oe]=St.useState(!1),[re,se]=St.useState(!1),[le,ve]=St.useState(!1),[ze,qe]=St.useState(!1),[Ke,Pe]=St.useState(!1),[gt,Te]=St.useState(0),[je,Le]=St.useState(0),$e=St.useRef(g.duration||q||HE),J=St.useRef(null),et=St.useRef(null),We=w===0,Se=w+1<=A,Ee=g.type,X=g.dismissible!==!1,V=g.className||"",fe=g.descriptionClassName||"",Ce=St.useMemo(()=>T.findIndex(pe=>pe.toastId===g.id)||0,[T,g.id]),Ae=St.useMemo(()=>{var pe;return(pe=g.closeButton)!=null?pe:B},[g.closeButton,B]),we=St.useMemo(()=>g.duration||q||HE,[g.duration,q]),ot=St.useRef(0),it=St.useRef(0),ht=St.useRef(0),xt=St.useRef(null),[ke,Fe]=K.split("-"),Ze=St.useMemo(()=>T.reduce((pe,Ie,pt)=>pt>=Ce?pe:pe+Ie.height,0),[T,Ce]),rt=ZU(),ut=g.invert||m,Ut=Ee==="loading";it.current=St.useMemo(()=>Ce*$+Ze,[Ce,Ze]),St.useEffect(()=>{$e.current=we},[we]),St.useEffect(()=>{oe(!0)},[]),St.useEffect(()=>{const pe=et.current;if(pe){const Ie=pe.getBoundingClientRect().height;return Le(Ie),S(pt=>[{toastId:g.id,height:Ie,position:g.position},...pt]),()=>S(pt=>pt.filter(yt=>yt.toastId!==g.id))}},[S,g.id]),St.useLayoutEffect(()=>{if(!ne)return;const pe=et.current,Ie=pe.style.height;pe.style.height="auto";const pt=pe.getBoundingClientRect().height;pe.style.height=Ie,Le(pt),S(yt=>yt.find(Kt=>Kt.toastId===g.id)?yt.map(Kt=>Kt.toastId===g.id?{...Kt,height:pt}:Kt):[{toastId:g.id,height:pt,position:g.position},...yt])},[ne,g.title,g.description,S,g.id,g.jsx,g.action,g.cancel]);const me=St.useCallback(()=>{se(!0),Te(it.current),S(pe=>pe.filter(Ie=>Ie.toastId!==g.id)),setTimeout(()=>{U(g)},cO)},[g,U,S,it]);St.useEffect(()=>{if(g.promise&&Ee==="loading"||g.duration===1/0||g.type==="loading")return;let pe;return D||_||rt?(()=>{if(ht.current<ot.current){const yt=new Date().getTime()-ot.current;$e.current=$e.current-yt}ht.current=new Date().getTime()})():(()=>{$e.current!==1/0&&(ot.current=new Date().getTime(),pe=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),me()},$e.current))})(),()=>clearTimeout(pe)},[D,_,g,Ee,rt,me]),St.useEffect(()=>{g.delete&&(me(),g.onDismiss==null||g.onDismiss.call(g,g))},[me,g.delete]);function tt(){var pe;if(W?.loading){var Ie;return St.createElement("div",{className:Gl(G?.loader,g==null||(Ie=g.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":Ee==="loading"},W.loading)}return St.createElement(GU,{className:Gl(G?.loader,g==null||(pe=g.classNames)==null?void 0:pe.loader),visible:Ee==="loading"})}const nt=g.icon||W?.[Ee]||HU(Ee);var ge,xe;return St.createElement("li",{tabIndex:0,ref:et,className:Gl(I,V,G?.toast,g==null||(e=g.classNames)==null?void 0:e.toast,G?.default,G?.[Ee],g==null||(t=g.classNames)==null?void 0:t[Ee]),"data-sonner-toast":"","data-rich-colors":(ge=g.richColors)!=null?ge:O,"data-styled":!(g.jsx||g.unstyled||y),"data-mounted":ne,"data-promise":!!g.promise,"data-swiped":Ke,"data-removed":re,"data-visible":Se,"data-y-position":ke,"data-x-position":Fe,"data-index":w,"data-front":We,"data-swiping":le,"data-dismissible":X,"data-type":Ee,"data-invert":ut,"data-swipe-out":ze,"data-swipe-direction":j,"data-expanded":!!(D||ce&&ne),"data-testid":g.testId,style:{"--index":w,"--toasts-before":w,"--z-index":N.length-w,"--offset":`${re?gt:it.current}px`,"--initial-height":ce?"auto":`${je}px`,...z,...g.style},onDragEnd:()=>{ve(!1),de(null),xt.current=null},onPointerDown:pe=>{pe.button!==2&&(Ut||!X||(J.current=new Date,Te(it.current),pe.target.setPointerCapture(pe.pointerId),pe.target.tagName!=="BUTTON"&&(ve(!0),xt.current={x:pe.clientX,y:pe.clientY})))},onPointerUp:()=>{var pe,Ie,pt;if(ze||!X)return;xt.current=null;const yt=Number(((pe=et.current)==null?void 0:pe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Nt=Number(((Ie=et.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Kt=new Date().getTime()-((pt=J.current)==null?void 0:pt.getTime()),dn=ue==="x"?yt:Nt,Xn=Math.abs(dn)/Kt;if(Math.abs(dn)>=lO||Xn>.11){Te(it.current),g.onDismiss==null||g.onDismiss.call(g,g),ee(ue==="x"?yt>0?"right":"left":Nt>0?"down":"up"),me(),qe(!0);return}else{var Rn,Jn;(Rn=et.current)==null||Rn.style.setProperty("--swipe-amount-x","0px"),(Jn=et.current)==null||Jn.style.setProperty("--swipe-amount-y","0px")}Pe(!1),ve(!1),de(null)},onPointerMove:pe=>{var Ie,pt,yt;if(!xt.current||!X||((Ie=window.getSelection())==null?void 0:Ie.toString().length)>0)return;const Kt=pe.clientY-xt.current.y,dn=pe.clientX-xt.current.x;var Xn;const Rn=(Xn=n.swipeDirections)!=null?Xn:uO(K);!ue&&(Math.abs(dn)>1||Math.abs(Kt)>1)&&de(Math.abs(dn)>Math.abs(Kt)?"x":"y");let Jn={x:0,y:0};const Qn=Si=>1/(1.5+Math.abs(Si)/20);if(ue==="y"){if(Rn.includes("top")||Rn.includes("bottom"))if(Rn.includes("top")&&Kt<0||Rn.includes("bottom")&&Kt>0)Jn.y=Kt;else{const Si=Kt*Qn(Kt);Jn.y=Math.abs(Si)<Math.abs(Kt)?Si:Kt}}else if(ue==="x"&&(Rn.includes("left")||Rn.includes("right")))if(Rn.includes("left")&&dn<0||Rn.includes("right")&&dn>0)Jn.x=dn;else{const Si=dn*Qn(dn);Jn.x=Math.abs(Si)<Math.abs(dn)?Si:dn}(Math.abs(Jn.x)>0||Math.abs(Jn.y)>0)&&Pe(!0),(pt=et.current)==null||pt.style.setProperty("--swipe-amount-x",`${Jn.x}px`),(yt=et.current)==null||yt.style.setProperty("--swipe-amount-y",`${Jn.y}px`)}},Ae&&!g.jsx&&Ee!=="loading"?St.createElement("button",{"aria-label":Q,"data-disabled":Ut,"data-close-button":!0,onClick:Ut||!X?()=>{}:()=>{me(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Gl(G?.closeButton,g==null||(i=g.classNames)==null?void 0:i.closeButton)},(xe=W?.close)!=null?xe:KU):null,(Ee||g.icon||g.promise)&&g.icon!==null&&(W?.[Ee]!==null||g.icon)?St.createElement("div",{"data-icon":"",className:Gl(G?.icon,g==null||(a=g.classNames)==null?void 0:a.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||tt():null,g.type!=="loading"?nt:null):null,St.createElement("div",{"data-content":"",className:Gl(G?.content,g==null||(r=g.classNames)==null?void 0:r.content)},St.createElement("div",{"data-title":"",className:Gl(G?.title,g==null||(o=g.classNames)==null?void 0:o.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?St.createElement("div",{"data-description":"",className:Gl(Y,fe,G?.description,g==null||(c=g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),St.isValidElement(g.cancel)?g.cancel:g.cancel&&ix(g.cancel)?St.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||F,onClick:pe=>{ix(g.cancel)&&X&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,pe),me())},className:Gl(G?.cancelButton,g==null||(d=g.classNames)==null?void 0:d.cancelButton)},g.cancel.label):null,St.isValidElement(g.action)?g.action:g.action&&ix(g.action)?St.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||L,onClick:pe=>{ix(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,pe),!pe.defaultPrevented&&me())},className:Gl(G?.actionButton,g==null||(f=g.classNames)==null?void 0:f.actionButton)},g.action.label):null)};function VE(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function fO(n,e){const t={};return[n,e].forEach((i,a)=>{const r=a===1,o=r?"--mobile-offset":"--offset",c=r?rO:aO;function d(f){["top","right","bottom","left"].forEach(m=>{t[`${o}-${m}`]=typeof f=="number"?`${f}px`:f})}typeof i=="number"||typeof i=="string"?d(i):typeof i=="object"?["top","right","bottom","left"].forEach(f=>{i[f]===void 0?t[`${o}-${f}`]=c:t[`${o}-${f}`]=typeof i[f]=="number"?`${i[f]}px`:i[f]}):d(c)}),t}const hO=St.forwardRef(function(e,t){const{id:i,invert:a,position:r="bottom-right",hotkey:o=["altKey","KeyT"],expand:c,closeButton:d,className:f,offset:m,mobileOffset:g,theme:y="light",richColors:_,duration:S,style:A,visibleToasts:T=iO,toastOptions:w,dir:N=VE(),gap:D=oO,icons:U,containerAriaLabel:O="Notifications"}=e,[B,z]=St.useState([]),F=St.useMemo(()=>i?B.filter(ne=>ne.toasterId===i):B.filter(ne=>!ne.toasterId),[B,i]),L=St.useMemo(()=>Array.from(new Set([r].concat(F.filter(ne=>ne.position).map(ne=>ne.position)))),[F,r]),[I,Y]=St.useState([]),[q,K]=St.useState(!1),[$,ce]=St.useState(!1),[G,W]=St.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=St.useRef(null),ue=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),de=St.useRef(null),j=St.useRef(!1),ee=St.useCallback(ne=>{z(oe=>{var re;return(re=oe.find(se=>se.id===ne.id))!=null&&re.delete||Ss.dismiss(ne.id),oe.filter(({id:se})=>se!==ne.id)})},[]);return St.useEffect(()=>Ss.subscribe(ne=>{if(ne.dismiss){requestAnimationFrame(()=>{z(oe=>oe.map(re=>re.id===ne.id?{...re,delete:!0}:re))});return}setTimeout(()=>{bC.flushSync(()=>{z(oe=>{const re=oe.findIndex(se=>se.id===ne.id);return re!==-1?[...oe.slice(0,re),{...oe[re],...ne},...oe.slice(re+1)]:[ne,...oe]})})})}),[B]),St.useEffect(()=>{if(y!=="system"){W(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;const ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:oe})=>{W(oe?"dark":"light")})}catch{ne.addListener(({matches:re})=>{try{W(re?"dark":"light")}catch(se){console.error(se)}})}},[y]),St.useEffect(()=>{B.length<=1&&K(!1)},[B]),St.useEffect(()=>{const ne=oe=>{var re;if(o.every(ve=>oe[ve]||oe.code===ve)){var le;K(!0),(le=Q.current)==null||le.focus()}oe.code==="Escape"&&(document.activeElement===Q.current||(re=Q.current)!=null&&re.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[o]),St.useEffect(()=>{if(Q.current)return()=>{de.current&&(de.current.focus({preventScroll:!0}),de.current=null,j.current=!1)}},[Q.current]),St.createElement("section",{ref:t,"aria-label":`${O} ${ue}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},L.map((ne,oe)=>{var re;const[se,le]=ne.split("-");return F.length?St.createElement("ol",{key:ne,dir:N==="auto"?VE():N,tabIndex:-1,ref:Q,className:f,"data-sonner-toaster":!0,"data-sonner-theme":G,"data-y-position":se,"data-x-position":le,style:{"--front-toast-height":`${((re=I[0])==null?void 0:re.height)||0}px`,"--width":`${sO}px`,"--gap":`${D}px`,...A,...fO(m,g)},onBlur:ve=>{j.current&&!ve.currentTarget.contains(ve.relatedTarget)&&(j.current=!1,de.current&&(de.current.focus({preventScroll:!0}),de.current=null))},onFocus:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||j.current||(j.current=!0,de.current=ve.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{$||K(!1)},onDragEnd:()=>K(!1),onPointerDown:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||ce(!0)},onPointerUp:()=>ce(!1)},F.filter(ve=>!ve.position&&oe===0||ve.position===ne).map((ve,ze)=>{var qe,Ke;return St.createElement(dO,{key:ve.id,icons:U,index:ze,toast:ve,defaultRichColors:_,duration:(qe=w?.duration)!=null?qe:S,className:w?.className,descriptionClassName:w?.descriptionClassName,invert:a,visibleToasts:T,closeButton:(Ke=w?.closeButton)!=null?Ke:d,interacting:$,position:ne,style:w?.style,unstyled:w?.unstyled,classNames:w?.classNames,cancelButtonStyle:w?.cancelButtonStyle,actionButtonStyle:w?.actionButtonStyle,closeButtonAriaLabel:w?.closeButtonAriaLabel,removeToast:ee,toasts:F.filter(Pe=>Pe.position==ve.position),heights:I.filter(Pe=>Pe.position==ve.position),setHeights:Y,expandByDefault:c,gap:D,expanded:q,swipeDirections:e.swipeDirections})})):null}))});var x_={exports:{}},Fc={};var GE;function pO(){return GE||(GE=1,Fc.ConcurrentRoot=1,Fc.ContinuousEventPriority=8,Fc.DefaultEventPriority=32,Fc.DiscreteEventPriority=2,Fc.IdleEventPriority=268435456,Fc.LegacyRoot=0,Fc.NoEventPriority=0),Fc}var WE;function mO(){return WE||(WE=1,x_.exports=pO()),x_.exports}var oy=mO();const Ab="182",gO={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},vO={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},_C=0,e2=1,SC=2,xO=3,wC=0,Sp=1,Wg=2,_f=3,$c=0,Ur=1,Co=2,ec=0,Af=1,nc=2,t2=3,n2=4,MC=5,nd=100,EC=101,TC=102,AC=103,CC=104,NC=200,RC=201,DC=202,UC=203,yy=204,by=205,OC=206,LC=207,zC=208,PC=209,IC=210,BC=211,kC=212,FC=213,jC=214,_y=0,Sy=1,wy=2,Uf=3,My=4,Ey=5,Ty=6,Ay=7,D0=0,HC=1,VC=2,No=0,$2=1,ew=2,tw=3,Cb=4,nw=5,iw=6,aw=7,i2="attached",GC="detached",Nb=300,ic=301,ld=302,c0=303,u0=304,Hp=306,d0=1e3,Rs=1001,f0=1002,ya=1003,rw=1004,yO=1004,yp=1005,bO=1005,Fi=1006,Xg=1007,_O=1007,Jl=1008,SO=1008,as=1009,sw=1010,ow=1011,Cp=1012,Rb=1013,Ro=1014,ss=1015,ac=1016,Db=1017,Ub=1018,Np=1020,lw=35902,cw=35899,uw=1021,dw=1022,Dr=1023,rc=1026,rd=1027,Ob=1028,U0=1029,Of=1030,Lb=1031,wO=1032,zb=1033,Yg=33776,qg=33777,Kg=33778,Zg=33779,Cy=35840,Ny=35841,Ry=35842,Dy=35843,Uy=36196,Oy=37492,Ly=37496,zy=37488,Py=37489,Iy=37490,By=37491,ky=37808,Fy=37809,jy=37810,Hy=37811,Vy=37812,Gy=37813,Wy=37814,Xy=37815,Yy=37816,qy=37817,Ky=37818,Zy=37819,Jy=37820,Qy=37821,$y=36492,eb=36494,tb=36495,nb=36283,ib=36284,ab=36285,rb=36286,WC=2200,XC=2201,YC=2202,h0=2300,sb=2301,ly=2302,Sf=2400,wf=2401,p0=2402,Pb=2500,fw=2501,MO=0,EO=1,TO=2,qC=3200,KC=3201,AO=3202,CO=3203,pd=0,ZC=1,Kc="",Rr="srgb",cd="srgb-linear",m0="linear",vi="srgb",NO="",RO="rg",DO="ga",UO=0,yf=7680,OO=7681,LO=7682,zO=7683,PO=34055,IO=34056,BO=5386,kO=512,FO=513,jO=514,HO=515,VO=516,GO=517,WO=518,a2=519,JC=512,QC=513,$C=514,Ib=515,eN=516,tN=517,Bb=518,nN=519,g0=35044,XO=35048,YO=35040,qO=35045,KO=35049,ZO=35041,JO=35046,QO=35050,$O=35042,eL="100",r2="300 es",$s=2e3,Rp=2001,tL={COMPUTE:"compute",RENDER:"render"},nL={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},iL={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function iN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const aL={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function bp(n,e){return new aL[n](e)}function aN(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function v0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function rN(){const n=v0("canvas");return n.style.display="block",n}const XE={};let ud=null;function rL(n){ud=n}function sL(){return ud}function x0(...n){const e="THREE."+n.shift();ud?ud("log",e,...n):console.log(e,...n)}function Rt(...n){const e="THREE."+n.shift();ud?ud("warn",e,...n):console.warn(e,...n)}function an(...n){const e="THREE."+n.shift();ud?ud("error",e,...n):console.error(e,...n)}function Dp(...n){const e=n.join(" ");e in XE||(XE[e]=!0,Rt(...n))}function oL(n,e,t){return new Promise(function(i,a){function r(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:a();break;case n.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}class lc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const a=i[e];if(a!==void 0){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const a=i.slice(0);for(let r=0,o=a.length;r<o;r++)a[r].call(this,e);e.target=null}}}const Tr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let YE=1234567;const Cf=Math.PI/180,Up=180/Math.PI;function eo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Tr[n&255]+Tr[n>>8&255]+Tr[n>>16&255]+Tr[n>>24&255]+"-"+Tr[e&255]+Tr[e>>8&255]+"-"+Tr[e>>16&15|64]+Tr[e>>24&255]+"-"+Tr[t&63|128]+Tr[t>>8&255]+"-"+Tr[t>>16&255]+Tr[t>>24&255]+Tr[i&255]+Tr[i>>8&255]+Tr[i>>16&255]+Tr[i>>24&255]).toLowerCase()}function fn(n,e,t){return Math.max(e,Math.min(t,n))}function hw(n,e){return(n%e+e)%e}function lL(n,e,t,i,a){return i+(n-e)*(a-i)/(t-e)}function cL(n,e,t){return n!==e?(t-n)/(e-n):0}function Jg(n,e,t){return(1-t)*n+t*e}function uL(n,e,t,i){return Jg(n,e,1-Math.exp(-t*i))}function dL(n,e=1){return e-Math.abs(hw(n,e*2)-e)}function fL(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function hL(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function pL(n,e){return n+Math.floor(Math.random()*(e-n+1))}function mL(n,e){return n+Math.random()*(e-n)}function gL(n){return n*(.5-Math.random())}function vL(n){n!==void 0&&(YE=n);let e=YE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function xL(n){return n*Cf}function yL(n){return n*Up}function bL(n){return(n&n-1)===0&&n!==0}function _L(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function SL(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function wL(n,e,t,i,a){const r=Math.cos,o=Math.sin,c=r(t/2),d=o(t/2),f=r((e+i)/2),m=o((e+i)/2),g=r((e-i)/2),y=o((e-i)/2),_=r((i-e)/2),S=o((i-e)/2);switch(a){case"XYX":n.set(c*m,d*g,d*y,c*f);break;case"YZY":n.set(d*y,c*m,d*g,c*f);break;case"ZXZ":n.set(d*g,d*y,c*m,c*f);break;case"XZX":n.set(c*m,d*S,d*_,c*f);break;case"YXY":n.set(d*_,c*m,d*S,c*f);break;case"ZYZ":n.set(d*S,d*_,c*m,c*f);break;default:Rt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function rs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Mn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const s2={DEG2RAD:Cf,RAD2DEG:Up,generateUUID:eo,clamp:fn,euclideanModulo:hw,mapLinear:lL,inverseLerp:cL,lerp:Jg,damp:uL,pingpong:dL,smoothstep:fL,smootherstep:hL,randInt:pL,randFloat:mL,randFloatSpread:gL,seededRandom:vL,degToRad:xL,radToDeg:yL,isPowerOfTwo:bL,ceilPowerOfTwo:_L,floorPowerOfTwo:SL,setQuaternionFromProperEuler:wL,normalize:Mn,denormalize:rs};class ft{constructor(e=0,t=0){ft.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6],this.y=a[1]*t+a[4]*i+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),a=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*a+e.x,this.y=r*a+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ds{constructor(e=0,t=0,i=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=a}static slerpFlat(e,t,i,a,r,o,c){let d=i[a+0],f=i[a+1],m=i[a+2],g=i[a+3],y=r[o+0],_=r[o+1],S=r[o+2],A=r[o+3];if(c<=0){e[t+0]=d,e[t+1]=f,e[t+2]=m,e[t+3]=g;return}if(c>=1){e[t+0]=y,e[t+1]=_,e[t+2]=S,e[t+3]=A;return}if(g!==A||d!==y||f!==_||m!==S){let T=d*y+f*_+m*S+g*A;T<0&&(y=-y,_=-_,S=-S,A=-A,T=-T);let w=1-c;if(T<.9995){const N=Math.acos(T),D=Math.sin(N);w=Math.sin(w*N)/D,c=Math.sin(c*N)/D,d=d*w+y*c,f=f*w+_*c,m=m*w+S*c,g=g*w+A*c}else{d=d*w+y*c,f=f*w+_*c,m=m*w+S*c,g=g*w+A*c;const N=1/Math.sqrt(d*d+f*f+m*m+g*g);d*=N,f*=N,m*=N,g*=N}}e[t]=d,e[t+1]=f,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,a,r,o){const c=i[a],d=i[a+1],f=i[a+2],m=i[a+3],g=r[o],y=r[o+1],_=r[o+2],S=r[o+3];return e[t]=c*S+m*g+d*_-f*y,e[t+1]=d*S+m*y+f*g-c*_,e[t+2]=f*S+m*_+c*y-d*g,e[t+3]=m*S-c*g-d*y-f*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,a){return this._x=e,this._y=t,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,a=e._y,r=e._z,o=e._order,c=Math.cos,d=Math.sin,f=c(i/2),m=c(a/2),g=c(r/2),y=d(i/2),_=d(a/2),S=d(r/2);switch(o){case"XYZ":this._x=y*m*g+f*_*S,this._y=f*_*g-y*m*S,this._z=f*m*S+y*_*g,this._w=f*m*g-y*_*S;break;case"YXZ":this._x=y*m*g+f*_*S,this._y=f*_*g-y*m*S,this._z=f*m*S-y*_*g,this._w=f*m*g+y*_*S;break;case"ZXY":this._x=y*m*g-f*_*S,this._y=f*_*g+y*m*S,this._z=f*m*S+y*_*g,this._w=f*m*g-y*_*S;break;case"ZYX":this._x=y*m*g-f*_*S,this._y=f*_*g+y*m*S,this._z=f*m*S-y*_*g,this._w=f*m*g+y*_*S;break;case"YZX":this._x=y*m*g+f*_*S,this._y=f*_*g+y*m*S,this._z=f*m*S-y*_*g,this._w=f*m*g-y*_*S;break;case"XZY":this._x=y*m*g-f*_*S,this._y=f*_*g-y*m*S,this._z=f*m*S+y*_*g,this._w=f*m*g+y*_*S;break;default:Rt("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,a=Math.sin(i);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],a=t[4],r=t[8],o=t[1],c=t[5],d=t[9],f=t[2],m=t[6],g=t[10],y=i+c+g;if(y>0){const _=.5/Math.sqrt(y+1);this._w=.25/_,this._x=(m-d)*_,this._y=(r-f)*_,this._z=(o-a)*_}else if(i>c&&i>g){const _=2*Math.sqrt(1+i-c-g);this._w=(m-d)/_,this._x=.25*_,this._y=(a+o)/_,this._z=(r+f)/_}else if(c>g){const _=2*Math.sqrt(1+c-i-g);this._w=(r-f)/_,this._x=(a+o)/_,this._y=.25*_,this._z=(d+m)/_}else{const _=2*Math.sqrt(1+g-i-c);this._w=(o-a)/_,this._x=(r+f)/_,this._y=(d+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const a=Math.min(1,t/i);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,a=e._y,r=e._z,o=e._w,c=t._x,d=t._y,f=t._z,m=t._w;return this._x=i*m+o*c+a*f-r*d,this._y=a*m+o*d+r*c-i*f,this._z=r*m+o*f+i*d-a*c,this._w=o*m-i*c-a*d-r*f,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,a=e._y,r=e._z,o=e._w,c=this.dot(e);c<0&&(i=-i,a=-a,r=-r,o=-o,c=-c);let d=1-t;if(c<.9995){const f=Math.acos(c),m=Math.sin(f);d=Math.sin(d*f)/m,t=Math.sin(t*f)/m,this._x=this._x*d+i*t,this._y=this._y*d+a*t,this._z=this._z*d+r*t,this._w=this._w*d+o*t,this._onChangeCallback()}else this._x=this._x*d+i*t,this._y=this._y*d+a*t,this._z=this._z*d+r*t,this._w=this._w*d+o*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(a*Math.sin(e),a*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class he{constructor(e=0,t=0,i=0){he.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(qE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(qE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,a=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*a,this.y=r[1]*t+r[4]*i+r[7]*a,this.z=r[2]*t+r[5]*i+r[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*a+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*a+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*a+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*a+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,a=this.z,r=e.x,o=e.y,c=e.z,d=e.w,f=2*(o*a-c*i),m=2*(c*t-r*a),g=2*(r*i-o*t);return this.x=t+d*f+o*g-c*m,this.y=i+d*m+c*f-r*g,this.z=a+d*g+r*m-o*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,a=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*a,this.y=r[1]*t+r[5]*i+r[9]*a,this.z=r[2]*t+r[6]*i+r[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,a=e.y,r=e.z,o=t.x,c=t.y,d=t.z;return this.x=a*d-r*c,this.y=r*o-i*d,this.z=i*c-a*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return y_.copy(this).projectOnVector(e),this.sub(y_)}reflect(e){return this.sub(y_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,a=this.z-e.z;return t*t+i*i+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const a=Math.sin(t)*e;return this.x=a*Math.sin(i),this.y=Math.cos(t)*e,this.z=a*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const y_=new he,qE=new Ds;class vn{constructor(e,t,i,a,r,o,c,d,f){vn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,a,r,o,c,d,f)}set(e,t,i,a,r,o,c,d,f){const m=this.elements;return m[0]=e,m[1]=a,m[2]=c,m[3]=t,m[4]=r,m[5]=d,m[6]=i,m[7]=o,m[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,r=this.elements,o=i[0],c=i[3],d=i[6],f=i[1],m=i[4],g=i[7],y=i[2],_=i[5],S=i[8],A=a[0],T=a[3],w=a[6],N=a[1],D=a[4],U=a[7],O=a[2],B=a[5],z=a[8];return r[0]=o*A+c*N+d*O,r[3]=o*T+c*D+d*B,r[6]=o*w+c*U+d*z,r[1]=f*A+m*N+g*O,r[4]=f*T+m*D+g*B,r[7]=f*w+m*U+g*z,r[2]=y*A+_*N+S*O,r[5]=y*T+_*D+S*B,r[8]=y*w+_*U+S*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],a=e[2],r=e[3],o=e[4],c=e[5],d=e[6],f=e[7],m=e[8];return t*o*m-t*c*f-i*r*m+i*c*d+a*r*f-a*o*d}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],r=e[3],o=e[4],c=e[5],d=e[6],f=e[7],m=e[8],g=m*o-c*f,y=c*d-m*r,_=f*r-o*d,S=t*g+i*y+a*_;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/S;return e[0]=g*A,e[1]=(a*f-m*i)*A,e[2]=(c*i-a*o)*A,e[3]=y*A,e[4]=(m*t-a*d)*A,e[5]=(a*r-c*t)*A,e[6]=_*A,e[7]=(i*d-f*t)*A,e[8]=(o*t-i*r)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,a,r,o,c){const d=Math.cos(r),f=Math.sin(r);return this.set(i*d,i*f,-i*(d*o+f*c)+o+e,-a*f,a*d,-a*(-f*o+d*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(b_.makeScale(e,t)),this}rotate(e){return this.premultiply(b_.makeRotation(-e)),this}translate(e,t){return this.premultiply(b_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<9;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const b_=new vn,KE=new vn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ZE=new vn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function ML(){const n={enabled:!0,workingColorSpace:cd,spaces:{},convert:function(a,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===vi&&(a.r=Qc(a.r),a.g=Qc(a.g),a.b=Qc(a.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(a.applyMatrix3(this.spaces[r].toXYZ),a.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===vi&&(a.r=wp(a.r),a.g=wp(a.g),a.b=wp(a.b))),a},workingToColorSpace:function(a,r){return this.convert(a,this.workingColorSpace,r)},colorSpaceToWorking:function(a,r){return this.convert(a,r,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Kc?m0:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,r=this.workingColorSpace){return a.fromArray(this.spaces[r].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,r,o){return a.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,r){return Dp("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(a,r)},toWorkingColorSpace:function(a,r){return Dp("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(a,r)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[cd]:{primaries:e,whitePoint:i,transfer:m0,toXYZ:KE,fromXYZ:ZE,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Rr},outputColorSpaceConfig:{drawingBufferColorSpace:Rr}},[Rr]:{primaries:e,whitePoint:i,transfer:vi,toXYZ:KE,fromXYZ:ZE,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Rr}}}),n}const Wn=ML();function Qc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function wp(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let jh;class sN{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{jh===void 0&&(jh=v0("canvas")),jh.width=e.width,jh.height=e.height;const a=jh.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),i=jh}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=v0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const a=i.getImageData(0,0,e.width,e.height),r=a.data;for(let o=0;o<r.length;o++)r[o]=Qc(r[o]/255)*255;return i.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Qc(t[i]/255)*255):t[i]=Qc(t[i]);return{data:t,width:e.width,height:e.height}}else return Rt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let EL=0;class sd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:EL++}),this.uuid=eo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let r;if(Array.isArray(a)){r=[];for(let o=0,c=a.length;o<c;o++)a[o].isDataTexture?r.push(__(a[o].image)):r.push(__(a[o]))}else r=__(a);i.url=r}return t||(e.images[this.uuid]=i),i}}function __(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?sN.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Rt("Texture: Unable to serialize Texture."),{})}let TL=0;const S_=new he;class ra extends lc{constructor(e=ra.DEFAULT_IMAGE,t=ra.DEFAULT_MAPPING,i=Rs,a=Rs,r=Fi,o=Jl,c=Dr,d=as,f=ra.DEFAULT_ANISOTROPY,m=Kc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:TL++}),this.uuid=eo(),this.name="",this.source=new sd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=r,this.minFilter=o,this.anisotropy=f,this.format=c,this.internalFormat=null,this.type=d,this.offset=new ft(0,0),this.repeat=new ft(1,1),this.center=new ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(S_).x}get height(){return this.source.getSize(S_).y}get depth(){return this.source.getSize(S_).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){Rt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){Rt(`Texture.setValues(): property '${t}' does not exist.`);continue}a&&i&&a.isVector2&&i.isVector2||a&&i&&a.isVector3&&i.isVector3||a&&i&&a.isMatrix3&&i.isMatrix3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Nb)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case d0:e.x=e.x-Math.floor(e.x);break;case Rs:e.x=e.x<0?0:1;break;case f0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case d0:e.y=e.y-Math.floor(e.y);break;case Rs:e.y=e.y<0?0:1;break;case f0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ra.DEFAULT_IMAGE=null;ra.DEFAULT_MAPPING=Nb;ra.DEFAULT_ANISOTROPY=1;class _i{constructor(e=0,t=0,i=0,a=1){_i.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,a){return this.x=e,this.y=t,this.z=i,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*a+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*a+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*a+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*a+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,a,r;const d=e.elements,f=d[0],m=d[4],g=d[8],y=d[1],_=d[5],S=d[9],A=d[2],T=d[6],w=d[10];if(Math.abs(m-y)<.01&&Math.abs(g-A)<.01&&Math.abs(S-T)<.01){if(Math.abs(m+y)<.1&&Math.abs(g+A)<.1&&Math.abs(S+T)<.1&&Math.abs(f+_+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(f+1)/2,U=(_+1)/2,O=(w+1)/2,B=(m+y)/4,z=(g+A)/4,F=(S+T)/4;return D>U&&D>O?D<.01?(i=0,a=.707106781,r=.707106781):(i=Math.sqrt(D),a=B/i,r=z/i):U>O?U<.01?(i=.707106781,a=0,r=.707106781):(a=Math.sqrt(U),i=B/a,r=F/a):O<.01?(i=.707106781,a=.707106781,r=0):(r=Math.sqrt(O),i=z/r,a=F/r),this.set(i,a,r,t),this}let N=Math.sqrt((T-S)*(T-S)+(g-A)*(g-A)+(y-m)*(y-m));return Math.abs(N)<.001&&(N=1),this.x=(T-S)/N,this.y=(g-A)/N,this.z=(y-m)/N,this.w=Math.acos((f+_+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this.w=fn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this.w=fn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class pw extends lc{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new _i(0,0,e,t),this.scissorTest=!1,this.viewport=new _i(0,0,e,t);const a={width:e,height:t,depth:i.depth},r=new ra(a);this.textures=[];const o=i.count;for(let c=0;c<o;c++)this.textures[c]=r.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Fi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let a=0,r=this.textures.length;a<r;a++)this.textures[a].image.width=e,this.textures[a].image.height=t,this.textures[a].image.depth=i,this.textures[a].isData3DTexture!==!0&&(this.textures[a].isArrayTexture=this.textures[a].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const a=Object.assign({},e.textures[t].image);this.textures[t].source=new sd(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class to extends pw{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class kb extends ra{constructor(e=null,t=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=ya,this.minFilter=ya,this.wrapR=Rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class AL extends to{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new kb(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Fb extends ra{constructor(e=null,t=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=ya,this.minFilter=ya,this.wrapR=Rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class CL extends to{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Fb(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class $a{constructor(e=new he(1/0,1/0,1/0),t=new he(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(rl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(rl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=rl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,c=r.count;o<c;o++)e.isMesh===!0?e.getVertexPosition(o,rl):rl.fromBufferAttribute(r,o),rl.applyMatrix4(e.matrixWorld),this.expandByPoint(rl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ax.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),ax.copy(i.boundingBox)),ax.applyMatrix4(e.matrixWorld),this.union(ax)}const a=e.children;for(let r=0,o=a.length;r<o;r++)this.expandByObject(a[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,rl),rl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bg),rx.subVectors(this.max,bg),Hh.subVectors(e.a,bg),Vh.subVectors(e.b,bg),Gh.subVectors(e.c,bg),Xu.subVectors(Vh,Hh),Yu.subVectors(Gh,Vh),ef.subVectors(Hh,Gh);let t=[0,-Xu.z,Xu.y,0,-Yu.z,Yu.y,0,-ef.z,ef.y,Xu.z,0,-Xu.x,Yu.z,0,-Yu.x,ef.z,0,-ef.x,-Xu.y,Xu.x,0,-Yu.y,Yu.x,0,-ef.y,ef.x,0];return!w_(t,Hh,Vh,Gh,rx)||(t=[1,0,0,0,1,0,0,0,1],!w_(t,Hh,Vh,Gh,rx))?!1:(sx.crossVectors(Xu,Yu),t=[sx.x,sx.y,sx.z],w_(t,Hh,Vh,Gh,rx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(rl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(jc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const jc=[new he,new he,new he,new he,new he,new he,new he,new he],rl=new he,ax=new $a,Hh=new he,Vh=new he,Gh=new he,Xu=new he,Yu=new he,ef=new he,bg=new he,rx=new he,sx=new he,tf=new he;function w_(n,e,t,i,a){for(let r=0,o=n.length-3;r<=o;r+=3){tf.fromArray(n,r);const c=a.x*Math.abs(tf.x)+a.y*Math.abs(tf.y)+a.z*Math.abs(tf.z),d=e.dot(tf),f=t.dot(tf),m=i.dot(tf);if(Math.max(-Math.max(d,f,m),Math.min(d,f,m))>c)return!1}return!0}const NL=new $a,_g=new he,M_=new he;class er{constructor(e=new he,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):NL.setFromPoints(e).getCenter(i);let a=0;for(let r=0,o=e.length;r<o;r++)a=Math.max(a,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_g.subVectors(e,this.center);const t=_g.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),a=(i-this.radius)*.5;this.center.addScaledVector(_g,a/i),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(M_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_g.copy(e.center).add(M_)),this.expandByPoint(_g.copy(e.center).sub(M_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Hc=new he,E_=new he,ox=new he,qu=new he,T_=new he,lx=new he,A_=new he;class Vp{constructor(e=new he,t=new he(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Hc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Hc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Hc.copy(this.origin).addScaledVector(this.direction,t),Hc.distanceToSquared(e))}distanceSqToSegment(e,t,i,a){E_.copy(e).add(t).multiplyScalar(.5),ox.copy(t).sub(e).normalize(),qu.copy(this.origin).sub(E_);const r=e.distanceTo(t)*.5,o=-this.direction.dot(ox),c=qu.dot(this.direction),d=-qu.dot(ox),f=qu.lengthSq(),m=Math.abs(1-o*o);let g,y,_,S;if(m>0)if(g=o*d-c,y=o*c-d,S=r*m,g>=0)if(y>=-S)if(y<=S){const A=1/m;g*=A,y*=A,_=g*(g+o*y+2*c)+y*(o*g+y+2*d)+f}else y=r,g=Math.max(0,-(o*y+c)),_=-g*g+y*(y+2*d)+f;else y=-r,g=Math.max(0,-(o*y+c)),_=-g*g+y*(y+2*d)+f;else y<=-S?(g=Math.max(0,-(-o*r+c)),y=g>0?-r:Math.min(Math.max(-r,-d),r),_=-g*g+y*(y+2*d)+f):y<=S?(g=0,y=Math.min(Math.max(-r,-d),r),_=y*(y+2*d)+f):(g=Math.max(0,-(o*r+c)),y=g>0?r:Math.min(Math.max(-r,-d),r),_=-g*g+y*(y+2*d)+f);else y=o>0?-r:r,g=Math.max(0,-(o*y+c)),_=-g*g+y*(y+2*d)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,g),a&&a.copy(E_).addScaledVector(ox,y),_}intersectSphere(e,t){Hc.subVectors(e.center,this.origin);const i=Hc.dot(this.direction),a=Hc.dot(Hc)-i*i,r=e.radius*e.radius;if(a>r)return null;const o=Math.sqrt(r-a),c=i-o,d=i+o;return d<0?null:c<0?this.at(d,t):this.at(c,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,a,r,o,c,d;const f=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,y=this.origin;return f>=0?(i=(e.min.x-y.x)*f,a=(e.max.x-y.x)*f):(i=(e.max.x-y.x)*f,a=(e.min.x-y.x)*f),m>=0?(r=(e.min.y-y.y)*m,o=(e.max.y-y.y)*m):(r=(e.max.y-y.y)*m,o=(e.min.y-y.y)*m),i>o||r>a||((r>i||isNaN(i))&&(i=r),(o<a||isNaN(a))&&(a=o),g>=0?(c=(e.min.z-y.z)*g,d=(e.max.z-y.z)*g):(c=(e.max.z-y.z)*g,d=(e.min.z-y.z)*g),i>d||c>a)||((c>i||i!==i)&&(i=c),(d<a||a!==a)&&(a=d),a<0)?null:this.at(i>=0?i:a,t)}intersectsBox(e){return this.intersectBox(e,Hc)!==null}intersectTriangle(e,t,i,a,r){T_.subVectors(t,e),lx.subVectors(i,e),A_.crossVectors(T_,lx);let o=this.direction.dot(A_),c;if(o>0){if(a)return null;c=1}else if(o<0)c=-1,o=-o;else return null;qu.subVectors(this.origin,e);const d=c*this.direction.dot(lx.crossVectors(qu,lx));if(d<0)return null;const f=c*this.direction.dot(T_.cross(qu));if(f<0||d+f>o)return null;const m=-c*qu.dot(A_);return m<0?null:this.at(m/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class hn{constructor(e,t,i,a,r,o,c,d,f,m,g,y,_,S,A,T){hn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,a,r,o,c,d,f,m,g,y,_,S,A,T)}set(e,t,i,a,r,o,c,d,f,m,g,y,_,S,A,T){const w=this.elements;return w[0]=e,w[4]=t,w[8]=i,w[12]=a,w[1]=r,w[5]=o,w[9]=c,w[13]=d,w[2]=f,w[6]=m,w[10]=g,w[14]=y,w[3]=_,w[7]=S,w[11]=A,w[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new hn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,a=1/Wh.setFromMatrixColumn(e,0).length(),r=1/Wh.setFromMatrixColumn(e,1).length(),o=1/Wh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*a,t[1]=i[1]*a,t[2]=i[2]*a,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,a=e.y,r=e.z,o=Math.cos(i),c=Math.sin(i),d=Math.cos(a),f=Math.sin(a),m=Math.cos(r),g=Math.sin(r);if(e.order==="XYZ"){const y=o*m,_=o*g,S=c*m,A=c*g;t[0]=d*m,t[4]=-d*g,t[8]=f,t[1]=_+S*f,t[5]=y-A*f,t[9]=-c*d,t[2]=A-y*f,t[6]=S+_*f,t[10]=o*d}else if(e.order==="YXZ"){const y=d*m,_=d*g,S=f*m,A=f*g;t[0]=y+A*c,t[4]=S*c-_,t[8]=o*f,t[1]=o*g,t[5]=o*m,t[9]=-c,t[2]=_*c-S,t[6]=A+y*c,t[10]=o*d}else if(e.order==="ZXY"){const y=d*m,_=d*g,S=f*m,A=f*g;t[0]=y-A*c,t[4]=-o*g,t[8]=S+_*c,t[1]=_+S*c,t[5]=o*m,t[9]=A-y*c,t[2]=-o*f,t[6]=c,t[10]=o*d}else if(e.order==="ZYX"){const y=o*m,_=o*g,S=c*m,A=c*g;t[0]=d*m,t[4]=S*f-_,t[8]=y*f+A,t[1]=d*g,t[5]=A*f+y,t[9]=_*f-S,t[2]=-f,t[6]=c*d,t[10]=o*d}else if(e.order==="YZX"){const y=o*d,_=o*f,S=c*d,A=c*f;t[0]=d*m,t[4]=A-y*g,t[8]=S*g+_,t[1]=g,t[5]=o*m,t[9]=-c*m,t[2]=-f*m,t[6]=_*g+S,t[10]=y-A*g}else if(e.order==="XZY"){const y=o*d,_=o*f,S=c*d,A=c*f;t[0]=d*m,t[4]=-g,t[8]=f*m,t[1]=y*g+A,t[5]=o*m,t[9]=_*g-S,t[2]=S*g-_,t[6]=c*m,t[10]=A*g+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(RL,e,DL)}lookAt(e,t,i){const a=this.elements;return Ys.subVectors(e,t),Ys.lengthSq()===0&&(Ys.z=1),Ys.normalize(),Ku.crossVectors(i,Ys),Ku.lengthSq()===0&&(Math.abs(i.z)===1?Ys.x+=1e-4:Ys.z+=1e-4,Ys.normalize(),Ku.crossVectors(i,Ys)),Ku.normalize(),cx.crossVectors(Ys,Ku),a[0]=Ku.x,a[4]=cx.x,a[8]=Ys.x,a[1]=Ku.y,a[5]=cx.y,a[9]=Ys.y,a[2]=Ku.z,a[6]=cx.z,a[10]=Ys.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,r=this.elements,o=i[0],c=i[4],d=i[8],f=i[12],m=i[1],g=i[5],y=i[9],_=i[13],S=i[2],A=i[6],T=i[10],w=i[14],N=i[3],D=i[7],U=i[11],O=i[15],B=a[0],z=a[4],F=a[8],L=a[12],I=a[1],Y=a[5],q=a[9],K=a[13],$=a[2],ce=a[6],G=a[10],W=a[14],Q=a[3],ue=a[7],de=a[11],j=a[15];return r[0]=o*B+c*I+d*$+f*Q,r[4]=o*z+c*Y+d*ce+f*ue,r[8]=o*F+c*q+d*G+f*de,r[12]=o*L+c*K+d*W+f*j,r[1]=m*B+g*I+y*$+_*Q,r[5]=m*z+g*Y+y*ce+_*ue,r[9]=m*F+g*q+y*G+_*de,r[13]=m*L+g*K+y*W+_*j,r[2]=S*B+A*I+T*$+w*Q,r[6]=S*z+A*Y+T*ce+w*ue,r[10]=S*F+A*q+T*G+w*de,r[14]=S*L+A*K+T*W+w*j,r[3]=N*B+D*I+U*$+O*Q,r[7]=N*z+D*Y+U*ce+O*ue,r[11]=N*F+D*q+U*G+O*de,r[15]=N*L+D*K+U*W+O*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],a=e[8],r=e[12],o=e[1],c=e[5],d=e[9],f=e[13],m=e[2],g=e[6],y=e[10],_=e[14],S=e[3],A=e[7],T=e[11],w=e[15],N=d*_-f*y,D=c*_-f*g,U=c*y-d*g,O=o*_-f*m,B=o*y-d*m,z=o*g-c*m;return t*(A*N-T*D+w*U)-i*(S*N-T*O+w*B)+a*(S*D-A*O+w*z)-r*(S*U-A*B+T*z)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],r=e[3],o=e[4],c=e[5],d=e[6],f=e[7],m=e[8],g=e[9],y=e[10],_=e[11],S=e[12],A=e[13],T=e[14],w=e[15],N=g*T*f-A*y*f+A*d*_-c*T*_-g*d*w+c*y*w,D=S*y*f-m*T*f-S*d*_+o*T*_+m*d*w-o*y*w,U=m*A*f-S*g*f+S*c*_-o*A*_-m*c*w+o*g*w,O=S*g*d-m*A*d-S*c*y+o*A*y+m*c*T-o*g*T,B=t*N+i*D+a*U+r*O;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/B;return e[0]=N*z,e[1]=(A*y*r-g*T*r-A*a*_+i*T*_+g*a*w-i*y*w)*z,e[2]=(c*T*r-A*d*r+A*a*f-i*T*f-c*a*w+i*d*w)*z,e[3]=(g*d*r-c*y*r-g*a*f+i*y*f+c*a*_-i*d*_)*z,e[4]=D*z,e[5]=(m*T*r-S*y*r+S*a*_-t*T*_-m*a*w+t*y*w)*z,e[6]=(S*d*r-o*T*r-S*a*f+t*T*f+o*a*w-t*d*w)*z,e[7]=(o*y*r-m*d*r+m*a*f-t*y*f-o*a*_+t*d*_)*z,e[8]=U*z,e[9]=(S*g*r-m*A*r-S*i*_+t*A*_+m*i*w-t*g*w)*z,e[10]=(o*A*r-S*c*r+S*i*f-t*A*f-o*i*w+t*c*w)*z,e[11]=(m*c*r-o*g*r-m*i*f+t*g*f+o*i*_-t*c*_)*z,e[12]=O*z,e[13]=(m*A*a-S*g*a+S*i*y-t*A*y-m*i*T+t*g*T)*z,e[14]=(S*c*a-o*A*a-S*i*d+t*A*d+o*i*T-t*c*T)*z,e[15]=(o*g*a-m*c*a+m*i*d-t*g*d-o*i*y+t*c*y)*z,this}scale(e){const t=this.elements,i=e.x,a=e.y,r=e.z;return t[0]*=i,t[4]*=a,t[8]*=r,t[1]*=i,t[5]*=a,t[9]*=r,t[2]*=i,t[6]*=a,t[10]*=r,t[3]*=i,t[7]*=a,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,a))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),a=Math.sin(t),r=1-i,o=e.x,c=e.y,d=e.z,f=r*o,m=r*c;return this.set(f*o+i,f*c-a*d,f*d+a*c,0,f*c+a*d,m*c+i,m*d-a*o,0,f*d-a*c,m*d+a*o,r*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,a,r,o){return this.set(1,i,r,0,e,1,o,0,t,a,1,0,0,0,0,1),this}compose(e,t,i){const a=this.elements,r=t._x,o=t._y,c=t._z,d=t._w,f=r+r,m=o+o,g=c+c,y=r*f,_=r*m,S=r*g,A=o*m,T=o*g,w=c*g,N=d*f,D=d*m,U=d*g,O=i.x,B=i.y,z=i.z;return a[0]=(1-(A+w))*O,a[1]=(_+U)*O,a[2]=(S-D)*O,a[3]=0,a[4]=(_-U)*B,a[5]=(1-(y+w))*B,a[6]=(T+N)*B,a[7]=0,a[8]=(S+D)*z,a[9]=(T-N)*z,a[10]=(1-(y+A))*z,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,i){const a=this.elements;if(e.x=a[12],e.y=a[13],e.z=a[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let r=Wh.set(a[0],a[1],a[2]).length();const o=Wh.set(a[4],a[5],a[6]).length(),c=Wh.set(a[8],a[9],a[10]).length();this.determinant()<0&&(r=-r),sl.copy(this);const f=1/r,m=1/o,g=1/c;return sl.elements[0]*=f,sl.elements[1]*=f,sl.elements[2]*=f,sl.elements[4]*=m,sl.elements[5]*=m,sl.elements[6]*=m,sl.elements[8]*=g,sl.elements[9]*=g,sl.elements[10]*=g,t.setFromRotationMatrix(sl),i.x=r,i.y=o,i.z=c,this}makePerspective(e,t,i,a,r,o,c=$s,d=!1){const f=this.elements,m=2*r/(t-e),g=2*r/(i-a),y=(t+e)/(t-e),_=(i+a)/(i-a);let S,A;if(d)S=r/(o-r),A=o*r/(o-r);else if(c===$s)S=-(o+r)/(o-r),A=-2*o*r/(o-r);else if(c===Rp)S=-o/(o-r),A=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return f[0]=m,f[4]=0,f[8]=y,f[12]=0,f[1]=0,f[5]=g,f[9]=_,f[13]=0,f[2]=0,f[6]=0,f[10]=S,f[14]=A,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,i,a,r,o,c=$s,d=!1){const f=this.elements,m=2/(t-e),g=2/(i-a),y=-(t+e)/(t-e),_=-(i+a)/(i-a);let S,A;if(d)S=1/(o-r),A=o/(o-r);else if(c===$s)S=-2/(o-r),A=-(o+r)/(o-r);else if(c===Rp)S=-1/(o-r),A=-r/(o-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return f[0]=m,f[4]=0,f[8]=0,f[12]=y,f[1]=0,f[5]=g,f[9]=0,f[13]=_,f[2]=0,f[6]=0,f[10]=S,f[14]=A,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<16;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Wh=new he,sl=new hn,RL=new he(0,0,0),DL=new he(1,1,1),Ku=new he,cx=new he,Ys=new he,JE=new hn,QE=new Ds;class io{constructor(e=0,t=0,i=0,a=io.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,a=this._order){return this._x=e,this._y=t,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const a=e.elements,r=a[0],o=a[4],c=a[8],d=a[1],f=a[5],m=a[9],g=a[2],y=a[6],_=a[10];switch(t){case"XYZ":this._y=Math.asin(fn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-fn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(d,f)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(fn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(d,r));break;case"ZYX":this._y=Math.asin(-fn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,_),this._z=Math.atan2(d,r)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(fn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-m,f),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-fn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(c,r)):(this._x=Math.atan2(-m,_),this._y=0);break;default:Rt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return JE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(JE,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return QE.setFromEuler(this),this.setFromQuaternion(QE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}io.DEFAULT_ORDER="XYZ";let Op=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},UL=0;const $E=new he,Xh=new Ds,Vc=new hn,ux=new he,Sg=new he,OL=new he,LL=new Ds,eT=new he(1,0,0),tT=new he(0,1,0),nT=new he(0,0,1),iT={type:"added"},zL={type:"removed"},Yh={type:"childadded",child:null},C_={type:"childremoved",child:null};class ii extends lc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:UL++}),this.uuid=eo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ii.DEFAULT_UP.clone();const e=new he,t=new io,i=new Ds,a=new he(1,1,1);function r(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new hn},normalMatrix:{value:new vn}}),this.matrix=new hn,this.matrixWorld=new hn,this.matrixAutoUpdate=ii.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Op,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Xh.setFromAxisAngle(e,t),this.quaternion.multiply(Xh),this}rotateOnWorldAxis(e,t){return Xh.setFromAxisAngle(e,t),this.quaternion.premultiply(Xh),this}rotateX(e){return this.rotateOnAxis(eT,e)}rotateY(e){return this.rotateOnAxis(tT,e)}rotateZ(e){return this.rotateOnAxis(nT,e)}translateOnAxis(e,t){return $E.copy(e).applyQuaternion(this.quaternion),this.position.add($E.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(eT,e)}translateY(e){return this.translateOnAxis(tT,e)}translateZ(e){return this.translateOnAxis(nT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Vc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?ux.copy(e):ux.set(e,t,i);const a=this.parent;this.updateWorldMatrix(!0,!1),Sg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vc.lookAt(Sg,ux,this.up):Vc.lookAt(ux,Sg,this.up),this.quaternion.setFromRotationMatrix(Vc),a&&(Vc.extractRotation(a.matrixWorld),Xh.setFromRotationMatrix(Vc),this.quaternion.premultiply(Xh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(an("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(iT),Yh.child=e,this.dispatchEvent(Yh),Yh.child=null):an("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(zL),C_.child=e,this.dispatchEvent(C_),C_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Vc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Vc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(iT),Yh.child=e,this.dispatchEvent(Yh),Yh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,a=this.children.length;i<a;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const a=this.children;for(let r=0,o=a.length;r<o;r++)a[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sg,e,OL),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sg,LL,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const a=this.children;for(let r=0,o=a.length;r<o;r++)a[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(c=>({...c})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function r(c,d){return c[d.uuid]===void 0&&(c[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=r(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const d=c.shapes;if(Array.isArray(d))for(let f=0,m=d.length;f<m;f++){const g=d[f];r(e.shapes,g)}else r(e.shapes,d)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let d=0,f=this.material.length;d<f;d++)c.push(r(e.materials,this.material[d]));a.material=c}else a.material=r(e.materials,this.material);if(this.children.length>0){a.children=[];for(let c=0;c<this.children.length;c++)a.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let c=0;c<this.animations.length;c++){const d=this.animations[c];a.animations.push(r(e.animations,d))}}if(t){const c=o(e.geometries),d=o(e.materials),f=o(e.textures),m=o(e.images),g=o(e.shapes),y=o(e.skeletons),_=o(e.animations),S=o(e.nodes);c.length>0&&(i.geometries=c),d.length>0&&(i.materials=d),f.length>0&&(i.textures=f),m.length>0&&(i.images=m),g.length>0&&(i.shapes=g),y.length>0&&(i.skeletons=y),_.length>0&&(i.animations=_),S.length>0&&(i.nodes=S)}return i.object=a,i;function o(c){const d=[];for(const f in c){const m=c[f];delete m.metadata,d.push(m)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const a=e.children[i];this.add(a.clone())}return this}}ii.DEFAULT_UP=new he(0,1,0);ii.DEFAULT_MATRIX_AUTO_UPDATE=!0;ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ol=new he,Gc=new he,N_=new he,Wc=new he,qh=new he,Kh=new he,aT=new he,R_=new he,D_=new he,U_=new he,O_=new _i,L_=new _i,z_=new _i;class Cs{constructor(e=new he,t=new he,i=new he){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,a){a.subVectors(i,t),ol.subVectors(e,t),a.cross(ol);const r=a.lengthSq();return r>0?a.multiplyScalar(1/Math.sqrt(r)):a.set(0,0,0)}static getBarycoord(e,t,i,a,r){ol.subVectors(a,t),Gc.subVectors(i,t),N_.subVectors(e,t);const o=ol.dot(ol),c=ol.dot(Gc),d=ol.dot(N_),f=Gc.dot(Gc),m=Gc.dot(N_),g=o*f-c*c;if(g===0)return r.set(0,0,0),null;const y=1/g,_=(f*d-c*m)*y,S=(o*m-c*d)*y;return r.set(1-_-S,S,_)}static containsPoint(e,t,i,a){return this.getBarycoord(e,t,i,a,Wc)===null?!1:Wc.x>=0&&Wc.y>=0&&Wc.x+Wc.y<=1}static getInterpolation(e,t,i,a,r,o,c,d){return this.getBarycoord(e,t,i,a,Wc)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(r,Wc.x),d.addScaledVector(o,Wc.y),d.addScaledVector(c,Wc.z),d)}static getInterpolatedAttribute(e,t,i,a,r,o){return O_.setScalar(0),L_.setScalar(0),z_.setScalar(0),O_.fromBufferAttribute(e,t),L_.fromBufferAttribute(e,i),z_.fromBufferAttribute(e,a),o.setScalar(0),o.addScaledVector(O_,r.x),o.addScaledVector(L_,r.y),o.addScaledVector(z_,r.z),o}static isFrontFacing(e,t,i,a){return ol.subVectors(i,t),Gc.subVectors(e,t),ol.cross(Gc).dot(a)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,a){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,i,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ol.subVectors(this.c,this.b),Gc.subVectors(this.a,this.b),ol.cross(Gc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Cs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Cs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,a,r){return Cs.getInterpolation(e,this.a,this.b,this.c,t,i,a,r)}containsPoint(e){return Cs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Cs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,a=this.b,r=this.c;let o,c;qh.subVectors(a,i),Kh.subVectors(r,i),R_.subVectors(e,i);const d=qh.dot(R_),f=Kh.dot(R_);if(d<=0&&f<=0)return t.copy(i);D_.subVectors(e,a);const m=qh.dot(D_),g=Kh.dot(D_);if(m>=0&&g<=m)return t.copy(a);const y=d*g-m*f;if(y<=0&&d>=0&&m<=0)return o=d/(d-m),t.copy(i).addScaledVector(qh,o);U_.subVectors(e,r);const _=qh.dot(U_),S=Kh.dot(U_);if(S>=0&&_<=S)return t.copy(r);const A=_*f-d*S;if(A<=0&&f>=0&&S<=0)return c=f/(f-S),t.copy(i).addScaledVector(Kh,c);const T=m*S-_*g;if(T<=0&&g-m>=0&&_-S>=0)return aT.subVectors(r,a),c=(g-m)/(g-m+(_-S)),t.copy(a).addScaledVector(aT,c);const w=1/(T+A+y);return o=A*w,c=y*w,t.copy(i).addScaledVector(qh,o).addScaledVector(Kh,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const oN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zu={h:0,s:0,l:0},dx={h:0,s:0,l:0};function P_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Tt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Rr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Wn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,a=Wn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Wn.colorSpaceToWorking(this,a),this}setHSL(e,t,i,a=Wn.workingColorSpace){if(e=hw(e,1),t=fn(t,0,1),i=fn(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,o=2*i-r;this.r=P_(o,r,e+1/3),this.g=P_(o,r,e),this.b=P_(o,r,e-1/3)}return Wn.colorSpaceToWorking(this,a),this}setStyle(e,t=Rr){function i(r){r!==void 0&&parseFloat(r)<1&&Rt("Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=a[1],c=a[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:Rt("Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=a[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);Rt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Rr){const i=oN[e.toLowerCase()];return i!==void 0?this.setHex(i,t):Rt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Qc(e.r),this.g=Qc(e.g),this.b=Qc(e.b),this}copyLinearToSRGB(e){return this.r=wp(e.r),this.g=wp(e.g),this.b=wp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Rr){return Wn.workingToColorSpace(Ar.copy(this),e),Math.round(fn(Ar.r*255,0,255))*65536+Math.round(fn(Ar.g*255,0,255))*256+Math.round(fn(Ar.b*255,0,255))}getHexString(e=Rr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Wn.workingColorSpace){Wn.workingToColorSpace(Ar.copy(this),t);const i=Ar.r,a=Ar.g,r=Ar.b,o=Math.max(i,a,r),c=Math.min(i,a,r);let d,f;const m=(c+o)/2;if(c===o)d=0,f=0;else{const g=o-c;switch(f=m<=.5?g/(o+c):g/(2-o-c),o){case i:d=(a-r)/g+(a<r?6:0);break;case a:d=(r-i)/g+2;break;case r:d=(i-a)/g+4;break}d/=6}return e.h=d,e.s=f,e.l=m,e}getRGB(e,t=Wn.workingColorSpace){return Wn.workingToColorSpace(Ar.copy(this),t),e.r=Ar.r,e.g=Ar.g,e.b=Ar.b,e}getStyle(e=Rr){Wn.workingToColorSpace(Ar.copy(this),e);const t=Ar.r,i=Ar.g,a=Ar.b;return e!==Rr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(e,t,i){return this.getHSL(Zu),this.setHSL(Zu.h+e,Zu.s+t,Zu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Zu),e.getHSL(dx);const i=Jg(Zu.h,dx.h,t),a=Jg(Zu.s,dx.s,t),r=Jg(Zu.l,dx.l,t);return this.setHSL(i,a,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,a=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*a,this.g=r[1]*t+r[4]*i+r[7]*a,this.b=r[2]*t+r[5]*i+r[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ar=new Tt;Tt.NAMES=oN;let PL=0;class Or extends lc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:PL++}),this.uuid=eo(),this.name="",this.type="Material",this.blending=Af,this.side=$c,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=yy,this.blendDst=by,this.blendEquation=nd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Tt(0,0,0),this.blendAlpha=0,this.depthFunc=Uf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=a2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yf,this.stencilZFail=yf,this.stencilZPass=yf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){Rt(`Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){Rt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Af&&(i.blending=this.blending),this.side!==$c&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==yy&&(i.blendSrc=this.blendSrc),this.blendDst!==by&&(i.blendDst=this.blendDst),this.blendEquation!==nd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Uf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==a2&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==yf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==yf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(r){const o=[];for(const c in r){const d=r[c];delete d.metadata,o.push(d)}return o}if(t){const r=a(e.textures),o=a(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const a=t.length;i=new Array(a);for(let r=0;r!==a;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class iu extends Or{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new io,this.combine=D0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zc=IL();function IL(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),a=new Uint32Array(512);for(let d=0;d<256;++d){const f=d-127;f<-27?(i[d]=0,i[d|256]=32768,a[d]=24,a[d|256]=24):f<-14?(i[d]=1024>>-f-14,i[d|256]=1024>>-f-14|32768,a[d]=-f-1,a[d|256]=-f-1):f<=15?(i[d]=f+15<<10,i[d|256]=f+15<<10|32768,a[d]=13,a[d|256]=13):f<128?(i[d]=31744,i[d|256]=64512,a[d]=24,a[d|256]=24):(i[d]=31744,i[d|256]=64512,a[d]=13,a[d|256]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),c=new Uint32Array(64);for(let d=1;d<1024;++d){let f=d<<13,m=0;for(;(f&8388608)===0;)f<<=1,m-=8388608;f&=-8388609,m+=947912704,r[d]=f|m}for(let d=1024;d<2048;++d)r[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)o[d]=d<<23;o[31]=1199570944,o[32]=2147483648;for(let d=33;d<63;++d)o[d]=2147483648+(d-32<<23);o[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(c[d]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:a,mantissaTable:r,exponentTable:o,offsetTable:c}}function _s(n){Math.abs(n)>65504&&Rt("DataUtils.toHalfFloat(): Value out of range."),n=fn(n,-65504,65504),Zc.floatView[0]=n;const e=Zc.uint32View[0],t=e>>23&511;return Zc.baseTable[t]+((e&8388607)>>Zc.shiftTable[t])}function Bg(n){const e=n>>10;return Zc.uint32View[0]=Zc.mantissaTable[Zc.offsetTable[e]+(n&1023)]+Zc.exponentTable[e],Zc.floatView[0]}class BL{static toHalfFloat(e){return _s(e)}static fromHalfFloat(e){return Bg(e)}}const Ca=new he,fx=new ft;let kL=0;class Ri{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:kL++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=g0,this.updateRanges=[],this.gpuType=ss,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let a=0,r=this.itemSize;a<r;a++)this.array[e+a]=t.array[i+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)fx.fromBufferAttribute(this,t),fx.applyMatrix3(e),this.setXY(t,fx.x,fx.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ca.fromBufferAttribute(this,t),Ca.applyMatrix3(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ca.fromBufferAttribute(this,t),Ca.applyMatrix4(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ca.fromBufferAttribute(this,t),Ca.applyNormalMatrix(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ca.fromBufferAttribute(this,t),Ca.transformDirection(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=rs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Mn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=rs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=rs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=rs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=rs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),a=Mn(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this}setXYZW(e,t,i,a,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),a=Mn(a,this.array),r=Mn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==g0&&(e.usage=this.usage),e}}class FL extends Ri{constructor(e,t,i){super(new Int8Array(e),t,i)}}class jL extends Ri{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class HL extends Ri{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class VL extends Ri{constructor(e,t,i){super(new Int16Array(e),t,i)}}class mw extends Ri{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class GL extends Ri{constructor(e,t,i){super(new Int32Array(e),t,i)}}class gw extends Ri{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class WL extends Ri{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Bg(this.array[e*this.itemSize]);return this.normalized&&(t=rs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=_s(t),this}getY(e){let t=Bg(this.array[e*this.itemSize+1]);return this.normalized&&(t=rs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=_s(t),this}getZ(e){let t=Bg(this.array[e*this.itemSize+2]);return this.normalized&&(t=rs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=_s(t),this}getW(e){let t=Bg(this.array[e*this.itemSize+3]);return this.normalized&&(t=rs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=_s(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array)),this.array[e+0]=_s(t),this.array[e+1]=_s(i),this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),a=Mn(a,this.array)),this.array[e+0]=_s(t),this.array[e+1]=_s(i),this.array[e+2]=_s(a),this}setXYZW(e,t,i,a,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),a=Mn(a,this.array),r=Mn(r,this.array)),this.array[e+0]=_s(t),this.array[e+1]=_s(i),this.array[e+2]=_s(a),this.array[e+3]=_s(r),this}}class Ht extends Ri{constructor(e,t,i){super(new Float32Array(e),t,i)}}let XL=0;const To=new hn,I_=new ii,Zh=new he,qs=new $a,wg=new $a,Ja=new he;class xn extends lc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:XL++}),this.uuid=eo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(iN(e)?gw:mw)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new vn().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return To.makeRotationFromQuaternion(e),this.applyMatrix4(To),this}rotateX(e){return To.makeRotationX(e),this.applyMatrix4(To),this}rotateY(e){return To.makeRotationY(e),this.applyMatrix4(To),this}rotateZ(e){return To.makeRotationZ(e),this.applyMatrix4(To),this}translate(e,t,i){return To.makeTranslation(e,t,i),this.applyMatrix4(To),this}scale(e,t,i){return To.makeScale(e,t,i),this.applyMatrix4(To),this}lookAt(e){return I_.lookAt(e),I_.updateMatrix(),this.applyMatrix4(I_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zh).negate(),this.translate(Zh.x,Zh.y,Zh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let a=0,r=e.length;a<r;a++){const o=e[a];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ht(i,3))}else{const i=Math.min(e.length,t.count);for(let a=0;a<i;a++){const r=e[a];t.setXYZ(a,r.x,r.y,r.z||0)}e.length>t.count&&Rt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $a);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){an("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,a=t.length;i<a;i++){const r=t[i];qs.setFromBufferAttribute(r),this.morphTargetsRelative?(Ja.addVectors(this.boundingBox.min,qs.min),this.boundingBox.expandByPoint(Ja),Ja.addVectors(this.boundingBox.max,qs.max),this.boundingBox.expandByPoint(Ja)):(this.boundingBox.expandByPoint(qs.min),this.boundingBox.expandByPoint(qs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&an('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new er);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){an("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new he,1/0);return}if(e){const i=this.boundingSphere.center;if(qs.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const c=t[r];wg.setFromBufferAttribute(c),this.morphTargetsRelative?(Ja.addVectors(qs.min,wg.min),qs.expandByPoint(Ja),Ja.addVectors(qs.max,wg.max),qs.expandByPoint(Ja)):(qs.expandByPoint(wg.min),qs.expandByPoint(wg.max))}qs.getCenter(i);let a=0;for(let r=0,o=e.count;r<o;r++)Ja.fromBufferAttribute(e,r),a=Math.max(a,i.distanceToSquared(Ja));if(t)for(let r=0,o=t.length;r<o;r++){const c=t[r],d=this.morphTargetsRelative;for(let f=0,m=c.count;f<m;f++)Ja.fromBufferAttribute(c,f),d&&(Zh.fromBufferAttribute(e,f),Ja.add(Zh)),a=Math.max(a,i.distanceToSquared(Ja))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&an('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){an("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,a=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ri(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),c=[],d=[];for(let F=0;F<i.count;F++)c[F]=new he,d[F]=new he;const f=new he,m=new he,g=new he,y=new ft,_=new ft,S=new ft,A=new he,T=new he;function w(F,L,I){f.fromBufferAttribute(i,F),m.fromBufferAttribute(i,L),g.fromBufferAttribute(i,I),y.fromBufferAttribute(r,F),_.fromBufferAttribute(r,L),S.fromBufferAttribute(r,I),m.sub(f),g.sub(f),_.sub(y),S.sub(y);const Y=1/(_.x*S.y-S.x*_.y);isFinite(Y)&&(A.copy(m).multiplyScalar(S.y).addScaledVector(g,-_.y).multiplyScalar(Y),T.copy(g).multiplyScalar(_.x).addScaledVector(m,-S.x).multiplyScalar(Y),c[F].add(A),c[L].add(A),c[I].add(A),d[F].add(T),d[L].add(T),d[I].add(T))}let N=this.groups;N.length===0&&(N=[{start:0,count:e.count}]);for(let F=0,L=N.length;F<L;++F){const I=N[F],Y=I.start,q=I.count;for(let K=Y,$=Y+q;K<$;K+=3)w(e.getX(K+0),e.getX(K+1),e.getX(K+2))}const D=new he,U=new he,O=new he,B=new he;function z(F){O.fromBufferAttribute(a,F),B.copy(O);const L=c[F];D.copy(L),D.sub(O.multiplyScalar(O.dot(L))).normalize(),U.crossVectors(B,L);const Y=U.dot(d[F])<0?-1:1;o.setXYZW(F,D.x,D.y,D.z,Y)}for(let F=0,L=N.length;F<L;++F){const I=N[F],Y=I.start,q=I.count;for(let K=Y,$=Y+q;K<$;K+=3)z(e.getX(K+0)),z(e.getX(K+1)),z(e.getX(K+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ri(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let y=0,_=i.count;y<_;y++)i.setXYZ(y,0,0,0);const a=new he,r=new he,o=new he,c=new he,d=new he,f=new he,m=new he,g=new he;if(e)for(let y=0,_=e.count;y<_;y+=3){const S=e.getX(y+0),A=e.getX(y+1),T=e.getX(y+2);a.fromBufferAttribute(t,S),r.fromBufferAttribute(t,A),o.fromBufferAttribute(t,T),m.subVectors(o,r),g.subVectors(a,r),m.cross(g),c.fromBufferAttribute(i,S),d.fromBufferAttribute(i,A),f.fromBufferAttribute(i,T),c.add(m),d.add(m),f.add(m),i.setXYZ(S,c.x,c.y,c.z),i.setXYZ(A,d.x,d.y,d.z),i.setXYZ(T,f.x,f.y,f.z)}else for(let y=0,_=t.count;y<_;y+=3)a.fromBufferAttribute(t,y+0),r.fromBufferAttribute(t,y+1),o.fromBufferAttribute(t,y+2),m.subVectors(o,r),g.subVectors(a,r),m.cross(g),i.setXYZ(y+0,m.x,m.y,m.z),i.setXYZ(y+1,m.x,m.y,m.z),i.setXYZ(y+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ja.fromBufferAttribute(e,t),Ja.normalize(),e.setXYZ(t,Ja.x,Ja.y,Ja.z)}toNonIndexed(){function e(c,d){const f=c.array,m=c.itemSize,g=c.normalized,y=new f.constructor(d.length*m);let _=0,S=0;for(let A=0,T=d.length;A<T;A++){c.isInterleavedBufferAttribute?_=d[A]*c.data.stride+c.offset:_=d[A]*m;for(let w=0;w<m;w++)y[S++]=f[_++]}return new Ri(y,m,g)}if(this.index===null)return Rt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new xn,i=this.index.array,a=this.attributes;for(const c in a){const d=a[c],f=e(d,i);t.setAttribute(c,f)}const r=this.morphAttributes;for(const c in r){const d=[],f=r[c];for(let m=0,g=f.length;m<g;m++){const y=f[m],_=e(y,i);d.push(_)}t.morphAttributes[c]=d}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let c=0,d=o.length;c<d;c++){const f=o[c];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const f in d)d[f]!==void 0&&(e[f]=d[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const f=i[d];e.data.attributes[d]=f.toJSON(e.data)}const a={};let r=!1;for(const d in this.morphAttributes){const f=this.morphAttributes[d],m=[];for(let g=0,y=f.length;g<y;g++){const _=f[g];m.push(_.toJSON(e.data))}m.length>0&&(a[d]=m,r=!0)}r&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere=c.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const a=e.attributes;for(const f in a){const m=a[f];this.setAttribute(f,m.clone(t))}const r=e.morphAttributes;for(const f in r){const m=[],g=r[f];for(let y=0,_=g.length;y<_;y++)m.push(g[y].clone(t));this.morphAttributes[f]=m}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,m=o.length;f<m;f++){const g=o[f];this.addGroup(g.start,g.count,g.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const rT=new hn,nf=new Vp,hx=new er,sT=new he,px=new he,mx=new he,gx=new he,B_=new he,vx=new he,oT=new he,xx=new he;class sa extends ii{constructor(e=new xn,t=new iu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=a.length;r<o;r++){const c=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}getVertexPosition(e,t){const i=this.geometry,a=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(a,e);const c=this.morphTargetInfluences;if(r&&c){vx.set(0,0,0);for(let d=0,f=r.length;d<f;d++){const m=c[d],g=r[d];m!==0&&(B_.fromBufferAttribute(g,e),o?vx.addScaledVector(B_,m):vx.addScaledVector(B_.sub(t),m))}t.add(vx)}return t}raycast(e,t){const i=this.geometry,a=this.material,r=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),hx.copy(i.boundingSphere),hx.applyMatrix4(r),nf.copy(e.ray).recast(e.near),!(hx.containsPoint(nf.origin)===!1&&(nf.intersectSphere(hx,sT)===null||nf.origin.distanceToSquared(sT)>(e.far-e.near)**2))&&(rT.copy(r).invert(),nf.copy(e.ray).applyMatrix4(rT),!(i.boundingBox!==null&&nf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,nf)))}_computeIntersections(e,t,i){let a;const r=this.geometry,o=this.material,c=r.index,d=r.attributes.position,f=r.attributes.uv,m=r.attributes.uv1,g=r.attributes.normal,y=r.groups,_=r.drawRange;if(c!==null)if(Array.isArray(o))for(let S=0,A=y.length;S<A;S++){const T=y[S],w=o[T.materialIndex],N=Math.max(T.start,_.start),D=Math.min(c.count,Math.min(T.start+T.count,_.start+_.count));for(let U=N,O=D;U<O;U+=3){const B=c.getX(U),z=c.getX(U+1),F=c.getX(U+2);a=yx(this,w,e,i,f,m,g,B,z,F),a&&(a.faceIndex=Math.floor(U/3),a.face.materialIndex=T.materialIndex,t.push(a))}}else{const S=Math.max(0,_.start),A=Math.min(c.count,_.start+_.count);for(let T=S,w=A;T<w;T+=3){const N=c.getX(T),D=c.getX(T+1),U=c.getX(T+2);a=yx(this,o,e,i,f,m,g,N,D,U),a&&(a.faceIndex=Math.floor(T/3),t.push(a))}}else if(d!==void 0)if(Array.isArray(o))for(let S=0,A=y.length;S<A;S++){const T=y[S],w=o[T.materialIndex],N=Math.max(T.start,_.start),D=Math.min(d.count,Math.min(T.start+T.count,_.start+_.count));for(let U=N,O=D;U<O;U+=3){const B=U,z=U+1,F=U+2;a=yx(this,w,e,i,f,m,g,B,z,F),a&&(a.faceIndex=Math.floor(U/3),a.face.materialIndex=T.materialIndex,t.push(a))}}else{const S=Math.max(0,_.start),A=Math.min(d.count,_.start+_.count);for(let T=S,w=A;T<w;T+=3){const N=T,D=T+1,U=T+2;a=yx(this,o,e,i,f,m,g,N,D,U),a&&(a.faceIndex=Math.floor(T/3),t.push(a))}}}}function YL(n,e,t,i,a,r,o,c){let d;if(e.side===Ur?d=i.intersectTriangle(o,r,a,!0,c):d=i.intersectTriangle(a,r,o,e.side===$c,c),d===null)return null;xx.copy(c),xx.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(xx);return f<t.near||f>t.far?null:{distance:f,point:xx.clone(),object:n}}function yx(n,e,t,i,a,r,o,c,d,f){n.getVertexPosition(c,px),n.getVertexPosition(d,mx),n.getVertexPosition(f,gx);const m=YL(n,e,t,i,px,mx,gx,oT);if(m){const g=new he;Cs.getBarycoord(oT,px,mx,gx,g),a&&(m.uv=Cs.getInterpolatedAttribute(a,c,d,f,g,new ft)),r&&(m.uv1=Cs.getInterpolatedAttribute(r,c,d,f,g,new ft)),o&&(m.normal=Cs.getInterpolatedAttribute(o,c,d,f,g,new he),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const y={a:c,b:d,c:f,normal:new he,materialIndex:0};Cs.getNormal(px,mx,gx,y.normal),m.face=y,m.barycoord=g}return m}class Ff extends xn{constructor(e=1,t=1,i=1,a=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:a,heightSegments:r,depthSegments:o};const c=this;a=Math.floor(a),r=Math.floor(r),o=Math.floor(o);const d=[],f=[],m=[],g=[];let y=0,_=0;S("z","y","x",-1,-1,i,t,e,o,r,0),S("z","y","x",1,-1,i,t,-e,o,r,1),S("x","z","y",1,1,e,i,t,a,o,2),S("x","z","y",1,-1,e,i,-t,a,o,3),S("x","y","z",1,-1,e,t,i,a,r,4),S("x","y","z",-1,-1,e,t,-i,a,r,5),this.setIndex(d),this.setAttribute("position",new Ht(f,3)),this.setAttribute("normal",new Ht(m,3)),this.setAttribute("uv",new Ht(g,2));function S(A,T,w,N,D,U,O,B,z,F,L){const I=U/z,Y=O/F,q=U/2,K=O/2,$=B/2,ce=z+1,G=F+1;let W=0,Q=0;const ue=new he;for(let de=0;de<G;de++){const j=de*Y-K;for(let ee=0;ee<ce;ee++){const ne=ee*I-q;ue[A]=ne*N,ue[T]=j*D,ue[w]=$,f.push(ue.x,ue.y,ue.z),ue[A]=0,ue[T]=0,ue[w]=B>0?1:-1,m.push(ue.x,ue.y,ue.z),g.push(ee/z),g.push(1-de/F),W+=1}}for(let de=0;de<F;de++)for(let j=0;j<z;j++){const ee=y+j+ce*de,ne=y+j+ce*(de+1),oe=y+(j+1)+ce*(de+1),re=y+(j+1)+ce*de;d.push(ee,ne,re),d.push(ne,oe,re),Q+=6}c.addGroup(_,Q,L),_+=Q,y+=W}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ff(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Lp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const a=n[t][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(Rt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=a.clone():Array.isArray(a)?e[t][i]=a.slice():e[t][i]=a}}return e}function ns(n){const e={};for(let t=0;t<n.length;t++){const i=Lp(n[t]);for(const a in i)e[a]=i[a]}return e}function qL(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function lN(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Wn.workingColorSpace}const vw={clone:Lp,merge:ns};var KL=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ZL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Do extends Or{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=KL,this.fragmentShader=ZL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Lp(e.uniforms),this.uniformsGroups=qL(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const o=this.uniforms[a].value;o&&o.isTexture?t.uniforms[a]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[a]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[a]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[a]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[a]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[a]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[a]={type:"m4",value:o.toArray()}:t.uniforms[a]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class jb extends ii{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hn,this.projectionMatrix=new hn,this.projectionMatrixInverse=new hn,this.coordinateSystem=$s,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ju=new he,lT=new ft,cT=new ft;class Qa extends jb{constructor(e=50,t=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Up*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Cf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Up*2*Math.atan(Math.tan(Cf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ju.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ju.x,Ju.y).multiplyScalar(-e/Ju.z),Ju.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ju.x,Ju.y).multiplyScalar(-e/Ju.z)}getViewSize(e,t){return this.getViewBounds(e,lT,cT),t.subVectors(cT,lT)}setViewOffset(e,t,i,a,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Cf*.5*this.fov)/this.zoom,i=2*t,a=this.aspect*i,r=-.5*a;const o=this.view;if(this.view!==null&&this.view.enabled){const d=o.fullWidth,f=o.fullHeight;r+=o.offsetX*a/d,t-=o.offsetY*i/f,a*=o.width/d,i*=o.height/f}const c=this.filmOffset;c!==0&&(r+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+a,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Jh=-90,Qh=1;class xw extends ii{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new Qa(Jh,Qh,e,t);a.layers=this.layers,this.add(a);const r=new Qa(Jh,Qh,e,t);r.layers=this.layers,this.add(r);const o=new Qa(Jh,Qh,e,t);o.layers=this.layers,this.add(o);const c=new Qa(Jh,Qh,e,t);c.layers=this.layers,this.add(c);const d=new Qa(Jh,Qh,e,t);d.layers=this.layers,this.add(d);const f=new Qa(Jh,Qh,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,a,r,o,c,d]=t;for(const f of t)this.remove(f);if(e===$s)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===Rp)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,c,d,f,m]=this.children,g=e.getRenderTarget(),y=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,a),e.render(t,r),e.setRenderTarget(i,1,a),e.render(t,o),e.setRenderTarget(i,2,a),e.render(t,c),e.setRenderTarget(i,3,a),e.render(t,d),e.setRenderTarget(i,4,a),e.render(t,f),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,a),e.render(t,m),e.setRenderTarget(g,y,_),e.xr.enabled=S,i.texture.needsPMREMUpdate=!0}}class O0 extends ra{constructor(e=[],t=ic,i,a,r,o,c,d,f,m){super(e,t,i,a,r,o,c,d,f,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Hb extends to{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},a=[i,i,i,i,i,i];this.texture=new O0(a),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Ff(5,5,5),r=new Do({name:"CubemapFromEquirect",uniforms:Lp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ur,blending:ec});r.uniforms.tEquirect.value=t;const o=new sa(a,r),c=t.minFilter;return t.minFilter===Jl&&(t.minFilter=Fi),new xw(1,10,this).update(e,o),t.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,a=!0){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,a);e.setRenderTarget(r)}}class _p extends ii{constructor(){super(),this.isGroup=!0,this.type="Group"}}const JL={type:"move"};class cy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _p,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _p,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _p,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let a=null,r=null,o=null;const c=this._targetRay,d=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const A of e.hand.values()){const T=t.getJointPose(A,i),w=this._getHandJoint(f,A);T!==null&&(w.matrix.fromArray(T.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=T.radius),w.visible=T!==null}const m=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],y=m.position.distanceTo(g.position),_=.02,S=.005;f.inputState.pinching&&y>_+S?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&y<=_-S&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(d.matrix.fromArray(r.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,r.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(r.linearVelocity)):d.hasLinearVelocity=!1,r.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(r.angularVelocity)):d.hasAngularVelocity=!1));c!==null&&(a=t.getPose(e.targetRaySpace,i),a===null&&r!==null&&(a=r),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(JL)))}return c!==null&&(c.visible=a!==null),d!==null&&(d.visible=r!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new _p;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Vb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Tt(e),this.density=t}clone(){return new Vb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Gb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Tt(e),this.near=t,this.far=i}clone(){return new Gb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let yw=class extends ii{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new io,this.environmentIntensity=1,this.environmentRotation=new io,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class Wb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=g0,this.updateRanges=[],this.version=0,this.uuid=eo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let a=0,r=this.stride;a<r;a++)this.array[e+a]=t.array[i+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=eo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=eo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const es=new he;class Lf{constructor(e,t,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)es.fromBufferAttribute(this,t),es.applyMatrix4(e),this.setXYZ(t,es.x,es.y,es.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.applyNormalMatrix(e),this.setXYZ(t,es.x,es.y,es.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.transformDirection(e),this.setXYZ(t,es.x,es.y,es.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=rs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Mn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=rs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=rs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=rs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=rs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),a=Mn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this}setXYZW(e,t,i,a,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),a=Mn(a,this.array),r=Mn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this.data.array[e+3]=r,this}clone(e){if(e===void 0){x0("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[a+r])}return new Ri(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Lf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){x0("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[a+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class bw extends Or{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Tt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let $h;const Mg=new he,ep=new he,tp=new he,np=new ft,Eg=new ft,cN=new hn,bx=new he,Tg=new he,_x=new he,uT=new ft,k_=new ft,dT=new ft;class uN extends ii{constructor(e=new bw){if(super(),this.isSprite=!0,this.type="Sprite",$h===void 0){$h=new xn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Wb(t,5);$h.setIndex([0,1,2,0,2,3]),$h.setAttribute("position",new Lf(i,3,0,!1)),$h.setAttribute("uv",new Lf(i,2,3,!1))}this.geometry=$h,this.material=e,this.center=new ft(.5,.5),this.count=1}raycast(e,t){e.camera===null&&an('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ep.setFromMatrixScale(this.matrixWorld),cN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),tp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ep.multiplyScalar(-tp.z);const i=this.material.rotation;let a,r;i!==0&&(r=Math.cos(i),a=Math.sin(i));const o=this.center;Sx(bx.set(-.5,-.5,0),tp,o,ep,a,r),Sx(Tg.set(.5,-.5,0),tp,o,ep,a,r),Sx(_x.set(.5,.5,0),tp,o,ep,a,r),uT.set(0,0),k_.set(1,0),dT.set(1,1);let c=e.ray.intersectTriangle(bx,Tg,_x,!1,Mg);if(c===null&&(Sx(Tg.set(-.5,.5,0),tp,o,ep,a,r),k_.set(0,1),c=e.ray.intersectTriangle(bx,_x,Tg,!1,Mg),c===null))return;const d=e.ray.origin.distanceTo(Mg);d<e.near||d>e.far||t.push({distance:d,point:Mg.clone(),uv:Cs.getInterpolation(Mg,bx,Tg,_x,uT,k_,dT,new ft),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Sx(n,e,t,i,a,r){np.subVectors(n,t).addScalar(.5).multiply(i),a!==void 0?(Eg.x=r*np.x-a*np.y,Eg.y=a*np.x+r*np.y):Eg.copy(np),n.copy(e),n.x+=Eg.x,n.y+=Eg.y,n.applyMatrix4(cN)}const wx=new he,fT=new he;class dN extends ii{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,a=t.length;i<a;i++){const r=t[i];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const a=this.levels;let r;for(r=0;r<a.length&&!(t<a[r].distance);r++);return a.splice(r,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const a=t.splice(i,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,a;for(i=1,a=t.length;i<a;i++){let r=t[i].distance;if(t[i].object.visible&&(r-=r*t[i].hysteresis),e<r)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){wx.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(wx);this.getObjectForDistance(a).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){wx.setFromMatrixPosition(e.matrixWorld),fT.setFromMatrixPosition(this.matrixWorld);const i=wx.distanceTo(fT)/e.zoom;t[0].object.visible=!0;let a,r;for(a=1,r=t.length;a<r;a++){let o=t[a].distance;if(t[a].object.visible&&(o-=o*t[a].hysteresis),i>=o)t[a-1].object.visible=!1,t[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<r;a++)t[a].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let a=0,r=i.length;a<r;a++){const o=i[a];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const hT=new he,pT=new _i,mT=new _i,QL=new he,gT=new hn,Mx=new he,F_=new er,vT=new hn,j_=new Vp;class fN extends sa{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=i2,this.bindMatrix=new hn,this.bindMatrixInverse=new hn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new $a),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Mx),this.boundingBox.expandByPoint(Mx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new er),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Mx),this.boundingSphere.expandByPoint(Mx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,a=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),F_.copy(this.boundingSphere),F_.applyMatrix4(a),e.ray.intersectsSphere(F_)!==!1&&(vT.copy(a).invert(),j_.copy(e.ray).applyMatrix4(vT),!(this.boundingBox!==null&&j_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,j_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new _i,t=this.geometry.attributes.skinWeight;for(let i=0,a=t.count;i<a;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===i2?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===GC?this.bindMatrixInverse.copy(this.bindMatrix).invert():Rt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,a=this.geometry;pT.fromBufferAttribute(a.attributes.skinIndex,e),mT.fromBufferAttribute(a.attributes.skinWeight,e),hT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=mT.getComponent(r);if(o!==0){const c=pT.getComponent(r);gT.multiplyMatrices(i.bones[c].matrixWorld,i.boneInverses[c]),t.addScaledVector(QL.copy(hT).applyMatrix4(gT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class _w extends ii{constructor(){super(),this.isBone=!0,this.type="Bone"}}class dl extends ra{constructor(e=null,t=1,i=1,a,r,o,c,d,f=ya,m=ya,g,y){super(null,o,c,d,f,m,a,r,g,y),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const xT=new hn,$L=new hn;class Xb{constructor(e=[],t=[]){this.uuid=eo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){Rt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new hn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new hn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,a=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const c=e[r]?e[r].matrixWorld:$L;xT.multiplyMatrices(c,t[r]),xT.toArray(i,r*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new Xb(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new dl(t,e,e,Dr,ss);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const a=this.bones[t];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,a=e.bones.length;i<a;i++){const r=e.bones[i];let o=t[r];o===void 0&&(Rt("Skeleton: No bone found with UUID:",r),o=new _w),this.bones.push(o),this.boneInverses.push(new hn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let a=0,r=t.length;a<r;a++){const o=t[a];e.bones.push(o.uuid);const c=i[a];e.boneInverses.push(c.toArray())}return e}}class zf extends Ri{constructor(e,t,i,a=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ip=new hn,yT=new hn,Ex=[],bT=new $a,ez=new hn,Ag=new sa,Cg=new er;class hN extends sa{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new zf(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<i;a++)this.setMatrixAt(a,ez)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new $a),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ip),bT.copy(e.boundingBox).applyMatrix4(ip),this.boundingBox.union(bT)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new er),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ip),Cg.copy(e.boundingSphere).applyMatrix4(ip),this.boundingSphere.union(Cg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,a=this.morphTexture.source.data.data,r=i.length+1,o=e*r+1;for(let c=0;c<i.length;c++)i[c]=a[o+c]}raycast(e,t){const i=this.matrixWorld,a=this.count;if(Ag.geometry=this.geometry,Ag.material=this.material,Ag.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Cg.copy(this.boundingSphere),Cg.applyMatrix4(i),e.ray.intersectsSphere(Cg)!==!1))for(let r=0;r<a;r++){this.getMatrixAt(r,ip),yT.multiplyMatrices(i,ip),Ag.matrixWorld=yT,Ag.raycast(e,Ex);for(let o=0,c=Ex.length;o<c;o++){const d=Ex[o];d.instanceId=r,d.object=this,t.push(d)}Ex.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new zf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,a=i.length+1;this.morphTexture===null&&(this.morphTexture=new dl(new Float32Array(a*this.count),a,this.count,Ob,ss));const r=this.morphTexture.source.data.data;let o=0;for(let f=0;f<i.length;f++)o+=i[f];const c=this.geometry.morphTargetsRelative?1:1-o,d=a*e;r[d]=c,r.set(i,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const H_=new he,tz=new he,nz=new vn;class td{constructor(e=new he(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,a){return this.normal.set(e,t,i),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const a=H_.subVectors(i,t).cross(tz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(H_),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/a;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||nz.getNormalMatrix(e),a=this.coplanarPoint(H_).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const af=new er,iz=new ft(.5,.5),Tx=new he;class Gp{constructor(e=new td,t=new td,i=new td,a=new td,r=new td,o=new td){this.planes=[e,t,i,a,r,o]}set(e,t,i,a,r,o){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(i),c[3].copy(a),c[4].copy(r),c[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=$s,i=!1){const a=this.planes,r=e.elements,o=r[0],c=r[1],d=r[2],f=r[3],m=r[4],g=r[5],y=r[6],_=r[7],S=r[8],A=r[9],T=r[10],w=r[11],N=r[12],D=r[13],U=r[14],O=r[15];if(a[0].setComponents(f-o,_-m,w-S,O-N).normalize(),a[1].setComponents(f+o,_+m,w+S,O+N).normalize(),a[2].setComponents(f+c,_+g,w+A,O+D).normalize(),a[3].setComponents(f-c,_-g,w-A,O-D).normalize(),i)a[4].setComponents(d,y,T,U).normalize(),a[5].setComponents(f-d,_-y,w-T,O-U).normalize();else if(a[4].setComponents(f-d,_-y,w-T,O-U).normalize(),t===$s)a[5].setComponents(f+d,_+y,w+T,O+U).normalize();else if(t===Rp)a[5].setComponents(d,y,T,U).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),af.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),af.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(af)}intersectsSprite(e){af.center.set(0,0,0);const t=iz.distanceTo(e.center);return af.radius=.7071067811865476+t,af.applyMatrix4(e.matrixWorld),this.intersectsSphere(af)}intersectsSphere(e){const t=this.planes,i=e.center,a=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const a=t[i];if(Tx.x=a.normal.x>0?e.max.x:e.min.x,Tx.y=a.normal.y>0?e.max.y:e.min.y,Tx.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(Tx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Wl=new hn,Xl=new Gp;class Yb{constructor(){this.coordinateSystem=$s}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Wl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Xl.setFromProjectionMatrix(Wl,a.coordinateSystem,a.reversedDepth),Xl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Wl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Xl.setFromProjectionMatrix(Wl,a.coordinateSystem,a.reversedDepth),Xl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Wl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Xl.setFromProjectionMatrix(Wl,a.coordinateSystem,a.reversedDepth),Xl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Wl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Xl.setFromProjectionMatrix(Wl,a.coordinateSystem,a.reversedDepth),Xl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Wl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Xl.setFromProjectionMatrix(Wl,a.coordinateSystem,a.reversedDepth),Xl.containsPoint(e))return!0}return!1}clone(){return new Yb}}function V_(n,e){return n-e}function az(n,e){return n.z-e.z}function rz(n,e){return e.z-n.z}class sz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,a){const r=this.pool,o=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const c=r[this.index];o.push(c),this.index++,c.start=e,c.count=t,c.z=i,c.index=a}reset(){this.list.length=0,this.index=0}}const bs=new hn,oz=new Tt(1,1,1),_T=new Gp,lz=new Yb,Ax=new $a,rf=new er,Ng=new he,ST=new he,cz=new he,G_=new sz,Cr=new sa,Cx=[];function uz(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const a=n.count;for(let r=0;r<a;r++)for(let o=0;o<i;o++)e.setComponent(r+t,o,n.getComponent(r,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function sf(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class pN extends sa{constructor(e,t,i=t*2,a){super(new xn,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new dl(t,e,e,Dr,ss);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new dl(t,e,e,U0,Ro);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new dl(t,e,e,Dr,ss);i.colorSpace=Wn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const o=e.getAttribute(r),{array:c,itemSize:d,normalized:f}=o,m=new c.constructor(i*d),g=new Ri(m,d,f);t.setAttribute(r,g)}if(e.getIndex()!==null){const r=i>65535?new Uint32Array(a):new Uint16Array(a);t.setIndex(new Ri(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const a=e.getAttribute(i),r=t.getAttribute(i);if(a.itemSize!==r.itemSize||a.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $a);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,a=t.length;i<a;i++){if(t[i].active===!1)continue;const r=t[i].geometryIndex;this.getMatrixAt(i,bs),this.getBoundingBoxAt(r,Ax).applyMatrix4(bs),e.union(Ax)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new er);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,a=t.length;i<a;i++){if(t[i].active===!1)continue;const r=t[i].geometryIndex;this.getMatrixAt(i,bs),this.getBoundingSphereAt(r,rf).applyMatrix4(bs),e.union(rf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(V_),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=i):(a=this._instanceInfo.length,this._instanceInfo.push(i));const r=this._matricesTexture;bs.identity().toArray(r.image.data,a*16),r.needsUpdate=!0;const o=this._colorsTexture;return o&&(oz.toArray(o.image.data,a*4),o.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=i===-1?o.count:i),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(V_),d=this._availableGeometryIds.shift(),r[d]=a):(d=this._geometryCount,this._geometryCount++,r.push(a)),this.setGeometryAt(d,e),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,a=i.getIndex()!==null,r=i.getIndex(),o=t.getIndex(),c=this._geometryInfo[e];if(a&&o.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=c.vertexStart,f=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const m in i.attributes){const g=t.getAttribute(m),y=i.getAttribute(m);uz(g,y,d);const _=g.itemSize;for(let S=g.count,A=f;S<A;S++){const T=d+S;for(let w=0;w<_;w++)y.setComponent(T,w,0)}y.needsUpdate=!0,y.addUpdateRange(d*_,f*_)}if(a){const m=c.indexStart,g=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let y=0;y<o.count;y++)r.setX(m+y,d+o.getX(y));for(let y=o.count,_=g;y<_;y++)r.setX(m+y,d);r.needsUpdate=!0,r.addUpdateRange(m,c.reservedIndexCount)}return c.start=a?c.indexStart:c.vertexStart,c.count=a?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let a=0,r=i.length;a<r;a++)i[a].active&&i[a].geometryIndex===e&&this.deleteInstance(a);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,a=i.map((o,c)=>c).sort((o,c)=>i[o].vertexStart-i[c].vertexStart),r=this.geometry;for(let o=0,c=i.length;o<c;o++){const d=a[o],f=i[d];if(f.active!==!1){if(r.index!==null){if(f.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:y}=f,_=r.index,S=_.array,A=e-g;for(let T=m;T<m+y;T++)S[T]=S[T]+A;_.array.copyWithin(t,m,m+y),_.addUpdateRange(t,y),_.needsUpdate=!0,f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=f,y=r.attributes;for(const _ in y){const S=y[_],{array:A,itemSize:T}=S;A.copyWithin(e*T,m*T,(m+g)*T),S.addUpdateRange(e*T,g*T),S.needsUpdate=!0}f.vertexStart=e}e+=f.reservedVertexCount,f.start=r.index?f.indexStart:f.vertexStart,this._nextIndexStart=r.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[e];if(a.boundingBox===null){const r=new $a,o=i.index,c=i.attributes.position;for(let d=a.start,f=a.start+a.count;d<f;d++){let m=d;o&&(m=o.getX(m)),r.expandByPoint(Ng.fromBufferAttribute(c,m))}a.boundingBox=r}return t.copy(a.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[e];if(a.boundingSphere===null){const r=new er;this.getBoundingBoxAt(e,Ax),Ax.getCenter(r.center);const o=i.index,c=i.attributes.position;let d=0;for(let f=a.start,m=a.start+a.count;f<m;f++){let g=f;o&&(g=o.getX(g)),Ng.fromBufferAttribute(c,g),d=Math.max(d,r.center.distanceToSquared(Ng))}r.radius=Math.sqrt(d),a.boundingSphere=r}return t.copy(a.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,a=this._matricesTexture.image.data;return t.toArray(a,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(V_);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const a=new Int32Array(e),r=new Int32Array(e);sf(this._multiDrawCounts,a),sf(this._multiDrawStarts,r),this._multiDrawCounts=a,this._multiDrawStarts=r,this._maxInstanceCount=e;const o=this._indirectTexture,c=this._matricesTexture,d=this._colorsTexture;o.dispose(),this._initIndirectTexture(),sf(o.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),sf(c.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),sf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...i.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new xn,this._initializeGeometry(r));const o=this.geometry;r.index&&sf(r.index.array,o.index.array);for(const c in r.attributes)sf(r.attributes[c].array,o.attributes[c].array)}raycast(e,t){const i=this._instanceInfo,a=this._geometryInfo,r=this.matrixWorld,o=this.geometry;Cr.material=this.material,Cr.geometry.index=o.index,Cr.geometry.attributes=o.attributes,Cr.geometry.boundingBox===null&&(Cr.geometry.boundingBox=new $a),Cr.geometry.boundingSphere===null&&(Cr.geometry.boundingSphere=new er);for(let c=0,d=i.length;c<d;c++){if(!i[c].visible||!i[c].active)continue;const f=i[c].geometryIndex,m=a[f];Cr.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(c,Cr.matrixWorld).premultiply(r),this.getBoundingBoxAt(f,Cr.geometry.boundingBox),this.getBoundingSphereAt(f,Cr.geometry.boundingSphere),Cr.raycast(e,Cx);for(let g=0,y=Cx.length;g<y;g++){const _=Cx[g];_.object=this,_.batchId=c,t.push(_)}Cx.length=0}Cr.material=null,Cr.geometry.index=null,Cr.geometry.attributes={},Cr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,a,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=a.getIndex(),c=o===null?1:o.array.BYTES_PER_ELEMENT,d=this._instanceInfo,f=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,y=this.perObjectFrustumCulled,_=this._indirectTexture,S=_.image.data,A=i.isArrayCamera?lz:_T;y&&!i.isArrayCamera&&(bs.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),_T.setFromProjectionMatrix(bs,i.coordinateSystem,i.reversedDepth));let T=0;if(this.sortObjects){bs.copy(this.matrixWorld).invert(),Ng.setFromMatrixPosition(i.matrixWorld).applyMatrix4(bs),ST.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(bs);for(let D=0,U=d.length;D<U;D++)if(d[D].visible&&d[D].active){const O=d[D].geometryIndex;this.getMatrixAt(D,bs),this.getBoundingSphereAt(O,rf).applyMatrix4(bs);let B=!1;if(y&&(B=!A.intersectsSphere(rf,i)),!B){const z=g[O],F=cz.subVectors(rf.center,Ng).dot(ST);G_.push(z.start,z.count,F,D)}}const w=G_.list,N=this.customSort;N===null?w.sort(r.transparent?rz:az):N.call(this,w,i);for(let D=0,U=w.length;D<U;D++){const O=w[D];f[T]=O.start*c,m[T]=O.count,S[T]=O.index,T++}G_.reset()}else for(let w=0,N=d.length;w<N;w++)if(d[w].visible&&d[w].active){const D=d[w].geometryIndex;let U=!1;if(y&&(this.getMatrixAt(w,bs),this.getBoundingSphereAt(D,rf).applyMatrix4(bs),U=!A.intersectsSphere(rf,i)),!U){const O=g[D];f[T]=O.start*c,m[T]=O.count,S[T]=w,T++}}_.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,i,a,r,o){this.onBeforeRender(e,null,a,r,o)}}class os extends Or{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Tt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ob=new he,lb=new he,wT=new hn,Rg=new Vp,Nx=new er,W_=new he,MT=new he;class dd extends ii{constructor(e=new xn,t=new os){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let a=1,r=t.count;a<r;a++)ob.fromBufferAttribute(t,a-1),lb.fromBufferAttribute(t,a),i[a]=i[a-1],i[a]+=ob.distanceTo(lb);e.setAttribute("lineDistance",new Ht(i,1))}else Rt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Nx.copy(i.boundingSphere),Nx.applyMatrix4(a),Nx.radius+=r,e.ray.intersectsSphere(Nx)===!1)return;wT.copy(a).invert(),Rg.copy(e.ray).applyMatrix4(wT);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,f=this.isLineSegments?2:1,m=i.index,y=i.attributes.position;if(m!==null){const _=Math.max(0,o.start),S=Math.min(m.count,o.start+o.count);for(let A=_,T=S-1;A<T;A+=f){const w=m.getX(A),N=m.getX(A+1),D=Rx(this,e,Rg,d,w,N,A);D&&t.push(D)}if(this.isLineLoop){const A=m.getX(S-1),T=m.getX(_),w=Rx(this,e,Rg,d,A,T,S-1);w&&t.push(w)}}else{const _=Math.max(0,o.start),S=Math.min(y.count,o.start+o.count);for(let A=_,T=S-1;A<T;A+=f){const w=Rx(this,e,Rg,d,A,A+1,A);w&&t.push(w)}if(this.isLineLoop){const A=Rx(this,e,Rg,d,S-1,_,S-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=a.length;r<o;r++){const c=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function Rx(n,e,t,i,a,r,o){const c=n.geometry.attributes.position;if(ob.fromBufferAttribute(c,a),lb.fromBufferAttribute(c,r),t.distanceSqToSegment(ob,lb,W_,MT)>i)return;W_.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(W_);if(!(f<e.near||f>e.far))return{distance:f,point:MT.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const ET=new he,TT=new he;class cc extends dd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let a=0,r=t.count;a<r;a+=2)ET.fromBufferAttribute(t,a),TT.fromBufferAttribute(t,a+1),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+ET.distanceTo(TT);e.setAttribute("lineDistance",new Ht(i,1))}else Rt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class mN extends dd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Sw extends Or{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Tt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const AT=new hn,o2=new Vp,Dx=new er,Ux=new he;class gN extends ii{constructor(e=new xn,t=new Sw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Dx.copy(i.boundingSphere),Dx.applyMatrix4(a),Dx.radius+=r,e.ray.intersectsSphere(Dx)===!1)return;AT.copy(a).invert(),o2.copy(e.ray).applyMatrix4(AT);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,f=i.index,g=i.attributes.position;if(f!==null){const y=Math.max(0,o.start),_=Math.min(f.count,o.start+o.count);for(let S=y,A=_;S<A;S++){const T=f.getX(S);Ux.fromBufferAttribute(g,T),CT(Ux,T,d,a,e,t,this)}}else{const y=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count);for(let S=y,A=_;S<A;S++)Ux.fromBufferAttribute(g,S),CT(Ux,S,d,a,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=a.length;r<o;r++){const c=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function CT(n,e,t,i,a,r,o){const c=o2.distanceSqToPoint(n);if(c<t){const d=new he;o2.closestPointToPoint(n,d),d.applyMatrix4(i);const f=a.ray.origin.distanceTo(d);if(f<a.near||f>a.far)return;r.push({distance:f,distanceToRay:Math.sqrt(c),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class vN extends ra{constructor(e,t,i,a,r=Fi,o=Fi,c,d,f){super(e,t,i,a,r,o,c,d,f),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const m=this;function g(){m.needsUpdate=!0,m._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class dz extends vN{constructor(e,t,i,a,r,o,c,d){super({},e,t,i,a,r,o,c,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class fz extends ra{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ya,this.minFilter=ya,this.generateMipmaps=!1,this.needsUpdate=!0}}class qb extends ra{constructor(e,t,i,a,r,o,c,d,f,m,g,y){super(null,o,c,d,f,m,a,r,g,y),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class hz extends qb{constructor(e,t,i,a,r,o){super(e,t,i,r,o),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=Rs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class pz extends qb{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,ic),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class mz extends ra{constructor(e,t,i,a,r,o,c,d,f){super(e,t,i,a,r,o,c,d,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class zp extends ra{constructor(e,t,i=Ro,a,r,o,c=ya,d=ya,f,m=rc,g=1){if(m!==rc&&m!==rd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const y={width:e,height:t,depth:g};super(y,a,r,o,c,d,m,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new sd(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class xN extends zp{constructor(e,t=Ro,i=ic,a,r,o=ya,c=ya,d,f=rc){const m={width:e,height:e,depth:1},g=[m,m,m,m,m,m];super(e,e,t,i,a,r,o,c,d,f),this.image=g,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class ww extends ra{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Kb extends xn{constructor(e=1,t=1,i=4,a=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:a,heightSegments:r},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),a=Math.max(3,Math.floor(a)),r=Math.max(1,Math.floor(r));const o=[],c=[],d=[],f=[],m=t/2,g=Math.PI/2*e,y=t,_=2*g+y,S=i*2+r,A=a+1,T=new he,w=new he;for(let N=0;N<=S;N++){let D=0,U=0,O=0,B=0;if(N<=i){const L=N/i,I=L*Math.PI/2;U=-m-e*Math.cos(I),O=e*Math.sin(I),B=-e*Math.cos(I),D=L*g}else if(N<=i+r){const L=(N-i)/r;U=-m+L*t,O=e,B=0,D=g+L*y}else{const L=(N-i-r)/i,I=L*Math.PI/2;U=m+e*Math.sin(I),O=e*Math.cos(I),B=e*Math.sin(I),D=g+y+L*g}const z=Math.max(0,Math.min(1,D/_));let F=0;N===0?F=.5/a:N===S&&(F=-.5/a);for(let L=0;L<=a;L++){const I=L/a,Y=I*Math.PI*2,q=Math.sin(Y),K=Math.cos(Y);w.x=-O*K,w.y=U,w.z=O*q,c.push(w.x,w.y,w.z),T.set(-O*K,B,O*q),T.normalize(),d.push(T.x,T.y,T.z),f.push(I+F,z)}if(N>0){const L=(N-1)*A;for(let I=0;I<a;I++){const Y=L+I,q=L+I+1,K=N*A+I,$=N*A+I+1;o.push(Y,q,K),o.push(q,$,K)}}}this.setIndex(o),this.setAttribute("position",new Ht(c,3)),this.setAttribute("normal",new Ht(d,3)),this.setAttribute("uv",new Ht(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kb(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Zb extends xn{constructor(e=1,t=32,i=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:a},t=Math.max(3,t);const r=[],o=[],c=[],d=[],f=new he,m=new ft;o.push(0,0,0),c.push(0,0,1),d.push(.5,.5);for(let g=0,y=3;g<=t;g++,y+=3){const _=i+g/t*a;f.x=e*Math.cos(_),f.y=e*Math.sin(_),o.push(f.x,f.y,f.z),c.push(0,0,1),m.x=(o[y]/e+1)/2,m.y=(o[y+1]/e+1)/2,d.push(m.x,m.y)}for(let g=1;g<=t;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new Ht(o,3)),this.setAttribute("normal",new Ht(c,3)),this.setAttribute("uv",new Ht(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class L0 extends xn{constructor(e=1,t=1,i=1,a=32,r=1,o=!1,c=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:a,heightSegments:r,openEnded:o,thetaStart:c,thetaLength:d};const f=this;a=Math.floor(a),r=Math.floor(r);const m=[],g=[],y=[],_=[];let S=0;const A=[],T=i/2;let w=0;N(),o===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(m),this.setAttribute("position",new Ht(g,3)),this.setAttribute("normal",new Ht(y,3)),this.setAttribute("uv",new Ht(_,2));function N(){const U=new he,O=new he;let B=0;const z=(t-e)/i;for(let F=0;F<=r;F++){const L=[],I=F/r,Y=I*(t-e)+e;for(let q=0;q<=a;q++){const K=q/a,$=K*d+c,ce=Math.sin($),G=Math.cos($);O.x=Y*ce,O.y=-I*i+T,O.z=Y*G,g.push(O.x,O.y,O.z),U.set(ce,z,G).normalize(),y.push(U.x,U.y,U.z),_.push(K,1-I),L.push(S++)}A.push(L)}for(let F=0;F<a;F++)for(let L=0;L<r;L++){const I=A[L][F],Y=A[L+1][F],q=A[L+1][F+1],K=A[L][F+1];(e>0||L!==0)&&(m.push(I,Y,K),B+=3),(t>0||L!==r-1)&&(m.push(Y,q,K),B+=3)}f.addGroup(w,B,0),w+=B}function D(U){const O=S,B=new ft,z=new he;let F=0;const L=U===!0?e:t,I=U===!0?1:-1;for(let q=1;q<=a;q++)g.push(0,T*I,0),y.push(0,I,0),_.push(.5,.5),S++;const Y=S;for(let q=0;q<=a;q++){const $=q/a*d+c,ce=Math.cos($),G=Math.sin($);z.x=L*G,z.y=T*I,z.z=L*ce,g.push(z.x,z.y,z.z),y.push(0,I,0),B.x=ce*.5+.5,B.y=G*.5*I+.5,_.push(B.x,B.y),S++}for(let q=0;q<a;q++){const K=O+q,$=Y+q;U===!0?m.push($,$+1,K):m.push($+1,$,K),F+=3}f.addGroup(w,F,U===!0?1:2),w+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new L0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class z0 extends L0{constructor(e=1,t=1,i=32,a=1,r=!1,o=0,c=Math.PI*2){super(0,e,t,i,a,r,o,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:a,openEnded:r,thetaStart:o,thetaLength:c}}static fromJSON(e){return new z0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class md extends xn{constructor(e=[],t=[],i=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:a};const r=[],o=[];c(a),f(i),m(),this.setAttribute("position",new Ht(r,3)),this.setAttribute("normal",new Ht(r.slice(),3)),this.setAttribute("uv",new Ht(o,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function c(N){const D=new he,U=new he,O=new he;for(let B=0;B<t.length;B+=3)_(t[B+0],D),_(t[B+1],U),_(t[B+2],O),d(D,U,O,N)}function d(N,D,U,O){const B=O+1,z=[];for(let F=0;F<=B;F++){z[F]=[];const L=N.clone().lerp(U,F/B),I=D.clone().lerp(U,F/B),Y=B-F;for(let q=0;q<=Y;q++)q===0&&F===B?z[F][q]=L:z[F][q]=L.clone().lerp(I,q/Y)}for(let F=0;F<B;F++)for(let L=0;L<2*(B-F)-1;L++){const I=Math.floor(L/2);L%2===0?(y(z[F][I+1]),y(z[F+1][I]),y(z[F][I])):(y(z[F][I+1]),y(z[F+1][I+1]),y(z[F+1][I]))}}function f(N){const D=new he;for(let U=0;U<r.length;U+=3)D.x=r[U+0],D.y=r[U+1],D.z=r[U+2],D.normalize().multiplyScalar(N),r[U+0]=D.x,r[U+1]=D.y,r[U+2]=D.z}function m(){const N=new he;for(let D=0;D<r.length;D+=3){N.x=r[D+0],N.y=r[D+1],N.z=r[D+2];const U=T(N)/2/Math.PI+.5,O=w(N)/Math.PI+.5;o.push(U,1-O)}S(),g()}function g(){for(let N=0;N<o.length;N+=6){const D=o[N+0],U=o[N+2],O=o[N+4],B=Math.max(D,U,O),z=Math.min(D,U,O);B>.9&&z<.1&&(D<.2&&(o[N+0]+=1),U<.2&&(o[N+2]+=1),O<.2&&(o[N+4]+=1))}}function y(N){r.push(N.x,N.y,N.z)}function _(N,D){const U=N*3;D.x=e[U+0],D.y=e[U+1],D.z=e[U+2]}function S(){const N=new he,D=new he,U=new he,O=new he,B=new ft,z=new ft,F=new ft;for(let L=0,I=0;L<r.length;L+=9,I+=6){N.set(r[L+0],r[L+1],r[L+2]),D.set(r[L+3],r[L+4],r[L+5]),U.set(r[L+6],r[L+7],r[L+8]),B.set(o[I+0],o[I+1]),z.set(o[I+2],o[I+3]),F.set(o[I+4],o[I+5]),O.copy(N).add(D).add(U).divideScalar(3);const Y=T(O);A(B,I+0,N,Y),A(z,I+2,D,Y),A(F,I+4,U,Y)}}function A(N,D,U,O){O<0&&N.x===1&&(o[D]=N.x-1),U.x===0&&U.z===0&&(o[D]=O/2/Math.PI+.5)}function T(N){return Math.atan2(N.z,-N.x)}function w(N){return Math.atan2(-N.y,Math.sqrt(N.x*N.x+N.z*N.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new md(e.vertices,e.indices,e.radius,e.detail)}}class Jb extends md{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,a=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Jb(e.radius,e.detail)}}const Ox=new he,Lx=new he,X_=new he,zx=new Cs;class yN extends xn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),r=Math.cos(Cf*t),o=e.getIndex(),c=e.getAttribute("position"),d=o?o.count:c.count,f=[0,0,0],m=["a","b","c"],g=new Array(3),y={},_=[];for(let S=0;S<d;S+=3){o?(f[0]=o.getX(S),f[1]=o.getX(S+1),f[2]=o.getX(S+2)):(f[0]=S,f[1]=S+1,f[2]=S+2);const{a:A,b:T,c:w}=zx;if(A.fromBufferAttribute(c,f[0]),T.fromBufferAttribute(c,f[1]),w.fromBufferAttribute(c,f[2]),zx.getNormal(X_),g[0]=`${Math.round(A.x*a)},${Math.round(A.y*a)},${Math.round(A.z*a)}`,g[1]=`${Math.round(T.x*a)},${Math.round(T.y*a)},${Math.round(T.z*a)}`,g[2]=`${Math.round(w.x*a)},${Math.round(w.y*a)},${Math.round(w.z*a)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let N=0;N<3;N++){const D=(N+1)%3,U=g[N],O=g[D],B=zx[m[N]],z=zx[m[D]],F=`${U}_${O}`,L=`${O}_${U}`;L in y&&y[L]?(X_.dot(y[L].normal)<=r&&(_.push(B.x,B.y,B.z),_.push(z.x,z.y,z.z)),y[L]=null):F in y||(y[F]={index0:f[N],index1:f[D],normal:X_.clone()})}}for(const S in y)if(y[S]){const{index0:A,index1:T}=y[S];Ox.fromBufferAttribute(c,A),Lx.fromBufferAttribute(c,T),_.push(Ox.x,Ox.y,Ox.z),_.push(Lx.x,Lx.y,Lx.z)}this.setAttribute("position",new Ht(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class pl{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Rt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,a=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),r+=i.distanceTo(a),t.push(r),a=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let a=0;const r=i.length;let o;t?o=t:o=e*i[r-1];let c=0,d=r-1,f;for(;c<=d;)if(a=Math.floor(c+(d-c)/2),f=i[a]-o,f<0)c=a+1;else if(f>0)d=a-1;else{d=a;break}if(a=d,i[a]===o)return a/(r-1);const m=i[a],y=i[a+1]-m,_=(o-m)/y;return(a+_)/(r-1)}getTangent(e,t){let a=e-1e-4,r=e+1e-4;a<0&&(a=0),r>1&&(r=1);const o=this.getPoint(a),c=this.getPoint(r),d=t||(o.isVector2?new ft:new he);return d.copy(c).sub(o).normalize(),d}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new he,a=[],r=[],o=[],c=new he,d=new hn;for(let _=0;_<=e;_++){const S=_/e;a[_]=this.getTangentAt(S,new he)}r[0]=new he,o[0]=new he;let f=Number.MAX_VALUE;const m=Math.abs(a[0].x),g=Math.abs(a[0].y),y=Math.abs(a[0].z);m<=f&&(f=m,i.set(1,0,0)),g<=f&&(f=g,i.set(0,1,0)),y<=f&&i.set(0,0,1),c.crossVectors(a[0],i).normalize(),r[0].crossVectors(a[0],c),o[0].crossVectors(a[0],r[0]);for(let _=1;_<=e;_++){if(r[_]=r[_-1].clone(),o[_]=o[_-1].clone(),c.crossVectors(a[_-1],a[_]),c.length()>Number.EPSILON){c.normalize();const S=Math.acos(fn(a[_-1].dot(a[_]),-1,1));r[_].applyMatrix4(d.makeRotationAxis(c,S))}o[_].crossVectors(a[_],r[_])}if(t===!0){let _=Math.acos(fn(r[0].dot(r[e]),-1,1));_/=e,a[0].dot(c.crossVectors(r[0],r[e]))>0&&(_=-_);for(let S=1;S<=e;S++)r[S].applyMatrix4(d.makeRotationAxis(a[S],_*S)),o[S].crossVectors(a[S],r[S])}return{tangents:a,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Qb extends pl{constructor(e=0,t=0,i=1,a=1,r=0,o=Math.PI*2,c=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=a,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=c,this.aRotation=d}getPoint(e,t=new ft){const i=t,a=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=a;for(;r>a;)r-=a;r<Number.EPSILON&&(o?r=0:r=a),this.aClockwise===!0&&!o&&(r===a?r=-a:r=r-a);const c=this.aStartAngle+e*r;let d=this.aX+this.xRadius*Math.cos(c),f=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),y=d-this.aX,_=f-this.aY;d=y*m-_*g+this.aX,f=y*g+_*m+this.aY}return i.set(d,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class bN extends Qb{constructor(e,t,i,a,r,o){super(e,t,i,i,a,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Mw(){let n=0,e=0,t=0,i=0;function a(r,o,c,d){n=r,e=c,t=-3*r+3*o-2*c-d,i=2*r-2*o+c+d}return{initCatmullRom:function(r,o,c,d,f){a(o,c,f*(c-r),f*(d-o))},initNonuniformCatmullRom:function(r,o,c,d,f,m,g){let y=(o-r)/f-(c-r)/(f+m)+(c-o)/m,_=(c-o)/m-(d-o)/(m+g)+(d-c)/g;y*=m,_*=m,a(o,c,y,_)},calc:function(r){const o=r*r,c=o*r;return n+e*r+t*o+i*c}}}const Px=new he,Y_=new Mw,q_=new Mw,K_=new Mw;class _N extends pl{constructor(e=[],t=!1,i="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=a}getPoint(e,t=new he){const i=t,a=this.points,r=a.length,o=(r-(this.closed?0:1))*e;let c=Math.floor(o),d=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/r)+1)*r:d===0&&c===r-1&&(c=r-2,d=1);let f,m;this.closed||c>0?f=a[(c-1)%r]:(Px.subVectors(a[0],a[1]).add(a[0]),f=Px);const g=a[c%r],y=a[(c+1)%r];if(this.closed||c+2<r?m=a[(c+2)%r]:(Px.subVectors(a[r-1],a[r-2]).add(a[r-1]),m=Px),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let S=Math.pow(f.distanceToSquared(g),_),A=Math.pow(g.distanceToSquared(y),_),T=Math.pow(y.distanceToSquared(m),_);A<1e-4&&(A=1),S<1e-4&&(S=A),T<1e-4&&(T=A),Y_.initNonuniformCatmullRom(f.x,g.x,y.x,m.x,S,A,T),q_.initNonuniformCatmullRom(f.y,g.y,y.y,m.y,S,A,T),K_.initNonuniformCatmullRom(f.z,g.z,y.z,m.z,S,A,T)}else this.curveType==="catmullrom"&&(Y_.initCatmullRom(f.x,g.x,y.x,m.x,this.tension),q_.initCatmullRom(f.y,g.y,y.y,m.y,this.tension),K_.initCatmullRom(f.z,g.z,y.z,m.z,this.tension));return i.set(Y_.calc(d),q_.calc(d),K_.calc(d)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(new he().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function NT(n,e,t,i,a){const r=(i-e)*.5,o=(a-t)*.5,c=n*n,d=n*c;return(2*t-2*i+r+o)*d+(-3*t+3*i-2*r-o)*c+r*n+t}function gz(n,e){const t=1-n;return t*t*e}function vz(n,e){return 2*(1-n)*n*e}function xz(n,e){return n*n*e}function Qg(n,e,t,i){return gz(n,e)+vz(n,t)+xz(n,i)}function yz(n,e){const t=1-n;return t*t*t*e}function bz(n,e){const t=1-n;return 3*t*t*n*e}function _z(n,e){return 3*(1-n)*n*n*e}function Sz(n,e){return n*n*n*e}function $g(n,e,t,i,a){return yz(n,e)+bz(n,t)+_z(n,i)+Sz(n,a)}class Ew extends pl{constructor(e=new ft,t=new ft,i=new ft,a=new ft){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=a}getPoint(e,t=new ft){const i=t,a=this.v0,r=this.v1,o=this.v2,c=this.v3;return i.set($g(e,a.x,r.x,o.x,c.x),$g(e,a.y,r.y,o.y,c.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class SN extends pl{constructor(e=new he,t=new he,i=new he,a=new he){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=a}getPoint(e,t=new he){const i=t,a=this.v0,r=this.v1,o=this.v2,c=this.v3;return i.set($g(e,a.x,r.x,o.x,c.x),$g(e,a.y,r.y,o.y,c.y),$g(e,a.z,r.z,o.z,c.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Tw extends pl{constructor(e=new ft,t=new ft){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ft){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ft){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wN extends pl{constructor(e=new he,t=new he){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new he){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new he){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Aw extends pl{constructor(e=new ft,t=new ft,i=new ft){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ft){const i=t,a=this.v0,r=this.v1,o=this.v2;return i.set(Qg(e,a.x,r.x,o.x),Qg(e,a.y,r.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Cw extends pl{constructor(e=new he,t=new he,i=new he){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new he){const i=t,a=this.v0,r=this.v1,o=this.v2;return i.set(Qg(e,a.x,r.x,o.x),Qg(e,a.y,r.y,o.y),Qg(e,a.z,r.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Nw extends pl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ft){const i=t,a=this.points,r=(a.length-1)*e,o=Math.floor(r),c=r-o,d=a[o===0?o:o-1],f=a[o],m=a[o>a.length-2?a.length-1:o+1],g=a[o>a.length-3?a.length-1:o+2];return i.set(NT(c,d.x,f.x,m.x,g.x),NT(c,d.y,f.y,m.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const a=this.points[t];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(new ft().fromArray(a))}return this}}var cb=Object.freeze({__proto__:null,ArcCurve:bN,CatmullRomCurve3:_N,CubicBezierCurve:Ew,CubicBezierCurve3:SN,EllipseCurve:Qb,LineCurve:Tw,LineCurve3:wN,QuadraticBezierCurve:Aw,QuadraticBezierCurve3:Cw,SplineCurve:Nw});class MN extends pl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new cb[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),a=this.getCurveLengths();let r=0;for(;r<a.length;){if(a[r]>=i){const o=a[r]-i,c=this.curves[r],d=c.getLength(),f=d===0?0:1-o/d;return c.getPointAt(f,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,a=this.curves.length;i<a;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let a=0,r=this.curves;a<r.length;a++){const o=r[a],c=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,d=o.getPoints(c);for(let f=0;f<d.length;f++){const m=d[f];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const a=this.curves[t];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const a=e.curves[t];this.curves.push(new cb[a.type]().fromJSON(a))}return this}}class ub extends MN{constructor(e){super(),this.type="Path",this.currentPoint=new ft,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Tw(this.currentPoint.clone(),new ft(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,a){const r=new Aw(this.currentPoint.clone(),new ft(e,t),new ft(i,a));return this.curves.push(r),this.currentPoint.set(i,a),this}bezierCurveTo(e,t,i,a,r,o){const c=new Ew(this.currentPoint.clone(),new ft(e,t),new ft(i,a),new ft(r,o));return this.curves.push(c),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Nw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,a,r,o){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+c,t+d,i,a,r,o),this}absarc(e,t,i,a,r,o){return this.absellipse(e,t,i,i,a,r,o),this}ellipse(e,t,i,a,r,o,c,d){const f=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+f,t+m,i,a,r,o,c,d),this}absellipse(e,t,i,a,r,o,c,d){const f=new Qb(e,t,i,a,r,o,c,d);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const m=f.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Nf extends ub{constructor(e){super(e),this.uuid=eo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,a=this.holes.length;i<a;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const a=e.holes[t];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const a=this.holes[t];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const a=e.holes[t];this.holes.push(new ub().fromJSON(a))}return this}}function wz(n,e,t=2){const i=e&&e.length,a=i?e[0]*t:n.length;let r=EN(n,0,a,t,!0);const o=[];if(!r||r.next===r.prev)return o;let c,d,f;if(i&&(r=Cz(n,e,r,t)),n.length>80*t){c=n[0],d=n[1];let m=c,g=d;for(let y=t;y<a;y+=t){const _=n[y],S=n[y+1];_<c&&(c=_),S<d&&(d=S),_>m&&(m=_),S>g&&(g=S)}f=Math.max(m-c,g-d),f=f!==0?32767/f:0}return y0(r,o,t,c,d,f,0),o}function EN(n,e,t,i,a){let r;if(a===kz(n,e,t,i)>0)for(let o=e;o<t;o+=i)r=RT(o/i|0,n[o],n[o+1],r);else for(let o=t-i;o>=e;o-=i)r=RT(o/i|0,n[o],n[o+1],r);return r&&Pp(r,r.next)&&(_0(r),r=r.next),r}function Pf(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Pp(t,t.next)||aa(t.prev,t,t.next)===0)){if(_0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function y0(n,e,t,i,a,r,o){if(!n)return;!o&&r&&Oz(n,i,a,r);let c=n;for(;n.prev!==n.next;){const d=n.prev,f=n.next;if(r?Ez(n,i,a,r):Mz(n)){e.push(d.i,n.i,f.i),_0(n),n=f.next,c=f.next;continue}if(n=f,n===c){o?o===1?(n=Tz(Pf(n),e),y0(n,e,t,i,a,r,2)):o===2&&Az(n,e,t,i,a,r):y0(Pf(n),e,t,i,a,r,1);break}}}function Mz(n){const e=n.prev,t=n,i=n.next;if(aa(e,t,i)>=0)return!1;const a=e.x,r=t.x,o=i.x,c=e.y,d=t.y,f=i.y,m=Math.min(a,r,o),g=Math.min(c,d,f),y=Math.max(a,r,o),_=Math.max(c,d,f);let S=i.next;for(;S!==e;){if(S.x>=m&&S.x<=y&&S.y>=g&&S.y<=_&&kg(a,c,r,d,o,f,S.x,S.y)&&aa(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function Ez(n,e,t,i){const a=n.prev,r=n,o=n.next;if(aa(a,r,o)>=0)return!1;const c=a.x,d=r.x,f=o.x,m=a.y,g=r.y,y=o.y,_=Math.min(c,d,f),S=Math.min(m,g,y),A=Math.max(c,d,f),T=Math.max(m,g,y),w=l2(_,S,e,t,i),N=l2(A,T,e,t,i);let D=n.prevZ,U=n.nextZ;for(;D&&D.z>=w&&U&&U.z<=N;){if(D.x>=_&&D.x<=A&&D.y>=S&&D.y<=T&&D!==a&&D!==o&&kg(c,m,d,g,f,y,D.x,D.y)&&aa(D.prev,D,D.next)>=0||(D=D.prevZ,U.x>=_&&U.x<=A&&U.y>=S&&U.y<=T&&U!==a&&U!==o&&kg(c,m,d,g,f,y,U.x,U.y)&&aa(U.prev,U,U.next)>=0))return!1;U=U.nextZ}for(;D&&D.z>=w;){if(D.x>=_&&D.x<=A&&D.y>=S&&D.y<=T&&D!==a&&D!==o&&kg(c,m,d,g,f,y,D.x,D.y)&&aa(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;U&&U.z<=N;){if(U.x>=_&&U.x<=A&&U.y>=S&&U.y<=T&&U!==a&&U!==o&&kg(c,m,d,g,f,y,U.x,U.y)&&aa(U.prev,U,U.next)>=0)return!1;U=U.nextZ}return!0}function Tz(n,e){let t=n;do{const i=t.prev,a=t.next.next;!Pp(i,a)&&AN(i,t,t.next,a)&&b0(i,a)&&b0(a,i)&&(e.push(i.i,t.i,a.i),_0(t),_0(t.next),t=n=a),t=t.next}while(t!==n);return Pf(t)}function Az(n,e,t,i,a,r){let o=n;do{let c=o.next.next;for(;c!==o.prev;){if(o.i!==c.i&&Pz(o,c)){let d=CN(o,c);o=Pf(o,o.next),d=Pf(d,d.next),y0(o,e,t,i,a,r,0),y0(d,e,t,i,a,r,0);return}c=c.next}o=o.next}while(o!==n)}function Cz(n,e,t,i){const a=[];for(let r=0,o=e.length;r<o;r++){const c=e[r]*i,d=r<o-1?e[r+1]*i:n.length,f=EN(n,c,d,i,!1);f===f.next&&(f.steiner=!0),a.push(zz(f))}a.sort(Nz);for(let r=0;r<a.length;r++)t=Rz(a[r],t);return t}function Nz(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),a=(e.next.y-e.y)/(e.next.x-e.x);t=i-a}return t}function Rz(n,e){const t=Dz(n,e);if(!t)return e;const i=CN(t,n);return Pf(i,i.next),Pf(t,t.next)}function Dz(n,e){let t=e;const i=n.x,a=n.y;let r=-1/0,o;if(Pp(n,t))return t;do{if(Pp(n,t.next))return t.next;if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const g=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=i&&g>r&&(r=g,o=t.x<t.next.x?t:t.next,g===i))return o}t=t.next}while(t!==e);if(!o)return null;const c=o,d=o.x,f=o.y;let m=1/0;t=o;do{if(i>=t.x&&t.x>=d&&i!==t.x&&TN(a<f?i:r,a,d,f,a<f?r:i,a,t.x,t.y)){const g=Math.abs(a-t.y)/(i-t.x);b0(t,n)&&(g<m||g===m&&(t.x>o.x||t.x===o.x&&Uz(o,t)))&&(o=t,m=g)}t=t.next}while(t!==c);return o}function Uz(n,e){return aa(n.prev,n,e.prev)<0&&aa(e.next,n,n.next)<0}function Oz(n,e,t,i){let a=n;do a.z===0&&(a.z=l2(a.x,a.y,e,t,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,Lz(a)}function Lz(n){let e,t=1;do{let i=n,a;n=null;let r=null;for(e=0;i;){e++;let o=i,c=0;for(let f=0;f<t&&(c++,o=o.nextZ,!!o);f++);let d=t;for(;c>0||d>0&&o;)c!==0&&(d===0||!o||i.z<=o.z)?(a=i,i=i.nextZ,c--):(a=o,o=o.nextZ,d--),r?r.nextZ=a:n=a,a.prevZ=r,r=a;i=o}r.nextZ=null,t*=2}while(e>1);return n}function l2(n,e,t,i,a){return n=(n-t)*a|0,e=(e-i)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function zz(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function TN(n,e,t,i,a,r,o,c){return(a-o)*(e-c)>=(n-o)*(r-c)&&(n-o)*(i-c)>=(t-o)*(e-c)&&(t-o)*(r-c)>=(a-o)*(i-c)}function kg(n,e,t,i,a,r,o,c){return!(n===o&&e===c)&&TN(n,e,t,i,a,r,o,c)}function Pz(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Iz(n,e)&&(b0(n,e)&&b0(e,n)&&Bz(n,e)&&(aa(n.prev,n,e.prev)||aa(n,e.prev,e))||Pp(n,e)&&aa(n.prev,n,n.next)>0&&aa(e.prev,e,e.next)>0)}function aa(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Pp(n,e){return n.x===e.x&&n.y===e.y}function AN(n,e,t,i){const a=Bx(aa(n,e,t)),r=Bx(aa(n,e,i)),o=Bx(aa(t,i,n)),c=Bx(aa(t,i,e));return!!(a!==r&&o!==c||a===0&&Ix(n,t,e)||r===0&&Ix(n,i,e)||o===0&&Ix(t,n,i)||c===0&&Ix(t,e,i))}function Ix(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Bx(n){return n>0?1:n<0?-1:0}function Iz(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&AN(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function b0(n,e){return aa(n.prev,n,n.next)<0?aa(n,e,n.next)>=0&&aa(n,n.prev,e)>=0:aa(n,e,n.prev)<0||aa(n,n.next,e)<0}function Bz(n,e){let t=n,i=!1;const a=(n.x+e.x)/2,r=(n.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&a<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function CN(n,e){const t=c2(n.i,n.x,n.y),i=c2(e.i,e.x,e.y),a=n.next,r=e.prev;return n.next=e,e.prev=n,t.next=a,a.prev=t,i.next=t,t.prev=i,r.next=i,i.prev=r,i}function RT(n,e,t,i){const a=c2(n,e,t);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function _0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function c2(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function kz(n,e,t,i){let a=0;for(let r=e,o=t-i;r<t;r+=i)a+=(n[o]-n[r])*(n[r+1]+n[o+1]),o=r;return a}class Fz{static triangulate(e,t,i=2){return wz(e,t,i)}}class ul{static area(e){const t=e.length;let i=0;for(let a=t-1,r=0;r<t;a=r++)i+=e[a].x*e[r].y-e[r].x*e[a].y;return i*.5}static isClockWise(e){return ul.area(e)<0}static triangulateShape(e,t){const i=[],a=[],r=[];DT(e),UT(i,e);let o=e.length;t.forEach(DT);for(let d=0;d<t.length;d++)a.push(o),o+=t[d].length,UT(i,t[d]);const c=Fz.triangulate(i,a);for(let d=0;d<c.length;d+=3)r.push(c.slice(d,d+3));return r}}function DT(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function UT(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class $b extends xn{constructor(e=new Nf([new ft(.5,.5),new ft(-.5,.5),new ft(-.5,-.5),new ft(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,a=[],r=[];for(let c=0,d=e.length;c<d;c++){const f=e[c];o(f)}this.setAttribute("position",new Ht(a,3)),this.setAttribute("uv",new Ht(r,2)),this.computeVertexNormals();function o(c){const d=[],f=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:_-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,N=t.UVGenerator!==void 0?t.UVGenerator:jz;let D,U=!1,O,B,z,F;if(w){D=w.getSpacedPoints(m),U=!0,y=!1;const Te=w.isCatmullRomCurve3?w.closed:!1;O=w.computeFrenetFrames(m,Te),B=new he,z=new he,F=new he}y||(T=0,_=0,S=0,A=0);const L=c.extractPoints(f);let I=L.shape;const Y=L.holes;if(!ul.isClockWise(I)){I=I.reverse();for(let Te=0,je=Y.length;Te<je;Te++){const Le=Y[Te];ul.isClockWise(Le)&&(Y[Te]=Le.reverse())}}function K(Te){const Le=10000000000000001e-36;let $e=Te[0];for(let J=1;J<=Te.length;J++){const et=J%Te.length,We=Te[et],Se=We.x-$e.x,Ee=We.y-$e.y,X=Se*Se+Ee*Ee,V=Math.max(Math.abs(We.x),Math.abs(We.y),Math.abs($e.x),Math.abs($e.y)),fe=Le*V*V;if(X<=fe){Te.splice(et,1),J--;continue}$e=We}}K(I),Y.forEach(K);const $=Y.length,ce=I;for(let Te=0;Te<$;Te++){const je=Y[Te];I=I.concat(je)}function G(Te,je,Le){return je||an("ExtrudeGeometry: vec does not exist"),Te.clone().addScaledVector(je,Le)}const W=I.length;function Q(Te,je,Le){let $e,J,et;const We=Te.x-je.x,Se=Te.y-je.y,Ee=Le.x-Te.x,X=Le.y-Te.y,V=We*We+Se*Se,fe=We*X-Se*Ee;if(Math.abs(fe)>Number.EPSILON){const Ce=Math.sqrt(V),Ae=Math.sqrt(Ee*Ee+X*X),we=je.x-Se/Ce,ot=je.y+We/Ce,it=Le.x-X/Ae,ht=Le.y+Ee/Ae,xt=((it-we)*X-(ht-ot)*Ee)/(We*X-Se*Ee);$e=we+We*xt-Te.x,J=ot+Se*xt-Te.y;const ke=$e*$e+J*J;if(ke<=2)return new ft($e,J);et=Math.sqrt(ke/2)}else{let Ce=!1;We>Number.EPSILON?Ee>Number.EPSILON&&(Ce=!0):We<-Number.EPSILON?Ee<-Number.EPSILON&&(Ce=!0):Math.sign(Se)===Math.sign(X)&&(Ce=!0),Ce?($e=-Se,J=We,et=Math.sqrt(V)):($e=We,J=Se,et=Math.sqrt(V/2))}return new ft($e/et,J/et)}const ue=[];for(let Te=0,je=ce.length,Le=je-1,$e=Te+1;Te<je;Te++,Le++,$e++)Le===je&&(Le=0),$e===je&&($e=0),ue[Te]=Q(ce[Te],ce[Le],ce[$e]);const de=[];let j,ee=ue.concat();for(let Te=0,je=$;Te<je;Te++){const Le=Y[Te];j=[];for(let $e=0,J=Le.length,et=J-1,We=$e+1;$e<J;$e++,et++,We++)et===J&&(et=0),We===J&&(We=0),j[$e]=Q(Le[$e],Le[et],Le[We]);de.push(j),ee=ee.concat(j)}let ne;if(T===0)ne=ul.triangulateShape(ce,Y);else{const Te=[],je=[];for(let Le=0;Le<T;Le++){const $e=Le/T,J=_*Math.cos($e*Math.PI/2),et=S*Math.sin($e*Math.PI/2)+A;for(let We=0,Se=ce.length;We<Se;We++){const Ee=G(ce[We],ue[We],et);ze(Ee.x,Ee.y,-J),$e===0&&Te.push(Ee)}for(let We=0,Se=$;We<Se;We++){const Ee=Y[We];j=de[We];const X=[];for(let V=0,fe=Ee.length;V<fe;V++){const Ce=G(Ee[V],j[V],et);ze(Ce.x,Ce.y,-J),$e===0&&X.push(Ce)}$e===0&&je.push(X)}}ne=ul.triangulateShape(Te,je)}const oe=ne.length,re=S+A;for(let Te=0;Te<W;Te++){const je=y?G(I[Te],ee[Te],re):I[Te];U?(z.copy(O.normals[0]).multiplyScalar(je.x),B.copy(O.binormals[0]).multiplyScalar(je.y),F.copy(D[0]).add(z).add(B),ze(F.x,F.y,F.z)):ze(je.x,je.y,0)}for(let Te=1;Te<=m;Te++)for(let je=0;je<W;je++){const Le=y?G(I[je],ee[je],re):I[je];U?(z.copy(O.normals[Te]).multiplyScalar(Le.x),B.copy(O.binormals[Te]).multiplyScalar(Le.y),F.copy(D[Te]).add(z).add(B),ze(F.x,F.y,F.z)):ze(Le.x,Le.y,g/m*Te)}for(let Te=T-1;Te>=0;Te--){const je=Te/T,Le=_*Math.cos(je*Math.PI/2),$e=S*Math.sin(je*Math.PI/2)+A;for(let J=0,et=ce.length;J<et;J++){const We=G(ce[J],ue[J],$e);ze(We.x,We.y,g+Le)}for(let J=0,et=Y.length;J<et;J++){const We=Y[J];j=de[J];for(let Se=0,Ee=We.length;Se<Ee;Se++){const X=G(We[Se],j[Se],$e);U?ze(X.x,X.y+D[m-1].y,D[m-1].x+Le):ze(X.x,X.y,g+Le)}}}se(),le();function se(){const Te=a.length/3;if(y){let je=0,Le=W*je;for(let $e=0;$e<oe;$e++){const J=ne[$e];qe(J[2]+Le,J[1]+Le,J[0]+Le)}je=m+T*2,Le=W*je;for(let $e=0;$e<oe;$e++){const J=ne[$e];qe(J[0]+Le,J[1]+Le,J[2]+Le)}}else{for(let je=0;je<oe;je++){const Le=ne[je];qe(Le[2],Le[1],Le[0])}for(let je=0;je<oe;je++){const Le=ne[je];qe(Le[0]+W*m,Le[1]+W*m,Le[2]+W*m)}}i.addGroup(Te,a.length/3-Te,0)}function le(){const Te=a.length/3;let je=0;ve(ce,je),je+=ce.length;for(let Le=0,$e=Y.length;Le<$e;Le++){const J=Y[Le];ve(J,je),je+=J.length}i.addGroup(Te,a.length/3-Te,1)}function ve(Te,je){let Le=Te.length;for(;--Le>=0;){const $e=Le;let J=Le-1;J<0&&(J=Te.length-1);for(let et=0,We=m+T*2;et<We;et++){const Se=W*et,Ee=W*(et+1),X=je+$e+Se,V=je+J+Se,fe=je+J+Ee,Ce=je+$e+Ee;Ke(X,V,fe,Ce)}}}function ze(Te,je,Le){d.push(Te),d.push(je),d.push(Le)}function qe(Te,je,Le){Pe(Te),Pe(je),Pe(Le);const $e=a.length/3,J=N.generateTopUV(i,a,$e-3,$e-2,$e-1);gt(J[0]),gt(J[1]),gt(J[2])}function Ke(Te,je,Le,$e){Pe(Te),Pe(je),Pe($e),Pe(je),Pe(Le),Pe($e);const J=a.length/3,et=N.generateSideWallUV(i,a,J-6,J-3,J-2,J-1);gt(et[0]),gt(et[1]),gt(et[3]),gt(et[1]),gt(et[2]),gt(et[3])}function Pe(Te){a.push(d[Te*3+0]),a.push(d[Te*3+1]),a.push(d[Te*3+2])}function gt(Te){r.push(Te.x),r.push(Te.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Hz(t,i,e)}static fromJSON(e,t){const i=[];for(let r=0,o=e.shapes.length;r<o;r++){const c=t[e.shapes[r]];i.push(c)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new cb[a.type]().fromJSON(a)),new $b(i,e.options)}}const jz={generateTopUV:function(n,e,t,i,a){const r=e[t*3],o=e[t*3+1],c=e[i*3],d=e[i*3+1],f=e[a*3],m=e[a*3+1];return[new ft(r,o),new ft(c,d),new ft(f,m)]},generateSideWallUV:function(n,e,t,i,a,r){const o=e[t*3],c=e[t*3+1],d=e[t*3+2],f=e[i*3],m=e[i*3+1],g=e[i*3+2],y=e[a*3],_=e[a*3+1],S=e[a*3+2],A=e[r*3],T=e[r*3+1],w=e[r*3+2];return Math.abs(c-m)<Math.abs(o-f)?[new ft(o,1-d),new ft(f,1-g),new ft(y,1-S),new ft(A,1-w)]:[new ft(c,1-d),new ft(m,1-g),new ft(_,1-S),new ft(T,1-w)]}};function Hz(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,a=n.length;i<a;i++){const r=n[i];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class e1 extends md{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,a=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new e1(e.radius,e.detail)}}class t1 extends xn{constructor(e=[new ft(0,-.5),new ft(.5,0),new ft(0,.5)],t=12,i=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:a},t=Math.floor(t),a=fn(a,0,Math.PI*2);const r=[],o=[],c=[],d=[],f=[],m=1/t,g=new he,y=new ft,_=new he,S=new he,A=new he;let T=0,w=0;for(let N=0;N<=e.length-1;N++)switch(N){case 0:T=e[N+1].x-e[N].x,w=e[N+1].y-e[N].y,_.x=w*1,_.y=-T,_.z=w*0,A.copy(_),_.normalize(),d.push(_.x,_.y,_.z);break;case e.length-1:d.push(A.x,A.y,A.z);break;default:T=e[N+1].x-e[N].x,w=e[N+1].y-e[N].y,_.x=w*1,_.y=-T,_.z=w*0,S.copy(_),_.x+=A.x,_.y+=A.y,_.z+=A.z,_.normalize(),d.push(_.x,_.y,_.z),A.copy(S)}for(let N=0;N<=t;N++){const D=i+N*m*a,U=Math.sin(D),O=Math.cos(D);for(let B=0;B<=e.length-1;B++){g.x=e[B].x*U,g.y=e[B].y,g.z=e[B].x*O,o.push(g.x,g.y,g.z),y.x=N/t,y.y=B/(e.length-1),c.push(y.x,y.y);const z=d[3*B+0]*U,F=d[3*B+1],L=d[3*B+0]*O;f.push(z,F,L)}}for(let N=0;N<t;N++)for(let D=0;D<e.length-1;D++){const U=D+N*e.length,O=U,B=U+e.length,z=U+e.length+1,F=U+1;r.push(O,B,F),r.push(z,F,B)}this.setIndex(r),this.setAttribute("position",new Ht(o,3)),this.setAttribute("uv",new Ht(c,2)),this.setAttribute("normal",new Ht(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t1(e.points,e.segments,e.phiStart,e.phiLength)}}class P0 extends md{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,a,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new P0(e.radius,e.detail)}}class au extends xn{constructor(e=1,t=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:a};const r=e/2,o=t/2,c=Math.floor(i),d=Math.floor(a),f=c+1,m=d+1,g=e/c,y=t/d,_=[],S=[],A=[],T=[];for(let w=0;w<m;w++){const N=w*y-o;for(let D=0;D<f;D++){const U=D*g-r;S.push(U,-N,0),A.push(0,0,1),T.push(D/c),T.push(1-w/d)}}for(let w=0;w<d;w++)for(let N=0;N<c;N++){const D=N+f*w,U=N+f*(w+1),O=N+1+f*(w+1),B=N+1+f*w;_.push(D,U,B),_.push(U,O,B)}this.setIndex(_),this.setAttribute("position",new Ht(S,3)),this.setAttribute("normal",new Ht(A,3)),this.setAttribute("uv",new Ht(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new au(e.width,e.height,e.widthSegments,e.heightSegments)}}class n1 extends xn{constructor(e=.5,t=1,i=32,a=1,r=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:a,thetaStart:r,thetaLength:o},i=Math.max(3,i),a=Math.max(1,a);const c=[],d=[],f=[],m=[];let g=e;const y=(t-e)/a,_=new he,S=new ft;for(let A=0;A<=a;A++){for(let T=0;T<=i;T++){const w=r+T/i*o;_.x=g*Math.cos(w),_.y=g*Math.sin(w),d.push(_.x,_.y,_.z),f.push(0,0,1),S.x=(_.x/t+1)/2,S.y=(_.y/t+1)/2,m.push(S.x,S.y)}g+=y}for(let A=0;A<a;A++){const T=A*(i+1);for(let w=0;w<i;w++){const N=w+T,D=N,U=N+i+1,O=N+i+2,B=N+1;c.push(D,U,B),c.push(U,O,B)}}this.setIndex(c),this.setAttribute("position",new Ht(d,3)),this.setAttribute("normal",new Ht(f,3)),this.setAttribute("uv",new Ht(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class i1 extends xn{constructor(e=new Nf([new ft(0,.5),new ft(-.5,-.5),new ft(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],a=[],r=[],o=[];let c=0,d=0;if(Array.isArray(e)===!1)f(e);else for(let m=0;m<e.length;m++)f(e[m]),this.addGroup(c,d,m),c+=d,d=0;this.setIndex(i),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(r,3)),this.setAttribute("uv",new Ht(o,2));function f(m){const g=a.length/3,y=m.extractPoints(t);let _=y.shape;const S=y.holes;ul.isClockWise(_)===!1&&(_=_.reverse());for(let T=0,w=S.length;T<w;T++){const N=S[T];ul.isClockWise(N)===!0&&(S[T]=N.reverse())}const A=ul.triangulateShape(_,S);for(let T=0,w=S.length;T<w;T++){const N=S[T];_=_.concat(N)}for(let T=0,w=_.length;T<w;T++){const N=_[T];a.push(N.x,N.y,0),r.push(0,0,1),o.push(N.x,N.y)}for(let T=0,w=A.length;T<w;T++){const N=A[T],D=N[0]+g,U=N[1]+g,O=N[2]+g;i.push(D,U,O),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Vz(t,e)}static fromJSON(e,t){const i=[];for(let a=0,r=e.shapes.length;a<r;a++){const o=t[e.shapes[a]];i.push(o)}return new i1(i,e.curveSegments)}}function Vz(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const a=n[t];e.shapes.push(a.uuid)}else e.shapes.push(n.uuid);return e}class I0 extends xn{constructor(e=1,t=32,i=16,a=0,r=Math.PI*2,o=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:a,phiLength:r,thetaStart:o,thetaLength:c},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const d=Math.min(o+c,Math.PI);let f=0;const m=[],g=new he,y=new he,_=[],S=[],A=[],T=[];for(let w=0;w<=i;w++){const N=[],D=w/i;let U=0;w===0&&o===0?U=.5/t:w===i&&d===Math.PI&&(U=-.5/t);for(let O=0;O<=t;O++){const B=O/t;g.x=-e*Math.cos(a+B*r)*Math.sin(o+D*c),g.y=e*Math.cos(o+D*c),g.z=e*Math.sin(a+B*r)*Math.sin(o+D*c),S.push(g.x,g.y,g.z),y.copy(g).normalize(),A.push(y.x,y.y,y.z),T.push(B+U,1-D),N.push(f++)}m.push(N)}for(let w=0;w<i;w++)for(let N=0;N<t;N++){const D=m[w][N+1],U=m[w][N],O=m[w+1][N],B=m[w+1][N+1];(w!==0||o>0)&&_.push(D,U,B),(w!==i-1||d<Math.PI)&&_.push(U,O,B)}this.setIndex(_),this.setAttribute("position",new Ht(S,3)),this.setAttribute("normal",new Ht(A,3)),this.setAttribute("uv",new Ht(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new I0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class a1 extends md{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,a,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new a1(e.radius,e.detail)}}class r1 extends xn{constructor(e=1,t=.4,i=12,a=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:a,arc:r},i=Math.floor(i),a=Math.floor(a);const o=[],c=[],d=[],f=[],m=new he,g=new he,y=new he;for(let _=0;_<=i;_++)for(let S=0;S<=a;S++){const A=S/a*r,T=_/i*Math.PI*2;g.x=(e+t*Math.cos(T))*Math.cos(A),g.y=(e+t*Math.cos(T))*Math.sin(A),g.z=t*Math.sin(T),c.push(g.x,g.y,g.z),m.x=e*Math.cos(A),m.y=e*Math.sin(A),y.subVectors(g,m).normalize(),d.push(y.x,y.y,y.z),f.push(S/a),f.push(_/i)}for(let _=1;_<=i;_++)for(let S=1;S<=a;S++){const A=(a+1)*_+S-1,T=(a+1)*(_-1)+S-1,w=(a+1)*(_-1)+S,N=(a+1)*_+S;o.push(A,T,N),o.push(T,w,N)}this.setIndex(o),this.setAttribute("position",new Ht(c,3)),this.setAttribute("normal",new Ht(d,3)),this.setAttribute("uv",new Ht(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r1(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class s1 extends xn{constructor(e=1,t=.4,i=64,a=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:a,p:r,q:o},i=Math.floor(i),a=Math.floor(a);const c=[],d=[],f=[],m=[],g=new he,y=new he,_=new he,S=new he,A=new he,T=new he,w=new he;for(let D=0;D<=i;++D){const U=D/i*r*Math.PI*2;N(U,r,o,e,_),N(U+.01,r,o,e,S),T.subVectors(S,_),w.addVectors(S,_),A.crossVectors(T,w),w.crossVectors(A,T),A.normalize(),w.normalize();for(let O=0;O<=a;++O){const B=O/a*Math.PI*2,z=-t*Math.cos(B),F=t*Math.sin(B);g.x=_.x+(z*w.x+F*A.x),g.y=_.y+(z*w.y+F*A.y),g.z=_.z+(z*w.z+F*A.z),d.push(g.x,g.y,g.z),y.subVectors(g,_).normalize(),f.push(y.x,y.y,y.z),m.push(D/i),m.push(O/a)}}for(let D=1;D<=i;D++)for(let U=1;U<=a;U++){const O=(a+1)*(D-1)+(U-1),B=(a+1)*D+(U-1),z=(a+1)*D+U,F=(a+1)*(D-1)+U;c.push(O,B,F),c.push(B,z,F)}this.setIndex(c),this.setAttribute("position",new Ht(d,3)),this.setAttribute("normal",new Ht(f,3)),this.setAttribute("uv",new Ht(m,2));function N(D,U,O,B,z){const F=Math.cos(D),L=Math.sin(D),I=O/U*D,Y=Math.cos(I);z.x=B*(2+Y)*.5*F,z.y=B*(2+Y)*L*.5,z.z=B*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new s1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class o1 extends xn{constructor(e=new Cw(new he(-1,-1,0),new he(-1,1,0),new he(1,1,0)),t=64,i=1,a=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:a,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new he,d=new he,f=new ft;let m=new he;const g=[],y=[],_=[],S=[];A(),this.setIndex(S),this.setAttribute("position",new Ht(g,3)),this.setAttribute("normal",new Ht(y,3)),this.setAttribute("uv",new Ht(_,2));function A(){for(let D=0;D<t;D++)T(D);T(r===!1?t:0),N(),w()}function T(D){m=e.getPointAt(D/t,m);const U=o.normals[D],O=o.binormals[D];for(let B=0;B<=a;B++){const z=B/a*Math.PI*2,F=Math.sin(z),L=-Math.cos(z);d.x=L*U.x+F*O.x,d.y=L*U.y+F*O.y,d.z=L*U.z+F*O.z,d.normalize(),y.push(d.x,d.y,d.z),c.x=m.x+i*d.x,c.y=m.y+i*d.y,c.z=m.z+i*d.z,g.push(c.x,c.y,c.z)}}function w(){for(let D=1;D<=t;D++)for(let U=1;U<=a;U++){const O=(a+1)*(D-1)+(U-1),B=(a+1)*D+(U-1),z=(a+1)*D+U,F=(a+1)*(D-1)+U;S.push(O,B,F),S.push(B,z,F)}}function N(){for(let D=0;D<=t;D++)for(let U=0;U<=a;U++)f.x=D/t,f.y=U/a,_.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new o1(new cb[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class NN extends xn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,a=new he,r=new he;if(e.index!==null){const o=e.attributes.position,c=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:c.count,materialIndex:0}]);for(let f=0,m=d.length;f<m;++f){const g=d[f],y=g.start,_=g.count;for(let S=y,A=y+_;S<A;S+=3)for(let T=0;T<3;T++){const w=c.getX(S+T),N=c.getX(S+(T+1)%3);a.fromBufferAttribute(o,w),r.fromBufferAttribute(o,N),OT(a,r,i)===!0&&(t.push(a.x,a.y,a.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let c=0,d=o.count/3;c<d;c++)for(let f=0;f<3;f++){const m=3*c+f,g=3*c+(f+1)%3;a.fromBufferAttribute(o,m),r.fromBufferAttribute(o,g),OT(a,r,i)===!0&&(t.push(a.x,a.y,a.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Ht(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function OT(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(a)===!0?!1:(t.add(i),t.add(a),!0)}var LT=Object.freeze({__proto__:null,BoxGeometry:Ff,CapsuleGeometry:Kb,CircleGeometry:Zb,ConeGeometry:z0,CylinderGeometry:L0,DodecahedronGeometry:Jb,EdgesGeometry:yN,ExtrudeGeometry:$b,IcosahedronGeometry:e1,LatheGeometry:t1,OctahedronGeometry:P0,PlaneGeometry:au,PolyhedronGeometry:md,RingGeometry:n1,ShapeGeometry:i1,SphereGeometry:I0,TetrahedronGeometry:a1,TorusGeometry:r1,TorusKnotGeometry:s1,TubeGeometry:o1,WireframeGeometry:NN});class RN extends Or{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Tt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Rw extends Do{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Dw extends Or{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Tt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pd,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new io,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DN extends Dw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ft(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Tt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Tt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Tt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class UN extends Or{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Tt(16777215),this.specular=new Tt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pd,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new io,this.combine=D0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ON extends Or{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Tt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pd,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class LN extends Or{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pd,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class zN extends Or{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pd,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new io,this.combine=D0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class l1 extends Or{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=qC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class c1 extends Or{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class PN extends Or{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Tt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pd,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class IN extends os{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Mf(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function BN(n){function e(a,r){return n[a]-n[r]}const t=n.length,i=new Array(t);for(let a=0;a!==t;++a)i[a]=a;return i.sort(e),i}function u2(n,e,t){const i=n.length,a=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const c=t[r]*e;for(let d=0;d!==e;++d)a[o++]=n[c+d]}return a}function Uw(n,e,t,i){let a=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[a++];if(r===void 0)return;let o=r[i];if(o!==void 0)if(Array.isArray(o))do o=r[i],o!==void 0&&(e.push(r.time),t.push(...o)),r=n[a++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[i],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=n[a++];while(r!==void 0);else do o=r[i],o!==void 0&&(e.push(r.time),t.push(o)),r=n[a++];while(r!==void 0)}function Gz(n,e,t,i,a=30){const r=n.clone();r.name=e;const o=[];for(let d=0;d<r.tracks.length;++d){const f=r.tracks[d],m=f.getValueSize(),g=[],y=[];for(let _=0;_<f.times.length;++_){const S=f.times[_]*a;if(!(S<t||S>=i)){g.push(f.times[_]);for(let A=0;A<m;++A)y.push(f.values[_*m+A])}}g.length!==0&&(f.times=Mf(g,f.times.constructor),f.values=Mf(y,f.values.constructor),o.push(f))}r.tracks=o;let c=1/0;for(let d=0;d<r.tracks.length;++d)c>r.tracks[d].times[0]&&(c=r.tracks[d].times[0]);for(let d=0;d<r.tracks.length;++d)r.tracks[d].shift(-1*c);return r.resetDuration(),r}function Wz(n,e=0,t=n,i=30){i<=0&&(i=30);const a=t.tracks.length,r=e/i;for(let o=0;o<a;++o){const c=t.tracks[o],d=c.ValueTypeName;if(d==="bool"||d==="string")continue;const f=n.tracks.find(function(w){return w.name===c.name&&w.ValueTypeName===d});if(f===void 0)continue;let m=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let y=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);const S=c.times.length-1;let A;if(r<=c.times[0]){const w=m,N=g-m;A=c.values.slice(w,N)}else if(r>=c.times[S]){const w=S*g+m,N=w+g-m;A=c.values.slice(w,N)}else{const w=c.createInterpolant(),N=m,D=g-m;w.evaluate(r),A=w.resultBuffer.slice(N,D)}d==="quaternion"&&new Ds().fromArray(A).normalize().conjugate().toArray(A);const T=f.times.length;for(let w=0;w<T;++w){const N=w*_+y;if(d==="quaternion")Ds.multiplyQuaternionsFlat(f.values,N,A,0,f.values,N);else{const D=_-y*2;for(let U=0;U<D;++U)f.values[N+U]-=A[U]}}}return n.blendMode=fw,n}class Xz{static convertArray(e,t){return Mf(e,t)}static isTypedArray(e){return aN(e)}static getKeyframeOrder(e){return BN(e)}static sortedArray(e,t,i){return u2(e,t,i)}static flattenJSON(e,t,i,a){Uw(e,t,i,a)}static subclip(e,t,i,a,r=30){return Gz(e,t,i,a,r)}static makeClipAdditive(e,t=0,i=e,a=30){return Wz(e,t,i,a)}}class B0{constructor(e,t,i,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,a=t[i],r=t[i-1];e:{t:{let o;n:{i:if(!(e<a)){for(let c=i+2;;){if(a===void 0){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(r=a,a=t[++i],e<a)break t}o=t.length;break n}if(!(e>=r)){const c=t[1];e<c&&(i=2,r=c);for(let d=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(a=r,r=t[--i-1],e>=r)break t}o=i,i=0;break n}break e}for(;i<o;){const c=i+o>>>1;e<t[c]?o=c:i=c+1}if(a=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,a)}return this.interpolate_(i,r,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,a=this.valueSize,r=e*a;for(let o=0;o!==a;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class kN extends B0{constructor(e,t,i,a){super(e,t,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Sf,endingEnd:Sf}}intervalChanged_(e,t,i){const a=this.parameterPositions;let r=e-2,o=e+1,c=a[r],d=a[o];if(c===void 0)switch(this.getSettings_().endingStart){case wf:r=e,c=2*t-i;break;case p0:r=a.length-2,c=t+a[r]-a[r+1];break;default:r=e,c=i}if(d===void 0)switch(this.getSettings_().endingEnd){case wf:o=e,d=2*i-t;break;case p0:o=1,d=i+a[1]-a[0];break;default:o=e-1,d=t}const f=(i-t)*.5,m=this.valueSize;this._weightPrev=f/(t-c),this._weightNext=f/(d-i),this._offsetPrev=r*m,this._offsetNext=o*m}interpolate_(e,t,i,a){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,d=e*c,f=d-c,m=this._offsetPrev,g=this._offsetNext,y=this._weightPrev,_=this._weightNext,S=(i-t)/(a-t),A=S*S,T=A*S,w=-y*T+2*y*A-y*S,N=(1+y)*T+(-1.5-2*y)*A+(-.5+y)*S+1,D=(-1-_)*T+(1.5+_)*A+.5*S,U=_*T-_*A;for(let O=0;O!==c;++O)r[O]=w*o[m+O]+N*o[f+O]+D*o[d+O]+U*o[g+O];return r}}class Ow extends B0{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,d=e*c,f=d-c,m=(i-t)/(a-t),g=1-m;for(let y=0;y!==c;++y)r[y]=o[f+y]*g+o[d+y]*m;return r}}class FN extends B0{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Uo{constructor(e,t,i,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Mf(t,this.TimeBufferType),this.values=Mf(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Mf(e.times,Array),values:Mf(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(i.interpolation=a)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new FN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ow(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new kN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case h0:t=this.InterpolantFactoryMethodDiscrete;break;case sb:t=this.InterpolantFactoryMethodLinear;break;case ly:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Rt("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return h0;case this.InterpolantFactoryMethodLinear:return sb;case this.InterpolantFactoryMethodSmooth:return ly}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]*=e}return this}trim(e,t){const i=this.times,a=i.length;let r=0,o=a-1;for(;r!==a&&i[r]<e;)++r;for(;o!==-1&&i[o]>t;)--o;if(++o,r!==0||o!==a){r>=o&&(o=Math.max(o,1),r=o-1);const c=this.getValueSize();this.times=i.slice(r,o),this.values=this.values.slice(r*c,o*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(an("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,a=this.values,r=i.length;r===0&&(an("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let c=0;c!==r;c++){const d=i[c];if(typeof d=="number"&&isNaN(d)){an("KeyframeTrack: Time is not a valid number.",this,c,d),e=!1;break}if(o!==null&&o>d){an("KeyframeTrack: Out of order keys.",this,c,d,o),e=!1;break}o=d}if(a!==void 0&&aN(a))for(let c=0,d=a.length;c!==d;++c){const f=a[c];if(isNaN(f)){an("KeyframeTrack: Value is not a valid number.",this,c,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),a=this.getInterpolation()===ly,r=e.length-1;let o=1;for(let c=1;c<r;++c){let d=!1;const f=e[c],m=e[c+1];if(f!==m&&(c!==1||f!==e[0]))if(a)d=!0;else{const g=c*i,y=g-i,_=g+i;for(let S=0;S!==i;++S){const A=t[g+S];if(A!==t[y+S]||A!==t[_+S]){d=!0;break}}}if(d){if(c!==o){e[o]=e[c];const g=c*i,y=o*i;for(let _=0;_!==i;++_)t[y+_]=t[g+_]}++o}}if(r>0){e[o]=e[r];for(let c=r*i,d=o*i,f=0;f!==i;++f)t[d+f]=t[c+f];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,a=new i(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}Uo.prototype.ValueTypeName="";Uo.prototype.TimeBufferType=Float32Array;Uo.prototype.ValueBufferType=Float32Array;Uo.prototype.DefaultInterpolation=sb;class jf extends Uo{constructor(e,t,i){super(e,t,i)}}jf.prototype.ValueTypeName="bool";jf.prototype.ValueBufferType=Array;jf.prototype.DefaultInterpolation=h0;jf.prototype.InterpolantFactoryMethodLinear=void 0;jf.prototype.InterpolantFactoryMethodSmooth=void 0;class Lw extends Uo{constructor(e,t,i,a){super(e,t,i,a)}}Lw.prototype.ValueTypeName="color";class S0 extends Uo{constructor(e,t,i,a){super(e,t,i,a)}}S0.prototype.ValueTypeName="number";class jN extends B0{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,d=(i-t)/(a-t);let f=e*c;for(let m=f+c;f!==m;f+=4)Ds.slerpFlat(r,0,o,f-c,o,f,d);return r}}class k0 extends Uo{constructor(e,t,i,a){super(e,t,i,a)}InterpolantFactoryMethodLinear(e){return new jN(this.times,this.values,this.getValueSize(),e)}}k0.prototype.ValueTypeName="quaternion";k0.prototype.InterpolantFactoryMethodSmooth=void 0;class Hf extends Uo{constructor(e,t,i){super(e,t,i)}}Hf.prototype.ValueTypeName="string";Hf.prototype.ValueBufferType=Array;Hf.prototype.DefaultInterpolation=h0;Hf.prototype.InterpolantFactoryMethodLinear=void 0;Hf.prototype.InterpolantFactoryMethodSmooth=void 0;class w0 extends Uo{constructor(e,t,i,a){super(e,t,i,a)}}w0.prototype.ValueTypeName="vector";class M0{constructor(e="",t=-1,i=[],a=Pb){this.name=e,this.tracks=i,this.duration=t,this.blendMode=a,this.uuid=eo(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,a=1/(e.fps||1);for(let o=0,c=i.length;o!==c;++o)t.push(qz(i[o]).scale(a));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r.userData=JSON.parse(e.userData||"{}"),r}static toJSON(e){const t=[],i=e.tracks,a={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let r=0,o=i.length;r!==o;++r)t.push(Uo.toJSON(i[r]));return a}static CreateFromMorphTargetSequence(e,t,i,a){const r=t.length,o=[];for(let c=0;c<r;c++){let d=[],f=[];d.push((c+r-1)%r,c,(c+1)%r),f.push(0,1,0);const m=BN(d);d=u2(d,1,m),f=u2(f,1,m),!a&&d[0]===0&&(d.push(r),f.push(f[0])),o.push(new S0(".morphTargetInfluences["+t[c].name+"]",d,f).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const a=e;i=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<i.length;a++)if(i[a].name===t)return i[a];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const a={},r=/^([\w-]*?)([\d]+)$/;for(let c=0,d=e.length;c<d;c++){const f=e[c],m=f.name.match(r);if(m&&m.length>1){const g=m[1];let y=a[g];y||(a[g]=y=[]),y.push(f)}}const o=[];for(const c in a)o.push(this.CreateFromMorphTargetSequence(c,a[c],t,i));return o}static parseAnimation(e,t){if(Rt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return an("AnimationClip: No animation in JSONLoader data."),null;const i=function(g,y,_,S,A){if(_.length!==0){const T=[],w=[];Uw(_,T,w,S),T.length!==0&&A.push(new g(y,T,w))}},a=[],r=e.name||"default",o=e.fps||30,c=e.blendMode;let d=e.length||-1;const f=e.hierarchy||[];for(let g=0;g<f.length;g++){const y=f[g].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const _={};let S;for(S=0;S<y.length;S++)if(y[S].morphTargets)for(let A=0;A<y[S].morphTargets.length;A++)_[y[S].morphTargets[A]]=-1;for(const A in _){const T=[],w=[];for(let N=0;N!==y[S].morphTargets.length;++N){const D=y[S];T.push(D.time),w.push(D.morphTarget===A?1:0)}a.push(new S0(".morphTargetInfluence["+A+"]",T,w))}d=_.length*o}else{const _=".bones["+t[g].name+"]";i(w0,_+".position",y,"pos",a),i(k0,_+".quaternion",y,"rot",a),i(w0,_+".scale",y,"scl",a)}}return a.length===0?null:new this(r,d,a,c)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,a=e.length;i!==a;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function Yz(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return S0;case"vector":case"vector2":case"vector3":case"vector4":return w0;case"color":return Lw;case"quaternion":return k0;case"bool":case"boolean":return jf;case"string":return Hf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function qz(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Yz(n.type);if(n.times===void 0){const t=[],i=[];Uw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ql={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class zw{constructor(e,t,i){const a=this;let r=!1,o=0,c=0,d;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(m){c++,r===!1&&a.onStart!==void 0&&a.onStart(m,o,c),r=!0},this.itemEnd=function(m){o++,a.onProgress!==void 0&&a.onProgress(m,o,c),o===c&&(r=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(m){a.onError!==void 0&&a.onError(m)},this.resolveURL=function(m){return d?d(m):m},this.setURLModifier=function(m){return d=m,this},this.addHandler=function(m,g){return f.push(m,g),this},this.removeHandler=function(m){const g=f.indexOf(m);return g!==-1&&f.splice(g,2),this},this.getHandler=function(m){for(let g=0,y=f.length;g<y;g+=2){const _=f[g],S=f[g+1];if(_.global&&(_.lastIndex=0),_.test(m))return S}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const HN=new zw;class Us{constructor(e){this.manager=e!==void 0?e:HN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(a,r){i.load(e,a,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Us.DEFAULT_MATERIAL_NAME="__DEFAULT";const Xc={};class Kz extends Error{constructor(e,t){super(e),this.response=t}}class eu extends Us{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Ql.get(`file:${e}`);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Xc[e]!==void 0){Xc[e].push({onLoad:t,onProgress:i,onError:a});return}Xc[e]=[],Xc[e].push({onLoad:t,onProgress:i,onError:a});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),c=this.mimeType,d=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&Rt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const m=Xc[e],g=f.body.getReader(),y=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=y?parseInt(y):0,S=_!==0;let A=0;const T=new ReadableStream({start(w){N();function N(){g.read().then(({done:D,value:U})=>{if(D)w.close();else{A+=U.byteLength;const O=new ProgressEvent("progress",{lengthComputable:S,loaded:A,total:_});for(let B=0,z=m.length;B<z;B++){const F=m[B];F.onProgress&&F.onProgress(O)}w.enqueue(U),N()}},D=>{w.error(D)})}}});return new Response(T)}else throw new Kz(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(d){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(m=>new DOMParser().parseFromString(m,c));case"json":return f.json();default:if(c==="")return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(c),y=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(y);return f.arrayBuffer().then(S=>_.decode(S))}}}).then(f=>{Ql.add(`file:${e}`,f);const m=Xc[e];delete Xc[e];for(let g=0,y=m.length;g<y;g++){const _=m[g];_.onLoad&&_.onLoad(f)}}).catch(f=>{const m=Xc[e];if(m===void 0)throw this.manager.itemError(e),f;delete Xc[e];for(let g=0,y=m.length;g<y;g++){const _=m[g];_.onError&&_.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class Zz extends Us{constructor(e){super(e)}load(e,t,i,a){const r=this,o=new eu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(d){a?a(d):an(d),r.manager.itemError(e)}},i,a)}parse(e){const t=[];for(let i=0;i<e.length;i++){const a=M0.parse(e[i]);t.push(a)}return t}}class Jz extends Us{constructor(e){super(e)}load(e,t,i,a){const r=this,o=[],c=new qb,d=new eu(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(r.withCredentials);let f=0;function m(g){d.load(e[g],function(y){const _=r.parse(y,!0);o[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(c.minFilter=Fi),c.image=o,c.format=_.format,c.needsUpdate=!0,t&&t(c))},i,a)}if(Array.isArray(e))for(let g=0,y=e.length;g<y;++g)m(g);else d.load(e,function(g){const y=r.parse(g,!0);if(y.isCubemap){const _=y.mipmaps.length/y.mipmapCount;for(let S=0;S<_;S++){o[S]={mipmaps:[]};for(let A=0;A<y.mipmapCount;A++)o[S].mipmaps.push(y.mipmaps[S*y.mipmapCount+A]),o[S].format=y.format,o[S].width=y.width,o[S].height=y.height}c.image=o}else c.image.width=y.width,c.image.height=y.height,c.mipmaps=y.mipmaps;y.mipmapCount===1&&(c.minFilter=Fi),c.format=y.format,c.needsUpdate=!0,t&&t(c)},i,a);return c}}const ap=new WeakMap;class E0 extends Us{constructor(e){super(e)}load(e,t,i,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Ql.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0);else{let g=ap.get(o);g===void 0&&(g=[],ap.set(o,g)),g.push({onLoad:t,onError:a})}return o}const c=v0("img");function d(){m(),t&&t(this);const g=ap.get(this)||[];for(let y=0;y<g.length;y++){const _=g[y];_.onLoad&&_.onLoad(this)}ap.delete(this),r.manager.itemEnd(e)}function f(g){m(),a&&a(g),Ql.remove(`image:${e}`);const y=ap.get(this)||[];for(let _=0;_<y.length;_++){const S=y[_];S.onError&&S.onError(g)}ap.delete(this),r.manager.itemError(e),r.manager.itemEnd(e)}function m(){c.removeEventListener("load",d,!1),c.removeEventListener("error",f,!1)}return c.addEventListener("load",d,!1),c.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),Ql.add(`image:${e}`,c),r.manager.itemStart(e),c.src=e,c}}class Qz extends Us{constructor(e){super(e)}load(e,t,i,a){const r=new O0;r.colorSpace=Rr;const o=new E0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let c=0;function d(f){o.load(e[f],function(m){r.images[f]=m,c++,c===6&&(r.needsUpdate=!0,t&&t(r))},void 0,a)}for(let f=0;f<e.length;++f)d(f);return r}}class $z extends Us{constructor(e){super(e)}load(e,t,i,a){const r=this,o=new dl,c=new eu(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(r.withCredentials),c.load(e,function(d){let f;try{f=r.parse(d)}catch(m){if(a!==void 0)a(m);else{m(m);return}}f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:Rs,o.wrapT=f.wrapT!==void 0?f.wrapT:Rs,o.magFilter=f.magFilter!==void 0?f.magFilter:Fi,o.minFilter=f.minFilter!==void 0?f.minFilter:Fi,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(o.colorSpace=f.colorSpace),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Jl),f.mipmapCount===1&&(o.minFilter=Fi),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f)},i,a),o}}class VN extends Us{constructor(e){super(e)}load(e,t,i,a){const r=new ra,o=new E0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(c){r.image=c,r.needsUpdate=!0,t!==void 0&&t(r)},i,a),r}}class gd extends ii{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Tt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class GN extends gd{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Tt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const Z_=new hn,zT=new he,PT=new he;class Pw{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ft(512,512),this.mapType=as,this.map=null,this.mapPass=null,this.matrix=new hn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gp,this._frameExtents=new ft(1,1),this._viewportCount=1,this._viewports=[new _i(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;zT.setFromMatrixPosition(e.matrixWorld),t.position.copy(zT),PT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(PT),t.updateMatrixWorld(),Z_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z_,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Z_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class eP extends Pw{constructor(){super(new Qa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=Up*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,r=e.distance||t.far;(i!==t.fov||a!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=a,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class WN extends gd{constructor(e,t,i=0,a=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.target=new ii,this.distance=i,this.angle=a,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new eP}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class tP extends Pw{constructor(){super(new Qa(90,1,.5,500)),this.isPointLightShadow=!0}}class XN extends gd{constructor(e,t,i=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new tP}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class Wp extends jb{constructor(e=-1,t=1,i=1,a=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=a,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,a,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let r=i-e,o=i+e,c=a+t,d=a-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=f*this.view.offsetX,o=r+f*this.view.width,c-=m*this.view.offsetY,d=c-m*this.view.height}this.projectionMatrix.makeOrthographic(r,o,c,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class nP extends Pw{constructor(){super(new Wp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class YN extends gd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.target=new ii,this.shadow=new nP}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class qN extends gd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class KN extends gd{constructor(e,t,i=10,a=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Iw{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new he)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,a=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*a),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*a)),t.addScaledVector(o[5],1.092548*(a*r)),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],1.092548*(i*r)),t.addScaledVector(o[8],.546274*(i*i-a*a)),t}getIrradianceAt(e,t){const i=e.x,a=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*a),t.addScaledVector(o[2],2*.511664*r),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*a),t.addScaledVector(o[5],2*.429043*a*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],2*.429043*i*r),t.addScaledVector(o[8],.429043*(i*i-a*a)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].fromArray(e,t+a*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].toArray(e,t+a*3);return e}static getBasisAt(e,t){const i=e.x,a=e.y,r=e.z;t[0]=.282095,t[1]=.488603*a,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*a,t[5]=1.092548*a*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-a*a)}}class ZN extends gd{constructor(e=new Iw,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class u1 extends Us{constructor(e){super(e),this.textures={}}load(e,t,i,a){const r=this,o=new eu(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(d){a?a(d):an(d),r.manager.itemError(e)}},i,a)}parse(e){const t=this.textures;function i(r){return t[r]===void 0&&Rt("MaterialLoader: Undefined texture",r),t[r]}const a=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new Tt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(a.dispersion=e.dispersion),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(a.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(a.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(a.depthFunc=e.depthFunc),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(a.blendSrc=e.blendSrc),e.blendDst!==void 0&&(a.blendDst=e.blendDst),e.blendEquation!==void 0&&(a.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(a.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(a.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==void 0&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(a.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(a.allowOverride=e.allowOverride),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const o=e.uniforms[r];switch(a.uniforms[r]={},o.type){case"t":a.uniforms[r].value=i(o.value);break;case"c":a.uniforms[r].value=new Tt().setHex(o.value);break;case"v2":a.uniforms[r].value=new ft().fromArray(o.value);break;case"v3":a.uniforms[r].value=new he().fromArray(o.value);break;case"v4":a.uniforms[r].value=new _i().fromArray(o.value);break;case"m3":a.uniforms[r].value=new vn().fromArray(o.value);break;case"m4":a.uniforms[r].value=new hn().fromArray(o.value);break;default:a.uniforms[r].value=o.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)a.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(a.lights=e.lights),e.clipping!==void 0&&(a.clipping=e.clipping),e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=i(e.map)),e.matcap!==void 0&&(a.matcap=i(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),a.normalScale=new ft().fromArray(r)}return e.displacementMap!==void 0&&(a.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=i(e.envMap)),e.envMapRotation!==void 0&&a.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new ft().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(a.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=i(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return u1.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:RN,SpriteMaterial:bw,RawShaderMaterial:Rw,ShaderMaterial:Do,PointsMaterial:Sw,MeshPhysicalMaterial:DN,MeshStandardMaterial:Dw,MeshPhongMaterial:UN,MeshToonMaterial:ON,MeshNormalMaterial:LN,MeshLambertMaterial:zN,MeshDepthMaterial:l1,MeshDistanceMaterial:c1,MeshBasicMaterial:iu,MeshMatcapMaterial:PN,LineDashedMaterial:IN,LineBasicMaterial:os,Material:Or};return new t[e]}}class d2{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Bw extends xn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class JN extends Us{constructor(e){super(e)}load(e,t,i,a){const r=this,o=new eu(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(d){a?a(d):an(d),r.manager.itemError(e)}},i,a)}parse(e){const t={},i={};function a(_,S){if(t[S]!==void 0)return t[S];const T=_.interleavedBuffers[S],w=r(_,T.buffer),N=bp(T.type,w),D=new Wb(N,T.stride);return D.uuid=T.uuid,t[S]=D,D}function r(_,S){if(i[S]!==void 0)return i[S];const T=_.arrayBuffers[S],w=new Uint32Array(T).buffer;return i[S]=w,w}const o=e.isInstancedBufferGeometry?new Bw:new xn,c=e.data.index;if(c!==void 0){const _=bp(c.type,c.array);o.setIndex(new Ri(_,1))}const d=e.data.attributes;for(const _ in d){const S=d[_];let A;if(S.isInterleavedBufferAttribute){const T=a(e.data,S.data);A=new Lf(T,S.itemSize,S.offset,S.normalized)}else{const T=bp(S.type,S.array),w=S.isInstancedBufferAttribute?zf:Ri;A=new w(T,S.itemSize,S.normalized)}S.name!==void 0&&(A.name=S.name),S.usage!==void 0&&A.setUsage(S.usage),o.setAttribute(_,A)}const f=e.data.morphAttributes;if(f)for(const _ in f){const S=f[_],A=[];for(let T=0,w=S.length;T<w;T++){const N=S[T];let D;if(N.isInterleavedBufferAttribute){const U=a(e.data,N.data);D=new Lf(U,N.itemSize,N.offset,N.normalized)}else{const U=bp(N.type,N.array);D=new Ri(U,N.itemSize,N.normalized)}N.name!==void 0&&(D.name=N.name),A.push(D)}o.morphAttributes[_]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let _=0,S=g.length;_!==S;++_){const A=g[_];o.addGroup(A.start,A.count,A.materialIndex)}const y=e.data.boundingSphere;return y!==void 0&&(o.boundingSphere=new er().fromJSON(y)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class iP extends Us{constructor(e){super(e)}load(e,t,i,a){const r=this,o=this.path===""?d2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const c=new eu(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(d){let f=null;try{f=JSON.parse(d)}catch(g){a!==void 0&&a(g),g("ObjectLoader: Can't parse "+e+".",g.message);return}const m=f.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),an("ObjectLoader: Can't load "+e);return}r.parse(f,t)},i,a)}async loadAsync(e,t){const i=this,a=this.path===""?d2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const r=new eu(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const o=await r.loadAsync(e,t),c=JSON.parse(o),d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(c)}parse(e,t){const i=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,a),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),c=this.parseTextures(e.textures,o),d=this.parseMaterials(e.materials,c),f=this.parseObject(e.object,r,d,c,i),m=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,m),this.bindLightTargets(f),t!==void 0){let g=!1;for(const y in o)if(o[y].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),c=this.parseMaterials(e.materials,o),d=this.parseObject(e.object,a,c,o,t),f=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,f),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let i=0,a=e.length;i<a;i++){const r=new Nf().fromJSON(e[i]);t[r.uuid]=r}return t}parseSkeletons(e,t){const i={},a={};if(t.traverse(function(r){r.isBone&&(a[r.uuid]=r)}),e!==void 0)for(let r=0,o=e.length;r<o;r++){const c=new Xb().fromJSON(e[r],a);i[c.uuid]=c}return i}parseGeometries(e,t){const i={};if(e!==void 0){const a=new JN;for(let r=0,o=e.length;r<o;r++){let c;const d=e[r];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":c=a.parse(d);break;default:d.type in LT?c=LT[d.type].fromJSON(d,t):Rt(`ObjectLoader: Unsupported geometry type "${d.type}"`)}c.uuid=d.uuid,d.name!==void 0&&(c.name=d.name),d.userData!==void 0&&(c.userData=d.userData),i[d.uuid]=c}}return i}parseMaterials(e,t){const i={},a={};if(e!==void 0){const r=new u1;r.setTextures(t);for(let o=0,c=e.length;o<c;o++){const d=e[o];i[d.uuid]===void 0&&(i[d.uuid]=r.parse(d)),a[d.uuid]=i[d.uuid]}}return a}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const a=e[i],r=M0.parse(a);t[r.uuid]=r}return t}parseImages(e,t){const i=this,a={};let r;function o(d){return i.manager.itemStart(d),r.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function c(d){if(typeof d=="string"){const f=d,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return o(m)}else return d.data?{data:bp(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new zw(t);r=new E0(d),r.setCrossOrigin(this.crossOrigin);for(let f=0,m=e.length;f<m;f++){const g=e[f],y=g.url;if(Array.isArray(y)){const _=[];for(let S=0,A=y.length;S<A;S++){const T=y[S],w=c(T);w!==null&&(w instanceof HTMLImageElement?_.push(w):_.push(new dl(w.data,w.width,w.height)))}a[g.uuid]=new sd(_)}else{const _=c(g.url);a[g.uuid]=new sd(_)}}}return a}async parseImagesAsync(e){const t=this,i={};let a;async function r(o){if(typeof o=="string"){const c=o,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await a.loadAsync(d)}else return o.data?{data:bp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){a=new E0(this.manager),a.setCrossOrigin(this.crossOrigin);for(let o=0,c=e.length;o<c;o++){const d=e[o],f=d.url;if(Array.isArray(f)){const m=[];for(let g=0,y=f.length;g<y;g++){const _=f[g],S=await r(_);S!==null&&(S instanceof HTMLImageElement?m.push(S):m.push(new dl(S.data,S.width,S.height)))}i[d.uuid]=new sd(m)}else{const m=await r(d.url);i[d.uuid]=new sd(m)}}}return i}parseTextures(e,t){function i(r,o){return typeof r=="number"?r:(Rt("ObjectLoader.parseTexture: Constant should be in numeric form.",r),o[r])}const a={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const c=e[r];c.image===void 0&&Rt('ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&Rt("ObjectLoader: Undefined image",c.image);const d=t[c.image],f=d.data;let m;Array.isArray(f)?(m=new O0,f.length===6&&(m.needsUpdate=!0)):(f&&f.data?m=new dl:m=new ra,f&&(m.needsUpdate=!0)),m.source=d,m.uuid=c.uuid,c.name!==void 0&&(m.name=c.name),c.mapping!==void 0&&(m.mapping=i(c.mapping,aP)),c.channel!==void 0&&(m.channel=c.channel),c.offset!==void 0&&m.offset.fromArray(c.offset),c.repeat!==void 0&&m.repeat.fromArray(c.repeat),c.center!==void 0&&m.center.fromArray(c.center),c.rotation!==void 0&&(m.rotation=c.rotation),c.wrap!==void 0&&(m.wrapS=i(c.wrap[0],IT),m.wrapT=i(c.wrap[1],IT)),c.format!==void 0&&(m.format=c.format),c.internalFormat!==void 0&&(m.internalFormat=c.internalFormat),c.type!==void 0&&(m.type=c.type),c.colorSpace!==void 0&&(m.colorSpace=c.colorSpace),c.minFilter!==void 0&&(m.minFilter=i(c.minFilter,BT)),c.magFilter!==void 0&&(m.magFilter=i(c.magFilter,BT)),c.anisotropy!==void 0&&(m.anisotropy=c.anisotropy),c.flipY!==void 0&&(m.flipY=c.flipY),c.generateMipmaps!==void 0&&(m.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(m.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(m.compareFunction=c.compareFunction),c.userData!==void 0&&(m.userData=c.userData),a[c.uuid]=m}return a}parseObject(e,t,i,a,r){let o;function c(y){return t[y]===void 0&&Rt("ObjectLoader: Undefined geometry",y),t[y]}function d(y){if(y!==void 0){if(Array.isArray(y)){const _=[];for(let S=0,A=y.length;S<A;S++){const T=y[S];i[T]===void 0&&Rt("ObjectLoader: Undefined material",T),_.push(i[T])}return _}return i[y]===void 0&&Rt("ObjectLoader: Undefined material",y),i[y]}}function f(y){return a[y]===void 0&&Rt("ObjectLoader: Undefined texture",y),a[y]}let m,g;switch(e.type){case"Scene":o=new yw,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Tt(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Gb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Vb(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Qa(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Wp(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new qN(e.color,e.intensity);break;case"DirectionalLight":o=new YN(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new XN(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new KN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new WN(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new GN(e.color,e.groundColor,e.intensity);break;case"LightProbe":const y=new Iw().fromArray(e.sh);o=new ZN(y,e.intensity);break;case"SkinnedMesh":m=c(e.geometry),g=d(e.material),o=new fN(m,g),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":m=c(e.geometry),g=d(e.material),o=new sa(m,g);break;case"InstancedMesh":m=c(e.geometry),g=d(e.material);const _=e.count,S=e.instanceMatrix,A=e.instanceColor;o=new hN(m,g,_),o.instanceMatrix=new zf(new Float32Array(S.array),16),A!==void 0&&(o.instanceColor=new zf(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":m=c(e.geometry),g=d(e.material),o=new pN(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),o.geometry=m,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(T=>{let w=null,N=null;return T.boundingBox!==void 0&&(w=new $a().fromJSON(T.boundingBox)),T.boundingSphere!==void 0&&(N=new er().fromJSON(T.boundingSphere)),{...T,boundingBox:w,boundingSphere:N}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=f(e.matricesTexture.uuid),o._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new er().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new $a().fromJSON(e.boundingBox));break;case"LOD":o=new dN;break;case"Line":o=new dd(c(e.geometry),d(e.material));break;case"LineLoop":o=new mN(c(e.geometry),d(e.material));break;case"LineSegments":o=new cc(c(e.geometry),d(e.material));break;case"PointCloud":case"Points":o=new gN(c(e.geometry),d(e.material));break;case"Sprite":o=new uN(d(e.material));break;case"Group":o=new _p;break;case"Bone":o=new _w;break;default:o=new ii}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let _=0;_<y.length;_++)o.add(this.parseObject(y[_],t,i,a,r))}if(e.animations!==void 0){const y=e.animations;for(let _=0;_<y.length;_++){const S=y[_];o.animations.push(r[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const y=e.levels;for(let _=0;_<y.length;_++){const S=y[_],A=o.getObjectByProperty("uuid",S.object);A!==void 0&&o.addLevel(A,S.distance,S.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const a=t[i.skeleton];a===void 0?Rt("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(a,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,a=e.getObjectByProperty("uuid",i);a!==void 0?t.target=a:t.target=new ii}})}}const aP={UVMapping:Nb,CubeReflectionMapping:ic,CubeRefractionMapping:ld,EquirectangularReflectionMapping:c0,EquirectangularRefractionMapping:u0,CubeUVReflectionMapping:Hp},IT={RepeatWrapping:d0,ClampToEdgeWrapping:Rs,MirroredRepeatWrapping:f0},BT={NearestFilter:ya,NearestMipmapNearestFilter:rw,NearestMipmapLinearFilter:yp,LinearFilter:Fi,LinearMipmapNearestFilter:Xg,LinearMipmapLinearFilter:Jl},J_=new WeakMap;class rP extends Us{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Rt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Rt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Ql.get(`image-bitmap:${e}`);if(o!==void 0){if(r.manager.itemStart(e),o.then){o.then(f=>{if(J_.has(o)===!0)a&&a(J_.get(o)),r.manager.itemError(e),r.manager.itemEnd(e);else return t&&t(f),r.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,c.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(e,c).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(f){return Ql.add(`image-bitmap:${e}`,f),t&&t(f),r.manager.itemEnd(e),f}).catch(function(f){a&&a(f),J_.set(d,f),Ql.remove(`image-bitmap:${e}`),r.manager.itemError(e),r.manager.itemEnd(e)});Ql.add(`image-bitmap:${e}`,d),r.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let kx;class kw{static getContext(){return kx===void 0&&(kx=new(window.AudioContext||window.webkitAudioContext)),kx}static setContext(e){kx=e}}class sP extends Us{constructor(e){super(e)}load(e,t,i,a){const r=this,o=new eu(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(d){try{const f=d.slice(0);kw.getContext().decodeAudioData(f,function(g){t(g)}).catch(c)}catch(f){c(f)}},i,a);function c(d){a?a(d):an(d),r.manager.itemError(e)}}}const kT=new hn,FT=new hn,of=new hn;class oP{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,of.copy(e.projectionMatrix);const a=t.eyeSep/2,r=a*t.near/t.focus,o=t.near*Math.tan(Cf*t.fov*.5)/t.zoom;let c,d;FT.elements[12]=-a,kT.elements[12]=a,c=-o*t.aspect+r,d=o*t.aspect+r,of.elements[0]=2*t.near/(d-c),of.elements[8]=(d+c)/(d-c),this.cameraL.projectionMatrix.copy(of),c=-o*t.aspect-r,d=o*t.aspect-r,of.elements[0]=2*t.near/(d-c),of.elements[8]=(d+c)/(d-c),this.cameraR.projectionMatrix.copy(of)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(FT),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(kT)}}class QN extends Qa{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let Fw=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};const lf=new he,Q_=new Ds,lP=new he,cf=new he,uf=new he;class cP extends ii{constructor(){super(),this.type="AudioListener",this.context=kw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Fw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(lf,Q_,lP),cf.set(0,0,-1).applyQuaternion(Q_),uf.set(0,1,0).applyQuaternion(Q_),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(lf.x,i),t.positionY.linearRampToValueAtTime(lf.y,i),t.positionZ.linearRampToValueAtTime(lf.z,i),t.forwardX.linearRampToValueAtTime(cf.x,i),t.forwardY.linearRampToValueAtTime(cf.y,i),t.forwardZ.linearRampToValueAtTime(cf.z,i),t.upX.linearRampToValueAtTime(uf.x,i),t.upY.linearRampToValueAtTime(uf.y,i),t.upZ.linearRampToValueAtTime(uf.z,i)}else t.setPosition(lf.x,lf.y,lf.z),t.setOrientation(cf.x,cf.y,cf.z,uf.x,uf.y,uf.z)}}class $N extends ii{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Rt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Rt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(Rt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const df=new he,jT=new Ds,uP=new he,ff=new he;class dP extends $N{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(df,jT,uP),ff.set(0,0,1).applyQuaternion(jT);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(df.x,i),t.positionY.linearRampToValueAtTime(df.y,i),t.positionZ.linearRampToValueAtTime(df.z,i),t.orientationX.linearRampToValueAtTime(ff.x,i),t.orientationY.linearRampToValueAtTime(ff.y,i),t.orientationZ.linearRampToValueAtTime(ff.z,i)}else t.setPosition(df.x,df.y,df.z),t.setOrientation(ff.x,ff.y,ff.z)}}class fP{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class eR{constructor(e,t,i){this.binding=e,this.valueSize=i;let a,r,o;switch(t){case"quaternion":a=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":a=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:a=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,a=this.valueSize,r=e*a+a;let o=this.cumulativeWeight;if(o===0){for(let c=0;c!==a;++c)i[r+c]=i[c];o=t}else{o+=t;const c=t/o;this._mixBufferRegion(i,r,0,c,a)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,a=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,a,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,a=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const d=t*this._origIndex;this._mixBufferRegion(i,a,d,1-r,t)}o>0&&this._mixBufferRegionAdditive(i,a,this._addIndex*t,1,t);for(let d=t,f=t+t;d!==f;++d)if(i[d]!==i[d+t]){c.setValue(i,a);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,a=i*this._origIndex;e.getValue(t,a);for(let r=i,o=a;r!==o;++r)t[r]=t[a+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,a,r){if(a>=.5)for(let o=0;o!==r;++o)e[t+o]=e[i+o]}_slerp(e,t,i,a){Ds.slerpFlat(e,t,e,t,e,i,a)}_slerpAdditive(e,t,i,a,r){const o=this._workIndex*r;Ds.multiplyQuaternionsFlat(e,o,e,t,e,i),Ds.slerpFlat(e,t,e,t,e,o,a)}_lerp(e,t,i,a,r){const o=1-a;for(let c=0;c!==r;++c){const d=t+c;e[d]=e[d]*o+e[i+c]*a}}_lerpAdditive(e,t,i,a,r){for(let o=0;o!==r;++o){const c=t+o;e[c]=e[c]+e[i+o]*a}}}const jw="\\[\\]\\.:\\/",hP=new RegExp("["+jw+"]","g"),Hw="[^"+jw+"]",pP="[^"+jw.replace("\\.","")+"]",mP=/((?:WC+[\/:])*)/.source.replace("WC",Hw),gP=/(WCOD+)?/.source.replace("WCOD",pP),vP=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Hw),xP=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Hw),yP=new RegExp("^"+mP+gP+vP+xP+"$"),bP=["material","materials","bones","map"];class _P{constructor(e,t,i){const a=i||ni.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,a=this._bindings[i];a!==void 0&&a.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,r=i.length;a!==r;++a)i[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ni{constructor(e,t,i){this.path=t,this.parsedPath=i||ni.parseTrackName(t),this.node=ni.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ni.Composite(e,t,i):new ni(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(hP,"")}static parseTrackName(e){const t=yP.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=i.nodeName&&i.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const r=i.nodeName.substring(a+1);bP.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,a),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let o=0;o<r.length;o++){const c=r[o];if(c.name===t||c.uuid===t)return c;const d=i(c.children);if(d)return d}return null},a=i(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)e[t++]=i[a]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)i[a]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)i[a]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)i[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,a=t.propertyName;let r=t.propertyIndex;if(e||(e=ni.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Rt("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){an("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){an("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){an("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===f){f=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){an("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){an("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){an("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){an("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[a];if(o===void 0){const f=t.nodeName;an("PropertyBinding: Trying to update property for track: "+f+"."+a+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(r!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){an("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){an("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}d=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(d=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=a;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ni.Composite=_P;ni.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ni.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ni.prototype.GetterByBindingType=[ni.prototype._getValue_direct,ni.prototype._getValue_array,ni.prototype._getValue_arrayElement,ni.prototype._getValue_toArray];ni.prototype.SetterByBindingTypeAndVersioning=[[ni.prototype._setValue_direct,ni.prototype._setValue_direct_setNeedsUpdate,ni.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_array,ni.prototype._setValue_array_setNeedsUpdate,ni.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_arrayElement,ni.prototype._setValue_arrayElement_setNeedsUpdate,ni.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_fromArray,ni.prototype._setValue_fromArray_setNeedsUpdate,ni.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class SP{constructor(){this.isAnimationObjectGroup=!0,this.uuid=eo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,a=arguments.length;i!==a;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,a=this._parsedPaths,r=this._bindings,o=r.length;let c,d=e.length,f=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const y=arguments[m],_=y.uuid;let S=t[_];if(S===void 0){S=d++,t[_]=S,e.push(y);for(let A=0,T=o;A!==T;++A)r[A].push(new ni(y,i[A],a[A]))}else if(S<f){c=e[S];const A=--f,T=e[A];t[T.uuid]=S,e[S]=T,t[_]=A,e[A]=y;for(let w=0,N=o;w!==N;++w){const D=r[w],U=D[A];let O=D[S];D[S]=U,O===void 0&&(O=new ni(y,i[w],a[w])),D[A]=O}}else e[S]!==c&&an("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,a=i.length;let r=this.nCachedObjects_;for(let o=0,c=arguments.length;o!==c;++o){const d=arguments[o],f=d.uuid,m=t[f];if(m!==void 0&&m>=r){const g=r++,y=e[g];t[y.uuid]=m,e[m]=y,t[f]=g,e[g]=d;for(let _=0,S=a;_!==S;++_){const A=i[_],T=A[g],w=A[m];A[m]=T,A[g]=w}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,a=i.length;let r=this.nCachedObjects_,o=e.length;for(let c=0,d=arguments.length;c!==d;++c){const f=arguments[c],m=f.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<r){const y=--r,_=e[y],S=--o,A=e[S];t[_.uuid]=g,e[g]=_,t[A.uuid]=y,e[y]=A,e.pop();for(let T=0,w=a;T!==w;++T){const N=i[T],D=N[y],U=N[S];N[g]=D,N[y]=U,N.pop()}}else{const y=--o,_=e[y];y>0&&(t[_.uuid]=g),e[g]=_,e.pop();for(let S=0,A=a;S!==A;++S){const T=i[S];T[g]=T[y],T.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const i=this._bindingsIndicesByPath;let a=i[e];const r=this._bindings;if(a!==void 0)return r[a];const o=this._paths,c=this._parsedPaths,d=this._objects,f=d.length,m=this.nCachedObjects_,g=new Array(f);a=r.length,i[e]=a,o.push(e),c.push(t),r.push(g);for(let y=m,_=d.length;y!==_;++y){const S=d[y];g[y]=new ni(S,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const a=this._paths,r=this._parsedPaths,o=this._bindings,c=o.length-1,d=o[c],f=e[c];t[f]=i,o[i]=d,o.pop(),r[i]=r[c],r.pop(),a[i]=a[c],a.pop()}}}class tR{constructor(e,t,i=null,a=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=a;const r=t.tracks,o=r.length,c=new Array(o),d={endingStart:Sf,endingEnd:Sf};for(let f=0;f!==o;++f){const m=r[f].createInterpolant(null);c[f]=m,m.settings=d}this._interpolantSettings=d,this._interpolants=c,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=XC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const a=this._clip.duration,r=e._clip.duration,o=r/a,c=a/r;e.warp(1,o,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const a=this._mixer,r=a.time,o=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=a._lendControlInterpolant(),this._timeScaleInterpolant=c);const d=c.parameterPositions,f=c.sampleValues;return d[0]=r,d[1]=r+i,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,a){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const d=(e-r)*i;d<0||i===0?t=0:(this._startTime=null,t=i*d)}t*=this._updateTimeScale(e);const o=this._updateTime(t),c=this._updateWeight(e);if(c>0){const d=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case fw:for(let m=0,g=d.length;m!==g;++m)d[m].evaluate(o),f[m].accumulateAdditive(c);break;case Pb:default:for(let m=0,g=d.length;m!==g;++m)d[m].evaluate(o),f[m].accumulate(a,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const a=i.evaluate(e)[0];t*=a,e>i.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const a=i.evaluate(e)[0];t*=a,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let a=this.time+e,r=this._loopCount;const o=i===YC;if(e===0)return r===-1?a:o&&(r&1)===1?t-a:a;if(i===WC){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=t)a=t;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),a>=t||a<0){const c=Math.floor(a/t);a-=t*c,r+=Math.abs(c);const d=this.repetitions-r;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?t:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=a;if(o&&(r&1)===1)return t-a}return a}_setEndings(e,t,i){const a=this._interpolantSettings;i?(a.endingStart=wf,a.endingEnd=wf):(e?a.endingStart=this.zeroSlopeAtStart?wf:Sf:a.endingStart=p0,t?a.endingEnd=this.zeroSlopeAtEnd?wf:Sf:a.endingEnd=p0)}_scheduleFading(e,t,i){const a=this._mixer,r=a.time;let o=this._weightInterpolant;o===null&&(o=a._lendControlInterpolant(),this._weightInterpolant=o);const c=o.parameterPositions,d=o.sampleValues;return c[0]=r,d[0]=t,c[1]=r+e,d[1]=i,this}}const wP=new Float32Array(1);class MP extends lc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,a=e._clip.tracks,r=a.length,o=e._propertyBindings,c=e._interpolants,d=i.uuid,f=this._bindingsByRootAndName;let m=f[d];m===void 0&&(m={},f[d]=m);for(let g=0;g!==r;++g){const y=a[g],_=y.name;let S=m[_];if(S!==void 0)++S.referenceCount,o[g]=S;else{if(S=o[g],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,d,_));continue}const A=t&&t._propertyBindings[g].binding.parsedPath;S=new eR(ni.create(i,_,A),y.ValueTypeName,y.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,d,_),o[g]=S}c[g].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,a=e._clip.uuid,r=this._actionsByClip[a];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,a,i)}const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const r=t[i];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const r=t[i];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const a=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const c=o.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=a.length,a.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],a=e._cacheIndex;i._cacheIndex=a,t[a]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,c=o[r],d=c.knownActions,f=d[d.length-1],m=e._byClipCacheIndex;f._byClipCacheIndex=m,d[m]=f,d.pop(),e._byClipCacheIndex=null;const g=c.actionByRoot,y=(e._localRoot||this._root).uuid;delete g[y],d.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const r=t[i];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,a=this._nActiveActions++,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,a=--this._nActiveActions,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const a=this._bindingsByRootAndName,r=this._bindings;let o=a[t];o===void 0&&(o={},a[t]=o),o[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,a=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,c=o[a],d=t[t.length-1],f=e._cacheIndex;d._cacheIndex=f,t[f]=d,t.pop(),delete c[r],Object.keys(c).length===0&&delete o[a]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,a=this._nActiveBindings++,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,a=--this._nActiveBindings,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Ow(new Float32Array(2),new Float32Array(2),1,wP),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,a=--this._nActiveControlInterpolants,r=t[a];e.__cacheIndex=a,t[a]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const a=t||this._root,r=a.uuid;let o=typeof e=="string"?M0.findByName(a,e):e;const c=o!==null?o.uuid:e,d=this._actionsByClip[c];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Pb),d!==void 0){const g=d.actionByRoot[r];if(g!==void 0&&g.blendMode===i)return g;f=d.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const m=new tR(this,o,t,i);return this._bindAction(m,f),this._addInactiveAction(m,c,r),m}existingAction(e,t){const i=t||this._root,a=i.uuid,r=typeof e=="string"?M0.findByName(i,e):e,o=r?r.uuid:e,c=this._actionsByClip[o];return c!==void 0&&c.actionByRoot[a]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,a=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(a,e,r,o);const c=this._bindings,d=this._nActiveBindings;for(let f=0;f!==d;++f)c[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,a=this._actionsByClip,r=a[i];if(r!==void 0){const o=r.knownActions;for(let c=0,d=o.length;c!==d;++c){const f=o[c];this._deactivateAction(f);const m=f._cacheIndex,g=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(f)}delete a[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const c=i[o].actionByRoot,d=c[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const a=this._bindingsByRootAndName,r=a[t];if(r!==void 0)for(const o in r){const c=r[o];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class EP extends pw{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Fb(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Vw{constructor(e){this.value=e}clone(){return new Vw(this.value.clone===void 0?this.value:this.value.clone())}}let TP=0;class AP extends lc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:TP++}),this.name="",this.usage=g0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,a=t.length;i<a;i++){const r=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<r.length;o++)this.uniforms.push(r[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class CP extends Wb{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class NP{constructor(e,t,i,a,r,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=a,this.count=r,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const HT=new hn;class nR{constructor(e,t,i=0,a=1/0){this.ray=new Vp(e,t),this.near=i,this.far=a,this.camera=null,this.layers=new Op,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):an("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return HT.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(HT),this}intersectObject(e,t=!0,i=[]){return f2(e,this,i,t),i.sort(VT),i}intersectObjects(e,t=!0,i=[]){for(let a=0,r=e.length;a<r;a++)f2(e[a],this,i,t);return i.sort(VT),i}}function VT(n,e){return n.distance-e.distance}function f2(n,e,t,i){let a=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(a=!1),a===!0&&i===!0){const r=n.children;for(let o=0,c=r.length;o<c;o++)f2(r[o],e,t,!0)}}class RP{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=DP.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function DP(){this._document.hidden===!1&&this.reset()}class UP{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=fn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class OP{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Gw{constructor(e,t,i,a){Gw.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,a)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,a){const r=this.elements;return r[0]=e,r[2]=t,r[1]=i,r[3]=a,this}}const GT=new ft;class LP{constructor(e=new ft(1/0,1/0),t=new ft(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=GT.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,GT).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const WT=new he,Fx=new he,rp=new he,sp=new he,$_=new he,zP=new he,PP=new he;class IP{constructor(e=new he,t=new he){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){WT.subVectors(e,this.start),Fx.subVectors(this.end,this.start);const i=Fx.dot(Fx);let r=Fx.dot(WT)/i;return t&&(r=fn(r,0,1)),r}closestPointToPoint(e,t,i){const a=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(a).add(this.start)}distanceSqToLine3(e,t=zP,i=PP){const a=10000000000000001e-32;let r,o;const c=this.start,d=e.start,f=this.end,m=e.end;rp.subVectors(f,c),sp.subVectors(m,d),$_.subVectors(c,d);const g=rp.dot(rp),y=sp.dot(sp),_=sp.dot($_);if(g<=a&&y<=a)return t.copy(c),i.copy(d),t.sub(i),t.dot(t);if(g<=a)r=0,o=_/y,o=fn(o,0,1);else{const S=rp.dot($_);if(y<=a)o=0,r=fn(-S/g,0,1);else{const A=rp.dot(sp),T=g*y-A*A;T!==0?r=fn((A*_-S*y)/T,0,1):r=0,o=(A*r+_)/y,o<0?(o=0,r=fn(-S/g,0,1)):o>1&&(o=1,r=fn((A-S)/g,0,1))}}return t.copy(c).add(rp.multiplyScalar(r)),i.copy(d).add(sp.multiplyScalar(o)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const XT=new he;class BP extends ii{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new xn,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,c=1,d=32;o<d;o++,c++){const f=o/d*Math.PI*2,m=c/d*Math.PI*2;a.push(Math.cos(f),Math.sin(f),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new Ht(a,3));const r=new os({fog:!1,toneMapped:!1});this.cone=new cc(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),XT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(XT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Qu=new he,jx=new hn,eS=new hn;class kP extends cc{constructor(e){const t=iR(e),i=new xn,a=[],r=[];for(let f=0;f<t.length;f++){const m=t[f];m.parent&&m.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}i.setAttribute("position",new Ht(a,3)),i.setAttribute("color",new Ht(r,3));const o=new os({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const c=new Tt(255),d=new Tt(65280);this.setColors(c,d)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,a=i.getAttribute("position");eS.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const c=t[r];c.parent&&c.parent.isBone&&(jx.multiplyMatrices(eS,c.matrixWorld),Qu.setFromMatrixPosition(jx),a.setXYZ(o,Qu.x,Qu.y,Qu.z),jx.multiplyMatrices(eS,c.parent.matrixWorld),Qu.setFromMatrixPosition(jx),a.setXYZ(o+1,Qu.x,Qu.y,Qu.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const a=this.geometry.getAttribute("color");for(let r=0;r<a.count;r+=2)a.setXYZ(r,e.r,e.g,e.b),a.setXYZ(r+1,t.r,t.g,t.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function iR(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...iR(n.children[t]));return e}class FP extends sa{constructor(e,t,i){const a=new I0(t,4,2),r=new iu({wireframe:!0,fog:!1,toneMapped:!1});super(a,r),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const jP=new he,YT=new Tt,qT=new Tt;class HP extends ii{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const a=new P0(t);a.rotateY(Math.PI*.5),this.material=new iu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=a.getAttribute("position"),o=new Float32Array(r.count*3);a.setAttribute("color",new Ri(o,3)),this.add(new sa(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");YT.copy(this.light.color),qT.copy(this.light.groundColor);for(let i=0,a=t.count;i<a;i++){const r=i<a/2?YT:qT;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(jP.setFromMatrixPosition(this.light.matrixWorld).negate())}}class VP extends cc{constructor(e=10,t=10,i=4473924,a=8947848){i=new Tt(i),a=new Tt(a);const r=t/2,o=e/t,c=e/2,d=[],f=[];for(let y=0,_=0,S=-c;y<=t;y++,S+=o){d.push(-c,0,S,c,0,S),d.push(S,0,-c,S,0,c);const A=y===r?i:a;A.toArray(f,_),_+=3,A.toArray(f,_),_+=3,A.toArray(f,_),_+=3,A.toArray(f,_),_+=3}const m=new xn;m.setAttribute("position",new Ht(d,3)),m.setAttribute("color",new Ht(f,3));const g=new os({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class GP extends cc{constructor(e=10,t=16,i=8,a=64,r=4473924,o=8947848){r=new Tt(r),o=new Tt(o);const c=[],d=[];if(t>1)for(let g=0;g<t;g++){const y=g/t*(Math.PI*2),_=Math.sin(y)*e,S=Math.cos(y)*e;c.push(0,0,0),c.push(_,0,S);const A=g&1?r:o;d.push(A.r,A.g,A.b),d.push(A.r,A.g,A.b)}for(let g=0;g<i;g++){const y=g&1?r:o,_=e-e/i*g;for(let S=0;S<a;S++){let A=S/a*(Math.PI*2),T=Math.sin(A)*_,w=Math.cos(A)*_;c.push(T,0,w),d.push(y.r,y.g,y.b),A=(S+1)/a*(Math.PI*2),T=Math.sin(A)*_,w=Math.cos(A)*_,c.push(T,0,w),d.push(y.r,y.g,y.b)}}const f=new xn;f.setAttribute("position",new Ht(c,3)),f.setAttribute("color",new Ht(d,3));const m=new os({vertexColors:!0,toneMapped:!1});super(f,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const KT=new he,Hx=new he,ZT=new he;class WP extends ii{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let a=new xn;a.setAttribute("position",new Ht([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new os({fog:!1,toneMapped:!1});this.lightPlane=new dd(a,r),this.add(this.lightPlane),a=new xn,a.setAttribute("position",new Ht([0,0,0,0,0,1],3)),this.targetLine=new dd(a,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),KT.setFromMatrixPosition(this.light.matrixWorld),Hx.setFromMatrixPosition(this.light.target.matrixWorld),ZT.subVectors(Hx,KT),this.lightPlane.lookAt(Hx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hx),this.targetLine.scale.z=ZT.length()}}const Vx=new he,fa=new jb;class XP extends cc{constructor(e){const t=new xn,i=new os({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],r=[],o={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(S,A){d(S),d(A)}function d(S){a.push(0,0,0),r.push(0,0,0),o[S]===void 0&&(o[S]=[]),o[S].push(a.length/3-1)}t.setAttribute("position",new Ht(a,3)),t.setAttribute("color",new Ht(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new Tt(16755200),m=new Tt(16711680),g=new Tt(43775),y=new Tt(16777215),_=new Tt(3355443);this.setColors(f,m,g,y,_)}setColors(e,t,i,a,r){const c=this.geometry.getAttribute("color");return c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,i.r,i.g,i.b),c.setXYZ(33,i.r,i.g,i.b),c.setXYZ(34,i.r,i.g,i.b),c.setXYZ(35,i.r,i.g,i.b),c.setXYZ(36,i.r,i.g,i.b),c.setXYZ(37,i.r,i.g,i.b),c.setXYZ(38,a.r,a.g,a.b),c.setXYZ(39,a.r,a.g,a.b),c.setXYZ(40,r.r,r.g,r.b),c.setXYZ(41,r.r,r.g,r.b),c.setXYZ(42,r.r,r.g,r.b),c.setXYZ(43,r.r,r.g,r.b),c.setXYZ(44,r.r,r.g,r.b),c.setXYZ(45,r.r,r.g,r.b),c.setXYZ(46,r.r,r.g,r.b),c.setXYZ(47,r.r,r.g,r.b),c.setXYZ(48,r.r,r.g,r.b),c.setXYZ(49,r.r,r.g,r.b),c.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,a=1;let r,o;if(fa.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)r=1,o=0;else if(this.camera.coordinateSystem===$s)r=-1,o=1;else if(this.camera.coordinateSystem===Rp)r=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);va("c",t,e,fa,0,0,r),va("t",t,e,fa,0,0,o),va("n1",t,e,fa,-i,-a,r),va("n2",t,e,fa,i,-a,r),va("n3",t,e,fa,-i,a,r),va("n4",t,e,fa,i,a,r),va("f1",t,e,fa,-i,-a,o),va("f2",t,e,fa,i,-a,o),va("f3",t,e,fa,-i,a,o),va("f4",t,e,fa,i,a,o),va("u1",t,e,fa,i*.7,a*1.1,r),va("u2",t,e,fa,-i*.7,a*1.1,r),va("u3",t,e,fa,0,a*2,r),va("cf1",t,e,fa,-i,0,o),va("cf2",t,e,fa,i,0,o),va("cf3",t,e,fa,0,-a,o),va("cf4",t,e,fa,0,a,o),va("cn1",t,e,fa,-i,0,r),va("cn2",t,e,fa,i,0,r),va("cn3",t,e,fa,0,-a,r),va("cn4",t,e,fa,0,a,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function va(n,e,t,i,a,r,o){Vx.set(a,r,o).unproject(i);const c=e[n];if(c!==void 0){const d=t.getAttribute("position");for(let f=0,m=c.length;f<m;f++)d.setXYZ(c[f],Vx.x,Vx.y,Vx.z)}}const Gx=new $a;class YP extends cc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),r=new xn;r.setIndex(new Ri(i,1)),r.setAttribute("position",new Ri(a,3)),super(r,new os({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Gx.setFromObject(this.object),Gx.isEmpty())return;const e=Gx.min,t=Gx.max,i=this.geometry.attributes.position,a=i.array;a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=e.x,a[4]=t.y,a[5]=t.z,a[6]=e.x,a[7]=e.y,a[8]=t.z,a[9]=t.x,a[10]=e.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=e.z,a[15]=e.x,a[16]=t.y,a[17]=e.z,a[18]=e.x,a[19]=e.y,a[20]=e.z,a[21]=t.x,a[22]=e.y,a[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class qP extends cc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new xn;r.setIndex(new Ri(i,1)),r.setAttribute("position",new Ht(a,3)),super(r,new os({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class KP extends dd{constructor(e,t=1,i=16776960){const a=i,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new xn;o.setAttribute("position",new Ht(r,3)),o.computeBoundingSphere(),super(o,new os({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new xn;d.setAttribute("position",new Ht(c,3)),d.computeBoundingSphere(),this.add(new sa(d,new iu({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const JT=new he;let Wx,tS;class ZP extends ii{constructor(e=new he(0,0,1),t=new he(0,0,0),i=1,a=16776960,r=i*.2,o=r*.2){super(),this.type="ArrowHelper",Wx===void 0&&(Wx=new xn,Wx.setAttribute("position",new Ht([0,0,0,0,1,0],3)),tS=new z0(.5,1,5,1),tS.translate(0,-.5,0)),this.position.copy(t),this.line=new dd(Wx,new os({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new sa(tS,new iu({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{JT.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(JT,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class JP extends cc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new xn;a.setAttribute("position",new Ht(t,3)),a.setAttribute("color",new Ht(i,3));const r=new os({vertexColors:!0,toneMapped:!1});super(a,r),this.type="AxesHelper"}setColors(e,t,i){const a=new Tt,r=this.geometry.attributes.color.array;return a.set(e),a.toArray(r,0),a.toArray(r,3),a.set(t),a.toArray(r,6),a.toArray(r,9),a.set(i),a.toArray(r,12),a.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class QP{constructor(){this.type="ShapePath",this.color=new Tt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ub,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,a){return this.currentPath.quadraticCurveTo(e,t,i,a),this}bezierCurveTo(e,t,i,a,r,o){return this.currentPath.bezierCurveTo(e,t,i,a,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const N=[];for(let D=0,U=w.length;D<U;D++){const O=w[D],B=new Nf;B.curves=O.curves,N.push(B)}return N}function i(w,N){const D=N.length;let U=!1;for(let O=D-1,B=0;B<D;O=B++){let z=N[O],F=N[B],L=F.x-z.x,I=F.y-z.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(z=N[B],L=-L,F=N[O],I=-I),w.y<z.y||w.y>F.y)continue;if(w.y===z.y){if(w.x===z.x)return!0}else{const Y=I*(w.x-z.x)-L*(w.y-z.y);if(Y===0)return!0;if(Y<0)continue;U=!U}}else{if(w.y!==z.y)continue;if(F.x<=w.x&&w.x<=z.x||z.x<=w.x&&w.x<=F.x)return!0}}return U}const a=ul.isClockWise,r=this.subPaths;if(r.length===0)return[];let o,c,d;const f=[];if(r.length===1)return c=r[0],d=new Nf,d.curves=c.curves,f.push(d),f;let m=!a(r[0].getPoints());m=e?!m:m;const g=[],y=[];let _=[],S=0,A;y[S]=void 0,_[S]=[];for(let w=0,N=r.length;w<N;w++)c=r[w],A=c.getPoints(),o=a(A),o=e?!o:o,o?(!m&&y[S]&&S++,y[S]={s:new Nf,p:A},y[S].s.curves=c.curves,m&&S++,_[S]=[]):_[S].push({h:c,p:A[0]});if(!y[0])return t(r);if(y.length>1){let w=!1,N=0;for(let D=0,U=y.length;D<U;D++)g[D]=[];for(let D=0,U=y.length;D<U;D++){const O=_[D];for(let B=0;B<O.length;B++){const z=O[B];let F=!0;for(let L=0;L<y.length;L++)i(z.p,y[L].p)&&(D!==L&&N++,F?(F=!1,g[L].push(z)):w=!0);F&&g[D].push(z)}}N>0&&w===!1&&(_=g)}let T;for(let w=0,N=y.length;w<N;w++){d=y[w].s,f.push(d),T=_[w];for(let D=0,U=T.length;D<U;D++)d.holes.push(T[D].h)}return f}}class $P extends lc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Rt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function eI(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function tI(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function nI(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function h2(n,e,t,i){const a=iI(i);switch(t){case uw:return n*e;case Ob:return n*e/a.components*a.byteLength;case U0:return n*e/a.components*a.byteLength;case Of:return n*e*2/a.components*a.byteLength;case Lb:return n*e*2/a.components*a.byteLength;case dw:return n*e*3/a.components*a.byteLength;case Dr:return n*e*4/a.components*a.byteLength;case zb:return n*e*4/a.components*a.byteLength;case Yg:case qg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Kg:case Zg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Ny:case Dy:return Math.max(n,16)*Math.max(e,8)/4;case Cy:case Ry:return Math.max(n,8)*Math.max(e,8)/2;case Uy:case Oy:case zy:case Py:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ly:case Iy:case By:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case ky:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Fy:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case jy:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Hy:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Vy:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Gy:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Wy:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Xy:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Yy:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case qy:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Ky:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Zy:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Jy:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Qy:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case $y:case eb:case tb:return Math.ceil(n/4)*Math.ceil(e/4)*16;case nb:case ib:return Math.ceil(n/4)*Math.ceil(e/4)*8;case ab:case rb:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function iI(n){switch(n){case as:case sw:return{byteLength:1,components:1};case Cp:case ow:case ac:return{byteLength:2,components:1};case Db:case Ub:return{byteLength:2,components:4};case Ro:case Rb:case ss:return{byteLength:4,components:1};case lw:case cw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class aI{static contain(e,t){return eI(e,t)}static cover(e,t){return tI(e,t)}static fill(e){return nI(e)}static getByteLength(e,t,i,a){return h2(e,t,i,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ab}}));typeof window<"u"&&(window.__THREE__?Rt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ab);function aR(){let n=null,e=!1,t=null,i=null;function a(r,o){t(r,o),i=n.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(a),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function rI(n){const e=new WeakMap;function t(c,d){const f=c.array,m=c.usage,g=f.byteLength,y=n.createBuffer();n.bindBuffer(d,y),n.bufferData(d,f,m),c.onUploadCallback();let _;if(f instanceof Float32Array)_=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)_=n.HALF_FLOAT;else if(f instanceof Uint16Array)c.isFloat16BufferAttribute?_=n.HALF_FLOAT:_=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=n.SHORT;else if(f instanceof Uint32Array)_=n.UNSIGNED_INT;else if(f instanceof Int32Array)_=n.INT;else if(f instanceof Int8Array)_=n.BYTE;else if(f instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version,size:g}}function i(c,d,f){const m=d.array,g=d.updateRanges;if(n.bindBuffer(f,c),g.length===0)n.bufferSubData(f,0,m);else{g.sort((_,S)=>_.start-S.start);let y=0;for(let _=1;_<g.length;_++){const S=g[y],A=g[_];A.start<=S.start+S.count+1?S.count=Math.max(S.count,A.start+A.count-S.start):(++y,g[y]=A)}g.length=y+1;for(let _=0,S=g.length;_<S;_++){const A=g[_];n.bufferSubData(f,A.start*m.BYTES_PER_ELEMENT,m,A.start,A.count)}d.clearUpdateRanges()}d.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function r(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=e.get(c);d&&(n.deleteBuffer(d.buffer),e.delete(c))}function o(c,d){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const m=e.get(c);(!m||m.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const f=e.get(c);if(f===void 0)e.set(c,t(c,d));else if(f.version<c.version){if(f.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,c,d),f.version=c.version}}return{get:a,remove:r,update:o}}var sI=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,oI=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,lI=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,cI=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uI=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,dI=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,fI=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,hI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,pI=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,mI=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,gI=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,vI=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,xI=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,yI=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bI=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,_I=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,SI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,wI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,MI=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,EI=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,TI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,AI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,CI=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,NI=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,RI=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,DI=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,UI=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,OI=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,LI=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,zI=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,PI="gl_FragColor = linearToOutputTexel( gl_FragColor );",II=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,BI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,kI=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,FI=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,jI=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,HI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,VI=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,GI=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,WI=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,XI=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,YI=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,qI=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,KI=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ZI=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,JI=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,QI=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,$I=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,e6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,t6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,n6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,i6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,a6=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,r6=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,s6=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,o6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,l6=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,c6=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,u6=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,d6=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,f6=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,h6=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,p6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,m6=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,g6=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,v6=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,x6=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,y6=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,b6=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,_6=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,S6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,w6=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,M6=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,E6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,T6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,A6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,C6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,N6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,R6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,D6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,U6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,O6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,L6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,z6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,P6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,I6=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,B6=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,k6=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,F6=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,j6=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,H6=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,V6=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,G6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,W6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,X6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Y6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,q6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,K6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Z6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,J6=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Q6=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,$6=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,eB=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,tB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,nB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aB=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const rB=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,sB=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,lB=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fB=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,hB=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,pB=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,mB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,gB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,bB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_B=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SB=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,MB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,TB=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,AB=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CB=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NB=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,RB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,LB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zB=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,IB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,BB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wn={alphahash_fragment:sI,alphahash_pars_fragment:oI,alphamap_fragment:lI,alphamap_pars_fragment:cI,alphatest_fragment:uI,alphatest_pars_fragment:dI,aomap_fragment:fI,aomap_pars_fragment:hI,batching_pars_vertex:pI,batching_vertex:mI,begin_vertex:gI,beginnormal_vertex:vI,bsdfs:xI,iridescence_fragment:yI,bumpmap_pars_fragment:bI,clipping_planes_fragment:_I,clipping_planes_pars_fragment:SI,clipping_planes_pars_vertex:wI,clipping_planes_vertex:MI,color_fragment:EI,color_pars_fragment:TI,color_pars_vertex:AI,color_vertex:CI,common:NI,cube_uv_reflection_fragment:RI,defaultnormal_vertex:DI,displacementmap_pars_vertex:UI,displacementmap_vertex:OI,emissivemap_fragment:LI,emissivemap_pars_fragment:zI,colorspace_fragment:PI,colorspace_pars_fragment:II,envmap_fragment:BI,envmap_common_pars_fragment:kI,envmap_pars_fragment:FI,envmap_pars_vertex:jI,envmap_physical_pars_fragment:QI,envmap_vertex:HI,fog_vertex:VI,fog_pars_vertex:GI,fog_fragment:WI,fog_pars_fragment:XI,gradientmap_pars_fragment:YI,lightmap_pars_fragment:qI,lights_lambert_fragment:KI,lights_lambert_pars_fragment:ZI,lights_pars_begin:JI,lights_toon_fragment:$I,lights_toon_pars_fragment:e6,lights_phong_fragment:t6,lights_phong_pars_fragment:n6,lights_physical_fragment:i6,lights_physical_pars_fragment:a6,lights_fragment_begin:r6,lights_fragment_maps:s6,lights_fragment_end:o6,logdepthbuf_fragment:l6,logdepthbuf_pars_fragment:c6,logdepthbuf_pars_vertex:u6,logdepthbuf_vertex:d6,map_fragment:f6,map_pars_fragment:h6,map_particle_fragment:p6,map_particle_pars_fragment:m6,metalnessmap_fragment:g6,metalnessmap_pars_fragment:v6,morphinstance_vertex:x6,morphcolor_vertex:y6,morphnormal_vertex:b6,morphtarget_pars_vertex:_6,morphtarget_vertex:S6,normal_fragment_begin:w6,normal_fragment_maps:M6,normal_pars_fragment:E6,normal_pars_vertex:T6,normal_vertex:A6,normalmap_pars_fragment:C6,clearcoat_normal_fragment_begin:N6,clearcoat_normal_fragment_maps:R6,clearcoat_pars_fragment:D6,iridescence_pars_fragment:U6,opaque_fragment:O6,packing:L6,premultiplied_alpha_fragment:z6,project_vertex:P6,dithering_fragment:I6,dithering_pars_fragment:B6,roughnessmap_fragment:k6,roughnessmap_pars_fragment:F6,shadowmap_pars_fragment:j6,shadowmap_pars_vertex:H6,shadowmap_vertex:V6,shadowmask_pars_fragment:G6,skinbase_vertex:W6,skinning_pars_vertex:X6,skinning_vertex:Y6,skinnormal_vertex:q6,specularmap_fragment:K6,specularmap_pars_fragment:Z6,tonemapping_fragment:J6,tonemapping_pars_fragment:Q6,transmission_fragment:$6,transmission_pars_fragment:eB,uv_pars_fragment:tB,uv_pars_vertex:nB,uv_vertex:iB,worldpos_vertex:aB,background_vert:rB,background_frag:sB,backgroundCube_vert:oB,backgroundCube_frag:lB,cube_vert:cB,cube_frag:uB,depth_vert:dB,depth_frag:fB,distance_vert:hB,distance_frag:pB,equirect_vert:mB,equirect_frag:gB,linedashed_vert:vB,linedashed_frag:xB,meshbasic_vert:yB,meshbasic_frag:bB,meshlambert_vert:_B,meshlambert_frag:SB,meshmatcap_vert:wB,meshmatcap_frag:MB,meshnormal_vert:EB,meshnormal_frag:TB,meshphong_vert:AB,meshphong_frag:CB,meshphysical_vert:NB,meshphysical_frag:RB,meshtoon_vert:DB,meshtoon_frag:UB,points_vert:OB,points_frag:LB,shadow_vert:zB,shadow_frag:PB,sprite_vert:IB,sprite_frag:BB},Lt={common:{diffuse:{value:new Tt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vn},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vn}},envmap:{envMap:{value:null},envMapRotation:{value:new vn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vn},normalScale:{value:new ft(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Tt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Tt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0},uvTransform:{value:new vn}},sprite:{diffuse:{value:new Tt(16777215)},opacity:{value:1},center:{value:new ft(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vn},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0}}},cl={basic:{uniforms:ns([Lt.common,Lt.specularmap,Lt.envmap,Lt.aomap,Lt.lightmap,Lt.fog]),vertexShader:wn.meshbasic_vert,fragmentShader:wn.meshbasic_frag},lambert:{uniforms:ns([Lt.common,Lt.specularmap,Lt.envmap,Lt.aomap,Lt.lightmap,Lt.emissivemap,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.fog,Lt.lights,{emissive:{value:new Tt(0)}}]),vertexShader:wn.meshlambert_vert,fragmentShader:wn.meshlambert_frag},phong:{uniforms:ns([Lt.common,Lt.specularmap,Lt.envmap,Lt.aomap,Lt.lightmap,Lt.emissivemap,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.fog,Lt.lights,{emissive:{value:new Tt(0)},specular:{value:new Tt(1118481)},shininess:{value:30}}]),vertexShader:wn.meshphong_vert,fragmentShader:wn.meshphong_frag},standard:{uniforms:ns([Lt.common,Lt.envmap,Lt.aomap,Lt.lightmap,Lt.emissivemap,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.roughnessmap,Lt.metalnessmap,Lt.fog,Lt.lights,{emissive:{value:new Tt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},toon:{uniforms:ns([Lt.common,Lt.aomap,Lt.lightmap,Lt.emissivemap,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.gradientmap,Lt.fog,Lt.lights,{emissive:{value:new Tt(0)}}]),vertexShader:wn.meshtoon_vert,fragmentShader:wn.meshtoon_frag},matcap:{uniforms:ns([Lt.common,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.fog,{matcap:{value:null}}]),vertexShader:wn.meshmatcap_vert,fragmentShader:wn.meshmatcap_frag},points:{uniforms:ns([Lt.points,Lt.fog]),vertexShader:wn.points_vert,fragmentShader:wn.points_frag},dashed:{uniforms:ns([Lt.common,Lt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wn.linedashed_vert,fragmentShader:wn.linedashed_frag},depth:{uniforms:ns([Lt.common,Lt.displacementmap]),vertexShader:wn.depth_vert,fragmentShader:wn.depth_frag},normal:{uniforms:ns([Lt.common,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,{opacity:{value:1}}]),vertexShader:wn.meshnormal_vert,fragmentShader:wn.meshnormal_frag},sprite:{uniforms:ns([Lt.sprite,Lt.fog]),vertexShader:wn.sprite_vert,fragmentShader:wn.sprite_frag},background:{uniforms:{uvTransform:{value:new vn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wn.background_vert,fragmentShader:wn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new vn}},vertexShader:wn.backgroundCube_vert,fragmentShader:wn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wn.cube_vert,fragmentShader:wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wn.equirect_vert,fragmentShader:wn.equirect_frag},distance:{uniforms:ns([Lt.common,Lt.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wn.distance_vert,fragmentShader:wn.distance_frag},shadow:{uniforms:ns([Lt.lights,Lt.fog,{color:{value:new Tt(0)},opacity:{value:1}}]),vertexShader:wn.shadow_vert,fragmentShader:wn.shadow_frag}};cl.physical={uniforms:ns([cl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vn},clearcoatNormalScale:{value:new ft(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vn},sheen:{value:0},sheenColor:{value:new Tt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vn},transmissionSamplerSize:{value:new ft},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vn},attenuationDistance:{value:0},attenuationColor:{value:new Tt(0)},specularColor:{value:new Tt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vn},anisotropyVector:{value:new ft},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vn}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag};const Xx={r:0,b:0,g:0},hf=new io,kB=new hn;function FB(n,e,t,i,a,r,o){const c=new Tt(0);let d=r===!0?0:1,f,m,g=null,y=0,_=null;function S(D){let U=D.isScene===!0?D.background:null;return U&&U.isTexture&&(U=(D.backgroundBlurriness>0?t:e).get(U)),U}function A(D){let U=!1;const O=S(D);O===null?w(c,d):O&&O.isColor&&(w(O,1),U=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?i.buffers.color.setClear(0,0,0,1,o):B==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||U)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function T(D,U){const O=S(U);O&&(O.isCubeTexture||O.mapping===Hp)?(m===void 0&&(m=new sa(new Ff(1,1,1),new Do({name:"BackgroundCubeMaterial",uniforms:Lp(cl.backgroundCube.uniforms),vertexShader:cl.backgroundCube.vertexShader,fragmentShader:cl.backgroundCube.fragmentShader,side:Ur,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(B,z,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(m)),hf.copy(U.backgroundRotation),hf.x*=-1,hf.y*=-1,hf.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(hf.y*=-1,hf.z*=-1),m.material.uniforms.envMap.value=O,m.material.uniforms.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=U.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(kB.makeRotationFromEuler(hf)),m.material.toneMapped=Wn.getTransfer(O.colorSpace)!==vi,(g!==O||y!==O.version||_!==n.toneMapping)&&(m.material.needsUpdate=!0,g=O,y=O.version,_=n.toneMapping),m.layers.enableAll(),D.unshift(m,m.geometry,m.material,0,0,null)):O&&O.isTexture&&(f===void 0&&(f=new sa(new au(2,2),new Do({name:"BackgroundMaterial",uniforms:Lp(cl.background.uniforms),vertexShader:cl.background.vertexShader,fragmentShader:cl.background.fragmentShader,side:$c,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(f)),f.material.uniforms.t2D.value=O,f.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,f.material.toneMapped=Wn.getTransfer(O.colorSpace)!==vi,O.matrixAutoUpdate===!0&&O.updateMatrix(),f.material.uniforms.uvTransform.value.copy(O.matrix),(g!==O||y!==O.version||_!==n.toneMapping)&&(f.material.needsUpdate=!0,g=O,y=O.version,_=n.toneMapping),f.layers.enableAll(),D.unshift(f,f.geometry,f.material,0,0,null))}function w(D,U){D.getRGB(Xx,lN(n)),i.buffers.color.setClear(Xx.r,Xx.g,Xx.b,U,o)}function N(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return c},setClearColor:function(D,U=1){c.set(D),d=U,w(c,d)},getClearAlpha:function(){return d},setClearAlpha:function(D){d=D,w(c,d)},render:A,addToRenderList:T,dispose:N}}function jB(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},a=y(null);let r=a,o=!1;function c(I,Y,q,K,$){let ce=!1;const G=g(K,q,Y);r!==G&&(r=G,f(r.object)),ce=_(I,K,q,$),ce&&S(I,K,q,$),$!==null&&e.update($,n.ELEMENT_ARRAY_BUFFER),(ce||o)&&(o=!1,U(I,Y,q,K),$!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function d(){return n.createVertexArray()}function f(I){return n.bindVertexArray(I)}function m(I){return n.deleteVertexArray(I)}function g(I,Y,q){const K=q.wireframe===!0;let $=i[I.id];$===void 0&&($={},i[I.id]=$);let ce=$[Y.id];ce===void 0&&(ce={},$[Y.id]=ce);let G=ce[K];return G===void 0&&(G=y(d()),ce[K]=G),G}function y(I){const Y=[],q=[],K=[];for(let $=0;$<t;$++)Y[$]=0,q[$]=0,K[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:q,attributeDivisors:K,object:I,attributes:{},index:null}}function _(I,Y,q,K){const $=r.attributes,ce=Y.attributes;let G=0;const W=q.getAttributes();for(const Q in W)if(W[Q].location>=0){const de=$[Q];let j=ce[Q];if(j===void 0&&(Q==="instanceMatrix"&&I.instanceMatrix&&(j=I.instanceMatrix),Q==="instanceColor"&&I.instanceColor&&(j=I.instanceColor)),de===void 0||de.attribute!==j||j&&de.data!==j.data)return!0;G++}return r.attributesNum!==G||r.index!==K}function S(I,Y,q,K){const $={},ce=Y.attributes;let G=0;const W=q.getAttributes();for(const Q in W)if(W[Q].location>=0){let de=ce[Q];de===void 0&&(Q==="instanceMatrix"&&I.instanceMatrix&&(de=I.instanceMatrix),Q==="instanceColor"&&I.instanceColor&&(de=I.instanceColor));const j={};j.attribute=de,de&&de.data&&(j.data=de.data),$[Q]=j,G++}r.attributes=$,r.attributesNum=G,r.index=K}function A(){const I=r.newAttributes;for(let Y=0,q=I.length;Y<q;Y++)I[Y]=0}function T(I){w(I,0)}function w(I,Y){const q=r.newAttributes,K=r.enabledAttributes,$=r.attributeDivisors;q[I]=1,K[I]===0&&(n.enableVertexAttribArray(I),K[I]=1),$[I]!==Y&&(n.vertexAttribDivisor(I,Y),$[I]=Y)}function N(){const I=r.newAttributes,Y=r.enabledAttributes;for(let q=0,K=Y.length;q<K;q++)Y[q]!==I[q]&&(n.disableVertexAttribArray(q),Y[q]=0)}function D(I,Y,q,K,$,ce,G){G===!0?n.vertexAttribIPointer(I,Y,q,$,ce):n.vertexAttribPointer(I,Y,q,K,$,ce)}function U(I,Y,q,K){A();const $=K.attributes,ce=q.getAttributes(),G=Y.defaultAttributeValues;for(const W in ce){const Q=ce[W];if(Q.location>=0){let ue=$[W];if(ue===void 0&&(W==="instanceMatrix"&&I.instanceMatrix&&(ue=I.instanceMatrix),W==="instanceColor"&&I.instanceColor&&(ue=I.instanceColor)),ue!==void 0){const de=ue.normalized,j=ue.itemSize,ee=e.get(ue);if(ee===void 0)continue;const ne=ee.buffer,oe=ee.type,re=ee.bytesPerElement,se=oe===n.INT||oe===n.UNSIGNED_INT||ue.gpuType===Rb;if(ue.isInterleavedBufferAttribute){const le=ue.data,ve=le.stride,ze=ue.offset;if(le.isInstancedInterleavedBuffer){for(let qe=0;qe<Q.locationSize;qe++)w(Q.location+qe,le.meshPerAttribute);I.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let qe=0;qe<Q.locationSize;qe++)T(Q.location+qe);n.bindBuffer(n.ARRAY_BUFFER,ne);for(let qe=0;qe<Q.locationSize;qe++)D(Q.location+qe,j/Q.locationSize,oe,de,ve*re,(ze+j/Q.locationSize*qe)*re,se)}else{if(ue.isInstancedBufferAttribute){for(let le=0;le<Q.locationSize;le++)w(Q.location+le,ue.meshPerAttribute);I.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let le=0;le<Q.locationSize;le++)T(Q.location+le);n.bindBuffer(n.ARRAY_BUFFER,ne);for(let le=0;le<Q.locationSize;le++)D(Q.location+le,j/Q.locationSize,oe,de,j*re,j/Q.locationSize*le*re,se)}}else if(G!==void 0){const de=G[W];if(de!==void 0)switch(de.length){case 2:n.vertexAttrib2fv(Q.location,de);break;case 3:n.vertexAttrib3fv(Q.location,de);break;case 4:n.vertexAttrib4fv(Q.location,de);break;default:n.vertexAttrib1fv(Q.location,de)}}}}N()}function O(){F();for(const I in i){const Y=i[I];for(const q in Y){const K=Y[q];for(const $ in K)m(K[$].object),delete K[$];delete Y[q]}delete i[I]}}function B(I){if(i[I.id]===void 0)return;const Y=i[I.id];for(const q in Y){const K=Y[q];for(const $ in K)m(K[$].object),delete K[$];delete Y[q]}delete i[I.id]}function z(I){for(const Y in i){const q=i[Y];if(q[I.id]===void 0)continue;const K=q[I.id];for(const $ in K)m(K[$].object),delete K[$];delete q[I.id]}}function F(){L(),o=!0,r!==a&&(r=a,f(r.object))}function L(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:c,reset:F,resetDefaultState:L,dispose:O,releaseStatesOfGeometry:B,releaseStatesOfProgram:z,initAttributes:A,enableAttribute:T,disableUnusedAttributes:N}}function HB(n,e,t){let i;function a(f){i=f}function r(f,m){n.drawArrays(i,f,m),t.update(m,i,1)}function o(f,m,g){g!==0&&(n.drawArraysInstanced(i,f,m,g),t.update(m,i,g))}function c(f,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,m,0,g);let _=0;for(let S=0;S<g;S++)_+=m[S];t.update(_,i,1)}function d(f,m,g,y){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let S=0;S<f.length;S++)o(f[S],m[S],y[S]);else{_.multiDrawArraysInstancedWEBGL(i,f,0,m,0,y,0,g);let S=0;for(let A=0;A<g;A++)S+=m[A]*y[A];t.update(S,i,1)}}this.setMode=a,this.render=r,this.renderInstances=o,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function VB(n,e,t,i){let a;function r(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");a=n.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function o(z){return!(z!==Dr&&i.convert(z)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(z){const F=z===ac&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==as&&i.convert(z)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==ss&&!F)}function d(z){if(z==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const m=d(f);m!==f&&(Rt("WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const g=t.logarithmicDepthBuffer===!0,y=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_TEXTURE_SIZE),T=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),N=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),D=n.getParameter(n.MAX_VARYING_VECTORS),U=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),O=n.getParameter(n.MAX_SAMPLES),B=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:d,textureFormatReadable:o,textureTypeReadable:c,precision:f,logarithmicDepthBuffer:g,reversedDepthBuffer:y,maxTextures:_,maxVertexTextures:S,maxTextureSize:A,maxCubemapSize:T,maxAttributes:w,maxVertexUniforms:N,maxVaryings:D,maxFragmentUniforms:U,maxSamples:O,samples:B}}function GB(n){const e=this;let t=null,i=0,a=!1,r=!1;const o=new td,c=new vn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const _=g.length!==0||y||i!==0||a;return a=y,i=g.length,_},this.beginShadows=function(){r=!0,m(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,y){t=m(g,y,0)},this.setState=function(g,y,_){const S=g.clippingPlanes,A=g.clipIntersection,T=g.clipShadows,w=n.get(g);if(!a||S===null||S.length===0||r&&!T)r?m(null):f();else{const N=r?0:i,D=N*4;let U=w.clippingState||null;d.value=U,U=m(S,y,D,_);for(let O=0;O!==D;++O)U[O]=t[O];w.clippingState=U,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=N}};function f(){d.value!==t&&(d.value=t,d.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(g,y,_,S){const A=g!==null?g.length:0;let T=null;if(A!==0){if(T=d.value,S!==!0||T===null){const w=_+A*4,N=y.matrixWorldInverse;c.getNormalMatrix(N),(T===null||T.length<w)&&(T=new Float32Array(w));for(let D=0,U=_;D!==A;++D,U+=4)o.copy(g[D]).applyMatrix4(N,c),o.normal.toArray(T,U),T[U+3]=o.constant}d.value=T,d.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,T}}function WB(n){let e=new WeakMap;function t(o,c){return c===c0?o.mapping=ic:c===u0&&(o.mapping=ld),o}function i(o){if(o&&o.isTexture){const c=o.mapping;if(c===c0||c===u0)if(e.has(o)){const d=e.get(o).texture;return t(d,o.mapping)}else{const d=o.image;if(d&&d.height>0){const f=new Hb(d.height);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",a),t(f.texture,o.mapping)}else return null}}return o}function a(o){const c=o.target;c.removeEventListener("dispose",a);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}const od=4,QT=[.125,.215,.35,.446,.526,.582],bf=20,XB=256,Dg=new Wp,$T=new Tt;let nS=null,iS=0,aS=0,rS=!1;const YB=new he;class p2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,a=100,r={}){const{size:o=256,position:c=YB}=r;nS=this._renderer.getRenderTarget(),iS=this._renderer.getActiveCubeFace(),aS=this._renderer.getActiveMipmapLevel(),rS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,i,a,d,c),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=nA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=tA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(nS,iS,aS),this._renderer.xr.enabled=rS,e.scissorTest=!1,op(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ic||e.mapping===ld?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),nS=this._renderer.getRenderTarget(),iS=this._renderer.getActiveCubeFace(),aS=this._renderer.getActiveMipmapLevel(),rS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Fi,minFilter:Fi,generateMipmaps:!1,type:ac,format:Dr,colorSpace:cd,depthBuffer:!1},a=eA(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=eA(e,t,i);const{_lodMax:r}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=qB(r)),this._blurMaterial=ZB(r,e,t),this._ggxMaterial=KB(r,e,t)}return a}_compileMaterial(e){const t=new sa(new xn,e);this._renderer.compile(t,Dg)}_sceneToCubeUV(e,t,i,a,r){const d=new Qa(90,1,t,i),f=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,_=g.toneMapping;g.getClearColor($T),g.toneMapping=No,g.autoClear=!1,g.state.buffers.depth.getReversed()&&(g.setRenderTarget(a),g.clearDepth(),g.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new sa(new Ff,new iu({name:"PMREM.Background",side:Ur,depthWrite:!1,depthTest:!1})));const A=this._backgroundBox,T=A.material;let w=!1;const N=e.background;N?N.isColor&&(T.color.copy(N),e.background=null,w=!0):(T.color.copy($T),w=!0);for(let D=0;D<6;D++){const U=D%3;U===0?(d.up.set(0,f[D],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x+m[D],r.y,r.z)):U===1?(d.up.set(0,0,f[D]),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y+m[D],r.z)):(d.up.set(0,f[D],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y,r.z+m[D]));const O=this._cubeSize;op(a,U*O,D>2?O:0,O,O),g.setRenderTarget(a),w&&g.render(A,d),g.render(e,d)}g.toneMapping=_,g.autoClear=y,e.background=N}_textureToCubeUV(e,t){const i=this._renderer,a=e.mapping===ic||e.mapping===ld;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=nA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=tA());const r=a?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=r;const c=r.uniforms;c.envMap.value=e;const d=this._cubeSize;op(t,0,0,3*d,2*d),i.setRenderTarget(t),i.render(o,Dg)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const a=this._lodMeshes.length;for(let r=1;r<a;r++)this._applyGGXFilter(e,r-1,r);t.autoClear=i}_applyGGXFilter(e,t,i){const a=this._renderer,r=this._pingPongRenderTarget,o=this._ggxMaterial,c=this._lodMeshes[i];c.material=o;const d=o.uniforms,f=i/(this._lodMeshes.length-1),m=t/(this._lodMeshes.length-1),g=Math.sqrt(f*f-m*m),y=0+f*1.25,_=g*y,{_lodMax:S}=this,A=this._sizeLods[i],T=3*A*(i>S-od?i-S+od:0),w=4*(this._cubeSize-A);d.envMap.value=e.texture,d.roughness.value=_,d.mipInt.value=S-t,op(r,T,w,3*A,2*A),a.setRenderTarget(r),a.render(c,Dg),d.envMap.value=r.texture,d.roughness.value=0,d.mipInt.value=S-i,op(e,T,w,3*A,2*A),a.setRenderTarget(e),a.render(c,Dg)}_blur(e,t,i,a,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,a,"latitudinal",r),this._halfBlur(o,e,i,i,a,"longitudinal",r)}_halfBlur(e,t,i,a,r,o,c){const d=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&an("blur direction must be either latitudinal or longitudinal!");const m=3,g=this._lodMeshes[a];g.material=f;const y=f.uniforms,_=this._sizeLods[i]-1,S=isFinite(r)?Math.PI/(2*_):2*Math.PI/(2*bf-1),A=r/S,T=isFinite(r)?1+Math.floor(m*A):bf;T>bf&&Rt(`sigmaRadians, ${r}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${bf}`);const w=[];let N=0;for(let z=0;z<bf;++z){const F=z/A,L=Math.exp(-F*F/2);w.push(L),z===0?N+=L:z<T&&(N+=2*L)}for(let z=0;z<w.length;z++)w[z]=w[z]/N;y.envMap.value=e.texture,y.samples.value=T,y.weights.value=w,y.latitudinal.value=o==="latitudinal",c&&(y.poleAxis.value=c);const{_lodMax:D}=this;y.dTheta.value=S,y.mipInt.value=D-i;const U=this._sizeLods[a],O=3*U*(a>D-od?a-D+od:0),B=4*(this._cubeSize-U);op(t,O,B,3*U,2*U),d.setRenderTarget(t),d.render(g,Dg)}}function qB(n){const e=[],t=[],i=[];let a=n;const r=n-od+1+QT.length;for(let o=0;o<r;o++){const c=Math.pow(2,a);e.push(c);let d=1/c;o>n-od?d=QT[o-n+od-1]:o===0&&(d=0),t.push(d);const f=1/(c-2),m=-f,g=1+f,y=[m,m,g,m,g,g,m,m,g,g,m,g],_=6,S=6,A=3,T=2,w=1,N=new Float32Array(A*S*_),D=new Float32Array(T*S*_),U=new Float32Array(w*S*_);for(let B=0;B<_;B++){const z=B%3*2/3-1,F=B>2?0:-1,L=[z,F,0,z+2/3,F,0,z+2/3,F+1,0,z,F,0,z+2/3,F+1,0,z,F+1,0];N.set(L,A*S*B),D.set(y,T*S*B);const I=[B,B,B,B,B,B];U.set(I,w*S*B)}const O=new xn;O.setAttribute("position",new Ri(N,A)),O.setAttribute("uv",new Ri(D,T)),O.setAttribute("faceIndex",new Ri(U,w)),i.push(new sa(O,null)),a>od&&a--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function eA(n,e,t){const i=new to(n,e,t);return i.texture.mapping=Hp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function op(n,e,t,i,a){n.viewport.set(e,t,i,a),n.scissor.set(e,t,i,a)}function KB(n,e,t){return new Do({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:XB,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:d1(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:ec,depthTest:!1,depthWrite:!1})}function ZB(n,e,t){const i=new Float32Array(bf),a=new he(0,1,0);return new Do({name:"SphericalGaussianBlur",defines:{n:bf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:d1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ec,depthTest:!1,depthWrite:!1})}function tA(){return new Do({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:d1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ec,depthTest:!1,depthWrite:!1})}function nA(){return new Do({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:d1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ec,depthTest:!1,depthWrite:!1})}function d1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function JB(n){let e=new WeakMap,t=null;function i(c){if(c&&c.isTexture){const d=c.mapping,f=d===c0||d===u0,m=d===ic||d===ld;if(f||m){let g=e.get(c);const y=g!==void 0?g.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==y)return t===null&&(t=new p2(n)),g=f?t.fromEquirectangular(c,g):t.fromCubemap(c,g),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),g.texture;if(g!==void 0)return g.texture;{const _=c.image;return f&&_&&_.height>0||m&&_&&a(_)?(t===null&&(t=new p2(n)),g=f?t.fromEquirectangular(c):t.fromCubemap(c),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),c.addEventListener("dispose",r),g.texture):null}}}return c}function a(c){let d=0;const f=6;for(let m=0;m<f;m++)c[m]!==void 0&&d++;return d===f}function r(c){const d=c.target;d.removeEventListener("dispose",r);const f=e.get(d);f!==void 0&&(e.delete(d),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function QB(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const a=n.getExtension(i);return e[i]=a,a}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const a=t(i);return a===null&&Dp("WebGLRenderer: "+i+" extension not supported."),a}}}function $B(n,e,t,i){const a={},r=new WeakMap;function o(g){const y=g.target;y.index!==null&&e.remove(y.index);for(const S in y.attributes)e.remove(y.attributes[S]);y.removeEventListener("dispose",o),delete a[y.id];const _=r.get(y);_&&(e.remove(_),r.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function c(g,y){return a[y.id]===!0||(y.addEventListener("dispose",o),a[y.id]=!0,t.memory.geometries++),y}function d(g){const y=g.attributes;for(const _ in y)e.update(y[_],n.ARRAY_BUFFER)}function f(g){const y=[],_=g.index,S=g.attributes.position;let A=0;if(_!==null){const N=_.array;A=_.version;for(let D=0,U=N.length;D<U;D+=3){const O=N[D+0],B=N[D+1],z=N[D+2];y.push(O,B,B,z,z,O)}}else if(S!==void 0){const N=S.array;A=S.version;for(let D=0,U=N.length/3-1;D<U;D+=3){const O=D+0,B=D+1,z=D+2;y.push(O,B,B,z,z,O)}}else return;const T=new(iN(y)?gw:mw)(y,1);T.version=A;const w=r.get(g);w&&e.remove(w),r.set(g,T)}function m(g){const y=r.get(g);if(y){const _=g.index;_!==null&&y.version<_.version&&f(g)}else f(g);return r.get(g)}return{get:c,update:d,getWireframeAttribute:m}}function ek(n,e,t){let i;function a(y){i=y}let r,o;function c(y){r=y.type,o=y.bytesPerElement}function d(y,_){n.drawElements(i,_,r,y*o),t.update(_,i,1)}function f(y,_,S){S!==0&&(n.drawElementsInstanced(i,_,r,y*o,S),t.update(_,i,S))}function m(y,_,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,_,0,r,y,0,S);let T=0;for(let w=0;w<S;w++)T+=_[w];t.update(T,i,1)}function g(y,_,S,A){if(S===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let w=0;w<y.length;w++)f(y[w]/o,_[w],A[w]);else{T.multiDrawElementsInstancedWEBGL(i,_,0,r,y,0,A,0,S);let w=0;for(let N=0;N<S;N++)w+=_[N]*A[N];t.update(w,i,1)}}this.setMode=a,this.setIndex=c,this.render=d,this.renderInstances=f,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function tk(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,c){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=c*(r/3);break;case n.LINES:t.lines+=c*(r/2);break;case n.LINE_STRIP:t.lines+=c*(r-1);break;case n.LINE_LOOP:t.lines+=c*r;break;case n.POINTS:t.points+=c*r;break;default:an("WebGLInfo: Unknown draw mode:",o);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:i}}function nk(n,e,t){const i=new WeakMap,a=new _i;function r(o,c,d){const f=o.morphTargetInfluences,m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,g=m!==void 0?m.length:0;let y=i.get(c);if(y===void 0||y.count!==g){let I=function(){F.dispose(),i.delete(c),c.removeEventListener("dispose",I)};var _=I;y!==void 0&&y.texture.dispose();const S=c.morphAttributes.position!==void 0,A=c.morphAttributes.normal!==void 0,T=c.morphAttributes.color!==void 0,w=c.morphAttributes.position||[],N=c.morphAttributes.normal||[],D=c.morphAttributes.color||[];let U=0;S===!0&&(U=1),A===!0&&(U=2),T===!0&&(U=3);let O=c.attributes.position.count*U,B=1;O>e.maxTextureSize&&(B=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const z=new Float32Array(O*B*4*g),F=new kb(z,O,B,g);F.type=ss,F.needsUpdate=!0;const L=U*4;for(let Y=0;Y<g;Y++){const q=w[Y],K=N[Y],$=D[Y],ce=O*B*4*Y;for(let G=0;G<q.count;G++){const W=G*L;S===!0&&(a.fromBufferAttribute(q,G),z[ce+W+0]=a.x,z[ce+W+1]=a.y,z[ce+W+2]=a.z,z[ce+W+3]=0),A===!0&&(a.fromBufferAttribute(K,G),z[ce+W+4]=a.x,z[ce+W+5]=a.y,z[ce+W+6]=a.z,z[ce+W+7]=0),T===!0&&(a.fromBufferAttribute($,G),z[ce+W+8]=a.x,z[ce+W+9]=a.y,z[ce+W+10]=a.z,z[ce+W+11]=$.itemSize===4?a.w:1)}}y={count:g,texture:F,size:new ft(O,B)},i.set(c,y),c.addEventListener("dispose",I)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)d.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let S=0;for(let T=0;T<f.length;T++)S+=f[T];const A=c.morphTargetsRelative?1:1-S;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",f)}d.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}return{update:r}}function ik(n,e,t,i){let a=new WeakMap;function r(d){const f=i.render.frame,m=d.geometry,g=e.get(d,m);if(a.get(g)!==f&&(e.update(g),a.set(g,f)),d.isInstancedMesh&&(d.hasEventListener("dispose",c)===!1&&d.addEventListener("dispose",c),a.get(d)!==f&&(t.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,n.ARRAY_BUFFER),a.set(d,f))),d.isSkinnedMesh){const y=d.skeleton;a.get(y)!==f&&(y.update(),a.set(y,f))}return g}function o(){a=new WeakMap}function c(d){const f=d.target;f.removeEventListener("dispose",c),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:r,dispose:o}}const ak={[$2]:"LINEAR_TONE_MAPPING",[ew]:"REINHARD_TONE_MAPPING",[tw]:"CINEON_TONE_MAPPING",[Cb]:"ACES_FILMIC_TONE_MAPPING",[iw]:"AGX_TONE_MAPPING",[aw]:"NEUTRAL_TONE_MAPPING",[nw]:"CUSTOM_TONE_MAPPING"};function rk(n,e,t,i,a){const r=new to(e,t,{type:n,depthBuffer:i,stencilBuffer:a}),o=new to(e,t,{type:ac,depthBuffer:!1,stencilBuffer:!1}),c=new xn;c.setAttribute("position",new Ht([-1,3,0,-1,-1,0,3,-1,0],3)),c.setAttribute("uv",new Ht([0,2,0,0,2,0],2));const d=new Rw({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),f=new sa(c,d),m=new Wp(-1,1,1,-1,0,1);let g=null,y=null,_=!1,S,A=null,T=[],w=!1;this.setSize=function(N,D){r.setSize(N,D),o.setSize(N,D);for(let U=0;U<T.length;U++){const O=T[U];O.setSize&&O.setSize(N,D)}},this.setEffects=function(N){T=N,w=T.length>0&&T[0].isRenderPass===!0;const D=r.width,U=r.height;for(let O=0;O<T.length;O++){const B=T[O];B.setSize&&B.setSize(D,U)}},this.begin=function(N,D){if(_||N.toneMapping===No&&T.length===0)return!1;if(A=D,D!==null){const U=D.width,O=D.height;(r.width!==U||r.height!==O)&&this.setSize(U,O)}return w===!1&&N.setRenderTarget(r),S=N.toneMapping,N.toneMapping=No,!0},this.hasRenderPass=function(){return w},this.end=function(N,D){N.toneMapping=S,_=!0;let U=r,O=o;for(let B=0;B<T.length;B++){const z=T[B];if(z.enabled!==!1&&(z.render(N,O,U,D),z.needsSwap!==!1)){const F=U;U=O,O=F}}if(g!==N.outputColorSpace||y!==N.toneMapping){g=N.outputColorSpace,y=N.toneMapping,d.defines={},Wn.getTransfer(g)===vi&&(d.defines.SRGB_TRANSFER="");const B=ak[y];B&&(d.defines[B]=""),d.needsUpdate=!0}d.uniforms.tDiffuse.value=U.texture,N.setRenderTarget(A),N.render(f,m),A=null,_=!1},this.isCompositing=function(){return _},this.dispose=function(){r.dispose(),o.dispose(),c.dispose(),d.dispose()}}const rR=new ra,m2=new zp(1,1),sR=new kb,oR=new Fb,lR=new O0,iA=[],aA=[],rA=new Float32Array(16),sA=new Float32Array(9),oA=new Float32Array(4);function Xp(n,e,t){const i=n[0];if(i<=0||i>0)return n;const a=e*t;let r=iA[a];if(r===void 0&&(r=new Float32Array(a),iA[a]=r),e!==0){i.toArray(r,0);for(let o=1,c=0;o!==e;++o)c+=t,n[o].toArray(r,c)}return r}function ka(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Fa(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function f1(n,e){let t=aA[e];t===void 0&&(t=new Int32Array(e),aA[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function sk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function ok(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ka(t,e))return;n.uniform2fv(this.addr,e),Fa(t,e)}}function lk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ka(t,e))return;n.uniform3fv(this.addr,e),Fa(t,e)}}function ck(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ka(t,e))return;n.uniform4fv(this.addr,e),Fa(t,e)}}function uk(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ka(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Fa(t,e)}else{if(ka(t,i))return;oA.set(i),n.uniformMatrix2fv(this.addr,!1,oA),Fa(t,i)}}function dk(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ka(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Fa(t,e)}else{if(ka(t,i))return;sA.set(i),n.uniformMatrix3fv(this.addr,!1,sA),Fa(t,i)}}function fk(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ka(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Fa(t,e)}else{if(ka(t,i))return;rA.set(i),n.uniformMatrix4fv(this.addr,!1,rA),Fa(t,i)}}function hk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function pk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ka(t,e))return;n.uniform2iv(this.addr,e),Fa(t,e)}}function mk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ka(t,e))return;n.uniform3iv(this.addr,e),Fa(t,e)}}function gk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ka(t,e))return;n.uniform4iv(this.addr,e),Fa(t,e)}}function vk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function xk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ka(t,e))return;n.uniform2uiv(this.addr,e),Fa(t,e)}}function yk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ka(t,e))return;n.uniform3uiv(this.addr,e),Fa(t,e)}}function bk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ka(t,e))return;n.uniform4uiv(this.addr,e),Fa(t,e)}}function _k(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a);let r;this.type===n.SAMPLER_2D_SHADOW?(m2.compareFunction=t.isReversedDepthBuffer()?Bb:Ib,r=m2):r=rR,t.setTexture2D(e||r,a)}function Sk(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture3D(e||oR,a)}function wk(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTextureCube(e||lR,a)}function Mk(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture2DArray(e||sR,a)}function Ek(n){switch(n){case 5126:return sk;case 35664:return ok;case 35665:return lk;case 35666:return ck;case 35674:return uk;case 35675:return dk;case 35676:return fk;case 5124:case 35670:return hk;case 35667:case 35671:return pk;case 35668:case 35672:return mk;case 35669:case 35673:return gk;case 5125:return vk;case 36294:return xk;case 36295:return yk;case 36296:return bk;case 35678:case 36198:case 36298:case 36306:case 35682:return _k;case 35679:case 36299:case 36307:return Sk;case 35680:case 36300:case 36308:case 36293:return wk;case 36289:case 36303:case 36311:case 36292:return Mk}}function Tk(n,e){n.uniform1fv(this.addr,e)}function Ak(n,e){const t=Xp(e,this.size,2);n.uniform2fv(this.addr,t)}function Ck(n,e){const t=Xp(e,this.size,3);n.uniform3fv(this.addr,t)}function Nk(n,e){const t=Xp(e,this.size,4);n.uniform4fv(this.addr,t)}function Rk(n,e){const t=Xp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Dk(n,e){const t=Xp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Uk(n,e){const t=Xp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Ok(n,e){n.uniform1iv(this.addr,e)}function Lk(n,e){n.uniform2iv(this.addr,e)}function zk(n,e){n.uniform3iv(this.addr,e)}function Pk(n,e){n.uniform4iv(this.addr,e)}function Ik(n,e){n.uniform1uiv(this.addr,e)}function Bk(n,e){n.uniform2uiv(this.addr,e)}function kk(n,e){n.uniform3uiv(this.addr,e)}function Fk(n,e){n.uniform4uiv(this.addr,e)}function jk(n,e,t){const i=this.cache,a=e.length,r=f1(t,a);ka(i,r)||(n.uniform1iv(this.addr,r),Fa(i,r));let o;this.type===n.SAMPLER_2D_SHADOW?o=m2:o=rR;for(let c=0;c!==a;++c)t.setTexture2D(e[c]||o,r[c])}function Hk(n,e,t){const i=this.cache,a=e.length,r=f1(t,a);ka(i,r)||(n.uniform1iv(this.addr,r),Fa(i,r));for(let o=0;o!==a;++o)t.setTexture3D(e[o]||oR,r[o])}function Vk(n,e,t){const i=this.cache,a=e.length,r=f1(t,a);ka(i,r)||(n.uniform1iv(this.addr,r),Fa(i,r));for(let o=0;o!==a;++o)t.setTextureCube(e[o]||lR,r[o])}function Gk(n,e,t){const i=this.cache,a=e.length,r=f1(t,a);ka(i,r)||(n.uniform1iv(this.addr,r),Fa(i,r));for(let o=0;o!==a;++o)t.setTexture2DArray(e[o]||sR,r[o])}function Wk(n){switch(n){case 5126:return Tk;case 35664:return Ak;case 35665:return Ck;case 35666:return Nk;case 35674:return Rk;case 35675:return Dk;case 35676:return Uk;case 5124:case 35670:return Ok;case 35667:case 35671:return Lk;case 35668:case 35672:return zk;case 35669:case 35673:return Pk;case 5125:return Ik;case 36294:return Bk;case 36295:return kk;case 36296:return Fk;case 35678:case 36198:case 36298:case 36306:case 35682:return jk;case 35679:case 36299:case 36307:return Hk;case 35680:case 36300:case 36308:case 36293:return Vk;case 36289:case 36303:case 36311:case 36292:return Gk}}class Xk{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Ek(t.type)}}class Yk{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Wk(t.type)}}class qk{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const a=this.seq;for(let r=0,o=a.length;r!==o;++r){const c=a[r];c.setValue(e,t[c.id],i)}}}const sS=/(\w+)(\])?(\[|\.)?/g;function lA(n,e){n.seq.push(e),n.map[e.id]=e}function Kk(n,e,t){const i=n.name,a=i.length;for(sS.lastIndex=0;;){const r=sS.exec(i),o=sS.lastIndex;let c=r[1];const d=r[2]==="]",f=r[3];if(d&&(c=c|0),f===void 0||f==="["&&o+2===a){lA(t,f===void 0?new Xk(c,n,e):new Yk(c,n,e));break}else{let g=t.map[c];g===void 0&&(g=new qk(c),lA(t,g)),t=g}}}class uy{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const c=e.getActiveUniform(t,o),d=e.getUniformLocation(t,c.name);Kk(c,d,this)}const a=[],r=[];for(const o of this.seq)o.type===e.SAMPLER_2D_SHADOW||o.type===e.SAMPLER_CUBE_SHADOW||o.type===e.SAMPLER_2D_ARRAY_SHADOW?a.push(o):r.push(o);a.length>0&&(this.seq=a.concat(r))}setValue(e,t,i,a){const r=this.map[t];r!==void 0&&r.setValue(e,i,a)}setOptional(e,t,i){const a=t[i];a!==void 0&&this.setValue(e,i,a)}static upload(e,t,i,a){for(let r=0,o=t.length;r!==o;++r){const c=t[r],d=i[c.id];d.needsUpdate!==!1&&c.setValue(e,d.value,a)}}static seqWithValue(e,t){const i=[];for(let a=0,r=e.length;a!==r;++a){const o=e[a];o.id in t&&i.push(o)}return i}}function cA(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Zk=37297;let Jk=0;function Qk(n,e){const t=n.split(`
`),i=[],a=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=a;o<r;o++){const c=o+1;i.push(`${c===e?">":" "} ${c}: ${t[o]}`)}return i.join(`
`)}const uA=new vn;function $k(n){Wn._getMatrix(uA,Wn.workingColorSpace,n);const e=`mat3( ${uA.elements.map(t=>t.toFixed(4))} )`;switch(Wn.getTransfer(n)){case m0:return[e,"LinearTransferOETF"];case vi:return[e,"sRGBTransferOETF"];default:return Rt("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function dA(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=(n.getShaderInfoLog(e)||"").trim();if(i&&r==="")return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const c=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+Qk(n.getShaderSource(e),c)}else return r}function e8(n,e){const t=$k(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const t8={[$2]:"Linear",[ew]:"Reinhard",[tw]:"Cineon",[Cb]:"ACESFilmic",[iw]:"AgX",[aw]:"Neutral",[nw]:"Custom"};function n8(n,e){const t=t8[e];return t===void 0?(Rt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Yx=new he;function i8(){Wn.getLuminanceCoefficients(Yx);const n=Yx.x.toFixed(4),e=Yx.y.toFixed(4),t=Yx.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function a8(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Fg).join(`
`)}function r8(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function s8(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const r=n.getActiveAttrib(e,a),o=r.name;let c=1;r.type===n.FLOAT_MAT2&&(c=2),r.type===n.FLOAT_MAT3&&(c=3),r.type===n.FLOAT_MAT4&&(c=4),t[o]={type:r.type,location:n.getAttribLocation(e,o),locationSize:c}}return t}function Fg(n){return n!==""}function fA(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function hA(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const o8=/^[ \t]*#include +<([\w\d./]+)>/gm;function g2(n){return n.replace(o8,c8)}const l8=new Map;function c8(n,e){let t=wn[e];if(t===void 0){const i=l8.get(e);if(i!==void 0)t=wn[i],Rt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return g2(t)}const u8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pA(n){return n.replace(u8,d8)}function d8(n,e,t,i){let a="";for(let r=parseInt(e);r<parseInt(t);r++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return a}function mA(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const f8={[Sp]:"SHADOWMAP_TYPE_PCF",[_f]:"SHADOWMAP_TYPE_VSM"};function h8(n){return f8[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const p8={[ic]:"ENVMAP_TYPE_CUBE",[ld]:"ENVMAP_TYPE_CUBE",[Hp]:"ENVMAP_TYPE_CUBE_UV"};function m8(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":p8[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const g8={[ld]:"ENVMAP_MODE_REFRACTION"};function v8(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":g8[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const x8={[D0]:"ENVMAP_BLENDING_MULTIPLY",[HC]:"ENVMAP_BLENDING_MIX",[VC]:"ENVMAP_BLENDING_ADD"};function y8(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":x8[n.combine]||"ENVMAP_BLENDING_NONE"}function b8(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function _8(n,e,t,i){const a=n.getContext(),r=t.defines;let o=t.vertexShader,c=t.fragmentShader;const d=h8(t),f=m8(t),m=v8(t),g=y8(t),y=b8(t),_=a8(t),S=r8(r),A=a.createProgram();let T,w,N=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Fg).join(`
`),T.length>0&&(T+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Fg).join(`
`),w.length>0&&(w+=`
`)):(T=[mA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Fg).join(`
`),w=[mA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==No?"#define TONE_MAPPING":"",t.toneMapping!==No?wn.tonemapping_pars_fragment:"",t.toneMapping!==No?n8("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",wn.colorspace_pars_fragment,e8("linearToOutputTexel",t.outputColorSpace),i8(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Fg).join(`
`)),o=g2(o),o=fA(o,t),o=hA(o,t),c=g2(c),c=fA(c,t),c=hA(c,t),o=pA(o),c=pA(c),t.isRawShaderMaterial!==!0&&(N=`#version 300 es
`,T=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,w=["#define varying in",t.glslVersion===r2?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===r2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const D=N+T+o,U=N+w+c,O=cA(a,a.VERTEX_SHADER,D),B=cA(a,a.FRAGMENT_SHADER,U);a.attachShader(A,O),a.attachShader(A,B),t.index0AttributeName!==void 0?a.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(A,0,"position"),a.linkProgram(A);function z(Y){if(n.debug.checkShaderErrors){const q=a.getProgramInfoLog(A)||"",K=a.getShaderInfoLog(O)||"",$=a.getShaderInfoLog(B)||"",ce=q.trim(),G=K.trim(),W=$.trim();let Q=!0,ue=!0;if(a.getProgramParameter(A,a.LINK_STATUS)===!1)if(Q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(a,A,O,B);else{const de=dA(a,O,"vertex"),j=dA(a,B,"fragment");an("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(A,a.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+ce+`
`+de+`
`+j)}else ce!==""?Rt("WebGLProgram: Program Info Log:",ce):(G===""||W==="")&&(ue=!1);ue&&(Y.diagnostics={runnable:Q,programLog:ce,vertexShader:{log:G,prefix:T},fragmentShader:{log:W,prefix:w}})}a.deleteShader(O),a.deleteShader(B),F=new uy(a,A),L=s8(a,A)}let F;this.getUniforms=function(){return F===void 0&&z(this),F};let L;this.getAttributes=function(){return L===void 0&&z(this),L};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=a.getProgramParameter(A,Zk)),I},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Jk++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=O,this.fragmentShader=B,this}let S8=0;class w8{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,a=this._getShaderStage(t),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(a)===!1&&(o.add(a),a.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new M8(e),t.set(e,i)),i}}class M8{constructor(e){this.id=S8++,this.code=e,this.usedTimes=0}}function E8(n,e,t,i,a,r,o){const c=new Op,d=new w8,f=new Set,m=[],g=new Map,y=a.logarithmicDepthBuffer;let _=a.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(L){return f.add(L),L===0?"uv":`uv${L}`}function T(L,I,Y,q,K){const $=q.fog,ce=K.geometry,G=L.isMeshStandardMaterial?q.environment:null,W=(L.isMeshStandardMaterial?t:e).get(L.envMap||G),Q=W&&W.mapping===Hp?W.image.height:null,ue=S[L.type];L.precision!==null&&(_=a.getMaxPrecision(L.precision),_!==L.precision&&Rt("WebGLProgram.getParameters:",L.precision,"not supported, using",_,"instead."));const de=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,j=de!==void 0?de.length:0;let ee=0;ce.morphAttributes.position!==void 0&&(ee=1),ce.morphAttributes.normal!==void 0&&(ee=2),ce.morphAttributes.color!==void 0&&(ee=3);let ne,oe,re,se;if(ue){const Nt=cl[ue];ne=Nt.vertexShader,oe=Nt.fragmentShader}else ne=L.vertexShader,oe=L.fragmentShader,d.update(L),re=d.getVertexShaderID(L),se=d.getFragmentShaderID(L);const le=n.getRenderTarget(),ve=n.state.buffers.depth.getReversed(),ze=K.isInstancedMesh===!0,qe=K.isBatchedMesh===!0,Ke=!!L.map,Pe=!!L.matcap,gt=!!W,Te=!!L.aoMap,je=!!L.lightMap,Le=!!L.bumpMap,$e=!!L.normalMap,J=!!L.displacementMap,et=!!L.emissiveMap,We=!!L.metalnessMap,Se=!!L.roughnessMap,Ee=L.anisotropy>0,X=L.clearcoat>0,V=L.dispersion>0,fe=L.iridescence>0,Ce=L.sheen>0,Ae=L.transmission>0,we=Ee&&!!L.anisotropyMap,ot=X&&!!L.clearcoatMap,it=X&&!!L.clearcoatNormalMap,ht=X&&!!L.clearcoatRoughnessMap,xt=fe&&!!L.iridescenceMap,ke=fe&&!!L.iridescenceThicknessMap,Fe=Ce&&!!L.sheenColorMap,Ze=Ce&&!!L.sheenRoughnessMap,rt=!!L.specularMap,ut=!!L.specularColorMap,Ut=!!L.specularIntensityMap,me=Ae&&!!L.transmissionMap,tt=Ae&&!!L.thicknessMap,nt=!!L.gradientMap,ge=!!L.alphaMap,xe=L.alphaTest>0,pe=!!L.alphaHash,Ie=!!L.extensions;let pt=No;L.toneMapped&&(le===null||le.isXRRenderTarget===!0)&&(pt=n.toneMapping);const yt={shaderID:ue,shaderType:L.type,shaderName:L.name,vertexShader:ne,fragmentShader:oe,defines:L.defines,customVertexShaderID:re,customFragmentShaderID:se,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:_,batching:qe,batchingColor:qe&&K._colorsTexture!==null,instancing:ze,instancingColor:ze&&K.instanceColor!==null,instancingMorph:ze&&K.morphTexture!==null,outputColorSpace:le===null?n.outputColorSpace:le.isXRRenderTarget===!0?le.texture.colorSpace:cd,alphaToCoverage:!!L.alphaToCoverage,map:Ke,matcap:Pe,envMap:gt,envMapMode:gt&&W.mapping,envMapCubeUVHeight:Q,aoMap:Te,lightMap:je,bumpMap:Le,normalMap:$e,displacementMap:J,emissiveMap:et,normalMapObjectSpace:$e&&L.normalMapType===ZC,normalMapTangentSpace:$e&&L.normalMapType===pd,metalnessMap:We,roughnessMap:Se,anisotropy:Ee,anisotropyMap:we,clearcoat:X,clearcoatMap:ot,clearcoatNormalMap:it,clearcoatRoughnessMap:ht,dispersion:V,iridescence:fe,iridescenceMap:xt,iridescenceThicknessMap:ke,sheen:Ce,sheenColorMap:Fe,sheenRoughnessMap:Ze,specularMap:rt,specularColorMap:ut,specularIntensityMap:Ut,transmission:Ae,transmissionMap:me,thicknessMap:tt,gradientMap:nt,opaque:L.transparent===!1&&L.blending===Af&&L.alphaToCoverage===!1,alphaMap:ge,alphaTest:xe,alphaHash:pe,combine:L.combine,mapUv:Ke&&A(L.map.channel),aoMapUv:Te&&A(L.aoMap.channel),lightMapUv:je&&A(L.lightMap.channel),bumpMapUv:Le&&A(L.bumpMap.channel),normalMapUv:$e&&A(L.normalMap.channel),displacementMapUv:J&&A(L.displacementMap.channel),emissiveMapUv:et&&A(L.emissiveMap.channel),metalnessMapUv:We&&A(L.metalnessMap.channel),roughnessMapUv:Se&&A(L.roughnessMap.channel),anisotropyMapUv:we&&A(L.anisotropyMap.channel),clearcoatMapUv:ot&&A(L.clearcoatMap.channel),clearcoatNormalMapUv:it&&A(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ht&&A(L.clearcoatRoughnessMap.channel),iridescenceMapUv:xt&&A(L.iridescenceMap.channel),iridescenceThicknessMapUv:ke&&A(L.iridescenceThicknessMap.channel),sheenColorMapUv:Fe&&A(L.sheenColorMap.channel),sheenRoughnessMapUv:Ze&&A(L.sheenRoughnessMap.channel),specularMapUv:rt&&A(L.specularMap.channel),specularColorMapUv:ut&&A(L.specularColorMap.channel),specularIntensityMapUv:Ut&&A(L.specularIntensityMap.channel),transmissionMapUv:me&&A(L.transmissionMap.channel),thicknessMapUv:tt&&A(L.thicknessMap.channel),alphaMapUv:ge&&A(L.alphaMap.channel),vertexTangents:!!ce.attributes.tangent&&($e||Ee),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,pointsUvs:K.isPoints===!0&&!!ce.attributes.uv&&(Ke||ge),fog:!!$,useFog:L.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:L.flatShading===!0&&L.wireframe===!1,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:y,reversedDepthBuffer:ve,skinning:K.isSkinnedMesh===!0,morphTargets:ce.morphAttributes.position!==void 0,morphNormals:ce.morphAttributes.normal!==void 0,morphColors:ce.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:ee,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&Y.length>0,shadowMapType:n.shadowMap.type,toneMapping:pt,decodeVideoTexture:Ke&&L.map.isVideoTexture===!0&&Wn.getTransfer(L.map.colorSpace)===vi,decodeVideoTextureEmissive:et&&L.emissiveMap.isVideoTexture===!0&&Wn.getTransfer(L.emissiveMap.colorSpace)===vi,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Co,flipSided:L.side===Ur,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:Ie&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ie&&L.extensions.multiDraw===!0||qe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return yt.vertexUv1s=f.has(1),yt.vertexUv2s=f.has(2),yt.vertexUv3s=f.has(3),f.clear(),yt}function w(L){const I=[];if(L.shaderID?I.push(L.shaderID):(I.push(L.customVertexShaderID),I.push(L.customFragmentShaderID)),L.defines!==void 0)for(const Y in L.defines)I.push(Y),I.push(L.defines[Y]);return L.isRawShaderMaterial===!1&&(N(I,L),D(I,L),I.push(n.outputColorSpace)),I.push(L.customProgramCacheKey),I.join()}function N(L,I){L.push(I.precision),L.push(I.outputColorSpace),L.push(I.envMapMode),L.push(I.envMapCubeUVHeight),L.push(I.mapUv),L.push(I.alphaMapUv),L.push(I.lightMapUv),L.push(I.aoMapUv),L.push(I.bumpMapUv),L.push(I.normalMapUv),L.push(I.displacementMapUv),L.push(I.emissiveMapUv),L.push(I.metalnessMapUv),L.push(I.roughnessMapUv),L.push(I.anisotropyMapUv),L.push(I.clearcoatMapUv),L.push(I.clearcoatNormalMapUv),L.push(I.clearcoatRoughnessMapUv),L.push(I.iridescenceMapUv),L.push(I.iridescenceThicknessMapUv),L.push(I.sheenColorMapUv),L.push(I.sheenRoughnessMapUv),L.push(I.specularMapUv),L.push(I.specularColorMapUv),L.push(I.specularIntensityMapUv),L.push(I.transmissionMapUv),L.push(I.thicknessMapUv),L.push(I.combine),L.push(I.fogExp2),L.push(I.sizeAttenuation),L.push(I.morphTargetsCount),L.push(I.morphAttributeCount),L.push(I.numDirLights),L.push(I.numPointLights),L.push(I.numSpotLights),L.push(I.numSpotLightMaps),L.push(I.numHemiLights),L.push(I.numRectAreaLights),L.push(I.numDirLightShadows),L.push(I.numPointLightShadows),L.push(I.numSpotLightShadows),L.push(I.numSpotLightShadowsWithMaps),L.push(I.numLightProbes),L.push(I.shadowMapType),L.push(I.toneMapping),L.push(I.numClippingPlanes),L.push(I.numClipIntersection),L.push(I.depthPacking)}function D(L,I){c.disableAll(),I.instancing&&c.enable(0),I.instancingColor&&c.enable(1),I.instancingMorph&&c.enable(2),I.matcap&&c.enable(3),I.envMap&&c.enable(4),I.normalMapObjectSpace&&c.enable(5),I.normalMapTangentSpace&&c.enable(6),I.clearcoat&&c.enable(7),I.iridescence&&c.enable(8),I.alphaTest&&c.enable(9),I.vertexColors&&c.enable(10),I.vertexAlphas&&c.enable(11),I.vertexUv1s&&c.enable(12),I.vertexUv2s&&c.enable(13),I.vertexUv3s&&c.enable(14),I.vertexTangents&&c.enable(15),I.anisotropy&&c.enable(16),I.alphaHash&&c.enable(17),I.batching&&c.enable(18),I.dispersion&&c.enable(19),I.batchingColor&&c.enable(20),I.gradientMap&&c.enable(21),L.push(c.mask),c.disableAll(),I.fog&&c.enable(0),I.useFog&&c.enable(1),I.flatShading&&c.enable(2),I.logarithmicDepthBuffer&&c.enable(3),I.reversedDepthBuffer&&c.enable(4),I.skinning&&c.enable(5),I.morphTargets&&c.enable(6),I.morphNormals&&c.enable(7),I.morphColors&&c.enable(8),I.premultipliedAlpha&&c.enable(9),I.shadowMapEnabled&&c.enable(10),I.doubleSided&&c.enable(11),I.flipSided&&c.enable(12),I.useDepthPacking&&c.enable(13),I.dithering&&c.enable(14),I.transmission&&c.enable(15),I.sheen&&c.enable(16),I.opaque&&c.enable(17),I.pointsUvs&&c.enable(18),I.decodeVideoTexture&&c.enable(19),I.decodeVideoTextureEmissive&&c.enable(20),I.alphaToCoverage&&c.enable(21),L.push(c.mask)}function U(L){const I=S[L.type];let Y;if(I){const q=cl[I];Y=vw.clone(q.uniforms)}else Y=L.uniforms;return Y}function O(L,I){let Y=g.get(I);return Y!==void 0?++Y.usedTimes:(Y=new _8(n,I,L,r),m.push(Y),g.set(I,Y)),Y}function B(L){if(--L.usedTimes===0){const I=m.indexOf(L);m[I]=m[m.length-1],m.pop(),g.delete(L.cacheKey),L.destroy()}}function z(L){d.remove(L)}function F(){d.dispose()}return{getParameters:T,getProgramCacheKey:w,getUniforms:U,acquireProgram:O,releaseProgram:B,releaseShaderCache:z,programs:m,dispose:F}}function T8(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let c=n.get(o);return c===void 0&&(c={},n.set(o,c)),c}function i(o){n.delete(o)}function a(o,c,d){n.get(o)[c]=d}function r(){n=new WeakMap}return{has:e,get:t,remove:i,update:a,dispose:r}}function A8(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function gA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function vA(){const n=[];let e=0;const t=[],i=[],a=[];function r(){e=0,t.length=0,i.length=0,a.length=0}function o(g,y,_,S,A,T){let w=n[e];return w===void 0?(w={id:g.id,object:g,geometry:y,material:_,groupOrder:S,renderOrder:g.renderOrder,z:A,group:T},n[e]=w):(w.id=g.id,w.object=g,w.geometry=y,w.material=_,w.groupOrder=S,w.renderOrder=g.renderOrder,w.z=A,w.group=T),e++,w}function c(g,y,_,S,A,T){const w=o(g,y,_,S,A,T);_.transmission>0?i.push(w):_.transparent===!0?a.push(w):t.push(w)}function d(g,y,_,S,A,T){const w=o(g,y,_,S,A,T);_.transmission>0?i.unshift(w):_.transparent===!0?a.unshift(w):t.unshift(w)}function f(g,y){t.length>1&&t.sort(g||A8),i.length>1&&i.sort(y||gA),a.length>1&&a.sort(y||gA)}function m(){for(let g=e,y=n.length;g<y;g++){const _=n[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:i,transparent:a,init:r,push:c,unshift:d,finish:m,sort:f}}function C8(){let n=new WeakMap;function e(i,a){const r=n.get(i);let o;return r===void 0?(o=new vA,n.set(i,[o])):a>=r.length?(o=new vA,r.push(o)):o=r[a],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function N8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new he,color:new Tt};break;case"SpotLight":t={position:new he,direction:new he,color:new Tt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new he,color:new Tt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new he,skyColor:new Tt,groundColor:new Tt};break;case"RectAreaLight":t={color:new Tt,position:new he,halfWidth:new he,halfHeight:new he};break}return n[e.id]=t,t}}}function R8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let D8=0;function U8(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function O8(n){const e=new N8,t=R8(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new he);const a=new he,r=new hn,o=new hn;function c(f){let m=0,g=0,y=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let _=0,S=0,A=0,T=0,w=0,N=0,D=0,U=0,O=0,B=0,z=0;f.sort(U8);for(let L=0,I=f.length;L<I;L++){const Y=f[L],q=Y.color,K=Y.intensity,$=Y.distance;let ce=null;if(Y.shadow&&Y.shadow.map&&(Y.shadow.map.texture.format===Of?ce=Y.shadow.map.texture:ce=Y.shadow.map.depthTexture||Y.shadow.map.texture),Y.isAmbientLight)m+=q.r*K,g+=q.g*K,y+=q.b*K;else if(Y.isLightProbe){for(let G=0;G<9;G++)i.probe[G].addScaledVector(Y.sh.coefficients[G],K);z++}else if(Y.isDirectionalLight){const G=e.get(Y);if(G.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const W=Y.shadow,Q=t.get(Y);Q.shadowIntensity=W.intensity,Q.shadowBias=W.bias,Q.shadowNormalBias=W.normalBias,Q.shadowRadius=W.radius,Q.shadowMapSize=W.mapSize,i.directionalShadow[_]=Q,i.directionalShadowMap[_]=ce,i.directionalShadowMatrix[_]=Y.shadow.matrix,N++}i.directional[_]=G,_++}else if(Y.isSpotLight){const G=e.get(Y);G.position.setFromMatrixPosition(Y.matrixWorld),G.color.copy(q).multiplyScalar(K),G.distance=$,G.coneCos=Math.cos(Y.angle),G.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),G.decay=Y.decay,i.spot[A]=G;const W=Y.shadow;if(Y.map&&(i.spotLightMap[O]=Y.map,O++,W.updateMatrices(Y),Y.castShadow&&B++),i.spotLightMatrix[A]=W.matrix,Y.castShadow){const Q=t.get(Y);Q.shadowIntensity=W.intensity,Q.shadowBias=W.bias,Q.shadowNormalBias=W.normalBias,Q.shadowRadius=W.radius,Q.shadowMapSize=W.mapSize,i.spotShadow[A]=Q,i.spotShadowMap[A]=ce,U++}A++}else if(Y.isRectAreaLight){const G=e.get(Y);G.color.copy(q).multiplyScalar(K),G.halfWidth.set(Y.width*.5,0,0),G.halfHeight.set(0,Y.height*.5,0),i.rectArea[T]=G,T++}else if(Y.isPointLight){const G=e.get(Y);if(G.color.copy(Y.color).multiplyScalar(Y.intensity),G.distance=Y.distance,G.decay=Y.decay,Y.castShadow){const W=Y.shadow,Q=t.get(Y);Q.shadowIntensity=W.intensity,Q.shadowBias=W.bias,Q.shadowNormalBias=W.normalBias,Q.shadowRadius=W.radius,Q.shadowMapSize=W.mapSize,Q.shadowCameraNear=W.camera.near,Q.shadowCameraFar=W.camera.far,i.pointShadow[S]=Q,i.pointShadowMap[S]=ce,i.pointShadowMatrix[S]=Y.shadow.matrix,D++}i.point[S]=G,S++}else if(Y.isHemisphereLight){const G=e.get(Y);G.skyColor.copy(Y.color).multiplyScalar(K),G.groundColor.copy(Y.groundColor).multiplyScalar(K),i.hemi[w]=G,w++}}T>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Lt.LTC_FLOAT_1,i.rectAreaLTC2=Lt.LTC_FLOAT_2):(i.rectAreaLTC1=Lt.LTC_HALF_1,i.rectAreaLTC2=Lt.LTC_HALF_2)),i.ambient[0]=m,i.ambient[1]=g,i.ambient[2]=y;const F=i.hash;(F.directionalLength!==_||F.pointLength!==S||F.spotLength!==A||F.rectAreaLength!==T||F.hemiLength!==w||F.numDirectionalShadows!==N||F.numPointShadows!==D||F.numSpotShadows!==U||F.numSpotMaps!==O||F.numLightProbes!==z)&&(i.directional.length=_,i.spot.length=A,i.rectArea.length=T,i.point.length=S,i.hemi.length=w,i.directionalShadow.length=N,i.directionalShadowMap.length=N,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=U,i.spotShadowMap.length=U,i.directionalShadowMatrix.length=N,i.pointShadowMatrix.length=D,i.spotLightMatrix.length=U+O-B,i.spotLightMap.length=O,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=z,F.directionalLength=_,F.pointLength=S,F.spotLength=A,F.rectAreaLength=T,F.hemiLength=w,F.numDirectionalShadows=N,F.numPointShadows=D,F.numSpotShadows=U,F.numSpotMaps=O,F.numLightProbes=z,i.version=D8++)}function d(f,m){let g=0,y=0,_=0,S=0,A=0;const T=m.matrixWorldInverse;for(let w=0,N=f.length;w<N;w++){const D=f[w];if(D.isDirectionalLight){const U=i.directional[g];U.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),U.direction.sub(a),U.direction.transformDirection(T),g++}else if(D.isSpotLight){const U=i.spot[_];U.position.setFromMatrixPosition(D.matrixWorld),U.position.applyMatrix4(T),U.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),U.direction.sub(a),U.direction.transformDirection(T),_++}else if(D.isRectAreaLight){const U=i.rectArea[S];U.position.setFromMatrixPosition(D.matrixWorld),U.position.applyMatrix4(T),o.identity(),r.copy(D.matrixWorld),r.premultiply(T),o.extractRotation(r),U.halfWidth.set(D.width*.5,0,0),U.halfHeight.set(0,D.height*.5,0),U.halfWidth.applyMatrix4(o),U.halfHeight.applyMatrix4(o),S++}else if(D.isPointLight){const U=i.point[y];U.position.setFromMatrixPosition(D.matrixWorld),U.position.applyMatrix4(T),y++}else if(D.isHemisphereLight){const U=i.hemi[A];U.direction.setFromMatrixPosition(D.matrixWorld),U.direction.transformDirection(T),A++}}}return{setup:c,setupView:d,state:i}}function xA(n){const e=new O8(n),t=[],i=[];function a(m){f.camera=m,t.length=0,i.length=0}function r(m){t.push(m)}function o(m){i.push(m)}function c(){e.setup(t)}function d(m){e.setupView(t,m)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:f,setupLights:c,setupLightsView:d,pushLight:r,pushShadow:o}}function L8(n){let e=new WeakMap;function t(a,r=0){const o=e.get(a);let c;return o===void 0?(c=new xA(n),e.set(a,[c])):r>=o.length?(c=new xA(n),o.push(c)):c=o[r],c}function i(){e=new WeakMap}return{get:t,dispose:i}}const z8=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,P8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,I8=[new he(1,0,0),new he(-1,0,0),new he(0,1,0),new he(0,-1,0),new he(0,0,1),new he(0,0,-1)],B8=[new he(0,-1,0),new he(0,-1,0),new he(0,0,1),new he(0,0,-1),new he(0,-1,0),new he(0,-1,0)],yA=new hn,Ug=new he,oS=new he;function k8(n,e,t){let i=new Gp;const a=new ft,r=new ft,o=new _i,c=new l1,d=new c1,f={},m=t.maxTextureSize,g={[$c]:Ur,[Ur]:$c,[Co]:Co},y=new Do({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ft},radius:{value:4}},vertexShader:z8,fragmentShader:P8}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const S=new xn;S.setAttribute("position",new Ri(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new sa(S,y),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Sp;let w=this.type;this.render=function(B,z,F){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||B.length===0)return;B.type===Wg&&(Rt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),B.type=Sp);const L=n.getRenderTarget(),I=n.getActiveCubeFace(),Y=n.getActiveMipmapLevel(),q=n.state;q.setBlending(ec),q.buffers.depth.getReversed()===!0?q.buffers.color.setClear(0,0,0,0):q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);const K=w!==this.type;K&&z.traverse(function($){$.material&&(Array.isArray($.material)?$.material.forEach(ce=>ce.needsUpdate=!0):$.material.needsUpdate=!0)});for(let $=0,ce=B.length;$<ce;$++){const G=B[$],W=G.shadow;if(W===void 0){Rt("WebGLShadowMap:",G,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;a.copy(W.mapSize);const Q=W.getFrameExtents();if(a.multiply(Q),r.copy(W.mapSize),(a.x>m||a.y>m)&&(a.x>m&&(r.x=Math.floor(m/Q.x),a.x=r.x*Q.x,W.mapSize.x=r.x),a.y>m&&(r.y=Math.floor(m/Q.y),a.y=r.y*Q.y,W.mapSize.y=r.y)),W.map===null||K===!0){if(W.map!==null&&(W.map.depthTexture!==null&&(W.map.depthTexture.dispose(),W.map.depthTexture=null),W.map.dispose()),this.type===_f){if(G.isPointLight){Rt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}W.map=new to(a.x,a.y,{format:Of,type:ac,minFilter:Fi,magFilter:Fi,generateMipmaps:!1}),W.map.texture.name=G.name+".shadowMap",W.map.depthTexture=new zp(a.x,a.y,ss),W.map.depthTexture.name=G.name+".shadowMapDepth",W.map.depthTexture.format=rc,W.map.depthTexture.compareFunction=null,W.map.depthTexture.minFilter=ya,W.map.depthTexture.magFilter=ya}else{G.isPointLight?(W.map=new Hb(a.x),W.map.depthTexture=new xN(a.x,Ro)):(W.map=new to(a.x,a.y),W.map.depthTexture=new zp(a.x,a.y,Ro)),W.map.depthTexture.name=G.name+".shadowMap",W.map.depthTexture.format=rc;const de=n.state.buffers.depth.getReversed();this.type===Sp?(W.map.depthTexture.compareFunction=de?Bb:Ib,W.map.depthTexture.minFilter=Fi,W.map.depthTexture.magFilter=Fi):(W.map.depthTexture.compareFunction=null,W.map.depthTexture.minFilter=ya,W.map.depthTexture.magFilter=ya)}W.camera.updateProjectionMatrix()}const ue=W.map.isWebGLCubeRenderTarget?6:1;for(let de=0;de<ue;de++){if(W.map.isWebGLCubeRenderTarget)n.setRenderTarget(W.map,de),n.clear();else{de===0&&(n.setRenderTarget(W.map),n.clear());const j=W.getViewport(de);o.set(r.x*j.x,r.y*j.y,r.x*j.z,r.y*j.w),q.viewport(o)}if(G.isPointLight){const j=W.camera,ee=W.matrix,ne=G.distance||j.far;ne!==j.far&&(j.far=ne,j.updateProjectionMatrix()),Ug.setFromMatrixPosition(G.matrixWorld),j.position.copy(Ug),oS.copy(j.position),oS.add(I8[de]),j.up.copy(B8[de]),j.lookAt(oS),j.updateMatrixWorld(),ee.makeTranslation(-Ug.x,-Ug.y,-Ug.z),yA.multiplyMatrices(j.projectionMatrix,j.matrixWorldInverse),W._frustum.setFromProjectionMatrix(yA,j.coordinateSystem,j.reversedDepth)}else W.updateMatrices(G);i=W.getFrustum(),U(z,F,W.camera,G,this.type)}W.isPointLightShadow!==!0&&this.type===_f&&N(W,F),W.needsUpdate=!1}w=this.type,T.needsUpdate=!1,n.setRenderTarget(L,I,Y)};function N(B,z){const F=e.update(A);y.defines.VSM_SAMPLES!==B.blurSamples&&(y.defines.VSM_SAMPLES=B.blurSamples,_.defines.VSM_SAMPLES=B.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new to(a.x,a.y,{format:Of,type:ac})),y.uniforms.shadow_pass.value=B.map.depthTexture,y.uniforms.resolution.value=B.mapSize,y.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(z,null,F,y,A,null),_.uniforms.shadow_pass.value=B.mapPass.texture,_.uniforms.resolution.value=B.mapSize,_.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(z,null,F,_,A,null)}function D(B,z,F,L){let I=null;const Y=F.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(Y!==void 0)I=Y;else if(I=F.isPointLight===!0?d:c,n.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0||z.alphaToCoverage===!0){const q=I.uuid,K=z.uuid;let $=f[q];$===void 0&&($={},f[q]=$);let ce=$[K];ce===void 0&&(ce=I.clone(),$[K]=ce,z.addEventListener("dispose",O)),I=ce}if(I.visible=z.visible,I.wireframe=z.wireframe,L===_f?I.side=z.shadowSide!==null?z.shadowSide:z.side:I.side=z.shadowSide!==null?z.shadowSide:g[z.side],I.alphaMap=z.alphaMap,I.alphaTest=z.alphaToCoverage===!0?.5:z.alphaTest,I.map=z.map,I.clipShadows=z.clipShadows,I.clippingPlanes=z.clippingPlanes,I.clipIntersection=z.clipIntersection,I.displacementMap=z.displacementMap,I.displacementScale=z.displacementScale,I.displacementBias=z.displacementBias,I.wireframeLinewidth=z.wireframeLinewidth,I.linewidth=z.linewidth,F.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const q=n.properties.get(I);q.light=F}return I}function U(B,z,F,L,I){if(B.visible===!1)return;if(B.layers.test(z.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&I===_f)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,B.matrixWorld);const K=e.update(B),$=B.material;if(Array.isArray($)){const ce=K.groups;for(let G=0,W=ce.length;G<W;G++){const Q=ce[G],ue=$[Q.materialIndex];if(ue&&ue.visible){const de=D(B,ue,L,I);B.onBeforeShadow(n,B,z,F,K,de,Q),n.renderBufferDirect(F,null,K,de,B,Q),B.onAfterShadow(n,B,z,F,K,de,Q)}}}else if($.visible){const ce=D(B,$,L,I);B.onBeforeShadow(n,B,z,F,K,ce,null),n.renderBufferDirect(F,null,K,ce,B,null),B.onAfterShadow(n,B,z,F,K,ce,null)}}const q=B.children;for(let K=0,$=q.length;K<$;K++)U(q[K],z,F,L,I)}function O(B){B.target.removeEventListener("dispose",O);for(const F in f){const L=f[F],I=B.target.uuid;I in L&&(L[I].dispose(),delete L[I])}}}const F8={[_y]:Sy,[wy]:Ty,[My]:Ay,[Uf]:Ey,[Sy]:_y,[Ty]:wy,[Ay]:My,[Ey]:Uf};function j8(n,e){function t(){let me=!1;const tt=new _i;let nt=null;const ge=new _i(0,0,0,0);return{setMask:function(xe){nt!==xe&&!me&&(n.colorMask(xe,xe,xe,xe),nt=xe)},setLocked:function(xe){me=xe},setClear:function(xe,pe,Ie,pt,yt){yt===!0&&(xe*=pt,pe*=pt,Ie*=pt),tt.set(xe,pe,Ie,pt),ge.equals(tt)===!1&&(n.clearColor(xe,pe,Ie,pt),ge.copy(tt))},reset:function(){me=!1,nt=null,ge.set(-1,0,0,0)}}}function i(){let me=!1,tt=!1,nt=null,ge=null,xe=null;return{setReversed:function(pe){if(tt!==pe){const Ie=e.get("EXT_clip_control");pe?Ie.clipControlEXT(Ie.LOWER_LEFT_EXT,Ie.ZERO_TO_ONE_EXT):Ie.clipControlEXT(Ie.LOWER_LEFT_EXT,Ie.NEGATIVE_ONE_TO_ONE_EXT),tt=pe;const pt=xe;xe=null,this.setClear(pt)}},getReversed:function(){return tt},setTest:function(pe){pe?le(n.DEPTH_TEST):ve(n.DEPTH_TEST)},setMask:function(pe){nt!==pe&&!me&&(n.depthMask(pe),nt=pe)},setFunc:function(pe){if(tt&&(pe=F8[pe]),ge!==pe){switch(pe){case _y:n.depthFunc(n.NEVER);break;case Sy:n.depthFunc(n.ALWAYS);break;case wy:n.depthFunc(n.LESS);break;case Uf:n.depthFunc(n.LEQUAL);break;case My:n.depthFunc(n.EQUAL);break;case Ey:n.depthFunc(n.GEQUAL);break;case Ty:n.depthFunc(n.GREATER);break;case Ay:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ge=pe}},setLocked:function(pe){me=pe},setClear:function(pe){xe!==pe&&(tt&&(pe=1-pe),n.clearDepth(pe),xe=pe)},reset:function(){me=!1,nt=null,ge=null,xe=null,tt=!1}}}function a(){let me=!1,tt=null,nt=null,ge=null,xe=null,pe=null,Ie=null,pt=null,yt=null;return{setTest:function(Nt){me||(Nt?le(n.STENCIL_TEST):ve(n.STENCIL_TEST))},setMask:function(Nt){tt!==Nt&&!me&&(n.stencilMask(Nt),tt=Nt)},setFunc:function(Nt,Kt,dn){(nt!==Nt||ge!==Kt||xe!==dn)&&(n.stencilFunc(Nt,Kt,dn),nt=Nt,ge=Kt,xe=dn)},setOp:function(Nt,Kt,dn){(pe!==Nt||Ie!==Kt||pt!==dn)&&(n.stencilOp(Nt,Kt,dn),pe=Nt,Ie=Kt,pt=dn)},setLocked:function(Nt){me=Nt},setClear:function(Nt){yt!==Nt&&(n.clearStencil(Nt),yt=Nt)},reset:function(){me=!1,tt=null,nt=null,ge=null,xe=null,pe=null,Ie=null,pt=null,yt=null}}}const r=new t,o=new i,c=new a,d=new WeakMap,f=new WeakMap;let m={},g={},y=new WeakMap,_=[],S=null,A=!1,T=null,w=null,N=null,D=null,U=null,O=null,B=null,z=new Tt(0,0,0),F=0,L=!1,I=null,Y=null,q=null,K=null,$=null;const ce=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,W=0;const Q=n.getParameter(n.VERSION);Q.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(Q)[1]),G=W>=1):Q.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),G=W>=2);let ue=null,de={};const j=n.getParameter(n.SCISSOR_BOX),ee=n.getParameter(n.VIEWPORT),ne=new _i().fromArray(j),oe=new _i().fromArray(ee);function re(me,tt,nt,ge){const xe=new Uint8Array(4),pe=n.createTexture();n.bindTexture(me,pe),n.texParameteri(me,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(me,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ie=0;Ie<nt;Ie++)me===n.TEXTURE_3D||me===n.TEXTURE_2D_ARRAY?n.texImage3D(tt,0,n.RGBA,1,1,ge,0,n.RGBA,n.UNSIGNED_BYTE,xe):n.texImage2D(tt+Ie,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,xe);return pe}const se={};se[n.TEXTURE_2D]=re(n.TEXTURE_2D,n.TEXTURE_2D,1),se[n.TEXTURE_CUBE_MAP]=re(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),se[n.TEXTURE_2D_ARRAY]=re(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),se[n.TEXTURE_3D]=re(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),c.setClear(0),le(n.DEPTH_TEST),o.setFunc(Uf),Le(!1),$e(e2),le(n.CULL_FACE),Te(ec);function le(me){m[me]!==!0&&(n.enable(me),m[me]=!0)}function ve(me){m[me]!==!1&&(n.disable(me),m[me]=!1)}function ze(me,tt){return g[me]!==tt?(n.bindFramebuffer(me,tt),g[me]=tt,me===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=tt),me===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=tt),!0):!1}function qe(me,tt){let nt=_,ge=!1;if(me){nt=y.get(tt),nt===void 0&&(nt=[],y.set(tt,nt));const xe=me.textures;if(nt.length!==xe.length||nt[0]!==n.COLOR_ATTACHMENT0){for(let pe=0,Ie=xe.length;pe<Ie;pe++)nt[pe]=n.COLOR_ATTACHMENT0+pe;nt.length=xe.length,ge=!0}}else nt[0]!==n.BACK&&(nt[0]=n.BACK,ge=!0);ge&&n.drawBuffers(nt)}function Ke(me){return S!==me?(n.useProgram(me),S=me,!0):!1}const Pe={[nd]:n.FUNC_ADD,[EC]:n.FUNC_SUBTRACT,[TC]:n.FUNC_REVERSE_SUBTRACT};Pe[AC]=n.MIN,Pe[CC]=n.MAX;const gt={[NC]:n.ZERO,[RC]:n.ONE,[DC]:n.SRC_COLOR,[yy]:n.SRC_ALPHA,[IC]:n.SRC_ALPHA_SATURATE,[zC]:n.DST_COLOR,[OC]:n.DST_ALPHA,[UC]:n.ONE_MINUS_SRC_COLOR,[by]:n.ONE_MINUS_SRC_ALPHA,[PC]:n.ONE_MINUS_DST_COLOR,[LC]:n.ONE_MINUS_DST_ALPHA,[BC]:n.CONSTANT_COLOR,[kC]:n.ONE_MINUS_CONSTANT_COLOR,[FC]:n.CONSTANT_ALPHA,[jC]:n.ONE_MINUS_CONSTANT_ALPHA};function Te(me,tt,nt,ge,xe,pe,Ie,pt,yt,Nt){if(me===ec){A===!0&&(ve(n.BLEND),A=!1);return}if(A===!1&&(le(n.BLEND),A=!0),me!==MC){if(me!==T||Nt!==L){if((w!==nd||U!==nd)&&(n.blendEquation(n.FUNC_ADD),w=nd,U=nd),Nt)switch(me){case Af:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nc:n.blendFunc(n.ONE,n.ONE);break;case t2:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case n2:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:an("WebGLState: Invalid blending: ",me);break}else switch(me){case Af:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case t2:an("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case n2:an("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:an("WebGLState: Invalid blending: ",me);break}N=null,D=null,O=null,B=null,z.set(0,0,0),F=0,T=me,L=Nt}return}xe=xe||tt,pe=pe||nt,Ie=Ie||ge,(tt!==w||xe!==U)&&(n.blendEquationSeparate(Pe[tt],Pe[xe]),w=tt,U=xe),(nt!==N||ge!==D||pe!==O||Ie!==B)&&(n.blendFuncSeparate(gt[nt],gt[ge],gt[pe],gt[Ie]),N=nt,D=ge,O=pe,B=Ie),(pt.equals(z)===!1||yt!==F)&&(n.blendColor(pt.r,pt.g,pt.b,yt),z.copy(pt),F=yt),T=me,L=!1}function je(me,tt){me.side===Co?ve(n.CULL_FACE):le(n.CULL_FACE);let nt=me.side===Ur;tt&&(nt=!nt),Le(nt),me.blending===Af&&me.transparent===!1?Te(ec):Te(me.blending,me.blendEquation,me.blendSrc,me.blendDst,me.blendEquationAlpha,me.blendSrcAlpha,me.blendDstAlpha,me.blendColor,me.blendAlpha,me.premultipliedAlpha),o.setFunc(me.depthFunc),o.setTest(me.depthTest),o.setMask(me.depthWrite),r.setMask(me.colorWrite);const ge=me.stencilWrite;c.setTest(ge),ge&&(c.setMask(me.stencilWriteMask),c.setFunc(me.stencilFunc,me.stencilRef,me.stencilFuncMask),c.setOp(me.stencilFail,me.stencilZFail,me.stencilZPass)),et(me.polygonOffset,me.polygonOffsetFactor,me.polygonOffsetUnits),me.alphaToCoverage===!0?le(n.SAMPLE_ALPHA_TO_COVERAGE):ve(n.SAMPLE_ALPHA_TO_COVERAGE)}function Le(me){I!==me&&(me?n.frontFace(n.CW):n.frontFace(n.CCW),I=me)}function $e(me){me!==_C?(le(n.CULL_FACE),me!==Y&&(me===e2?n.cullFace(n.BACK):me===SC?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ve(n.CULL_FACE),Y=me}function J(me){me!==q&&(G&&n.lineWidth(me),q=me)}function et(me,tt,nt){me?(le(n.POLYGON_OFFSET_FILL),(K!==tt||$!==nt)&&(n.polygonOffset(tt,nt),K=tt,$=nt)):ve(n.POLYGON_OFFSET_FILL)}function We(me){me?le(n.SCISSOR_TEST):ve(n.SCISSOR_TEST)}function Se(me){me===void 0&&(me=n.TEXTURE0+ce-1),ue!==me&&(n.activeTexture(me),ue=me)}function Ee(me,tt,nt){nt===void 0&&(ue===null?nt=n.TEXTURE0+ce-1:nt=ue);let ge=de[nt];ge===void 0&&(ge={type:void 0,texture:void 0},de[nt]=ge),(ge.type!==me||ge.texture!==tt)&&(ue!==nt&&(n.activeTexture(nt),ue=nt),n.bindTexture(me,tt||se[me]),ge.type=me,ge.texture=tt)}function X(){const me=de[ue];me!==void 0&&me.type!==void 0&&(n.bindTexture(me.type,null),me.type=void 0,me.texture=void 0)}function V(){try{n.compressedTexImage2D(...arguments)}catch(me){an("WebGLState:",me)}}function fe(){try{n.compressedTexImage3D(...arguments)}catch(me){an("WebGLState:",me)}}function Ce(){try{n.texSubImage2D(...arguments)}catch(me){an("WebGLState:",me)}}function Ae(){try{n.texSubImage3D(...arguments)}catch(me){an("WebGLState:",me)}}function we(){try{n.compressedTexSubImage2D(...arguments)}catch(me){an("WebGLState:",me)}}function ot(){try{n.compressedTexSubImage3D(...arguments)}catch(me){an("WebGLState:",me)}}function it(){try{n.texStorage2D(...arguments)}catch(me){an("WebGLState:",me)}}function ht(){try{n.texStorage3D(...arguments)}catch(me){an("WebGLState:",me)}}function xt(){try{n.texImage2D(...arguments)}catch(me){an("WebGLState:",me)}}function ke(){try{n.texImage3D(...arguments)}catch(me){an("WebGLState:",me)}}function Fe(me){ne.equals(me)===!1&&(n.scissor(me.x,me.y,me.z,me.w),ne.copy(me))}function Ze(me){oe.equals(me)===!1&&(n.viewport(me.x,me.y,me.z,me.w),oe.copy(me))}function rt(me,tt){let nt=f.get(tt);nt===void 0&&(nt=new WeakMap,f.set(tt,nt));let ge=nt.get(me);ge===void 0&&(ge=n.getUniformBlockIndex(tt,me.name),nt.set(me,ge))}function ut(me,tt){const ge=f.get(tt).get(me);d.get(tt)!==ge&&(n.uniformBlockBinding(tt,ge,me.__bindingPointIndex),d.set(tt,ge))}function Ut(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},ue=null,de={},g={},y=new WeakMap,_=[],S=null,A=!1,T=null,w=null,N=null,D=null,U=null,O=null,B=null,z=new Tt(0,0,0),F=0,L=!1,I=null,Y=null,q=null,K=null,$=null,ne.set(0,0,n.canvas.width,n.canvas.height),oe.set(0,0,n.canvas.width,n.canvas.height),r.reset(),o.reset(),c.reset()}return{buffers:{color:r,depth:o,stencil:c},enable:le,disable:ve,bindFramebuffer:ze,drawBuffers:qe,useProgram:Ke,setBlending:Te,setMaterial:je,setFlipSided:Le,setCullFace:$e,setLineWidth:J,setPolygonOffset:et,setScissorTest:We,activeTexture:Se,bindTexture:Ee,unbindTexture:X,compressedTexImage2D:V,compressedTexImage3D:fe,texImage2D:xt,texImage3D:ke,updateUBOMapping:rt,uniformBlockBinding:ut,texStorage2D:it,texStorage3D:ht,texSubImage2D:Ce,texSubImage3D:Ae,compressedTexSubImage2D:we,compressedTexSubImage3D:ot,scissor:Fe,viewport:Ze,reset:Ut}}function H8(n,e,t,i,a,r,o){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new ft,m=new WeakMap;let g;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(X,V){return _?new OffscreenCanvas(X,V):v0("canvas")}function A(X,V,fe){let Ce=1;const Ae=Ee(X);if((Ae.width>fe||Ae.height>fe)&&(Ce=fe/Math.max(Ae.width,Ae.height)),Ce<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const we=Math.floor(Ce*Ae.width),ot=Math.floor(Ce*Ae.height);g===void 0&&(g=S(we,ot));const it=V?S(we,ot):g;return it.width=we,it.height=ot,it.getContext("2d").drawImage(X,0,0,we,ot),Rt("WebGLRenderer: Texture has been resized from ("+Ae.width+"x"+Ae.height+") to ("+we+"x"+ot+")."),it}else return"data"in X&&Rt("WebGLRenderer: Image in DataTexture is too big ("+Ae.width+"x"+Ae.height+")."),X;return X}function T(X){return X.generateMipmaps}function w(X){n.generateMipmap(X)}function N(X){return X.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?n.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function D(X,V,fe,Ce,Ae=!1){if(X!==null){if(n[X]!==void 0)return n[X];Rt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let we=V;if(V===n.RED&&(fe===n.FLOAT&&(we=n.R32F),fe===n.HALF_FLOAT&&(we=n.R16F),fe===n.UNSIGNED_BYTE&&(we=n.R8)),V===n.RED_INTEGER&&(fe===n.UNSIGNED_BYTE&&(we=n.R8UI),fe===n.UNSIGNED_SHORT&&(we=n.R16UI),fe===n.UNSIGNED_INT&&(we=n.R32UI),fe===n.BYTE&&(we=n.R8I),fe===n.SHORT&&(we=n.R16I),fe===n.INT&&(we=n.R32I)),V===n.RG&&(fe===n.FLOAT&&(we=n.RG32F),fe===n.HALF_FLOAT&&(we=n.RG16F),fe===n.UNSIGNED_BYTE&&(we=n.RG8)),V===n.RG_INTEGER&&(fe===n.UNSIGNED_BYTE&&(we=n.RG8UI),fe===n.UNSIGNED_SHORT&&(we=n.RG16UI),fe===n.UNSIGNED_INT&&(we=n.RG32UI),fe===n.BYTE&&(we=n.RG8I),fe===n.SHORT&&(we=n.RG16I),fe===n.INT&&(we=n.RG32I)),V===n.RGB_INTEGER&&(fe===n.UNSIGNED_BYTE&&(we=n.RGB8UI),fe===n.UNSIGNED_SHORT&&(we=n.RGB16UI),fe===n.UNSIGNED_INT&&(we=n.RGB32UI),fe===n.BYTE&&(we=n.RGB8I),fe===n.SHORT&&(we=n.RGB16I),fe===n.INT&&(we=n.RGB32I)),V===n.RGBA_INTEGER&&(fe===n.UNSIGNED_BYTE&&(we=n.RGBA8UI),fe===n.UNSIGNED_SHORT&&(we=n.RGBA16UI),fe===n.UNSIGNED_INT&&(we=n.RGBA32UI),fe===n.BYTE&&(we=n.RGBA8I),fe===n.SHORT&&(we=n.RGBA16I),fe===n.INT&&(we=n.RGBA32I)),V===n.RGB&&(fe===n.UNSIGNED_INT_5_9_9_9_REV&&(we=n.RGB9_E5),fe===n.UNSIGNED_INT_10F_11F_11F_REV&&(we=n.R11F_G11F_B10F)),V===n.RGBA){const ot=Ae?m0:Wn.getTransfer(Ce);fe===n.FLOAT&&(we=n.RGBA32F),fe===n.HALF_FLOAT&&(we=n.RGBA16F),fe===n.UNSIGNED_BYTE&&(we=ot===vi?n.SRGB8_ALPHA8:n.RGBA8),fe===n.UNSIGNED_SHORT_4_4_4_4&&(we=n.RGBA4),fe===n.UNSIGNED_SHORT_5_5_5_1&&(we=n.RGB5_A1)}return(we===n.R16F||we===n.R32F||we===n.RG16F||we===n.RG32F||we===n.RGBA16F||we===n.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function U(X,V){let fe;return X?V===null||V===Ro||V===Np?fe=n.DEPTH24_STENCIL8:V===ss?fe=n.DEPTH32F_STENCIL8:V===Cp&&(fe=n.DEPTH24_STENCIL8,Rt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===Ro||V===Np?fe=n.DEPTH_COMPONENT24:V===ss?fe=n.DEPTH_COMPONENT32F:V===Cp&&(fe=n.DEPTH_COMPONENT16),fe}function O(X,V){return T(X)===!0||X.isFramebufferTexture&&X.minFilter!==ya&&X.minFilter!==Fi?Math.log2(Math.max(V.width,V.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?V.mipmaps.length:1}function B(X){const V=X.target;V.removeEventListener("dispose",B),F(V),V.isVideoTexture&&m.delete(V)}function z(X){const V=X.target;V.removeEventListener("dispose",z),I(V)}function F(X){const V=i.get(X);if(V.__webglInit===void 0)return;const fe=X.source,Ce=y.get(fe);if(Ce){const Ae=Ce[V.__cacheKey];Ae.usedTimes--,Ae.usedTimes===0&&L(X),Object.keys(Ce).length===0&&y.delete(fe)}i.remove(X)}function L(X){const V=i.get(X);n.deleteTexture(V.__webglTexture);const fe=X.source,Ce=y.get(fe);delete Ce[V.__cacheKey],o.memory.textures--}function I(X){const V=i.get(X);if(X.depthTexture&&(X.depthTexture.dispose(),i.remove(X.depthTexture)),X.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++){if(Array.isArray(V.__webglFramebuffer[Ce]))for(let Ae=0;Ae<V.__webglFramebuffer[Ce].length;Ae++)n.deleteFramebuffer(V.__webglFramebuffer[Ce][Ae]);else n.deleteFramebuffer(V.__webglFramebuffer[Ce]);V.__webglDepthbuffer&&n.deleteRenderbuffer(V.__webglDepthbuffer[Ce])}else{if(Array.isArray(V.__webglFramebuffer))for(let Ce=0;Ce<V.__webglFramebuffer.length;Ce++)n.deleteFramebuffer(V.__webglFramebuffer[Ce]);else n.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&n.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&n.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let Ce=0;Ce<V.__webglColorRenderbuffer.length;Ce++)V.__webglColorRenderbuffer[Ce]&&n.deleteRenderbuffer(V.__webglColorRenderbuffer[Ce]);V.__webglDepthRenderbuffer&&n.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const fe=X.textures;for(let Ce=0,Ae=fe.length;Ce<Ae;Ce++){const we=i.get(fe[Ce]);we.__webglTexture&&(n.deleteTexture(we.__webglTexture),o.memory.textures--),i.remove(fe[Ce])}i.remove(X)}let Y=0;function q(){Y=0}function K(){const X=Y;return X>=a.maxTextures&&Rt("WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+a.maxTextures),Y+=1,X}function $(X){const V=[];return V.push(X.wrapS),V.push(X.wrapT),V.push(X.wrapR||0),V.push(X.magFilter),V.push(X.minFilter),V.push(X.anisotropy),V.push(X.internalFormat),V.push(X.format),V.push(X.type),V.push(X.generateMipmaps),V.push(X.premultiplyAlpha),V.push(X.flipY),V.push(X.unpackAlignment),V.push(X.colorSpace),V.join()}function ce(X,V){const fe=i.get(X);if(X.isVideoTexture&&We(X),X.isRenderTargetTexture===!1&&X.isExternalTexture!==!0&&X.version>0&&fe.__version!==X.version){const Ce=X.image;if(Ce===null)Rt("WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)Rt("WebGLRenderer: Texture marked for update but image is incomplete");else{se(fe,X,V);return}}else X.isExternalTexture&&(fe.__webglTexture=X.sourceTexture?X.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,fe.__webglTexture,n.TEXTURE0+V)}function G(X,V){const fe=i.get(X);if(X.isRenderTargetTexture===!1&&X.version>0&&fe.__version!==X.version){se(fe,X,V);return}else X.isExternalTexture&&(fe.__webglTexture=X.sourceTexture?X.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,fe.__webglTexture,n.TEXTURE0+V)}function W(X,V){const fe=i.get(X);if(X.isRenderTargetTexture===!1&&X.version>0&&fe.__version!==X.version){se(fe,X,V);return}t.bindTexture(n.TEXTURE_3D,fe.__webglTexture,n.TEXTURE0+V)}function Q(X,V){const fe=i.get(X);if(X.isCubeDepthTexture!==!0&&X.version>0&&fe.__version!==X.version){le(fe,X,V);return}t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+V)}const ue={[d0]:n.REPEAT,[Rs]:n.CLAMP_TO_EDGE,[f0]:n.MIRRORED_REPEAT},de={[ya]:n.NEAREST,[rw]:n.NEAREST_MIPMAP_NEAREST,[yp]:n.NEAREST_MIPMAP_LINEAR,[Fi]:n.LINEAR,[Xg]:n.LINEAR_MIPMAP_NEAREST,[Jl]:n.LINEAR_MIPMAP_LINEAR},j={[JC]:n.NEVER,[nN]:n.ALWAYS,[QC]:n.LESS,[Ib]:n.LEQUAL,[$C]:n.EQUAL,[Bb]:n.GEQUAL,[eN]:n.GREATER,[tN]:n.NOTEQUAL};function ee(X,V){if(V.type===ss&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===Fi||V.magFilter===Xg||V.magFilter===yp||V.magFilter===Jl||V.minFilter===Fi||V.minFilter===Xg||V.minFilter===yp||V.minFilter===Jl)&&Rt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(X,n.TEXTURE_WRAP_S,ue[V.wrapS]),n.texParameteri(X,n.TEXTURE_WRAP_T,ue[V.wrapT]),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,ue[V.wrapR]),n.texParameteri(X,n.TEXTURE_MAG_FILTER,de[V.magFilter]),n.texParameteri(X,n.TEXTURE_MIN_FILTER,de[V.minFilter]),V.compareFunction&&(n.texParameteri(X,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(X,n.TEXTURE_COMPARE_FUNC,j[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===ya||V.minFilter!==yp&&V.minFilter!==Jl||V.type===ss&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||i.get(V).__currentAnisotropy){const fe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(X,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,a.getMaxAnisotropy())),i.get(V).__currentAnisotropy=V.anisotropy}}}function ne(X,V){let fe=!1;X.__webglInit===void 0&&(X.__webglInit=!0,V.addEventListener("dispose",B));const Ce=V.source;let Ae=y.get(Ce);Ae===void 0&&(Ae={},y.set(Ce,Ae));const we=$(V);if(we!==X.__cacheKey){Ae[we]===void 0&&(Ae[we]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),Ae[we].usedTimes++;const ot=Ae[X.__cacheKey];ot!==void 0&&(Ae[X.__cacheKey].usedTimes--,ot.usedTimes===0&&L(V)),X.__cacheKey=we,X.__webglTexture=Ae[we].texture}return fe}function oe(X,V,fe){return Math.floor(Math.floor(X/fe)/V)}function re(X,V,fe,Ce){const we=X.updateRanges;if(we.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,V.width,V.height,fe,Ce,V.data);else{we.sort((ke,Fe)=>ke.start-Fe.start);let ot=0;for(let ke=1;ke<we.length;ke++){const Fe=we[ot],Ze=we[ke],rt=Fe.start+Fe.count,ut=oe(Ze.start,V.width,4),Ut=oe(Fe.start,V.width,4);Ze.start<=rt+1&&ut===Ut&&oe(Ze.start+Ze.count-1,V.width,4)===ut?Fe.count=Math.max(Fe.count,Ze.start+Ze.count-Fe.start):(++ot,we[ot]=Ze)}we.length=ot+1;const it=n.getParameter(n.UNPACK_ROW_LENGTH),ht=n.getParameter(n.UNPACK_SKIP_PIXELS),xt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,V.width);for(let ke=0,Fe=we.length;ke<Fe;ke++){const Ze=we[ke],rt=Math.floor(Ze.start/4),ut=Math.ceil(Ze.count/4),Ut=rt%V.width,me=Math.floor(rt/V.width),tt=ut,nt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ut),n.pixelStorei(n.UNPACK_SKIP_ROWS,me),t.texSubImage2D(n.TEXTURE_2D,0,Ut,me,tt,nt,fe,Ce,V.data)}X.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,it),n.pixelStorei(n.UNPACK_SKIP_PIXELS,ht),n.pixelStorei(n.UNPACK_SKIP_ROWS,xt)}}function se(X,V,fe){let Ce=n.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(Ce=n.TEXTURE_2D_ARRAY),V.isData3DTexture&&(Ce=n.TEXTURE_3D);const Ae=ne(X,V),we=V.source;t.bindTexture(Ce,X.__webglTexture,n.TEXTURE0+fe);const ot=i.get(we);if(we.version!==ot.__version||Ae===!0){t.activeTexture(n.TEXTURE0+fe);const it=Wn.getPrimaries(Wn.workingColorSpace),ht=V.colorSpace===Kc?null:Wn.getPrimaries(V.colorSpace),xt=V.colorSpace===Kc||it===ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);let ke=A(V.image,!1,a.maxTextureSize);ke=Se(V,ke);const Fe=r.convert(V.format,V.colorSpace),Ze=r.convert(V.type);let rt=D(V.internalFormat,Fe,Ze,V.colorSpace,V.isVideoTexture);ee(Ce,V);let ut;const Ut=V.mipmaps,me=V.isVideoTexture!==!0,tt=ot.__version===void 0||Ae===!0,nt=we.dataReady,ge=O(V,ke);if(V.isDepthTexture)rt=U(V.format===rd,V.type),tt&&(me?t.texStorage2D(n.TEXTURE_2D,1,rt,ke.width,ke.height):t.texImage2D(n.TEXTURE_2D,0,rt,ke.width,ke.height,0,Fe,Ze,null));else if(V.isDataTexture)if(Ut.length>0){me&&tt&&t.texStorage2D(n.TEXTURE_2D,ge,rt,Ut[0].width,Ut[0].height);for(let xe=0,pe=Ut.length;xe<pe;xe++)ut=Ut[xe],me?nt&&t.texSubImage2D(n.TEXTURE_2D,xe,0,0,ut.width,ut.height,Fe,Ze,ut.data):t.texImage2D(n.TEXTURE_2D,xe,rt,ut.width,ut.height,0,Fe,Ze,ut.data);V.generateMipmaps=!1}else me?(tt&&t.texStorage2D(n.TEXTURE_2D,ge,rt,ke.width,ke.height),nt&&re(V,ke,Fe,Ze)):t.texImage2D(n.TEXTURE_2D,0,rt,ke.width,ke.height,0,Fe,Ze,ke.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){me&&tt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ge,rt,Ut[0].width,Ut[0].height,ke.depth);for(let xe=0,pe=Ut.length;xe<pe;xe++)if(ut=Ut[xe],V.format!==Dr)if(Fe!==null)if(me){if(nt)if(V.layerUpdates.size>0){const Ie=h2(ut.width,ut.height,V.format,V.type);for(const pt of V.layerUpdates){const yt=ut.data.subarray(pt*Ie/ut.data.BYTES_PER_ELEMENT,(pt+1)*Ie/ut.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,xe,0,0,pt,ut.width,ut.height,1,Fe,yt)}V.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,xe,0,0,0,ut.width,ut.height,ke.depth,Fe,ut.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,xe,rt,ut.width,ut.height,ke.depth,0,ut.data,0,0);else Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else me?nt&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,xe,0,0,0,ut.width,ut.height,ke.depth,Fe,Ze,ut.data):t.texImage3D(n.TEXTURE_2D_ARRAY,xe,rt,ut.width,ut.height,ke.depth,0,Fe,Ze,ut.data)}else{me&&tt&&t.texStorage2D(n.TEXTURE_2D,ge,rt,Ut[0].width,Ut[0].height);for(let xe=0,pe=Ut.length;xe<pe;xe++)ut=Ut[xe],V.format!==Dr?Fe!==null?me?nt&&t.compressedTexSubImage2D(n.TEXTURE_2D,xe,0,0,ut.width,ut.height,Fe,ut.data):t.compressedTexImage2D(n.TEXTURE_2D,xe,rt,ut.width,ut.height,0,ut.data):Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):me?nt&&t.texSubImage2D(n.TEXTURE_2D,xe,0,0,ut.width,ut.height,Fe,Ze,ut.data):t.texImage2D(n.TEXTURE_2D,xe,rt,ut.width,ut.height,0,Fe,Ze,ut.data)}else if(V.isDataArrayTexture)if(me){if(tt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ge,rt,ke.width,ke.height,ke.depth),nt)if(V.layerUpdates.size>0){const xe=h2(ke.width,ke.height,V.format,V.type);for(const pe of V.layerUpdates){const Ie=ke.data.subarray(pe*xe/ke.data.BYTES_PER_ELEMENT,(pe+1)*xe/ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,pe,ke.width,ke.height,1,Fe,Ze,Ie)}V.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ke.width,ke.height,ke.depth,Fe,Ze,ke.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,rt,ke.width,ke.height,ke.depth,0,Fe,Ze,ke.data);else if(V.isData3DTexture)me?(tt&&t.texStorage3D(n.TEXTURE_3D,ge,rt,ke.width,ke.height,ke.depth),nt&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ke.width,ke.height,ke.depth,Fe,Ze,ke.data)):t.texImage3D(n.TEXTURE_3D,0,rt,ke.width,ke.height,ke.depth,0,Fe,Ze,ke.data);else if(V.isFramebufferTexture){if(tt)if(me)t.texStorage2D(n.TEXTURE_2D,ge,rt,ke.width,ke.height);else{let xe=ke.width,pe=ke.height;for(let Ie=0;Ie<ge;Ie++)t.texImage2D(n.TEXTURE_2D,Ie,rt,xe,pe,0,Fe,Ze,null),xe>>=1,pe>>=1}}else if(Ut.length>0){if(me&&tt){const xe=Ee(Ut[0]);t.texStorage2D(n.TEXTURE_2D,ge,rt,xe.width,xe.height)}for(let xe=0,pe=Ut.length;xe<pe;xe++)ut=Ut[xe],me?nt&&t.texSubImage2D(n.TEXTURE_2D,xe,0,0,Fe,Ze,ut):t.texImage2D(n.TEXTURE_2D,xe,rt,Fe,Ze,ut);V.generateMipmaps=!1}else if(me){if(tt){const xe=Ee(ke);t.texStorage2D(n.TEXTURE_2D,ge,rt,xe.width,xe.height)}nt&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe,Ze,ke)}else t.texImage2D(n.TEXTURE_2D,0,rt,Fe,Ze,ke);T(V)&&w(Ce),ot.__version=we.version,V.onUpdate&&V.onUpdate(V)}X.__version=V.version}function le(X,V,fe){if(V.image.length!==6)return;const Ce=ne(X,V),Ae=V.source;t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+fe);const we=i.get(Ae);if(Ae.version!==we.__version||Ce===!0){t.activeTexture(n.TEXTURE0+fe);const ot=Wn.getPrimaries(Wn.workingColorSpace),it=V.colorSpace===Kc?null:Wn.getPrimaries(V.colorSpace),ht=V.colorSpace===Kc||ot===it?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);const xt=V.isCompressedTexture||V.image[0].isCompressedTexture,ke=V.image[0]&&V.image[0].isDataTexture,Fe=[];for(let pe=0;pe<6;pe++)!xt&&!ke?Fe[pe]=A(V.image[pe],!0,a.maxCubemapSize):Fe[pe]=ke?V.image[pe].image:V.image[pe],Fe[pe]=Se(V,Fe[pe]);const Ze=Fe[0],rt=r.convert(V.format,V.colorSpace),ut=r.convert(V.type),Ut=D(V.internalFormat,rt,ut,V.colorSpace),me=V.isVideoTexture!==!0,tt=we.__version===void 0||Ce===!0,nt=Ae.dataReady;let ge=O(V,Ze);ee(n.TEXTURE_CUBE_MAP,V);let xe;if(xt){me&&tt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ge,Ut,Ze.width,Ze.height);for(let pe=0;pe<6;pe++){xe=Fe[pe].mipmaps;for(let Ie=0;Ie<xe.length;Ie++){const pt=xe[Ie];V.format!==Dr?rt!==null?me?nt&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ie,0,0,pt.width,pt.height,rt,pt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ie,Ut,pt.width,pt.height,0,pt.data):Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):me?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ie,0,0,pt.width,pt.height,rt,ut,pt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ie,Ut,pt.width,pt.height,0,rt,ut,pt.data)}}}else{if(xe=V.mipmaps,me&&tt){xe.length>0&&ge++;const pe=Ee(Fe[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ge,Ut,pe.width,pe.height)}for(let pe=0;pe<6;pe++)if(ke){me?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,Fe[pe].width,Fe[pe].height,rt,ut,Fe[pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Ut,Fe[pe].width,Fe[pe].height,0,rt,ut,Fe[pe].data);for(let Ie=0;Ie<xe.length;Ie++){const yt=xe[Ie].image[pe].image;me?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ie+1,0,0,yt.width,yt.height,rt,ut,yt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ie+1,Ut,yt.width,yt.height,0,rt,ut,yt.data)}}else{me?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,rt,ut,Fe[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Ut,rt,ut,Fe[pe]);for(let Ie=0;Ie<xe.length;Ie++){const pt=xe[Ie];me?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ie+1,0,0,rt,ut,pt.image[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ie+1,Ut,rt,ut,pt.image[pe])}}}T(V)&&w(n.TEXTURE_CUBE_MAP),we.__version=Ae.version,V.onUpdate&&V.onUpdate(V)}X.__version=V.version}function ve(X,V,fe,Ce,Ae,we){const ot=r.convert(fe.format,fe.colorSpace),it=r.convert(fe.type),ht=D(fe.internalFormat,ot,it,fe.colorSpace),xt=i.get(V),ke=i.get(fe);if(ke.__renderTarget=V,!xt.__hasExternalTextures){const Fe=Math.max(1,V.width>>we),Ze=Math.max(1,V.height>>we);Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY?t.texImage3D(Ae,we,ht,Fe,Ze,V.depth,0,ot,it,null):t.texImage2D(Ae,we,ht,Fe,Ze,0,ot,it,null)}t.bindFramebuffer(n.FRAMEBUFFER,X),et(V)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ce,Ae,ke.__webglTexture,0,J(V)):(Ae===n.TEXTURE_2D||Ae>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ae<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ce,Ae,ke.__webglTexture,we),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ze(X,V,fe){if(n.bindRenderbuffer(n.RENDERBUFFER,X),V.depthBuffer){const Ce=V.depthTexture,Ae=Ce&&Ce.isDepthTexture?Ce.type:null,we=U(V.stencilBuffer,Ae),ot=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;et(V)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,J(V),we,V.width,V.height):fe?n.renderbufferStorageMultisample(n.RENDERBUFFER,J(V),we,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,we,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,ot,n.RENDERBUFFER,X)}else{const Ce=V.textures;for(let Ae=0;Ae<Ce.length;Ae++){const we=Ce[Ae],ot=r.convert(we.format,we.colorSpace),it=r.convert(we.type),ht=D(we.internalFormat,ot,it,we.colorSpace);et(V)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,J(V),ht,V.width,V.height):fe?n.renderbufferStorageMultisample(n.RENDERBUFFER,J(V),ht,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,ht,V.width,V.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function qe(X,V,fe){const Ce=V.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,X),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ae=i.get(V.depthTexture);if(Ae.__renderTarget=V,(!Ae.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),Ce){if(Ae.__webglInit===void 0&&(Ae.__webglInit=!0,V.depthTexture.addEventListener("dispose",B)),Ae.__webglTexture===void 0){Ae.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture),ee(n.TEXTURE_CUBE_MAP,V.depthTexture);const xt=r.convert(V.depthTexture.format),ke=r.convert(V.depthTexture.type);let Fe;V.depthTexture.format===rc?Fe=n.DEPTH_COMPONENT24:V.depthTexture.format===rd&&(Fe=n.DEPTH24_STENCIL8);for(let Ze=0;Ze<6;Ze++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0,Fe,V.width,V.height,0,xt,ke,null)}}else ce(V.depthTexture,0);const we=Ae.__webglTexture,ot=J(V),it=Ce?n.TEXTURE_CUBE_MAP_POSITIVE_X+fe:n.TEXTURE_2D,ht=V.depthTexture.format===rd?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(V.depthTexture.format===rc)et(V)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ht,it,we,0,ot):n.framebufferTexture2D(n.FRAMEBUFFER,ht,it,we,0);else if(V.depthTexture.format===rd)et(V)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ht,it,we,0,ot):n.framebufferTexture2D(n.FRAMEBUFFER,ht,it,we,0);else throw new Error("Unknown depthTexture format")}function Ke(X){const V=i.get(X),fe=X.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==X.depthTexture){const Ce=X.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),Ce){const Ae=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,Ce.removeEventListener("dispose",Ae)};Ce.addEventListener("dispose",Ae),V.__depthDisposeCallback=Ae}V.__boundDepthTexture=Ce}if(X.depthTexture&&!V.__autoAllocateDepthBuffer)if(fe)for(let Ce=0;Ce<6;Ce++)qe(V.__webglFramebuffer[Ce],X,Ce);else{const Ce=X.texture.mipmaps;Ce&&Ce.length>0?qe(V.__webglFramebuffer[0],X,0):qe(V.__webglFramebuffer,X,0)}else if(fe){V.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)if(t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer[Ce]),V.__webglDepthbuffer[Ce]===void 0)V.__webglDepthbuffer[Ce]=n.createRenderbuffer(),ze(V.__webglDepthbuffer[Ce],X,!1);else{const Ae=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=V.__webglDepthbuffer[Ce];n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ae,n.RENDERBUFFER,we)}}else{const Ce=X.texture.mipmaps;if(Ce&&Ce.length>0?t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=n.createRenderbuffer(),ze(V.__webglDepthbuffer,X,!1);else{const Ae=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=V.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ae,n.RENDERBUFFER,we)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Pe(X,V,fe){const Ce=i.get(X);V!==void 0&&ve(Ce.__webglFramebuffer,X,X.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),fe!==void 0&&Ke(X)}function gt(X){const V=X.texture,fe=i.get(X),Ce=i.get(V);X.addEventListener("dispose",z);const Ae=X.textures,we=X.isWebGLCubeRenderTarget===!0,ot=Ae.length>1;if(ot||(Ce.__webglTexture===void 0&&(Ce.__webglTexture=n.createTexture()),Ce.__version=V.version,o.memory.textures++),we){fe.__webglFramebuffer=[];for(let it=0;it<6;it++)if(V.mipmaps&&V.mipmaps.length>0){fe.__webglFramebuffer[it]=[];for(let ht=0;ht<V.mipmaps.length;ht++)fe.__webglFramebuffer[it][ht]=n.createFramebuffer()}else fe.__webglFramebuffer[it]=n.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){fe.__webglFramebuffer=[];for(let it=0;it<V.mipmaps.length;it++)fe.__webglFramebuffer[it]=n.createFramebuffer()}else fe.__webglFramebuffer=n.createFramebuffer();if(ot)for(let it=0,ht=Ae.length;it<ht;it++){const xt=i.get(Ae[it]);xt.__webglTexture===void 0&&(xt.__webglTexture=n.createTexture(),o.memory.textures++)}if(X.samples>0&&et(X)===!1){fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,fe.__webglMultisampledFramebuffer);for(let it=0;it<Ae.length;it++){const ht=Ae[it];fe.__webglColorRenderbuffer[it]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,fe.__webglColorRenderbuffer[it]);const xt=r.convert(ht.format,ht.colorSpace),ke=r.convert(ht.type),Fe=D(ht.internalFormat,xt,ke,ht.colorSpace,X.isXRRenderTarget===!0),Ze=J(X);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ze,Fe,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.RENDERBUFFER,fe.__webglColorRenderbuffer[it])}n.bindRenderbuffer(n.RENDERBUFFER,null),X.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),ze(fe.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(we){t.bindTexture(n.TEXTURE_CUBE_MAP,Ce.__webglTexture),ee(n.TEXTURE_CUBE_MAP,V);for(let it=0;it<6;it++)if(V.mipmaps&&V.mipmaps.length>0)for(let ht=0;ht<V.mipmaps.length;ht++)ve(fe.__webglFramebuffer[it][ht],X,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+it,ht);else ve(fe.__webglFramebuffer[it],X,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+it,0);T(V)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ot){for(let it=0,ht=Ae.length;it<ht;it++){const xt=Ae[it],ke=i.get(xt);let Fe=n.TEXTURE_2D;(X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Fe=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Fe,ke.__webglTexture),ee(Fe,xt),ve(fe.__webglFramebuffer,X,xt,n.COLOR_ATTACHMENT0+it,Fe,0),T(xt)&&w(Fe)}t.unbindTexture()}else{let it=n.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(it=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(it,Ce.__webglTexture),ee(it,V),V.mipmaps&&V.mipmaps.length>0)for(let ht=0;ht<V.mipmaps.length;ht++)ve(fe.__webglFramebuffer[ht],X,V,n.COLOR_ATTACHMENT0,it,ht);else ve(fe.__webglFramebuffer,X,V,n.COLOR_ATTACHMENT0,it,0);T(V)&&w(it),t.unbindTexture()}X.depthBuffer&&Ke(X)}function Te(X){const V=X.textures;for(let fe=0,Ce=V.length;fe<Ce;fe++){const Ae=V[fe];if(T(Ae)){const we=N(X),ot=i.get(Ae).__webglTexture;t.bindTexture(we,ot),w(we),t.unbindTexture()}}}const je=[],Le=[];function $e(X){if(X.samples>0){if(et(X)===!1){const V=X.textures,fe=X.width,Ce=X.height;let Ae=n.COLOR_BUFFER_BIT;const we=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ot=i.get(X),it=V.length>1;if(it)for(let xt=0;xt<V.length;xt++)t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+xt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+xt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ot.__webglMultisampledFramebuffer);const ht=X.texture.mipmaps;ht&&ht.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglFramebuffer);for(let xt=0;xt<V.length;xt++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(Ae|=n.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(Ae|=n.STENCIL_BUFFER_BIT)),it){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ot.__webglColorRenderbuffer[xt]);const ke=i.get(V[xt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ke,0)}n.blitFramebuffer(0,0,fe,Ce,0,0,fe,Ce,Ae,n.NEAREST),d===!0&&(je.length=0,Le.length=0,je.push(n.COLOR_ATTACHMENT0+xt),X.depthBuffer&&X.resolveDepthBuffer===!1&&(je.push(we),Le.push(we),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Le)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,je))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),it)for(let xt=0;xt<V.length;xt++){t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+xt,n.RENDERBUFFER,ot.__webglColorRenderbuffer[xt]);const ke=i.get(V[xt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+xt,n.TEXTURE_2D,ke,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&d){const V=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[V])}}}function J(X){return Math.min(a.maxSamples,X.samples)}function et(X){const V=i.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function We(X){const V=o.render.frame;m.get(X)!==V&&(m.set(X,V),X.update())}function Se(X,V){const fe=X.colorSpace,Ce=X.format,Ae=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||fe!==cd&&fe!==Kc&&(Wn.getTransfer(fe)===vi?(Ce!==Dr||Ae!==as)&&Rt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):an("WebGLTextures: Unsupported texture color space:",fe)),V}function Ee(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(f.width=X.naturalWidth||X.width,f.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(f.width=X.displayWidth,f.height=X.displayHeight):(f.width=X.width,f.height=X.height),f}this.allocateTextureUnit=K,this.resetTextureUnits=q,this.setTexture2D=ce,this.setTexture2DArray=G,this.setTexture3D=W,this.setTextureCube=Q,this.rebindTextures=Pe,this.setupRenderTarget=gt,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=$e,this.setupDepthRenderbuffer=Ke,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=et,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function cR(n,e){function t(i,a=Kc){let r;const o=Wn.getTransfer(a);if(i===as)return n.UNSIGNED_BYTE;if(i===Db)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Ub)return n.UNSIGNED_SHORT_5_5_5_1;if(i===lw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===cw)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===sw)return n.BYTE;if(i===ow)return n.SHORT;if(i===Cp)return n.UNSIGNED_SHORT;if(i===Rb)return n.INT;if(i===Ro)return n.UNSIGNED_INT;if(i===ss)return n.FLOAT;if(i===ac)return n.HALF_FLOAT;if(i===uw)return n.ALPHA;if(i===dw)return n.RGB;if(i===Dr)return n.RGBA;if(i===rc)return n.DEPTH_COMPONENT;if(i===rd)return n.DEPTH_STENCIL;if(i===Ob)return n.RED;if(i===U0)return n.RED_INTEGER;if(i===Of)return n.RG;if(i===Lb)return n.RG_INTEGER;if(i===zb)return n.RGBA_INTEGER;if(i===Yg||i===qg||i===Kg||i===Zg)if(o===vi)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===Yg)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===qg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Kg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Zg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===Yg)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===qg)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Kg)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Zg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Cy||i===Ny||i===Ry||i===Dy)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===Cy)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Ny)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Ry)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Dy)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Uy||i===Oy||i===Ly||i===zy||i===Py||i===Iy||i===By)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===Uy||i===Oy)return o===vi?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===Ly)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC;if(i===zy)return r.COMPRESSED_R11_EAC;if(i===Py)return r.COMPRESSED_SIGNED_R11_EAC;if(i===Iy)return r.COMPRESSED_RG11_EAC;if(i===By)return r.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===ky||i===Fy||i===jy||i===Hy||i===Vy||i===Gy||i===Wy||i===Xy||i===Yy||i===qy||i===Ky||i===Zy||i===Jy||i===Qy)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===ky)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Fy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===jy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Hy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Vy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Gy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Wy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Xy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Yy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===qy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Ky)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Zy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Jy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Qy)return o===vi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===$y||i===eb||i===tb)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===$y)return o===vi?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===eb)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===tb)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===nb||i===ib||i===ab||i===rb)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===nb)return r.COMPRESSED_RED_RGTC1_EXT;if(i===ib)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===ab)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===rb)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Np?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const V8=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,G8=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class W8{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new ww(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Do({vertexShader:V8,fragmentShader:G8,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new sa(new au(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class X8 extends lc{constructor(e,t){super();const i=this;let a=null,r=1,o=null,c="local-floor",d=1,f=null,m=null,g=null,y=null,_=null,S=null;const A=typeof XRWebGLBinding<"u",T=new W8,w={},N=t.getContextAttributes();let D=null,U=null;const O=[],B=[],z=new ft;let F=null;const L=new Qa;L.viewport=new _i;const I=new Qa;I.viewport=new _i;const Y=[L,I],q=new QN;let K=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let le=O[se];return le===void 0&&(le=new cy,O[se]=le),le.getTargetRaySpace()},this.getControllerGrip=function(se){let le=O[se];return le===void 0&&(le=new cy,O[se]=le),le.getGripSpace()},this.getHand=function(se){let le=O[se];return le===void 0&&(le=new cy,O[se]=le),le.getHandSpace()};function ce(se){const le=B.indexOf(se.inputSource);if(le===-1)return;const ve=O[le];ve!==void 0&&(ve.update(se.inputSource,se.frame,f||o),ve.dispatchEvent({type:se.type,data:se.inputSource}))}function G(){a.removeEventListener("select",ce),a.removeEventListener("selectstart",ce),a.removeEventListener("selectend",ce),a.removeEventListener("squeeze",ce),a.removeEventListener("squeezestart",ce),a.removeEventListener("squeezeend",ce),a.removeEventListener("end",G),a.removeEventListener("inputsourceschange",W);for(let se=0;se<O.length;se++){const le=B[se];le!==null&&(B[se]=null,O[se].disconnect(le))}K=null,$=null,T.reset();for(const se in w)delete w[se];e.setRenderTarget(D),_=null,y=null,g=null,a=null,U=null,re.stop(),i.isPresenting=!1,e.setPixelRatio(F),e.setSize(z.width,z.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(se){r=se,i.isPresenting===!0&&Rt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){c=se,i.isPresenting===!0&&Rt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(se){f=se},this.getBaseLayer=function(){return y!==null?y:_},this.getBinding=function(){return g===null&&A&&(g=new XRWebGLBinding(a,t)),g},this.getFrame=function(){return S},this.getSession=function(){return a},this.setSession=async function(se){if(a=se,a!==null){if(D=e.getRenderTarget(),a.addEventListener("select",ce),a.addEventListener("selectstart",ce),a.addEventListener("selectend",ce),a.addEventListener("squeeze",ce),a.addEventListener("squeezestart",ce),a.addEventListener("squeezeend",ce),a.addEventListener("end",G),a.addEventListener("inputsourceschange",W),N.xrCompatible!==!0&&await t.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(z),A&&"createProjectionLayer"in XRWebGLBinding.prototype){let ve=null,ze=null,qe=null;N.depth&&(qe=N.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ve=N.stencil?rd:rc,ze=N.stencil?Np:Ro);const Ke={colorFormat:t.RGBA8,depthFormat:qe,scaleFactor:r};g=this.getBinding(),y=g.createProjectionLayer(Ke),a.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),U=new to(y.textureWidth,y.textureHeight,{format:Dr,type:as,depthTexture:new zp(y.textureWidth,y.textureHeight,ze,void 0,void 0,void 0,void 0,void 0,void 0,ve),stencilBuffer:N.stencil,colorSpace:e.outputColorSpace,samples:N.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const ve={antialias:N.antialias,alpha:!0,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:r};_=new XRWebGLLayer(a,t,ve),a.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),U=new to(_.framebufferWidth,_.framebufferHeight,{format:Dr,type:as,colorSpace:e.outputColorSpace,stencilBuffer:N.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}U.isXRRenderTarget=!0,this.setFoveation(d),f=null,o=await a.requestReferenceSpace(c),re.setContext(a),re.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function W(se){for(let le=0;le<se.removed.length;le++){const ve=se.removed[le],ze=B.indexOf(ve);ze>=0&&(B[ze]=null,O[ze].disconnect(ve))}for(let le=0;le<se.added.length;le++){const ve=se.added[le];let ze=B.indexOf(ve);if(ze===-1){for(let Ke=0;Ke<O.length;Ke++)if(Ke>=B.length){B.push(ve),ze=Ke;break}else if(B[Ke]===null){B[Ke]=ve,ze=Ke;break}if(ze===-1)break}const qe=O[ze];qe&&qe.connect(ve)}}const Q=new he,ue=new he;function de(se,le,ve){Q.setFromMatrixPosition(le.matrixWorld),ue.setFromMatrixPosition(ve.matrixWorld);const ze=Q.distanceTo(ue),qe=le.projectionMatrix.elements,Ke=ve.projectionMatrix.elements,Pe=qe[14]/(qe[10]-1),gt=qe[14]/(qe[10]+1),Te=(qe[9]+1)/qe[5],je=(qe[9]-1)/qe[5],Le=(qe[8]-1)/qe[0],$e=(Ke[8]+1)/Ke[0],J=Pe*Le,et=Pe*$e,We=ze/(-Le+$e),Se=We*-Le;if(le.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(Se),se.translateZ(We),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert(),qe[10]===-1)se.projectionMatrix.copy(le.projectionMatrix),se.projectionMatrixInverse.copy(le.projectionMatrixInverse);else{const Ee=Pe+We,X=gt+We,V=J-Se,fe=et+(ze-Se),Ce=Te*gt/X*Ee,Ae=je*gt/X*Ee;se.projectionMatrix.makePerspective(V,fe,Ce,Ae,Ee,X),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}}function j(se,le){le===null?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(le.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(a===null)return;let le=se.near,ve=se.far;T.texture!==null&&(T.depthNear>0&&(le=T.depthNear),T.depthFar>0&&(ve=T.depthFar)),q.near=I.near=L.near=le,q.far=I.far=L.far=ve,(K!==q.near||$!==q.far)&&(a.updateRenderState({depthNear:q.near,depthFar:q.far}),K=q.near,$=q.far),q.layers.mask=se.layers.mask|6,L.layers.mask=q.layers.mask&3,I.layers.mask=q.layers.mask&5;const ze=se.parent,qe=q.cameras;j(q,ze);for(let Ke=0;Ke<qe.length;Ke++)j(qe[Ke],ze);qe.length===2?de(q,L,I):q.projectionMatrix.copy(L.projectionMatrix),ee(se,q,ze)};function ee(se,le,ve){ve===null?se.matrix.copy(le.matrixWorld):(se.matrix.copy(ve.matrixWorld),se.matrix.invert(),se.matrix.multiply(le.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0),se.projectionMatrix.copy(le.projectionMatrix),se.projectionMatrixInverse.copy(le.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=Up*2*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}this.getCamera=function(){return q},this.getFoveation=function(){if(!(y===null&&_===null))return d},this.setFoveation=function(se){d=se,y!==null&&(y.fixedFoveation=se),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=se)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(q)},this.getCameraTexture=function(se){return w[se]};let ne=null;function oe(se,le){if(m=le.getViewerPose(f||o),S=le,m!==null){const ve=m.views;_!==null&&(e.setRenderTargetFramebuffer(U,_.framebuffer),e.setRenderTarget(U));let ze=!1;ve.length!==q.cameras.length&&(q.cameras.length=0,ze=!0);for(let gt=0;gt<ve.length;gt++){const Te=ve[gt];let je=null;if(_!==null)je=_.getViewport(Te);else{const $e=g.getViewSubImage(y,Te);je=$e.viewport,gt===0&&(e.setRenderTargetTextures(U,$e.colorTexture,$e.depthStencilTexture),e.setRenderTarget(U))}let Le=Y[gt];Le===void 0&&(Le=new Qa,Le.layers.enable(gt),Le.viewport=new _i,Y[gt]=Le),Le.matrix.fromArray(Te.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(Te.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(je.x,je.y,je.width,je.height),gt===0&&(q.matrix.copy(Le.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale)),ze===!0&&q.cameras.push(Le)}const qe=a.enabledFeatures;if(qe&&qe.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&A){g=i.getBinding();const gt=g.getDepthInformation(ve[0]);gt&&gt.isValid&&gt.texture&&T.init(gt,a.renderState)}if(qe&&qe.includes("camera-access")&&A){e.state.unbindTexture(),g=i.getBinding();for(let gt=0;gt<ve.length;gt++){const Te=ve[gt].camera;if(Te){let je=w[Te];je||(je=new ww,w[Te]=je);const Le=g.getCameraImage(Te);je.sourceTexture=Le}}}}for(let ve=0;ve<O.length;ve++){const ze=B[ve],qe=O[ve];ze!==null&&qe!==void 0&&qe.update(ze,le,f||o)}ne&&ne(se,le),le.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:le}),S=null}const re=new aR;re.setAnimationLoop(oe),this.setAnimationLoop=function(se){ne=se},this.dispose=function(){}}}const pf=new io,Y8=new hn;function q8(n,e){function t(T,w){T.matrixAutoUpdate===!0&&T.updateMatrix(),w.value.copy(T.matrix)}function i(T,w){w.color.getRGB(T.fogColor.value,lN(n)),w.isFog?(T.fogNear.value=w.near,T.fogFar.value=w.far):w.isFogExp2&&(T.fogDensity.value=w.density)}function a(T,w,N,D,U){w.isMeshBasicMaterial||w.isMeshLambertMaterial?r(T,w):w.isMeshToonMaterial?(r(T,w),g(T,w)):w.isMeshPhongMaterial?(r(T,w),m(T,w)):w.isMeshStandardMaterial?(r(T,w),y(T,w),w.isMeshPhysicalMaterial&&_(T,w,U)):w.isMeshMatcapMaterial?(r(T,w),S(T,w)):w.isMeshDepthMaterial?r(T,w):w.isMeshDistanceMaterial?(r(T,w),A(T,w)):w.isMeshNormalMaterial?r(T,w):w.isLineBasicMaterial?(o(T,w),w.isLineDashedMaterial&&c(T,w)):w.isPointsMaterial?d(T,w,N,D):w.isSpriteMaterial?f(T,w):w.isShadowMaterial?(T.color.value.copy(w.color),T.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function r(T,w){T.opacity.value=w.opacity,w.color&&T.diffuse.value.copy(w.color),w.emissive&&T.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(T.map.value=w.map,t(w.map,T.mapTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,t(w.alphaMap,T.alphaMapTransform)),w.bumpMap&&(T.bumpMap.value=w.bumpMap,t(w.bumpMap,T.bumpMapTransform),T.bumpScale.value=w.bumpScale,w.side===Ur&&(T.bumpScale.value*=-1)),w.normalMap&&(T.normalMap.value=w.normalMap,t(w.normalMap,T.normalMapTransform),T.normalScale.value.copy(w.normalScale),w.side===Ur&&T.normalScale.value.negate()),w.displacementMap&&(T.displacementMap.value=w.displacementMap,t(w.displacementMap,T.displacementMapTransform),T.displacementScale.value=w.displacementScale,T.displacementBias.value=w.displacementBias),w.emissiveMap&&(T.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,T.emissiveMapTransform)),w.specularMap&&(T.specularMap.value=w.specularMap,t(w.specularMap,T.specularMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest);const N=e.get(w),D=N.envMap,U=N.envMapRotation;D&&(T.envMap.value=D,pf.copy(U),pf.x*=-1,pf.y*=-1,pf.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(pf.y*=-1,pf.z*=-1),T.envMapRotation.value.setFromMatrix4(Y8.makeRotationFromEuler(pf)),T.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=w.reflectivity,T.ior.value=w.ior,T.refractionRatio.value=w.refractionRatio),w.lightMap&&(T.lightMap.value=w.lightMap,T.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,T.lightMapTransform)),w.aoMap&&(T.aoMap.value=w.aoMap,T.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,T.aoMapTransform))}function o(T,w){T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,w.map&&(T.map.value=w.map,t(w.map,T.mapTransform))}function c(T,w){T.dashSize.value=w.dashSize,T.totalSize.value=w.dashSize+w.gapSize,T.scale.value=w.scale}function d(T,w,N,D){T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,T.size.value=w.size*N,T.scale.value=D*.5,w.map&&(T.map.value=w.map,t(w.map,T.uvTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,t(w.alphaMap,T.alphaMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest)}function f(T,w){T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,T.rotation.value=w.rotation,w.map&&(T.map.value=w.map,t(w.map,T.mapTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,t(w.alphaMap,T.alphaMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest)}function m(T,w){T.specular.value.copy(w.specular),T.shininess.value=Math.max(w.shininess,1e-4)}function g(T,w){w.gradientMap&&(T.gradientMap.value=w.gradientMap)}function y(T,w){T.metalness.value=w.metalness,w.metalnessMap&&(T.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,T.metalnessMapTransform)),T.roughness.value=w.roughness,w.roughnessMap&&(T.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,T.roughnessMapTransform)),w.envMap&&(T.envMapIntensity.value=w.envMapIntensity)}function _(T,w,N){T.ior.value=w.ior,w.sheen>0&&(T.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),T.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(T.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,T.sheenColorMapTransform)),w.sheenRoughnessMap&&(T.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,T.sheenRoughnessMapTransform))),w.clearcoat>0&&(T.clearcoat.value=w.clearcoat,T.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(T.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,T.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(T.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===Ur&&T.clearcoatNormalScale.value.negate())),w.dispersion>0&&(T.dispersion.value=w.dispersion),w.iridescence>0&&(T.iridescence.value=w.iridescence,T.iridescenceIOR.value=w.iridescenceIOR,T.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(T.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,T.iridescenceMapTransform)),w.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),w.transmission>0&&(T.transmission.value=w.transmission,T.transmissionSamplerMap.value=N.texture,T.transmissionSamplerSize.value.set(N.width,N.height),w.transmissionMap&&(T.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,T.transmissionMapTransform)),T.thickness.value=w.thickness,w.thicknessMap&&(T.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=w.attenuationDistance,T.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(T.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(T.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=w.specularIntensity,T.specularColor.value.copy(w.specularColor),w.specularColorMap&&(T.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,T.specularColorMapTransform)),w.specularIntensityMap&&(T.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,T.specularIntensityMapTransform))}function S(T,w){w.matcap&&(T.matcap.value=w.matcap)}function A(T,w){const N=e.get(w).light;T.referencePosition.value.setFromMatrixPosition(N.matrixWorld),T.nearDistance.value=N.shadow.camera.near,T.farDistance.value=N.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function K8(n,e,t,i){let a={},r={},o=[];const c=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function d(N,D){const U=D.program;i.uniformBlockBinding(N,U)}function f(N,D){let U=a[N.id];U===void 0&&(S(N),U=m(N),a[N.id]=U,N.addEventListener("dispose",T));const O=D.program;i.updateUBOMapping(N,O);const B=e.render.frame;r[N.id]!==B&&(y(N),r[N.id]=B)}function m(N){const D=g();N.__bindingPointIndex=D;const U=n.createBuffer(),O=N.__size,B=N.usage;return n.bindBuffer(n.UNIFORM_BUFFER,U),n.bufferData(n.UNIFORM_BUFFER,O,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,D,U),U}function g(){for(let N=0;N<c;N++)if(o.indexOf(N)===-1)return o.push(N),N;return an("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(N){const D=a[N.id],U=N.uniforms,O=N.__cache;n.bindBuffer(n.UNIFORM_BUFFER,D);for(let B=0,z=U.length;B<z;B++){const F=Array.isArray(U[B])?U[B]:[U[B]];for(let L=0,I=F.length;L<I;L++){const Y=F[L];if(_(Y,B,L,O)===!0){const q=Y.__offset,K=Array.isArray(Y.value)?Y.value:[Y.value];let $=0;for(let ce=0;ce<K.length;ce++){const G=K[ce],W=A(G);typeof G=="number"||typeof G=="boolean"?(Y.__data[0]=G,n.bufferSubData(n.UNIFORM_BUFFER,q+$,Y.__data)):G.isMatrix3?(Y.__data[0]=G.elements[0],Y.__data[1]=G.elements[1],Y.__data[2]=G.elements[2],Y.__data[3]=0,Y.__data[4]=G.elements[3],Y.__data[5]=G.elements[4],Y.__data[6]=G.elements[5],Y.__data[7]=0,Y.__data[8]=G.elements[6],Y.__data[9]=G.elements[7],Y.__data[10]=G.elements[8],Y.__data[11]=0):(G.toArray(Y.__data,$),$+=W.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,q,Y.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function _(N,D,U,O){const B=N.value,z=D+"_"+U;if(O[z]===void 0)return typeof B=="number"||typeof B=="boolean"?O[z]=B:O[z]=B.clone(),!0;{const F=O[z];if(typeof B=="number"||typeof B=="boolean"){if(F!==B)return O[z]=B,!0}else if(F.equals(B)===!1)return F.copy(B),!0}return!1}function S(N){const D=N.uniforms;let U=0;const O=16;for(let z=0,F=D.length;z<F;z++){const L=Array.isArray(D[z])?D[z]:[D[z]];for(let I=0,Y=L.length;I<Y;I++){const q=L[I],K=Array.isArray(q.value)?q.value:[q.value];for(let $=0,ce=K.length;$<ce;$++){const G=K[$],W=A(G),Q=U%O,ue=Q%W.boundary,de=Q+ue;U+=ue,de!==0&&O-de<W.storage&&(U+=O-de),q.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),q.__offset=U,U+=W.storage}}}const B=U%O;return B>0&&(U+=O-B),N.__size=U,N.__cache={},this}function A(N){const D={boundary:0,storage:0};return typeof N=="number"||typeof N=="boolean"?(D.boundary=4,D.storage=4):N.isVector2?(D.boundary=8,D.storage=8):N.isVector3||N.isColor?(D.boundary=16,D.storage=12):N.isVector4?(D.boundary=16,D.storage=16):N.isMatrix3?(D.boundary=48,D.storage=48):N.isMatrix4?(D.boundary=64,D.storage=64):N.isTexture?Rt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Rt("WebGLRenderer: Unsupported uniform value type.",N),D}function T(N){const D=N.target;D.removeEventListener("dispose",T);const U=o.indexOf(D.__bindingPointIndex);o.splice(U,1),n.deleteBuffer(a[D.id]),delete a[D.id],delete r[D.id]}function w(){for(const N in a)n.deleteBuffer(a[N]);o=[],a={},r={}}return{bind:d,update:f,dispose:w}}const Z8=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Yl=null;function J8(){return Yl===null&&(Yl=new dl(Z8,16,16,Of,ac),Yl.name="DFG_LUT",Yl.minFilter=Fi,Yl.magFilter=Fi,Yl.wrapS=Rs,Yl.wrapT=Rs,Yl.generateMipmaps=!1,Yl.needsUpdate=!0),Yl}class uR{constructor(e={}){const{canvas:t=rN(),context:i=null,depth:a=!0,stencil:r=!1,alpha:o=!1,antialias:c=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:f=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:y=!1,outputBufferType:_=as}=e;this.isWebGLRenderer=!0;let S;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");S=i.getContextAttributes().alpha}else S=o;const A=_,T=new Set([zb,Lb,U0]),w=new Set([as,Ro,Cp,Np,Db,Ub]),N=new Uint32Array(4),D=new Int32Array(4);let U=null,O=null;const B=[],z=[];let F=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=No,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const L=this;let I=!1;this._outputColorSpace=Rr;let Y=0,q=0,K=null,$=-1,ce=null;const G=new _i,W=new _i;let Q=null;const ue=new Tt(0);let de=0,j=t.width,ee=t.height,ne=1,oe=null,re=null;const se=new _i(0,0,j,ee),le=new _i(0,0,j,ee);let ve=!1;const ze=new Gp;let qe=!1,Ke=!1;const Pe=new hn,gt=new he,Te=new _i,je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Le=!1;function $e(){return K===null?ne:1}let J=i;function et(Z,Me){return t.getContext(Z,Me)}try{const Z={alpha:!0,depth:a,stencil:r,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ab}`),t.addEventListener("webglcontextlost",pt,!1),t.addEventListener("webglcontextrestored",yt,!1),t.addEventListener("webglcontextcreationerror",Nt,!1),J===null){const Me="webgl2";if(J=et(Me,Z),J===null)throw et(Me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Z){throw an("WebGLRenderer: "+Z.message),Z}let We,Se,Ee,X,V,fe,Ce,Ae,we,ot,it,ht,xt,ke,Fe,Ze,rt,ut,Ut,me,tt,nt,ge,xe;function pe(){We=new QB(J),We.init(),nt=new cR(J,We),Se=new VB(J,We,e,nt),Ee=new j8(J,We),Se.reversedDepthBuffer&&y&&Ee.buffers.depth.setReversed(!0),X=new tk(J),V=new T8,fe=new H8(J,We,Ee,V,Se,nt,X),Ce=new WB(L),Ae=new JB(L),we=new rI(J),ge=new jB(J,we),ot=new $B(J,we,X,ge),it=new ik(J,ot,we,X),Ut=new nk(J,Se,fe),Ze=new GB(V),ht=new E8(L,Ce,Ae,We,Se,ge,Ze),xt=new q8(L,V),ke=new C8,Fe=new L8(We),ut=new FB(L,Ce,Ae,Ee,it,S,d),rt=new k8(L,it,Se),xe=new K8(J,X,Se,Ee),me=new HB(J,We,X),tt=new ek(J,We,X),X.programs=ht.programs,L.capabilities=Se,L.extensions=We,L.properties=V,L.renderLists=ke,L.shadowMap=rt,L.state=Ee,L.info=X}pe(),A!==as&&(F=new rk(A,t.width,t.height,a,r));const Ie=new X8(L,J);this.xr=Ie,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const Z=We.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=We.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(Z){Z!==void 0&&(ne=Z,this.setSize(j,ee,!1))},this.getSize=function(Z){return Z.set(j,ee)},this.setSize=function(Z,Me,Ge=!0){if(Ie.isPresenting){Rt("WebGLRenderer: Can't change size while VR device is presenting.");return}j=Z,ee=Me,t.width=Math.floor(Z*ne),t.height=Math.floor(Me*ne),Ge===!0&&(t.style.width=Z+"px",t.style.height=Me+"px"),F!==null&&F.setSize(t.width,t.height),this.setViewport(0,0,Z,Me)},this.getDrawingBufferSize=function(Z){return Z.set(j*ne,ee*ne).floor()},this.setDrawingBufferSize=function(Z,Me,Ge){j=Z,ee=Me,ne=Ge,t.width=Math.floor(Z*Ge),t.height=Math.floor(Me*Ge),this.setViewport(0,0,Z,Me)},this.setEffects=function(Z){if(A===as){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(Z){for(let Me=0;Me<Z.length;Me++)if(Z[Me].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}F.setEffects(Z||[])},this.getCurrentViewport=function(Z){return Z.copy(G)},this.getViewport=function(Z){return Z.copy(se)},this.setViewport=function(Z,Me,Ge,Be){Z.isVector4?se.set(Z.x,Z.y,Z.z,Z.w):se.set(Z,Me,Ge,Be),Ee.viewport(G.copy(se).multiplyScalar(ne).round())},this.getScissor=function(Z){return Z.copy(le)},this.setScissor=function(Z,Me,Ge,Be){Z.isVector4?le.set(Z.x,Z.y,Z.z,Z.w):le.set(Z,Me,Ge,Be),Ee.scissor(W.copy(le).multiplyScalar(ne).round())},this.getScissorTest=function(){return ve},this.setScissorTest=function(Z){Ee.setScissorTest(ve=Z)},this.setOpaqueSort=function(Z){oe=Z},this.setTransparentSort=function(Z){re=Z},this.getClearColor=function(Z){return Z.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor(...arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha(...arguments)},this.clear=function(Z=!0,Me=!0,Ge=!0){let Be=0;if(Z){let Ue=!1;if(K!==null){const wt=K.texture.format;Ue=T.has(wt)}if(Ue){const wt=K.texture.type,At=w.has(wt),Mt=ut.getClearColor(),zt=ut.getClearAlpha(),It=Mt.r,Zt=Mt.g,Bt=Mt.b;At?(N[0]=It,N[1]=Zt,N[2]=Bt,N[3]=zt,J.clearBufferuiv(J.COLOR,0,N)):(D[0]=It,D[1]=Zt,D[2]=Bt,D[3]=zt,J.clearBufferiv(J.COLOR,0,D))}else Be|=J.COLOR_BUFFER_BIT}Me&&(Be|=J.DEPTH_BUFFER_BIT),Ge&&(Be|=J.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),J.clear(Be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pt,!1),t.removeEventListener("webglcontextrestored",yt,!1),t.removeEventListener("webglcontextcreationerror",Nt,!1),ut.dispose(),ke.dispose(),Fe.dispose(),V.dispose(),Ce.dispose(),Ae.dispose(),it.dispose(),ge.dispose(),xe.dispose(),ht.dispose(),Ie.dispose(),Ie.removeEventListener("sessionstart",Si),Ie.removeEventListener("sessionend",Ui),ai.stop()};function pt(Z){Z.preventDefault(),x0("WebGLRenderer: Context Lost."),I=!0}function yt(){x0("WebGLRenderer: Context Restored."),I=!1;const Z=X.autoReset,Me=rt.enabled,Ge=rt.autoUpdate,Be=rt.needsUpdate,Ue=rt.type;pe(),X.autoReset=Z,rt.enabled=Me,rt.autoUpdate=Ge,rt.needsUpdate=Be,rt.type=Ue}function Nt(Z){an("WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function Kt(Z){const Me=Z.target;Me.removeEventListener("dispose",Kt),dn(Me)}function dn(Z){Xn(Z),V.remove(Z)}function Xn(Z){const Me=V.get(Z).programs;Me!==void 0&&(Me.forEach(function(Ge){ht.releaseProgram(Ge)}),Z.isShaderMaterial&&ht.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,Me,Ge,Be,Ue,wt){Me===null&&(Me=je);const At=Ue.isMesh&&Ue.matrixWorld.determinant()<0,Mt=Pr(Z,Me,Ge,Be,Ue);Ee.setMaterial(Be,At);let zt=Ge.index,It=1;if(Be.wireframe===!0){if(zt=ot.getWireframeAttribute(Ge),zt===void 0)return;It=2}const Zt=Ge.drawRange,Bt=Ge.attributes.position;let $t=Zt.start*It,Tn=(Zt.start+Zt.count)*It;wt!==null&&($t=Math.max($t,wt.start*It),Tn=Math.min(Tn,(wt.start+wt.count)*It)),zt!==null?($t=Math.max($t,0),Tn=Math.min(Tn,zt.count)):Bt!=null&&($t=Math.max($t,0),Tn=Math.min(Tn,Bt.count));const ei=Tn-$t;if(ei<0||ei===1/0)return;ge.setup(Ue,Be,Mt,Ge,zt);let Pn,Un=me;if(zt!==null&&(Pn=we.get(zt),Un=tt,Un.setIndex(Pn)),Ue.isMesh)Be.wireframe===!0?(Ee.setLineWidth(Be.wireframeLinewidth*$e()),Un.setMode(J.LINES)):Un.setMode(J.TRIANGLES);else if(Ue.isLine){let Ft=Be.linewidth;Ft===void 0&&(Ft=1),Ee.setLineWidth(Ft*$e()),Ue.isLineSegments?Un.setMode(J.LINES):Ue.isLineLoop?Un.setMode(J.LINE_LOOP):Un.setMode(J.LINE_STRIP)}else Ue.isPoints?Un.setMode(J.POINTS):Ue.isSprite&&Un.setMode(J.TRIANGLES);if(Ue.isBatchedMesh)if(Ue._multiDrawInstances!==null)Dp("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Un.renderMultiDrawInstances(Ue._multiDrawStarts,Ue._multiDrawCounts,Ue._multiDrawCount,Ue._multiDrawInstances);else if(We.get("WEBGL_multi_draw"))Un.renderMultiDraw(Ue._multiDrawStarts,Ue._multiDrawCounts,Ue._multiDrawCount);else{const Ft=Ue._multiDrawStarts,_n=Ue._multiDrawCounts,qt=Ue._multiDrawCount,Hi=zt?we.get(zt).bytesPerElement:1,Na=V.get(Be).currentProgram.getUniforms();for(let wi=0;wi<qt;wi++)Na.setValue(J,"_gl_DrawID",wi),Un.render(Ft[wi]/Hi,_n[wi])}else if(Ue.isInstancedMesh)Un.renderInstances($t,ei,Ue.count);else if(Ge.isInstancedBufferGeometry){const Ft=Ge._maxInstanceCount!==void 0?Ge._maxInstanceCount:1/0,_n=Math.min(Ge.instanceCount,Ft);Un.renderInstances($t,ei,_n)}else Un.render($t,ei)};function Rn(Z,Me,Ge){Z.transparent===!0&&Z.side===Co&&Z.forceSinglePass===!1?(Z.side=Ur,Z.needsUpdate=!0,ls(Z,Me,Ge),Z.side=$c,Z.needsUpdate=!0,ls(Z,Me,Ge),Z.side=Co):ls(Z,Me,Ge)}this.compile=function(Z,Me,Ge=null){Ge===null&&(Ge=Z),O=Fe.get(Ge),O.init(Me),z.push(O),Ge.traverseVisible(function(Ue){Ue.isLight&&Ue.layers.test(Me.layers)&&(O.pushLight(Ue),Ue.castShadow&&O.pushShadow(Ue))}),Z!==Ge&&Z.traverseVisible(function(Ue){Ue.isLight&&Ue.layers.test(Me.layers)&&(O.pushLight(Ue),Ue.castShadow&&O.pushShadow(Ue))}),O.setupLights();const Be=new Set;return Z.traverse(function(Ue){if(!(Ue.isMesh||Ue.isPoints||Ue.isLine||Ue.isSprite))return;const wt=Ue.material;if(wt)if(Array.isArray(wt))for(let At=0;At<wt.length;At++){const Mt=wt[At];Rn(Mt,Ge,Ue),Be.add(Mt)}else Rn(wt,Ge,Ue),Be.add(wt)}),O=z.pop(),Be},this.compileAsync=function(Z,Me,Ge=null){const Be=this.compile(Z,Me,Ge);return new Promise(Ue=>{function wt(){if(Be.forEach(function(At){V.get(At).currentProgram.isReady()&&Be.delete(At)}),Be.size===0){Ue(Z);return}setTimeout(wt,10)}We.get("KHR_parallel_shader_compile")!==null?wt():setTimeout(wt,10)})};let Jn=null;function Qn(Z){Jn&&Jn(Z)}function Si(){ai.stop()}function Ui(){ai.start()}const ai=new aR;ai.setAnimationLoop(Qn),typeof self<"u"&&ai.setContext(self),this.setAnimationLoop=function(Z){Jn=Z,Ie.setAnimationLoop(Z),Z===null?ai.stop():ai.start()},Ie.addEventListener("sessionstart",Si),Ie.addEventListener("sessionend",Ui),this.render=function(Z,Me){if(Me!==void 0&&Me.isCamera!==!0){an("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;const Ge=Ie.enabled===!0&&Ie.isPresenting===!0,Be=F!==null&&(K===null||Ge)&&F.begin(L,K);if(Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),Me.parent===null&&Me.matrixWorldAutoUpdate===!0&&Me.updateMatrixWorld(),Ie.enabled===!0&&Ie.isPresenting===!0&&(F===null||F.isCompositing()===!1)&&(Ie.cameraAutoUpdate===!0&&Ie.updateCamera(Me),Me=Ie.getCamera()),Z.isScene===!0&&Z.onBeforeRender(L,Z,Me,K),O=Fe.get(Z,z.length),O.init(Me),z.push(O),Pe.multiplyMatrices(Me.projectionMatrix,Me.matrixWorldInverse),ze.setFromProjectionMatrix(Pe,$s,Me.reversedDepth),Ke=this.localClippingEnabled,qe=Ze.init(this.clippingPlanes,Ke),U=ke.get(Z,B.length),U.init(),B.push(U),Ie.enabled===!0&&Ie.isPresenting===!0){const At=L.xr.getDepthSensingMesh();At!==null&&jn(At,Me,-1/0,L.sortObjects)}jn(Z,Me,0,L.sortObjects),U.finish(),L.sortObjects===!0&&U.sort(oe,re),Le=Ie.enabled===!1||Ie.isPresenting===!1||Ie.hasDepthSensing()===!1,Le&&ut.addToRenderList(U,Z),this.info.render.frame++,qe===!0&&Ze.beginShadows();const Ue=O.state.shadowsArray;if(rt.render(Ue,Z,Me),qe===!0&&Ze.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Be&&F.hasRenderPass())===!1){const At=U.opaque,Mt=U.transmissive;if(O.setupLights(),Me.isArrayCamera){const zt=Me.cameras;if(Mt.length>0)for(let It=0,Zt=zt.length;It<Zt;It++){const Bt=zt[It];bt(At,Mt,Z,Bt)}Le&&ut.render(Z);for(let It=0,Zt=zt.length;It<Zt;It++){const Bt=zt[It];on(U,Z,Bt,Bt.viewport)}}else Mt.length>0&&bt(At,Mt,Z,Me),Le&&ut.render(Z),on(U,Z,Me)}K!==null&&q===0&&(fe.updateMultisampleRenderTarget(K),fe.updateRenderTargetMipmap(K)),Be&&F.end(L),Z.isScene===!0&&Z.onAfterRender(L,Z,Me),ge.resetDefaultState(),$=-1,ce=null,z.pop(),z.length>0?(O=z[z.length-1],qe===!0&&Ze.setGlobalState(L.clippingPlanes,O.state.camera)):O=null,B.pop(),B.length>0?U=B[B.length-1]:U=null};function jn(Z,Me,Ge,Be){if(Z.visible===!1)return;if(Z.layers.test(Me.layers)){if(Z.isGroup)Ge=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(Me);else if(Z.isLight)O.pushLight(Z),Z.castShadow&&O.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||ze.intersectsSprite(Z)){Be&&Te.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(Pe);const At=it.update(Z),Mt=Z.material;Mt.visible&&U.push(Z,At,Mt,Ge,Te.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(!Z.frustumCulled||ze.intersectsObject(Z))){const At=it.update(Z),Mt=Z.material;if(Be&&(Z.boundingSphere!==void 0?(Z.boundingSphere===null&&Z.computeBoundingSphere(),Te.copy(Z.boundingSphere.center)):(At.boundingSphere===null&&At.computeBoundingSphere(),Te.copy(At.boundingSphere.center)),Te.applyMatrix4(Z.matrixWorld).applyMatrix4(Pe)),Array.isArray(Mt)){const zt=At.groups;for(let It=0,Zt=zt.length;It<Zt;It++){const Bt=zt[It],$t=Mt[Bt.materialIndex];$t&&$t.visible&&U.push(Z,At,$t,Ge,Te.z,Bt)}}else Mt.visible&&U.push(Z,At,Mt,Ge,Te.z,null)}}const wt=Z.children;for(let At=0,Mt=wt.length;At<Mt;At++)jn(wt[At],Me,Ge,Be)}function on(Z,Me,Ge,Be){const{opaque:Ue,transmissive:wt,transparent:At}=Z;O.setupLightsView(Ge),qe===!0&&Ze.setGlobalState(L.clippingPlanes,Ge),Be&&Ee.viewport(G.copy(Be)),Ue.length>0&&$n(Ue,Me,Ge),wt.length>0&&$n(wt,Me,Ge),At.length>0&&$n(At,Me,Ge),Ee.buffers.depth.setTest(!0),Ee.buffers.depth.setMask(!0),Ee.buffers.color.setMask(!0),Ee.setPolygonOffset(!1)}function bt(Z,Me,Ge,Be){if((Ge.isScene===!0?Ge.overrideMaterial:null)!==null)return;if(O.state.transmissionRenderTarget[Be.id]===void 0){const $t=We.has("EXT_color_buffer_half_float")||We.has("EXT_color_buffer_float");O.state.transmissionRenderTarget[Be.id]=new to(1,1,{generateMipmaps:!0,type:$t?ac:as,minFilter:Jl,samples:Se.samples,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Wn.workingColorSpace})}const wt=O.state.transmissionRenderTarget[Be.id],At=Be.viewport||G;wt.setSize(At.z*L.transmissionResolutionScale,At.w*L.transmissionResolutionScale);const Mt=L.getRenderTarget(),zt=L.getActiveCubeFace(),It=L.getActiveMipmapLevel();L.setRenderTarget(wt),L.getClearColor(ue),de=L.getClearAlpha(),de<1&&L.setClearColor(16777215,.5),L.clear(),Le&&ut.render(Ge);const Zt=L.toneMapping;L.toneMapping=No;const Bt=Be.viewport;if(Be.viewport!==void 0&&(Be.viewport=void 0),O.setupLightsView(Be),qe===!0&&Ze.setGlobalState(L.clippingPlanes,Be),$n(Z,Ge,Be),fe.updateMultisampleRenderTarget(wt),fe.updateRenderTargetMipmap(wt),We.has("WEBGL_multisampled_render_to_texture")===!1){let $t=!1;for(let Tn=0,ei=Me.length;Tn<ei;Tn++){const Pn=Me[Tn],{object:Un,geometry:Ft,material:_n,group:qt}=Pn;if(_n.side===Co&&Un.layers.test(Be.layers)){const Hi=_n.side;_n.side=Ur,_n.needsUpdate=!0,ja(Un,Ge,Be,Ft,_n,qt),_n.side=Hi,_n.needsUpdate=!0,$t=!0}}$t===!0&&(fe.updateMultisampleRenderTarget(wt),fe.updateRenderTargetMipmap(wt))}L.setRenderTarget(Mt,zt,It),L.setClearColor(ue,de),Bt!==void 0&&(Be.viewport=Bt),L.toneMapping=Zt}function $n(Z,Me,Ge){const Be=Me.isScene===!0?Me.overrideMaterial:null;for(let Ue=0,wt=Z.length;Ue<wt;Ue++){const At=Z[Ue],{object:Mt,geometry:zt,group:It}=At;let Zt=At.material;Zt.allowOverride===!0&&Be!==null&&(Zt=Be),Mt.layers.test(Ge.layers)&&ja(Mt,Me,Ge,zt,Zt,It)}}function ja(Z,Me,Ge,Be,Ue,wt){Z.onBeforeRender(L,Me,Ge,Be,Ue,wt),Z.modelViewMatrix.multiplyMatrices(Ge.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),Ue.onBeforeRender(L,Me,Ge,Be,Z,wt),Ue.transparent===!0&&Ue.side===Co&&Ue.forceSinglePass===!1?(Ue.side=Ur,Ue.needsUpdate=!0,L.renderBufferDirect(Ge,Me,Be,Ue,Z,wt),Ue.side=$c,Ue.needsUpdate=!0,L.renderBufferDirect(Ge,Me,Be,Ue,Z,wt),Ue.side=Co):L.renderBufferDirect(Ge,Me,Be,Ue,Z,wt),Z.onAfterRender(L,Me,Ge,Be,Ue,wt)}function ls(Z,Me,Ge){Me.isScene!==!0&&(Me=je);const Be=V.get(Z),Ue=O.state.lights,wt=O.state.shadowsArray,At=Ue.state.version,Mt=ht.getParameters(Z,Ue.state,wt,Me,Ge),zt=ht.getProgramCacheKey(Mt);let It=Be.programs;Be.environment=Z.isMeshStandardMaterial?Me.environment:null,Be.fog=Me.fog,Be.envMap=(Z.isMeshStandardMaterial?Ae:Ce).get(Z.envMap||Be.environment),Be.envMapRotation=Be.environment!==null&&Z.envMap===null?Me.environmentRotation:Z.envMapRotation,It===void 0&&(Z.addEventListener("dispose",Kt),It=new Map,Be.programs=It);let Zt=It.get(zt);if(Zt!==void 0){if(Be.currentProgram===Zt&&Be.lightsStateVersion===At)return zr(Z,Mt),Zt}else Mt.uniforms=ht.getUniforms(Z),Z.onBeforeCompile(Mt,L),Zt=ht.acquireProgram(Mt,zt),It.set(zt,Zt),Be.uniforms=Mt.uniforms;const Bt=Be.uniforms;return(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(Bt.clippingPlanes=Ze.uniform),zr(Z,Mt),Be.needsLights=hi(Z),Be.lightsStateVersion=At,Be.needsLights&&(Bt.ambientLightColor.value=Ue.state.ambient,Bt.lightProbe.value=Ue.state.probe,Bt.directionalLights.value=Ue.state.directional,Bt.directionalLightShadows.value=Ue.state.directionalShadow,Bt.spotLights.value=Ue.state.spot,Bt.spotLightShadows.value=Ue.state.spotShadow,Bt.rectAreaLights.value=Ue.state.rectArea,Bt.ltc_1.value=Ue.state.rectAreaLTC1,Bt.ltc_2.value=Ue.state.rectAreaLTC2,Bt.pointLights.value=Ue.state.point,Bt.pointLightShadows.value=Ue.state.pointShadow,Bt.hemisphereLights.value=Ue.state.hemi,Bt.directionalShadowMap.value=Ue.state.directionalShadowMap,Bt.directionalShadowMatrix.value=Ue.state.directionalShadowMatrix,Bt.spotShadowMap.value=Ue.state.spotShadowMap,Bt.spotLightMatrix.value=Ue.state.spotLightMatrix,Bt.spotLightMap.value=Ue.state.spotLightMap,Bt.pointShadowMap.value=Ue.state.pointShadowMap,Bt.pointShadowMatrix.value=Ue.state.pointShadowMatrix),Be.currentProgram=Zt,Be.uniformsList=null,Zt}function Os(Z){if(Z.uniformsList===null){const Me=Z.currentProgram.getUniforms();Z.uniformsList=uy.seqWithValue(Me.seq,Z.uniforms)}return Z.uniformsList}function zr(Z,Me){const Ge=V.get(Z);Ge.outputColorSpace=Me.outputColorSpace,Ge.batching=Me.batching,Ge.batchingColor=Me.batchingColor,Ge.instancing=Me.instancing,Ge.instancingColor=Me.instancingColor,Ge.instancingMorph=Me.instancingMorph,Ge.skinning=Me.skinning,Ge.morphTargets=Me.morphTargets,Ge.morphNormals=Me.morphNormals,Ge.morphColors=Me.morphColors,Ge.morphTargetsCount=Me.morphTargetsCount,Ge.numClippingPlanes=Me.numClippingPlanes,Ge.numIntersection=Me.numClipIntersection,Ge.vertexAlphas=Me.vertexAlphas,Ge.vertexTangents=Me.vertexTangents,Ge.toneMapping=Me.toneMapping}function Pr(Z,Me,Ge,Be,Ue){Me.isScene!==!0&&(Me=je),fe.resetTextureUnits();const wt=Me.fog,At=Be.isMeshStandardMaterial?Me.environment:null,Mt=K===null?L.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:cd,zt=(Be.isMeshStandardMaterial?Ae:Ce).get(Be.envMap||At),It=Be.vertexColors===!0&&!!Ge.attributes.color&&Ge.attributes.color.itemSize===4,Zt=!!Ge.attributes.tangent&&(!!Be.normalMap||Be.anisotropy>0),Bt=!!Ge.morphAttributes.position,$t=!!Ge.morphAttributes.normal,Tn=!!Ge.morphAttributes.color;let ei=No;Be.toneMapped&&(K===null||K.isXRRenderTarget===!0)&&(ei=L.toneMapping);const Pn=Ge.morphAttributes.position||Ge.morphAttributes.normal||Ge.morphAttributes.color,Un=Pn!==void 0?Pn.length:0,Ft=V.get(Be),_n=O.state.lights;if(qe===!0&&(Ke===!0||Z!==ce)){const Oi=Z===ce&&Be.id===$;Ze.setState(Be,Z,Oi)}let qt=!1;Be.version===Ft.__version?(Ft.needsLights&&Ft.lightsStateVersion!==_n.state.version||Ft.outputColorSpace!==Mt||Ue.isBatchedMesh&&Ft.batching===!1||!Ue.isBatchedMesh&&Ft.batching===!0||Ue.isBatchedMesh&&Ft.batchingColor===!0&&Ue.colorTexture===null||Ue.isBatchedMesh&&Ft.batchingColor===!1&&Ue.colorTexture!==null||Ue.isInstancedMesh&&Ft.instancing===!1||!Ue.isInstancedMesh&&Ft.instancing===!0||Ue.isSkinnedMesh&&Ft.skinning===!1||!Ue.isSkinnedMesh&&Ft.skinning===!0||Ue.isInstancedMesh&&Ft.instancingColor===!0&&Ue.instanceColor===null||Ue.isInstancedMesh&&Ft.instancingColor===!1&&Ue.instanceColor!==null||Ue.isInstancedMesh&&Ft.instancingMorph===!0&&Ue.morphTexture===null||Ue.isInstancedMesh&&Ft.instancingMorph===!1&&Ue.morphTexture!==null||Ft.envMap!==zt||Be.fog===!0&&Ft.fog!==wt||Ft.numClippingPlanes!==void 0&&(Ft.numClippingPlanes!==Ze.numPlanes||Ft.numIntersection!==Ze.numIntersection)||Ft.vertexAlphas!==It||Ft.vertexTangents!==Zt||Ft.morphTargets!==Bt||Ft.morphNormals!==$t||Ft.morphColors!==Tn||Ft.toneMapping!==ei||Ft.morphTargetsCount!==Un)&&(qt=!0):(qt=!0,Ft.__version=Be.version);let Hi=Ft.currentProgram;qt===!0&&(Hi=ls(Be,Me,Ue));let Na=!1,wi=!1,_a=!1;const Sn=Hi.getUniforms(),di=Ft.uniforms;if(Ee.useProgram(Hi.program)&&(Na=!0,wi=!0,_a=!0),Be.id!==$&&($=Be.id,wi=!0),Na||ce!==Z){Ee.buffers.depth.getReversed()&&Z.reversedDepth!==!0&&(Z._reversedDepth=!0,Z.updateProjectionMatrix()),Sn.setValue(J,"projectionMatrix",Z.projectionMatrix),Sn.setValue(J,"viewMatrix",Z.matrixWorldInverse);const Li=Sn.map.cameraPosition;Li!==void 0&&Li.setValue(J,gt.setFromMatrixPosition(Z.matrixWorld)),Se.logarithmicDepthBuffer&&Sn.setValue(J,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial)&&Sn.setValue(J,"isOrthographic",Z.isOrthographicCamera===!0),ce!==Z&&(ce=Z,wi=!0,_a=!0)}if(Ft.needsLights&&(_n.state.directionalShadowMap.length>0&&Sn.setValue(J,"directionalShadowMap",_n.state.directionalShadowMap,fe),_n.state.spotShadowMap.length>0&&Sn.setValue(J,"spotShadowMap",_n.state.spotShadowMap,fe),_n.state.pointShadowMap.length>0&&Sn.setValue(J,"pointShadowMap",_n.state.pointShadowMap,fe)),Ue.isSkinnedMesh){Sn.setOptional(J,Ue,"bindMatrix"),Sn.setOptional(J,Ue,"bindMatrixInverse");const Oi=Ue.skeleton;Oi&&(Oi.boneTexture===null&&Oi.computeBoneTexture(),Sn.setValue(J,"boneTexture",Oi.boneTexture,fe))}Ue.isBatchedMesh&&(Sn.setOptional(J,Ue,"batchingTexture"),Sn.setValue(J,"batchingTexture",Ue._matricesTexture,fe),Sn.setOptional(J,Ue,"batchingIdTexture"),Sn.setValue(J,"batchingIdTexture",Ue._indirectTexture,fe),Sn.setOptional(J,Ue,"batchingColorTexture"),Ue._colorsTexture!==null&&Sn.setValue(J,"batchingColorTexture",Ue._colorsTexture,fe));const Mi=Ge.morphAttributes;if((Mi.position!==void 0||Mi.normal!==void 0||Mi.color!==void 0)&&Ut.update(Ue,Ge,Hi),(wi||Ft.receiveShadow!==Ue.receiveShadow)&&(Ft.receiveShadow=Ue.receiveShadow,Sn.setValue(J,"receiveShadow",Ue.receiveShadow)),Be.isMeshGouraudMaterial&&Be.envMap!==null&&(di.envMap.value=zt,di.flipEnvMap.value=zt.isCubeTexture&&zt.isRenderTargetTexture===!1?-1:1),Be.isMeshStandardMaterial&&Be.envMap===null&&Me.environment!==null&&(di.envMapIntensity.value=Me.environmentIntensity),di.dfgLUT!==void 0&&(di.dfgLUT.value=J8()),wi&&(Sn.setValue(J,"toneMappingExposure",L.toneMappingExposure),Ft.needsLights&&Ha(di,_a),wt&&Be.fog===!0&&xt.refreshFogUniforms(di,wt),xt.refreshMaterialUniforms(di,Be,ne,ee,O.state.transmissionRenderTarget[Z.id]),uy.upload(J,Os(Ft),di,fe)),Be.isShaderMaterial&&Be.uniformsNeedUpdate===!0&&(uy.upload(J,Os(Ft),di,fe),Be.uniformsNeedUpdate=!1),Be.isSpriteMaterial&&Sn.setValue(J,"center",Ue.center),Sn.setValue(J,"modelViewMatrix",Ue.modelViewMatrix),Sn.setValue(J,"normalMatrix",Ue.normalMatrix),Sn.setValue(J,"modelMatrix",Ue.matrixWorld),Be.isShaderMaterial||Be.isRawShaderMaterial){const Oi=Be.uniformsGroups;for(let Li=0,fr=Oi.length;Li<fr;Li++){const ae=Oi[Li];xe.update(ae,Hi),xe.bind(ae,Hi)}}return Hi}function Ha(Z,Me){Z.ambientLightColor.needsUpdate=Me,Z.lightProbe.needsUpdate=Me,Z.directionalLights.needsUpdate=Me,Z.directionalLightShadows.needsUpdate=Me,Z.pointLights.needsUpdate=Me,Z.pointLightShadows.needsUpdate=Me,Z.spotLights.needsUpdate=Me,Z.spotLightShadows.needsUpdate=Me,Z.rectAreaLights.needsUpdate=Me,Z.hemisphereLights.needsUpdate=Me}function hi(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return Y},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return K},this.setRenderTargetTextures=function(Z,Me,Ge){const Be=V.get(Z);Be.__autoAllocateDepthBuffer=Z.resolveDepthBuffer===!1,Be.__autoAllocateDepthBuffer===!1&&(Be.__useRenderToTexture=!1),V.get(Z.texture).__webglTexture=Me,V.get(Z.depthTexture).__webglTexture=Be.__autoAllocateDepthBuffer?void 0:Ge,Be.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Z,Me){const Ge=V.get(Z);Ge.__webglFramebuffer=Me,Ge.__useDefaultFramebuffer=Me===void 0};const zn=J.createFramebuffer();this.setRenderTarget=function(Z,Me=0,Ge=0){K=Z,Y=Me,q=Ge;let Be=null,Ue=!1,wt=!1;if(Z){const Mt=V.get(Z);if(Mt.__useDefaultFramebuffer!==void 0){Ee.bindFramebuffer(J.FRAMEBUFFER,Mt.__webglFramebuffer),G.copy(Z.viewport),W.copy(Z.scissor),Q=Z.scissorTest,Ee.viewport(G),Ee.scissor(W),Ee.setScissorTest(Q),$=-1;return}else if(Mt.__webglFramebuffer===void 0)fe.setupRenderTarget(Z);else if(Mt.__hasExternalTextures)fe.rebindTextures(Z,V.get(Z.texture).__webglTexture,V.get(Z.depthTexture).__webglTexture);else if(Z.depthBuffer){const Zt=Z.depthTexture;if(Mt.__boundDepthTexture!==Zt){if(Zt!==null&&V.has(Zt)&&(Z.width!==Zt.image.width||Z.height!==Zt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");fe.setupDepthRenderbuffer(Z)}}const zt=Z.texture;(zt.isData3DTexture||zt.isDataArrayTexture||zt.isCompressedArrayTexture)&&(wt=!0);const It=V.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Array.isArray(It[Me])?Be=It[Me][Ge]:Be=It[Me],Ue=!0):Z.samples>0&&fe.useMultisampledRTT(Z)===!1?Be=V.get(Z).__webglMultisampledFramebuffer:Array.isArray(It)?Be=It[Ge]:Be=It,G.copy(Z.viewport),W.copy(Z.scissor),Q=Z.scissorTest}else G.copy(se).multiplyScalar(ne).floor(),W.copy(le).multiplyScalar(ne).floor(),Q=ve;if(Ge!==0&&(Be=zn),Ee.bindFramebuffer(J.FRAMEBUFFER,Be)&&Ee.drawBuffers(Z,Be),Ee.viewport(G),Ee.scissor(W),Ee.setScissorTest(Q),Ue){const Mt=V.get(Z.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Mt.__webglTexture,Ge)}else if(wt){const Mt=Me;for(let zt=0;zt<Z.textures.length;zt++){const It=V.get(Z.textures[zt]);J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0+zt,It.__webglTexture,Ge,Mt)}}else if(Z!==null&&Ge!==0){const Mt=V.get(Z.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Mt.__webglTexture,Ge)}$=-1},this.readRenderTargetPixels=function(Z,Me,Ge,Be,Ue,wt,At,Mt=0){if(!(Z&&Z.isWebGLRenderTarget)){an("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let zt=V.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&At!==void 0&&(zt=zt[At]),zt){Ee.bindFramebuffer(J.FRAMEBUFFER,zt);try{const It=Z.textures[Mt],Zt=It.format,Bt=It.type;if(!Se.textureFormatReadable(Zt)){an("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Se.textureTypeReadable(Bt)){an("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Me>=0&&Me<=Z.width-Be&&Ge>=0&&Ge<=Z.height-Ue&&(Z.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+Mt),J.readPixels(Me,Ge,Be,Ue,nt.convert(Zt),nt.convert(Bt),wt))}finally{const It=K!==null?V.get(K).__webglFramebuffer:null;Ee.bindFramebuffer(J.FRAMEBUFFER,It)}}},this.readRenderTargetPixelsAsync=async function(Z,Me,Ge,Be,Ue,wt,At,Mt=0){if(!(Z&&Z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let zt=V.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&At!==void 0&&(zt=zt[At]),zt)if(Me>=0&&Me<=Z.width-Be&&Ge>=0&&Ge<=Z.height-Ue){Ee.bindFramebuffer(J.FRAMEBUFFER,zt);const It=Z.textures[Mt],Zt=It.format,Bt=It.type;if(!Se.textureFormatReadable(Zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Se.textureTypeReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const $t=J.createBuffer();J.bindBuffer(J.PIXEL_PACK_BUFFER,$t),J.bufferData(J.PIXEL_PACK_BUFFER,wt.byteLength,J.STREAM_READ),Z.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+Mt),J.readPixels(Me,Ge,Be,Ue,nt.convert(Zt),nt.convert(Bt),0);const Tn=K!==null?V.get(K).__webglFramebuffer:null;Ee.bindFramebuffer(J.FRAMEBUFFER,Tn);const ei=J.fenceSync(J.SYNC_GPU_COMMANDS_COMPLETE,0);return J.flush(),await oL(J,ei,4),J.bindBuffer(J.PIXEL_PACK_BUFFER,$t),J.getBufferSubData(J.PIXEL_PACK_BUFFER,0,wt),J.deleteBuffer($t),J.deleteSync(ei),wt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Z,Me=null,Ge=0){const Be=Math.pow(2,-Ge),Ue=Math.floor(Z.image.width*Be),wt=Math.floor(Z.image.height*Be),At=Me!==null?Me.x:0,Mt=Me!==null?Me.y:0;fe.setTexture2D(Z,0),J.copyTexSubImage2D(J.TEXTURE_2D,Ge,0,0,At,Mt,Ue,wt),Ee.unbindTexture()};const ba=J.createFramebuffer(),kt=J.createFramebuffer();this.copyTextureToTexture=function(Z,Me,Ge=null,Be=null,Ue=0,wt=null){wt===null&&(Ue!==0?(Dp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),wt=Ue,Ue=0):wt=0);let At,Mt,zt,It,Zt,Bt,$t,Tn,ei;const Pn=Z.isCompressedTexture?Z.mipmaps[wt]:Z.image;if(Ge!==null)At=Ge.max.x-Ge.min.x,Mt=Ge.max.y-Ge.min.y,zt=Ge.isBox3?Ge.max.z-Ge.min.z:1,It=Ge.min.x,Zt=Ge.min.y,Bt=Ge.isBox3?Ge.min.z:0;else{const Mi=Math.pow(2,-Ue);At=Math.floor(Pn.width*Mi),Mt=Math.floor(Pn.height*Mi),Z.isDataArrayTexture?zt=Pn.depth:Z.isData3DTexture?zt=Math.floor(Pn.depth*Mi):zt=1,It=0,Zt=0,Bt=0}Be!==null?($t=Be.x,Tn=Be.y,ei=Be.z):($t=0,Tn=0,ei=0);const Un=nt.convert(Me.format),Ft=nt.convert(Me.type);let _n;Me.isData3DTexture?(fe.setTexture3D(Me,0),_n=J.TEXTURE_3D):Me.isDataArrayTexture||Me.isCompressedArrayTexture?(fe.setTexture2DArray(Me,0),_n=J.TEXTURE_2D_ARRAY):(fe.setTexture2D(Me,0),_n=J.TEXTURE_2D),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,Me.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Me.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,Me.unpackAlignment);const qt=J.getParameter(J.UNPACK_ROW_LENGTH),Hi=J.getParameter(J.UNPACK_IMAGE_HEIGHT),Na=J.getParameter(J.UNPACK_SKIP_PIXELS),wi=J.getParameter(J.UNPACK_SKIP_ROWS),_a=J.getParameter(J.UNPACK_SKIP_IMAGES);J.pixelStorei(J.UNPACK_ROW_LENGTH,Pn.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,Pn.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,It),J.pixelStorei(J.UNPACK_SKIP_ROWS,Zt),J.pixelStorei(J.UNPACK_SKIP_IMAGES,Bt);const Sn=Z.isDataArrayTexture||Z.isData3DTexture,di=Me.isDataArrayTexture||Me.isData3DTexture;if(Z.isDepthTexture){const Mi=V.get(Z),Oi=V.get(Me),Li=V.get(Mi.__renderTarget),fr=V.get(Oi.__renderTarget);Ee.bindFramebuffer(J.READ_FRAMEBUFFER,Li.__webglFramebuffer),Ee.bindFramebuffer(J.DRAW_FRAMEBUFFER,fr.__webglFramebuffer);for(let ae=0;ae<zt;ae++)Sn&&(J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,V.get(Z).__webglTexture,Ue,Bt+ae),J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,V.get(Me).__webglTexture,wt,ei+ae)),J.blitFramebuffer(It,Zt,At,Mt,$t,Tn,At,Mt,J.DEPTH_BUFFER_BIT,J.NEAREST);Ee.bindFramebuffer(J.READ_FRAMEBUFFER,null),Ee.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else if(Ue!==0||Z.isRenderTargetTexture||V.has(Z)){const Mi=V.get(Z),Oi=V.get(Me);Ee.bindFramebuffer(J.READ_FRAMEBUFFER,ba),Ee.bindFramebuffer(J.DRAW_FRAMEBUFFER,kt);for(let Li=0;Li<zt;Li++)Sn?J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Mi.__webglTexture,Ue,Bt+Li):J.framebufferTexture2D(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Mi.__webglTexture,Ue),di?J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Oi.__webglTexture,wt,ei+Li):J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Oi.__webglTexture,wt),Ue!==0?J.blitFramebuffer(It,Zt,At,Mt,$t,Tn,At,Mt,J.COLOR_BUFFER_BIT,J.NEAREST):di?J.copyTexSubImage3D(_n,wt,$t,Tn,ei+Li,It,Zt,At,Mt):J.copyTexSubImage2D(_n,wt,$t,Tn,It,Zt,At,Mt);Ee.bindFramebuffer(J.READ_FRAMEBUFFER,null),Ee.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else di?Z.isDataTexture||Z.isData3DTexture?J.texSubImage3D(_n,wt,$t,Tn,ei,At,Mt,zt,Un,Ft,Pn.data):Me.isCompressedArrayTexture?J.compressedTexSubImage3D(_n,wt,$t,Tn,ei,At,Mt,zt,Un,Pn.data):J.texSubImage3D(_n,wt,$t,Tn,ei,At,Mt,zt,Un,Ft,Pn):Z.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,wt,$t,Tn,At,Mt,Un,Ft,Pn.data):Z.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,wt,$t,Tn,Pn.width,Pn.height,Un,Pn.data):J.texSubImage2D(J.TEXTURE_2D,wt,$t,Tn,At,Mt,Un,Ft,Pn);J.pixelStorei(J.UNPACK_ROW_LENGTH,qt),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,Hi),J.pixelStorei(J.UNPACK_SKIP_PIXELS,Na),J.pixelStorei(J.UNPACK_SKIP_ROWS,wi),J.pixelStorei(J.UNPACK_SKIP_IMAGES,_a),wt===0&&Me.generateMipmaps&&J.generateMipmap(_n),Ee.unbindTexture()},this.initRenderTarget=function(Z){V.get(Z).__webglFramebuffer===void 0&&fe.setupRenderTarget(Z)},this.initTexture=function(Z){Z.isCubeTexture?fe.setTextureCube(Z,0):Z.isData3DTexture?fe.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?fe.setTexture2DArray(Z,0):fe.setTexture2D(Z,0),Ee.unbindTexture()},this.resetState=function(){Y=0,q=0,K=null,Ee.reset(),ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return $s}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Wn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Wn._getUnpackColorSpace()}}const Q8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Cb,AddEquation:nd,AddOperation:VC,AdditiveAnimationBlendMode:fw,AdditiveBlending:nc,AgXToneMapping:iw,AlphaFormat:uw,AlwaysCompare:nN,AlwaysDepth:Sy,AlwaysStencilFunc:a2,AmbientLight:qN,AnimationAction:tR,AnimationClip:M0,AnimationLoader:Zz,AnimationMixer:MP,AnimationObjectGroup:SP,AnimationUtils:Xz,ArcCurve:bN,ArrayCamera:QN,ArrowHelper:ZP,AttachedBindMode:i2,Audio:$N,AudioAnalyser:fP,AudioContext:kw,AudioListener:cP,AudioLoader:sP,AxesHelper:JP,BackSide:Ur,BasicDepthPacking:qC,BasicShadowMap:wC,BatchedMesh:pN,Bone:_w,BooleanKeyframeTrack:jf,Box2:LP,Box3:$a,Box3Helper:qP,BoxGeometry:Ff,BoxHelper:YP,BufferAttribute:Ri,BufferGeometry:xn,BufferGeometryLoader:JN,ByteType:sw,Cache:Ql,Camera:jb,CameraHelper:XP,CanvasTexture:mz,CapsuleGeometry:Kb,CatmullRomCurve3:_N,CineonToneMapping:tw,CircleGeometry:Zb,ClampToEdgeWrapping:Rs,Clock:Fw,Color:Tt,ColorKeyframeTrack:Lw,ColorManagement:Wn,CompressedArrayTexture:hz,CompressedCubeTexture:pz,CompressedTexture:qb,CompressedTextureLoader:Jz,ConeGeometry:z0,ConstantAlphaFactor:FC,ConstantColorFactor:BC,Controls:$P,CubeCamera:xw,CubeDepthTexture:xN,CubeReflectionMapping:ic,CubeRefractionMapping:ld,CubeTexture:O0,CubeTextureLoader:Qz,CubeUVReflectionMapping:Hp,CubicBezierCurve:Ew,CubicBezierCurve3:SN,CubicInterpolant:kN,CullFaceBack:e2,CullFaceFront:SC,CullFaceFrontBack:xO,CullFaceNone:_C,Curve:pl,CurvePath:MN,CustomBlending:MC,CustomToneMapping:nw,CylinderGeometry:L0,Cylindrical:OP,Data3DTexture:Fb,DataArrayTexture:kb,DataTexture:dl,DataTextureLoader:$z,DataUtils:BL,DecrementStencilOp:zO,DecrementWrapStencilOp:IO,DefaultLoadingManager:HN,DepthFormat:rc,DepthStencilFormat:rd,DepthTexture:zp,DetachedBindMode:GC,DirectionalLight:YN,DirectionalLightHelper:WP,DiscreteInterpolant:FN,DodecahedronGeometry:Jb,DoubleSide:Co,DstAlphaFactor:OC,DstColorFactor:zC,DynamicCopyUsage:QO,DynamicDrawUsage:XO,DynamicReadUsage:KO,EdgesGeometry:yN,EllipseCurve:Qb,EqualCompare:$C,EqualDepth:My,EqualStencilFunc:jO,EquirectangularReflectionMapping:c0,EquirectangularRefractionMapping:u0,Euler:io,EventDispatcher:lc,ExternalTexture:ww,ExtrudeGeometry:$b,FileLoader:eu,Float16BufferAttribute:WL,Float32BufferAttribute:Ht,FloatType:ss,Fog:Gb,FogExp2:Vb,FramebufferTexture:fz,FrontSide:$c,Frustum:Gp,FrustumArray:Yb,GLBufferAttribute:NP,GLSL1:eL,GLSL3:r2,GreaterCompare:eN,GreaterDepth:Ty,GreaterEqualCompare:Bb,GreaterEqualDepth:Ey,GreaterEqualStencilFunc:WO,GreaterStencilFunc:VO,GridHelper:VP,Group:_p,HalfFloatType:ac,HemisphereLight:GN,HemisphereLightHelper:HP,IcosahedronGeometry:e1,ImageBitmapLoader:rP,ImageLoader:E0,ImageUtils:sN,IncrementStencilOp:LO,IncrementWrapStencilOp:PO,InstancedBufferAttribute:zf,InstancedBufferGeometry:Bw,InstancedInterleavedBuffer:CP,InstancedMesh:hN,Int16BufferAttribute:VL,Int32BufferAttribute:GL,Int8BufferAttribute:FL,IntType:Rb,InterleavedBuffer:Wb,InterleavedBufferAttribute:Lf,Interpolant:B0,InterpolateDiscrete:h0,InterpolateLinear:sb,InterpolateSmooth:ly,InterpolationSamplingMode:iL,InterpolationSamplingType:nL,InvertStencilOp:BO,KeepStencilOp:yf,KeyframeTrack:Uo,LOD:dN,LatheGeometry:t1,Layers:Op,LessCompare:QC,LessDepth:wy,LessEqualCompare:Ib,LessEqualDepth:Uf,LessEqualStencilFunc:HO,LessStencilFunc:FO,Light:gd,LightProbe:ZN,Line:dd,Line3:IP,LineBasicMaterial:os,LineCurve:Tw,LineCurve3:wN,LineDashedMaterial:IN,LineLoop:mN,LineSegments:cc,LinearFilter:Fi,LinearInterpolant:Ow,LinearMipMapLinearFilter:SO,LinearMipMapNearestFilter:_O,LinearMipmapLinearFilter:Jl,LinearMipmapNearestFilter:Xg,LinearSRGBColorSpace:cd,LinearToneMapping:$2,LinearTransfer:m0,Loader:Us,LoaderUtils:d2,LoadingManager:zw,LoopOnce:WC,LoopPingPong:YC,LoopRepeat:XC,MOUSE:gO,Material:Or,MaterialLoader:u1,MathUtils:s2,Matrix2:Gw,Matrix3:vn,Matrix4:hn,MaxEquation:CC,Mesh:sa,MeshBasicMaterial:iu,MeshDepthMaterial:l1,MeshDistanceMaterial:c1,MeshLambertMaterial:zN,MeshMatcapMaterial:PN,MeshNormalMaterial:LN,MeshPhongMaterial:UN,MeshPhysicalMaterial:DN,MeshStandardMaterial:Dw,MeshToonMaterial:ON,MinEquation:AC,MirroredRepeatWrapping:f0,MixOperation:HC,MultiplyBlending:n2,MultiplyOperation:D0,NearestFilter:ya,NearestMipMapLinearFilter:bO,NearestMipMapNearestFilter:yO,NearestMipmapLinearFilter:yp,NearestMipmapNearestFilter:rw,NeutralToneMapping:aw,NeverCompare:JC,NeverDepth:_y,NeverStencilFunc:kO,NoBlending:ec,NoColorSpace:Kc,NoNormalPacking:NO,NoToneMapping:No,NormalAnimationBlendMode:Pb,NormalBlending:Af,NormalGAPacking:DO,NormalRGPacking:RO,NotEqualCompare:tN,NotEqualDepth:Ay,NotEqualStencilFunc:GO,NumberKeyframeTrack:S0,Object3D:ii,ObjectLoader:iP,ObjectSpaceNormalMap:ZC,OctahedronGeometry:P0,OneFactor:RC,OneMinusConstantAlphaFactor:jC,OneMinusConstantColorFactor:kC,OneMinusDstAlphaFactor:LC,OneMinusDstColorFactor:PC,OneMinusSrcAlphaFactor:by,OneMinusSrcColorFactor:UC,OrthographicCamera:Wp,PCFShadowMap:Sp,PCFSoftShadowMap:Wg,PMREMGenerator:p2,Path:ub,PerspectiveCamera:Qa,Plane:td,PlaneGeometry:au,PlaneHelper:KP,PointLight:XN,PointLightHelper:FP,Points:gN,PointsMaterial:Sw,PolarGridHelper:GP,PolyhedronGeometry:md,PositionalAudio:dP,PropertyBinding:ni,PropertyMixer:eR,QuadraticBezierCurve:Aw,QuadraticBezierCurve3:Cw,Quaternion:Ds,QuaternionKeyframeTrack:k0,QuaternionLinearInterpolant:jN,R11_EAC_Format:zy,RED_GREEN_RGTC2_Format:ab,RED_RGTC1_Format:nb,REVISION:Ab,RG11_EAC_Format:Iy,RGBADepthPacking:KC,RGBAFormat:Dr,RGBAIntegerFormat:zb,RGBA_ASTC_10x10_Format:Zy,RGBA_ASTC_10x5_Format:Yy,RGBA_ASTC_10x6_Format:qy,RGBA_ASTC_10x8_Format:Ky,RGBA_ASTC_12x10_Format:Jy,RGBA_ASTC_12x12_Format:Qy,RGBA_ASTC_4x4_Format:ky,RGBA_ASTC_5x4_Format:Fy,RGBA_ASTC_5x5_Format:jy,RGBA_ASTC_6x5_Format:Hy,RGBA_ASTC_6x6_Format:Vy,RGBA_ASTC_8x5_Format:Gy,RGBA_ASTC_8x6_Format:Wy,RGBA_ASTC_8x8_Format:Xy,RGBA_BPTC_Format:$y,RGBA_ETC2_EAC_Format:Ly,RGBA_PVRTC_2BPPV1_Format:Dy,RGBA_PVRTC_4BPPV1_Format:Ry,RGBA_S3TC_DXT1_Format:qg,RGBA_S3TC_DXT3_Format:Kg,RGBA_S3TC_DXT5_Format:Zg,RGBDepthPacking:AO,RGBFormat:dw,RGBIntegerFormat:wO,RGB_BPTC_SIGNED_Format:eb,RGB_BPTC_UNSIGNED_Format:tb,RGB_ETC1_Format:Uy,RGB_ETC2_Format:Oy,RGB_PVRTC_2BPPV1_Format:Ny,RGB_PVRTC_4BPPV1_Format:Cy,RGB_S3TC_DXT1_Format:Yg,RGDepthPacking:CO,RGFormat:Of,RGIntegerFormat:Lb,RawShaderMaterial:Rw,Ray:Vp,Raycaster:nR,RectAreaLight:KN,RedFormat:Ob,RedIntegerFormat:U0,ReinhardToneMapping:ew,RenderTarget:pw,RenderTarget3D:EP,RepeatWrapping:d0,ReplaceStencilOp:OO,ReverseSubtractEquation:TC,RingGeometry:n1,SIGNED_R11_EAC_Format:Py,SIGNED_RED_GREEN_RGTC2_Format:rb,SIGNED_RED_RGTC1_Format:ib,SIGNED_RG11_EAC_Format:By,SRGBColorSpace:Rr,SRGBTransfer:vi,Scene:yw,ShaderChunk:wn,ShaderLib:cl,ShaderMaterial:Do,ShadowMaterial:RN,Shape:Nf,ShapeGeometry:i1,ShapePath:QP,ShapeUtils:ul,ShortType:ow,Skeleton:Xb,SkeletonHelper:kP,SkinnedMesh:fN,Source:sd,Sphere:er,SphereGeometry:I0,Spherical:UP,SphericalHarmonics3:Iw,SplineCurve:Nw,SpotLight:WN,SpotLightHelper:BP,Sprite:uN,SpriteMaterial:bw,SrcAlphaFactor:yy,SrcAlphaSaturateFactor:IC,SrcColorFactor:DC,StaticCopyUsage:JO,StaticDrawUsage:g0,StaticReadUsage:qO,StereoCamera:oP,StreamCopyUsage:$O,StreamDrawUsage:YO,StreamReadUsage:ZO,StringKeyframeTrack:Hf,SubtractEquation:EC,SubtractiveBlending:t2,TOUCH:vO,TangentSpaceNormalMap:pd,TetrahedronGeometry:a1,Texture:ra,TextureLoader:VN,TextureUtils:aI,Timer:RP,TimestampQuery:tL,TorusGeometry:r1,TorusKnotGeometry:s1,Triangle:Cs,TriangleFanDrawMode:TO,TriangleStripDrawMode:EO,TrianglesDrawMode:MO,TubeGeometry:o1,UVMapping:Nb,Uint16BufferAttribute:mw,Uint32BufferAttribute:gw,Uint8BufferAttribute:jL,Uint8ClampedBufferAttribute:HL,Uniform:Vw,UniformsGroup:AP,UniformsLib:Lt,UniformsUtils:vw,UnsignedByteType:as,UnsignedInt101111Type:cw,UnsignedInt248Type:Np,UnsignedInt5999Type:lw,UnsignedIntType:Ro,UnsignedShort4444Type:Db,UnsignedShort5551Type:Ub,UnsignedShortType:Cp,VSMShadowMap:_f,Vector2:ft,Vector3:he,Vector4:_i,VectorKeyframeTrack:w0,VideoFrameTexture:dz,VideoTexture:vN,WebGL3DRenderTarget:CL,WebGLArrayRenderTarget:AL,WebGLCoordinateSystem:$s,WebGLCubeRenderTarget:Hb,WebGLRenderTarget:to,WebGLRenderer:uR,WebGLUtils:cR,WebGPUCoordinateSystem:Rp,WebXRController:cy,WireframeGeometry:NN,WrapAroundEnding:p0,ZeroCurvatureEnding:Sf,ZeroFactor:NC,ZeroSlopeEnding:wf,ZeroStencilOp:UO,createCanvasElement:rN,error:an,getConsoleFunction:sL,log:x0,setConsoleFunction:rL,warn:Rt,warnOnce:Dp},Symbol.toStringTag,{value:"Module"}));var lS={exports:{}},cS={},uS={exports:{}},dS={};var bA;function $8(){if(bA)return dS;bA=1;var n=jp();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,a=n.useEffect,r=n.useLayoutEffect,o=n.useDebugValue;function c(g,y){var _=y(),S=i({inst:{value:_,getSnapshot:y}}),A=S[0].inst,T=S[1];return r(function(){A.value=_,A.getSnapshot=y,d(A)&&T({inst:A})},[g,_,y]),a(function(){return d(A)&&T({inst:A}),g(function(){d(A)&&T({inst:A})})},[g]),o(_),_}function d(g){var y=g.getSnapshot;g=g.value;try{var _=y();return!t(g,_)}catch{return!0}}function f(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return dS.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,dS}var _A;function eF(){return _A||(_A=1,uS.exports=$8()),uS.exports}var SA;function tF(){if(SA)return cS;SA=1;var n=jp(),e=eF();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var i=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,r=n.useRef,o=n.useEffect,c=n.useMemo,d=n.useDebugValue;return cS.useSyncExternalStoreWithSelector=function(f,m,g,y,_){var S=r(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=c(function(){function w(B){if(!N){if(N=!0,D=B,B=y(B),_!==void 0&&A.hasValue){var z=A.value;if(_(z,B))return U=z}return U=B}if(z=U,i(D,B))return z;var F=y(B);return _!==void 0&&_(z,F)?(D=B,z):(D=B,U=F)}var N=!1,D,U,O=g===void 0?null:g;return[function(){return w(m())},O===null?void 0:function(){return w(O())}]},[m,g,y,_]);var T=a(f,S[0],S[1]);return o(function(){A.hasValue=!0,A.value=T},[T]),d(T),T},cS}var wA;function nF(){return wA||(wA=1,lS.exports=tF()),lS.exports}var iF=nF();const aF=Tb(iF),MA=n=>{let e;const t=new Set,i=(f,m)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const y=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(_=>_(e,y))}},a=()=>e,c={setState:i,getState:a,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(i,a,c);return c},rF=(n=>n?MA(n):MA),{useSyncExternalStoreWithSelector:sF}=aF,oF=n=>n;function lF(n,e=oF,t){const i=sF(n.subscribe,n.getState,n.getInitialState,e,t);return St.useDebugValue(i),i}const EA=(n,e)=>{const t=rF(n),i=(a,r=e)=>lF(t,a,r);return Object.assign(i,t),i},cF=((n,e)=>n?EA(n,e):EA),uF=n=>typeof n=="object"&&typeof n.then=="function",Ef=[];function dR(n,e,t=(i,a)=>i===a){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let a=0;a<i;a++)if(!t(n[a],e[a]))return!1;return!0}function fR(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const r of Ef)if(dR(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return i.lifespan&&i.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,i.lifespan)),r.response;if(!t)throw r.promise}const a={keys:e,equal:i.equal,remove:()=>{const r=Ef.indexOf(a);r!==-1&&Ef.splice(r,1)},promise:(uF(n)?n:n(...e)).then(r=>{a.response=r,i.lifespan&&i.lifespan>0&&(a.timeout=setTimeout(a.remove,i.lifespan))}).catch(r=>a.error=r)};if(Ef.push(a),!t)throw a.promise}const hR=(n,e,t)=>fR(n,e,!1,t),dF=(n,e,t)=>void fR(n,e,!0,t),fF=n=>{if(n===void 0||n.length===0)Ef.splice(0,Ef.length);else{const e=Ef.find(t=>dR(n,t.keys,t.equal));e&&e.remove()}};var fS={exports:{}},hS={exports:{}},pS={exports:{}},mS={};var TA;function hF(){return TA||(TA=1,(function(n){function e(G,W){var Q=G.length;G.push(W);e:for(;0<Q;){var ue=Q-1>>>1,de=G[ue];if(0<a(de,W))G[ue]=W,G[Q]=de,Q=ue;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var W=G[0],Q=G.pop();if(Q!==W){G[0]=Q;e:for(var ue=0,de=G.length,j=de>>>1;ue<j;){var ee=2*(ue+1)-1,ne=G[ee],oe=ee+1,re=G[oe];if(0>a(ne,Q))oe<de&&0>a(re,ne)?(G[ue]=re,G[oe]=Q,ue=oe):(G[ue]=ne,G[ee]=Q,ue=ee);else if(oe<de&&0>a(re,Q))G[ue]=re,G[oe]=Q,ue=oe;else break e}}return W}function a(G,W){var Q=G.sortIndex-W.sortIndex;return Q!==0?Q:G.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var d=[],f=[],m=1,g=null,y=3,_=!1,S=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var W=t(f);W!==null;){if(W.callback===null)i(f);else if(W.startTime<=G)i(f),W.sortIndex=W.expirationTime,e(d,W);else break;W=t(f)}}function U(G){if(A=!1,D(G),!S)if(t(d)!==null)S=!0,$();else{var W=t(f);W!==null&&ce(U,W.startTime-G)}}var O=!1,B=-1,z=5,F=-1;function L(){return!(n.unstable_now()-F<z)}function I(){if(O){var G=n.unstable_now();F=G;var W=!0;try{e:{S=!1,A&&(A=!1,w(B),B=-1),_=!0;var Q=y;try{t:{for(D(G),g=t(d);g!==null&&!(g.expirationTime>G&&L());){var ue=g.callback;if(typeof ue=="function"){g.callback=null,y=g.priorityLevel;var de=ue(g.expirationTime<=G);if(G=n.unstable_now(),typeof de=="function"){g.callback=de,D(G),W=!0;break t}g===t(d)&&i(d),D(G)}else i(d);g=t(d)}if(g!==null)W=!0;else{var j=t(f);j!==null&&ce(U,j.startTime-G),W=!1}}break e}finally{g=null,y=Q,_=!1}W=void 0}}finally{W?Y():O=!1}}}var Y;if(typeof N=="function")Y=function(){N(I)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,K=q.port2;q.port1.onmessage=I,Y=function(){K.postMessage(null)}}else Y=function(){T(I,0)};function $(){O||(O=!0,Y())}function ce(G,W){B=T(function(){G(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){S||_||(S=!0,$())},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(G){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var Q=y;y=W;try{return G()}finally{y=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=y;y=G;try{return W()}finally{y=Q}},n.unstable_scheduleCallback=function(G,W,Q){var ue=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ue+Q:ue):Q=ue,G){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Q+de,G={id:m++,callback:W,priorityLevel:G,startTime:Q,expirationTime:de,sortIndex:-1},Q>ue?(G.sortIndex=Q,e(f,G),t(d)===null&&G===t(f)&&(A?(w(B),B=-1):A=!0,ce(U,Q-ue))):(G.sortIndex=de,e(d,G),S||_||(S=!0,$())),G},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(G){var W=y;return function(){var Q=y;y=W;try{return G.apply(this,arguments)}finally{y=Q}}}})(mS)),mS}var AA;function pR(){return AA||(AA=1,pS.exports=hF()),pS.exports}var CA;function pF(){return CA||(CA=1,(function(n){n.exports=function(e){function t(u,h,b,E){return new ym(u,h,b,E)}function i(){}function a(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)h+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return u===null||typeof u!="object"?null:(u=Tm&&u[Tm]||u["@@iterator"],typeof u=="function"?u:null)}function o(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Ec?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case wu:return"Fragment";case ks:return"Portal";case Em:return"Profiler";case Mm:return"StrictMode";case oh:return"Suspense";case Rl:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case po:return(u.displayName||"Context")+".Provider";case Nl:return(u._context.displayName||"Context")+".Consumer";case Mu:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Rd:return h=u.displayName||null,h!==null?h:o(u.type)||"Memo";case Fs:h=u._payload,u=u._init;try{return o(u(h))}catch{}}return null}function c(u){if(lh===void 0)try{throw Error()}catch(b){var h=b.stack.trim().match(/\n( *(at )?)/);lh=h&&h[1]||"",Am=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lh+u+Am}function d(u,h){if(!u||Dl)return"";Dl=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(h){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(pn){var Pt=pn}Reflect.construct(u,[],Ot)}else{try{Ot.call()}catch(pn){Pt=pn}u.call(Ot.prototype)}}else{try{throw Error()}catch(pn){Pt=pn}(Ot=u())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(pn){if(pn&&Pt&&typeof pn.stack=="string")return[pn.stack,Pt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=E.DetermineComponentFrameRoot(),ie=P[0],ye=P[1];if(ie&&ye){var Oe=ie.split(`
`),lt=ye.split(`
`);for(R=E=0;E<Oe.length&&!Oe[E].includes("DetermineComponentFrameRoot");)E++;for(;R<lt.length&&!lt[R].includes("DetermineComponentFrameRoot");)R++;if(E===Oe.length||R===lt.length)for(E=Oe.length-1,R=lt.length-1;1<=E&&0<=R&&Oe[E]!==lt[R];)R--;for(;1<=E&&0<=R;E--,R--)if(Oe[E]!==lt[R]){if(E!==1||R!==1)do if(E--,R--,0>R||Oe[E]!==lt[R]){var _t=`
`+Oe[E].replace(" at new "," at ");return u.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",u.displayName)),_t}while(1<=E&&0<=R);break}}}finally{Dl=!1,Error.prepareStackTrace=b}return(b=u?u.displayName||u.name:"")?c(b):""}function f(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=d(u.type,!1),u;case 11:return u=d(u.type.render,!1),u;case 1:return u=d(u.type,!0),u;default:return""}}function m(u){try{var h="";do h+=f(u),u=u.return;while(u);return h}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function g(u){var h=u,b=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(b=h.return),u=h.return;while(u)}return h.tag===3?b:null}function y(u){if(g(u)!==u)throw Error(a(188))}function _(u){var h=u.alternate;if(!h){if(h=g(u),h===null)throw Error(a(188));return h!==u?null:u}for(var b=u,E=h;;){var R=b.return;if(R===null)break;var P=R.alternate;if(P===null){if(E=R.return,E!==null){b=E;continue}break}if(R.child===P.child){for(P=R.child;P;){if(P===b)return y(R),u;if(P===E)return y(R),h;P=P.sibling}throw Error(a(188))}if(b.return!==E.return)b=R,E=P;else{for(var ie=!1,ye=R.child;ye;){if(ye===b){ie=!0,b=R,E=P;break}if(ye===E){ie=!0,E=R,b=P;break}ye=ye.sibling}if(!ie){for(ye=P.child;ye;){if(ye===b){ie=!0,b=P,E=R;break}if(ye===E){ie=!0,E=P,b=R;break}ye=ye.sibling}if(!ie)throw Error(a(189))}}if(b.alternate!==E)throw Error(a(190))}if(b.tag!==3)throw Error(a(188));return b.stateNode.current===b?u:h}function S(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=S(u),h!==null)return h;u=u.sibling}return null}function A(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(h=A(u),h!==null))return h;u=u.sibling}return null}function T(u){return{current:u}}function w(u){0>Zo||(u.current=kd[Zo],kd[Zo]=null,Zo--)}function N(u,h){Zo++,kd[Zo]=u.current,u.current=h}function D(u){return u>>>=0,u===0?32:31-(Fd(u)/Dv|0)|0}function U(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function O(u,h){var b=u.pendingLanes;if(b===0)return 0;var E=0,R=u.suspendedLanes,P=u.pingedLanes,ie=u.warmLanes;u=u.finishedLanes!==0;var ye=b&134217727;return ye!==0?(b=ye&~R,b!==0?E=U(b):(P&=ye,P!==0?E=U(P):u||(ie=ye&~ie,ie!==0&&(E=U(ie))))):(ye=b&~R,ye!==0?E=U(ye):P!==0?E=U(P):u||(ie=b&~ie,ie!==0&&(E=U(ie)))),E===0?0:h!==0&&h!==E&&(h&R)===0&&(R=E&-E,ie=h&-h,R>=ie||R===32&&(ie&4194176)!==0)?h:E}function B(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function z(u,h){switch(u){case 1:case 2:case 4:case 8:return h+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(){var u=Cu;return Cu<<=1,(Cu&4194176)===0&&(Cu=128),u}function L(){var u=jd;return jd<<=1,(jd&62914560)===0&&(jd=4194304),u}function I(u){for(var h=[],b=0;31>b;b++)h.push(u);return h}function Y(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function q(u,h,b,E,R,P){var ie=u.pendingLanes;u.pendingLanes=b,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=b,u.entangledLanes&=b,u.errorRecoveryDisabledLanes&=b,u.shellSuspendCounter=0;var ye=u.entanglements,Oe=u.expirationTimes,lt=u.hiddenUpdates;for(b=ie&~b;0<b;){var _t=31-xr(b),Ot=1<<_t;ye[_t]=0,Oe[_t]=-1;var Pt=lt[_t];if(Pt!==null)for(lt[_t]=null,_t=0;_t<Pt.length;_t++){var pn=Pt[_t];pn!==null&&(pn.lane&=-536870913)}b&=~Ot}E!==0&&K(u,E,0),P!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=P&~(ie&~h))}function K(u,h,b){u.pendingLanes|=h,u.suspendedLanes&=~h;var E=31-xr(h);u.entangledLanes|=h,u.entanglements[E]=u.entanglements[E]|1073741824|b&4194218}function $(u,h){var b=u.entangledLanes|=h;for(u=u.entanglements;b;){var E=31-xr(b),R=1<<E;R&h|u[E]&h&&(u[E]|=h),b&=~R}}function ce(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function G(u){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(Ru,u,void 0,(u.current.flags&128)===128)}catch{}}function W(u){if(typeof zv=="function"&&ag(u),yr&&typeof yr.setStrictMode=="function")try{yr.setStrictMode(Ru,u)}catch{}}function Q(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}function ue(u,h){if(typeof u=="object"&&u!==null){var b=Eh.get(u);return b!==void 0?b:(h={value:u,source:h,stack:m(h)},Eh.set(u,h),h)}return{value:u,source:h,stack:m(h)}}function de(u,h){Bi[qi++]=Gd,Bi[qi++]=Vd,Vd=u,Gd=h}function j(u,h,b){Gr[Wr++]=yo,Gr[Wr++]=ps,Gr[Wr++]=js,js=u;var E=yo;u=ps;var R=32-xr(E)-1;E&=~(1<<R),b+=1;var P=32-xr(h)+R;if(30<P){var ie=R-R%5;P=(E&(1<<ie)-1).toString(32),E>>=ie,R-=ie,yo=1<<32-xr(h)+R|b<<R|E,ps=P+u}else yo=1<<P|b<<R|E,ps=u}function ee(u){u.return!==null&&(de(u,1),j(u,1,0))}function ne(u){for(;u===Vd;)Vd=Bi[--qi],Bi[qi]=null,Gd=Bi[--qi],Bi[qi]=null;for(;u===js;)js=Gr[--Wr],Gr[Wr]=null,ps=Gr[--Wr],Gr[Wr]=null,yo=Gr[--Wr],Gr[Wr]=null}function oe(u,h){N(Hs,h),N(Wd,u),N(Aa,null),u=Tc(h),w(Aa),N(Aa,u)}function re(){w(Aa),w(Wd),w(Hs)}function se(u){u.memoizedState!==null&&N(Du,u);var h=Aa.current,b=uv(h,u.type);h!==b&&(N(Wd,u),N(Aa,b))}function le(u){Wd.current===u&&(w(Aa),w(Wd)),Du.current===u&&(w(Du),go?cn._currentValue=vr:cn._currentValue2=vr)}function ve(u){var h=Error(a(418,""));throw gt(ue(h,u)),Xd}function ze(u,h){if(!sr)throw Error(a(175));L1(u.stateNode,u.type,u.memoizedProps,h,u)||ve(u)}function qe(u){for(Ya=u.return;Ya;)switch(Ya.tag){case 3:case 27:ms=!0;return;case 5:case 13:ms=!1;return;default:Ya=Ya.return}}function Ke(u){if(!sr||u!==Ya)return!1;if(!Yn)return qe(u),Yn=!0,!1;var h=!1;if(La?u.tag!==3&&u.tag!==27&&(u.tag!==5||Tv(u.type)&&!Ll(u.type,u.memoizedProps))&&(h=!0):u.tag!==3&&(u.tag!==5||Tv(u.type)&&!Ll(u.type,u.memoizedProps))&&(h=!0),h&&Pa&&ve(u),qe(u),u.tag===13){if(!sr)throw Error(a(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));Pa=Mv(u)}else Pa=Ya?Wm(u.stateNode):null;return!0}function Pe(){sr&&(Pa=Ya=null,Yn=!1)}function gt(u){Xr===null?Xr=[u]:Xr.push(u)}function Te(){for(var u=Pl,h=Uu=Pl=0;h<u;){var b=Yr[h];Yr[h++]=null;var E=Yr[h];Yr[h++]=null;var R=Yr[h];Yr[h++]=null;var P=Yr[h];if(Yr[h++]=null,E!==null&&R!==null){var ie=E.pending;ie===null?R.next=R:(R.next=ie.next,ie.next=R),E.pending=R}P!==0&&J(b,R,P)}}function je(u,h,b,E){Yr[Pl++]=u,Yr[Pl++]=h,Yr[Pl++]=b,Yr[Pl++]=E,Uu|=E,u.lanes|=E,u=u.alternate,u!==null&&(u.lanes|=E)}function Le(u,h,b,E){return je(u,h,b,E),et(u)}function $e(u,h){return je(u,null,null,h),et(u)}function J(u,h,b){u.lanes|=b;var E=u.alternate;E!==null&&(E.lanes|=b);for(var R=!1,P=u.return;P!==null;)P.childLanes|=b,E=P.alternate,E!==null&&(E.childLanes|=b),P.tag===22&&(u=P.stateNode,u===null||u._visibility&1||(R=!0)),u=P,P=P.return;R&&h!==null&&u.tag===3&&(P=u.stateNode,R=31-xr(b),P=P.hiddenUpdates,u=P[R],u===null?P[R]=[h]:u.push(h),h.lane=b|536870912)}function et(u){if(50<Ic)throw Ic=0,cr=null,Error(a(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}function We(u){u!==Rc&&u.next===null&&(Rc===null?Ou=Rc=u:Rc=Rc.next=u),qd=!0,Yd||(Yd=!0,Ce(Ee))}function Se(u,h){if(!Vs&&qd){Vs=!0;do for(var b=!1,E=Ou;E!==null;){if(u!==0){var R=E.pendingLanes;if(R===0)var P=0;else{var ie=E.suspendedLanes,ye=E.pingedLanes;P=(1<<31-xr(42|u)+1)-1,P&=R&~(ie&~ye),P=P&201326677?P&201326677|1:P?P|2:0}P!==0&&(b=!0,fe(E,P))}else P=An,P=O(E,E===Dn?P:0),(P&3)===0||B(E,P)||(b=!0,fe(E,P));E=E.next}while(b);Vs=!1}}function Ee(){qd=Yd=!1;var u=0;Il!==0&&(zl()&&(u=Il),Il=0);for(var h=za(),b=null,E=Ou;E!==null;){var R=E.next,P=X(E,h);P===0?(E.next=null,b===null?Ou=R:b.next=R,R===null&&(Rc=b)):(b=E,(u!==0||(P&3)!==0)&&(qd=!0)),E=R}Se(u)}function X(u,h){for(var b=u.suspendedLanes,E=u.pingedLanes,R=u.expirationTimes,P=u.pendingLanes&-62914561;0<P;){var ie=31-xr(P),ye=1<<ie,Oe=R[ie];Oe===-1?((ye&b)===0||(ye&E)!==0)&&(R[ie]=z(ye,h)):Oe<=h&&(u.expiredLanes|=ye),P&=~ye}if(h=Dn,b=An,b=O(u,u===h?b:0),E=u.callbackNode,b===0||u===h&&gi===2||u.cancelPendingCommit!==null)return E!==null&&E!==null&&Hd(E),u.callbackNode=null,u.callbackPriority=0;if((b&3)===0||B(u,b)){if(h=b&-b,h===u.callbackPriority)return h;switch(E!==null&&Hd(E),ce(b)){case 2:case 8:b=Lv;break;case 32:b=wh;break;case 268435456:b=Mh;break;default:b=wh}return E=V.bind(null,u),b=Nu(b,E),u.callbackPriority=h,u.callbackNode=b,h}return E!==null&&E!==null&&Hd(E),u.callbackPriority=2,u.callbackNode=null,2}function V(u,h){var b=u.callbackNode;if(Ea()&&u.callbackNode!==b)return null;var E=An;return E=O(u,u===Dn?E:0),E===0?null:(Ed(u,E,h),X(u,za()),u.callbackNode!=null&&u.callbackNode===b?V.bind(null,u):null)}function fe(u,h){if(Ea())return null;Ed(u,h,!0)}function Ce(u){ca?fh(function(){(nn&6)!==0?Nu(ig,u):u()}):Nu(ig,u)}function Ae(){return Il===0&&(Il=F()),Il}function we(u,h){if(Kd===null){var b=Kd=[];Th=0,br=Ae(),Bl={status:"pending",value:void 0,then:function(E){b.push(E)}}}return Th++,h.then(ot,ot),h}function ot(){if(--Th===0&&Kd!==null){Bl!==null&&(Bl.status="fulfilled");var u=Kd;Kd=null,br=0,Bl=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function it(u,h){var b=[],E={status:"pending",value:null,reason:null,then:function(R){b.push(R)}};return u.then(function(){E.status="fulfilled",E.value=h;for(var R=0;R<b.length;R++)(0,b[R])(h)},function(R){for(E.status="rejected",E.reason=R,R=0;R<b.length;R++)(0,b[R])(void 0)}),E}function ht(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xt(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function ke(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Fe(u,h,b){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(nn&2)!==0){var R=E.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),E.pending=h,h=et(u),J(u,null,b),h}return je(u,E,h,b),et(u)}function Ze(u,h,b){if(h=h.updateQueue,h!==null&&(h=h.shared,(b&4194176)!==0)){var E=h.lanes;E&=u.pendingLanes,b|=E,h.lanes=b,$(u,b)}}function rt(u,h){var b=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var R=null,P=null;if(b=b.firstBaseUpdate,b!==null){do{var ie={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};P===null?R=P=ie:P=P.next=ie,b=b.next}while(b!==null);P===null?R=P=h:P=P.next=h}else R=P=h;b={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:P,shared:E.shared,callbacks:E.callbacks},u.updateQueue=b;return}u=b.lastBaseUpdate,u===null?b.firstBaseUpdate=h:u.next=h,b.lastBaseUpdate=h}function ut(){if(Lu){var u=Bl;if(u!==null)throw u}}function Ut(u,h,b,E){Lu=!1;var R=u.updateQueue;Jo=!1;var P=R.firstBaseUpdate,ie=R.lastBaseUpdate,ye=R.shared.pending;if(ye!==null){R.shared.pending=null;var Oe=ye,lt=Oe.next;Oe.next=null,ie===null?P=lt:ie.next=lt,ie=Oe;var _t=u.alternate;_t!==null&&(_t=_t.updateQueue,ye=_t.lastBaseUpdate,ye!==ie&&(ye===null?_t.firstBaseUpdate=lt:ye.next=lt,_t.lastBaseUpdate=Oe))}if(P!==null){var Ot=R.baseState;ie=0,_t=lt=Oe=null,ye=P;do{var Pt=ye.lane&-536870913,pn=Pt!==ye.lane;if(pn?(An&Pt)===Pt:(E&Pt)===Pt){Pt!==0&&Pt===br&&(Lu=!0),_t!==null&&(_t=_t.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var Mr=u,$d=ye;Pt=h;var Bc=b;switch($d.tag){case 1:if(Mr=$d.payload,typeof Mr=="function"){Ot=Mr.call(Bc,Ot,Pt);break e}Ot=Mr;break e;case 3:Mr.flags=Mr.flags&-65537|128;case 0:if(Mr=$d.payload,Pt=typeof Mr=="function"?Mr.call(Bc,Ot,Pt):Mr,Pt==null)break e;Ot=Mc({},Ot,Pt);break e;case 2:Jo=!0}}Pt=ye.callback,Pt!==null&&(u.flags|=64,pn&&(u.flags|=8192),pn=R.callbacks,pn===null?R.callbacks=[Pt]:pn.push(Pt))}else pn={lane:Pt,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},_t===null?(lt=_t=pn,Oe=Ot):_t=_t.next=pn,ie|=Pt;if(ye=ye.next,ye===null){if(ye=R.shared.pending,ye===null)break;pn=ye,ye=pn.next,pn.next=null,R.lastBaseUpdate=pn,R.shared.pending=null}}while(!0);_t===null&&(Oe=Ot),R.baseState=Oe,R.firstBaseUpdate=lt,R.lastBaseUpdate=_t,P===null&&(R.shared.lanes=0),Jr|=ie,u.lanes=ie,u.memoizedState=Ot}}function me(u,h){if(typeof u!="function")throw Error(a(191,u));u.call(h)}function tt(u,h){var b=u.callbacks;if(b!==null)for(u.callbacks=null,u=0;u<b.length;u++)me(b[u],h)}function nt(u,h){if(Vr(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var b=Object.keys(u),E=Object.keys(h);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var R=b[E];if(!Zd.call(h,R)||!Vr(u[R],h[R]))return!1}return!0}function ge(u){return u=u.status,u==="fulfilled"||u==="rejected"}function xe(){}function pe(u,h,b){switch(b=u[b],b===void 0?u.push(h):b!==h&&(h.then(xe,xe),h=b),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===fi?Error(a(483)):u;default:if(typeof h.status=="string")h.then(xe,xe);else{if(u=Dn,u!==null&&100<u.shellSuspendCounter)throw Error(a(482));u=h,u.status="pending",u.then(function(E){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=E}},function(E){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=E}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===fi?Error(a(483)):u}throw Dc=h,fi}}function Ie(){if(Dc===null)throw Error(a(459));var u=Dc;return Dc=null,u}function pt(u){var h=gs;return gs+=1,bo===null&&(bo=[]),pe(bo,u,h)}function yt(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function Nt(u,h){throw h.$$typeof===wm?Error(a(525)):(u=Object.prototype.toString.call(h),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function Kt(u){var h=u._init;return h(u._payload)}function dn(u){function h(Xe,Ne){if(u){var Je=Xe.deletions;Je===null?(Xe.deletions=[Ne],Xe.flags|=16):Je.push(Ne)}}function b(Xe,Ne){if(!u)return null;for(;Ne!==null;)h(Xe,Ne),Ne=Ne.sibling;return null}function E(Xe){for(var Ne=new Map;Xe!==null;)Xe.key!==null?Ne.set(Xe.key,Xe):Ne.set(Xe.index,Xe),Xe=Xe.sibling;return Ne}function R(Xe,Ne){return Xe=Wa(Xe,Ne),Xe.index=0,Xe.sibling=null,Xe}function P(Xe,Ne,Je){return Xe.index=Je,u?(Je=Xe.alternate,Je!==null?(Je=Je.index,Je<Ne?(Xe.flags|=33554434,Ne):Je):(Xe.flags|=33554434,Ne)):(Xe.flags|=1048576,Ne)}function ie(Xe){return u&&Xe.alternate===null&&(Xe.flags|=33554434),Xe}function ye(Xe,Ne,Je,vt){return Ne===null||Ne.tag!==6?(Ne=Cl(Je,Xe.mode,vt),Ne.return=Xe,Ne):(Ne=R(Ne,Je),Ne.return=Xe,Ne)}function Oe(Xe,Ne,Je,vt){var Qt=Je.type;return Qt===wu?_t(Xe,Ne,Je.props.children,vt,Je.key):Ne!==null&&(Ne.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===Fs&&Kt(Qt)===Ne.type)?(Ne=R(Ne,Je.props),yt(Ne,Je),Ne.return=Xe,Ne):(Ne=fs(Je.type,Je.key,Je.props,null,Xe.mode,vt),yt(Ne,Je),Ne.return=Xe,Ne)}function lt(Xe,Ne,Je,vt){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==Je.containerInfo||Ne.stateNode.implementation!==Je.implementation?(Ne=Su(Je,Xe.mode,vt),Ne.return=Xe,Ne):(Ne=R(Ne,Je.children||[]),Ne.return=Xe,Ne)}function _t(Xe,Ne,Je,vt,Qt){return Ne===null||Ne.tag!==7?(Ne=Wo(Je,Xe.mode,vt,Qt),Ne.return=Xe,Ne):(Ne=R(Ne,Je),Ne.return=Xe,Ne)}function Ot(Xe,Ne,Je){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ne=Cl(""+Ne,Xe.mode,Je),Ne.return=Xe,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case Xo:return Je=fs(Ne.type,Ne.key,Ne.props,null,Xe.mode,Je),yt(Je,Ne),Je.return=Xe,Je;case ks:return Ne=Su(Ne,Xe.mode,Je),Ne.return=Xe,Ne;case Fs:var vt=Ne._init;return Ne=vt(Ne._payload),Ot(Xe,Ne,Je)}if(Ul(Ne)||r(Ne))return Ne=Wo(Ne,Xe.mode,Je,null),Ne.return=Xe,Ne;if(typeof Ne.then=="function")return Ot(Xe,pt(Ne),Je);if(Ne.$$typeof===po)return Ot(Xe,bd(Xe,Ne),Je);Nt(Xe,Ne)}return null}function Pt(Xe,Ne,Je,vt){var Qt=Ne!==null?Ne.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Qt!==null?null:ye(Xe,Ne,""+Je,vt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case Xo:return Je.key===Qt?Oe(Xe,Ne,Je,vt):null;case ks:return Je.key===Qt?lt(Xe,Ne,Je,vt):null;case Fs:return Qt=Je._init,Je=Qt(Je._payload),Pt(Xe,Ne,Je,vt)}if(Ul(Je)||r(Je))return Qt!==null?null:_t(Xe,Ne,Je,vt,null);if(typeof Je.then=="function")return Pt(Xe,Ne,pt(Je),vt);if(Je.$$typeof===po)return Pt(Xe,Ne,bd(Xe,Je),vt);Nt(Xe,Je)}return null}function pn(Xe,Ne,Je,vt,Qt){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return Xe=Xe.get(Je)||null,ye(Ne,Xe,""+vt,Qt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case Xo:return Xe=Xe.get(vt.key===null?Je:vt.key)||null,Oe(Ne,Xe,vt,Qt);case ks:return Xe=Xe.get(vt.key===null?Je:vt.key)||null,lt(Ne,Xe,vt,Qt);case Fs:var Ai=vt._init;return vt=Ai(vt._payload),pn(Xe,Ne,Je,vt,Qt)}if(Ul(vt)||r(vt))return Xe=Xe.get(Je)||null,_t(Ne,Xe,vt,Qt,null);if(typeof vt.then=="function")return pn(Xe,Ne,Je,pt(vt),Qt);if(vt.$$typeof===po)return pn(Xe,Ne,Je,bd(Ne,vt),Qt);Nt(Ne,vt)}return null}function Mr(Xe,Ne,Je,vt){for(var Qt=null,Ai=null,un=Ne,Kn=Ne=0,ga=null;un!==null&&Kn<Je.length;Kn++){un.index>Kn?(ga=un,un=null):ga=un.sibling;var Zn=Pt(Xe,un,Je[Kn],vt);if(Zn===null){un===null&&(un=ga);break}u&&un&&Zn.alternate===null&&h(Xe,un),Ne=P(Zn,Ne,Kn),Ai===null?Qt=Zn:Ai.sibling=Zn,Ai=Zn,un=ga}if(Kn===Je.length)return b(Xe,un),Yn&&de(Xe,Kn),Qt;if(un===null){for(;Kn<Je.length;Kn++)un=Ot(Xe,Je[Kn],vt),un!==null&&(Ne=P(un,Ne,Kn),Ai===null?Qt=un:Ai.sibling=un,Ai=un);return Yn&&de(Xe,Kn),Qt}for(un=E(un);Kn<Je.length;Kn++)ga=pn(un,Xe,Kn,Je[Kn],vt),ga!==null&&(u&&ga.alternate!==null&&un.delete(ga.key===null?Kn:ga.key),Ne=P(ga,Ne,Kn),Ai===null?Qt=ga:Ai.sibling=ga,Ai=ga);return u&&un.forEach(function(al){return h(Xe,al)}),Yn&&de(Xe,Kn),Qt}function $d(Xe,Ne,Je,vt){if(Je==null)throw Error(a(151));for(var Qt=null,Ai=null,un=Ne,Kn=Ne=0,ga=null,Zn=Je.next();un!==null&&!Zn.done;Kn++,Zn=Je.next()){un.index>Kn?(ga=un,un=null):ga=un.sibling;var al=Pt(Xe,un,Zn.value,vt);if(al===null){un===null&&(un=ga);break}u&&un&&al.alternate===null&&h(Xe,un),Ne=P(al,Ne,Kn),Ai===null?Qt=al:Ai.sibling=al,Ai=al,un=ga}if(Zn.done)return b(Xe,un),Yn&&de(Xe,Kn),Qt;if(un===null){for(;!Zn.done;Kn++,Zn=Je.next())Zn=Ot(Xe,Zn.value,vt),Zn!==null&&(Ne=P(Zn,Ne,Kn),Ai===null?Qt=Zn:Ai.sibling=Zn,Ai=Zn);return Yn&&de(Xe,Kn),Qt}for(un=E(un);!Zn.done;Kn++,Zn=Je.next())Zn=pn(un,Xe,Kn,Zn.value,vt),Zn!==null&&(u&&Zn.alternate!==null&&un.delete(Zn.key===null?Kn:Zn.key),Ne=P(Zn,Ne,Kn),Ai===null?Qt=Zn:Ai.sibling=Zn,Ai=Zn);return u&&un.forEach(function(zh){return h(Xe,zh)}),Yn&&de(Xe,Kn),Qt}function Bc(Xe,Ne,Je,vt){if(typeof Je=="object"&&Je!==null&&Je.type===wu&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case Xo:e:{for(var Qt=Je.key;Ne!==null;){if(Ne.key===Qt){if(Qt=Je.type,Qt===wu){if(Ne.tag===7){b(Xe,Ne.sibling),vt=R(Ne,Je.props.children),vt.return=Xe,Xe=vt;break e}}else if(Ne.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===Fs&&Kt(Qt)===Ne.type){b(Xe,Ne.sibling),vt=R(Ne,Je.props),yt(vt,Je),vt.return=Xe,Xe=vt;break e}b(Xe,Ne);break}else h(Xe,Ne);Ne=Ne.sibling}Je.type===wu?(vt=Wo(Je.props.children,Xe.mode,vt,Je.key),vt.return=Xe,Xe=vt):(vt=fs(Je.type,Je.key,Je.props,null,Xe.mode,vt),yt(vt,Je),vt.return=Xe,Xe=vt)}return ie(Xe);case ks:e:{for(Qt=Je.key;Ne!==null;){if(Ne.key===Qt)if(Ne.tag===4&&Ne.stateNode.containerInfo===Je.containerInfo&&Ne.stateNode.implementation===Je.implementation){b(Xe,Ne.sibling),vt=R(Ne,Je.children||[]),vt.return=Xe,Xe=vt;break e}else{b(Xe,Ne);break}else h(Xe,Ne);Ne=Ne.sibling}vt=Su(Je,Xe.mode,vt),vt.return=Xe,Xe=vt}return ie(Xe);case Fs:return Qt=Je._init,Je=Qt(Je._payload),Bc(Xe,Ne,Je,vt)}if(Ul(Je))return Mr(Xe,Ne,Je,vt);if(r(Je)){if(Qt=r(Je),typeof Qt!="function")throw Error(a(150));return Je=Qt.call(Je),$d(Xe,Ne,Je,vt)}if(typeof Je.then=="function")return Bc(Xe,Ne,pt(Je),vt);if(Je.$$typeof===po)return Bc(Xe,Ne,bd(Xe,Je),vt);Nt(Xe,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,Ne!==null&&Ne.tag===6?(b(Xe,Ne.sibling),vt=R(Ne,Je),vt.return=Xe,Xe=vt):(b(Xe,Ne),vt=Cl(Je,Xe.mode,vt),vt.return=Xe,Xe=vt),ie(Xe)):b(Xe,Ne)}return function(Xe,Ne,Je,vt){try{gs=0;var Qt=Bc(Xe,Ne,Je,vt);return bo=null,Qt}catch(un){if(un===fi)throw un;var Ai=t(29,un,null,Xe.mode);return Ai.lanes=vt,Ai.return=Xe,Ai}finally{}}}function Xn(u,h){u=Gs,N(qr,u),N(_o,h),Gs=u|h.baseLanes}function Rn(){N(qr,Gs),N(_o,_o.current)}function Jn(){Gs=qr.current,w(_o),w(qr)}function Qn(u){var h=u.alternate;N(ua,ua.current&1),N(Kr,u),vs===null&&(h===null||_o.current!==null||h.memoizedState!==null)&&(vs=u)}function Si(u){if(u.tag===22){if(N(ua,ua.current),N(Kr,u),vs===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(vs=u)}}else Ui()}function Ui(){N(ua,ua.current),N(Kr,Kr.current)}function ai(u){w(Kr),vs===u&&(vs=null),w(ua)}function jn(u){for(var h=u;h!==null;){if(h.tag===13){var b=h.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||vh(b)||Bd(b)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function on(){throw Error(a(321))}function bt(u,h){if(h===null)return!1;for(var b=0;b<h.length&&b<u.length;b++)if(!Vr(u[b],h[b]))return!1;return!0}function $n(u,h,b,E,R,P){return So=P,yn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,sn.H=u===null||u.memoizedState===null?da:qa,Qo=!1,P=b(E,R),Qo=!1,ki&&(P=ls(h,b,E,R)),ja(u),P}function ja(u){sn.H=qn;var h=ti!==null&&ti.next!==null;if(So=0,ea=ti=yn=null,xs=!1,Ki=0,zu=null,h)throw Error(a(300));u===null||ta||(u=u.dependencies,u!==null&&vl(u)&&(ta=!0))}function ls(u,h,b,E){yn=u;var R=0;do{if(ki&&(zu=null),Ki=0,ki=!1,25<=R)throw Error(a(301));if(R+=1,ea=ti=null,u.updateQueue!=null){var P=u.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}sn.H=Fl,P=h(b,E)}while(ki);return P}function Os(){var u=sn.H,h=u.useState()[0];return h=typeof h.then=="function"?ba(h):h,u=u.useState()[0],(ti!==null?ti.memoizedState:null)!==u&&(yn.flags|=1024),h}function zr(){var u=Jd!==0;return Jd=0,u}function Pr(u,h,b){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~b}function Ha(u){if(xs){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}xs=!1}So=0,ea=ti=yn=null,ki=!1,Ki=Jd=0,zu=null}function hi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ea===null?yn.memoizedState=ea=u:ea=ea.next=u,ea}function zn(){if(ti===null){var u=yn.alternate;u=u!==null?u.memoizedState:null}else u=ti.next;var h=ea===null?yn.memoizedState:ea.next;if(h!==null)ea=h,ti=u;else{if(u===null)throw yn.alternate===null?Error(a(467)):Error(a(310));ti=u,u={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},ea===null?yn.memoizedState=ea=u:ea=ea.next=u}return ea}function ba(u){var h=Ki;return Ki+=1,zu===null&&(zu=[]),u=pe(zu,u,h),h=yn,(ea===null?h.memoizedState:ea.next)===null&&(h=h.alternate,sn.H=h===null||h.memoizedState===null?da:qa),u}function kt(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return ba(u);if(u.$$typeof===po)return Da(u)}throw Error(a(438,String(u)))}function Z(u){var h=null,b=yn.updateQueue;if(b!==null&&(h=b.memoCache),h==null){var E=yn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(h={data:E.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),b===null&&(b=Ch(),yn.updateQueue=b),b.memoCache=h,b=h.data[h.index],b===void 0)for(b=h.data[h.index]=Array(u),E=0;E<u;E++)b[E]=cv;return h.index++,b}function Me(u,h){return typeof h=="function"?h(u):h}function Ge(u){var h=zn();return Be(h,ti,u)}function Be(u,h,b){var E=u.queue;if(E===null)throw Error(a(311));E.lastRenderedReducer=b;var R=u.baseQueue,P=E.pending;if(P!==null){if(R!==null){var ie=R.next;R.next=P.next,P.next=ie}h.baseQueue=R=P,E.pending=null}if(P=u.baseState,R===null)u.memoizedState=P;else{h=R.next;var ye=ie=null,Oe=null,lt=h,_t=!1;do{var Ot=lt.lane&-536870913;if(Ot!==lt.lane?(An&Ot)===Ot:(So&Ot)===Ot){var Pt=lt.revertLane;if(Pt===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Ot===br&&(_t=!0);else if((So&Pt)===Pt){lt=lt.next,Pt===br&&(_t=!0);continue}else Ot={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Oe===null?(ye=Oe=Ot,ie=P):Oe=Oe.next=Ot,yn.lanes|=Pt,Jr|=Pt;Ot=lt.action,Qo&&b(P,Ot),P=lt.hasEagerState?lt.eagerState:b(P,Ot)}else Pt={lane:Ot,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Oe===null?(ye=Oe=Pt,ie=P):Oe=Oe.next=Pt,yn.lanes|=Ot,Jr|=Ot;lt=lt.next}while(lt!==null&&lt!==h);if(Oe===null?ie=P:Oe.next=ye,!Vr(P,u.memoizedState)&&(ta=!0,_t&&(b=Bl,b!==null)))throw b;u.memoizedState=P,u.baseState=ie,u.baseQueue=Oe,E.lastRenderedState=P}return R===null&&(E.lanes=0),[u.memoizedState,E.dispatch]}function Ue(u){var h=zn(),b=h.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=u;var E=b.dispatch,R=b.pending,P=h.memoizedState;if(R!==null){b.pending=null;var ie=R=R.next;do P=u(P,ie.action),ie=ie.next;while(ie!==R);Vr(P,h.memoizedState)||(ta=!0),h.memoizedState=P,h.baseQueue===null&&(h.baseState=P),b.lastRenderedState=P}return[P,E]}function wt(u,h,b){var E=yn,R=zn(),P=Yn;if(P){if(b===void 0)throw Error(a(407));b=b()}else b=h();var ie=!Vr((ti||R).memoizedState,b);if(ie&&(R.memoizedState=b,ta=!0),R=R.queue,ae(zt.bind(null,E,R,u),[u]),R.getSnapshot!==h||ie||ea!==null&&ea.memoizedState.tag&1){if(E.flags|=2048,di(9,Mt.bind(null,E,R,b,h),{destroy:void 0},null),Dn===null)throw Error(a(349));P||(So&60)!==0||At(E,h,b)}return b}function At(u,h,b){u.flags|=16384,u={getSnapshot:h,value:b},h=yn.updateQueue,h===null?(h=Ch(),yn.updateQueue=h,h.stores=[u]):(b=h.stores,b===null?h.stores=[u]:b.push(u))}function Mt(u,h,b,E){h.value=b,h.getSnapshot=E,It(h)&&Zt(u)}function zt(u,h,b){return b(function(){It(h)&&Zt(u)})}function It(u){var h=u.getSnapshot;u=u.value;try{var b=h();return!Vr(u,b)}catch{return!0}}function Zt(u){var h=$e(u,2);h!==null&&Ga(h,u,2)}function Bt(u){var h=hi();if(typeof u=="function"){var b=u;if(u=b(),Qo){W(!0);try{b()}finally{W(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:u},h}function $t(u,h,b,E){return u.baseState=b,Be(u,ti,typeof E=="function"?E:Me)}function Tn(u,h,b,E,R){if(ro(u))throw Error(a(485));if(u=h.action,u!==null){var P={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){P.listeners.push(ie)}};sn.T!==null?b(!0):P.isTransition=!1,E(P),b=h.pending,b===null?(P.next=h.pending=P,ei(h,P)):(P.next=b.next,h.pending=b.next=P)}}function ei(u,h){var b=h.action,E=h.payload,R=u.state;if(h.isTransition){var P=sn.T,ie={};sn.T=ie;try{var ye=b(R,E),Oe=sn.S;Oe!==null&&Oe(ie,ye),Pn(u,h,ye)}catch(lt){Ft(u,h,lt)}finally{sn.T=P}}else try{P=b(R,E),Pn(u,h,P)}catch(lt){Ft(u,h,lt)}}function Pn(u,h,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){Un(u,h,E)},function(E){return Ft(u,h,E)}):Un(u,h,b)}function Un(u,h,b){h.status="fulfilled",h.value=b,_n(h),u.state=b,h=u.pending,h!==null&&(b=h.next,b===h?u.pending=null:(b=b.next,h.next=b,ei(u,b)))}function Ft(u,h,b){var E=u.pending;if(u.pending=null,E!==null){E=E.next;do h.status="rejected",h.reason=b,_n(h),h=h.next;while(h!==E)}u.action=null}function _n(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function qt(u,h){return h}function Hi(u,h){if(Yn){var b=Dn.formState;if(b!==null){e:{var E=yn;if(Yn){if(Pa){var R=gv(Pa,ms);if(R){Pa=Wm(R),E=vv(R);break e}}ve(E)}E=!1}E&&(h=b[0])}}b=hi(),b.memoizedState=b.baseState=h,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qt,lastRenderedState:h},b.queue=E,b=ao.bind(null,yn,E),E.dispatch=b,E=Bt(!1);var P=fc.bind(null,yn,!1,E.queue);return E=hi(),R={state:h,dispatch:null,action:u,pending:null},E.queue=R,b=Tn.bind(null,yn,R,P,b),R.dispatch=b,E.memoizedState=u,[h,b,!1]}function Na(u){var h=zn();return wi(h,ti,u)}function wi(u,h,b){h=Be(u,h,qt)[0],u=Ge(Me)[0],h=typeof h=="object"&&h!==null&&typeof h.then=="function"?ba(h):h;var E=zn(),R=E.queue,P=R.dispatch;return b!==E.memoizedState&&(yn.flags|=2048,di(9,_a.bind(null,R,b),{destroy:void 0},null)),[h,P,u]}function _a(u,h){u.action=h}function Sn(u){var h=zn(),b=ti;if(b!==null)return wi(h,b,u);zn(),h=h.memoizedState,b=zn();var E=b.queue.dispatch;return b.memoizedState=u,[h,E,!1]}function di(u,h,b,E){return u={tag:u,create:h,inst:b,deps:E,next:null},h=yn.updateQueue,h===null&&(h=Ch(),yn.updateQueue=h),b=h.lastEffect,b===null?h.lastEffect=u.next=u:(E=b.next,b.next=u,u.next=E,h.lastEffect=u),u}function Mi(){return zn().memoizedState}function Oi(u,h,b,E){var R=hi();yn.flags|=u,R.memoizedState=di(1|h,b,{destroy:void 0},E===void 0?null:E)}function Li(u,h,b,E){var R=zn();E=E===void 0?null:E;var P=R.memoizedState.inst;ti!==null&&E!==null&&bt(E,ti.memoizedState.deps)?R.memoizedState=di(h,b,P,E):(yn.flags|=u,R.memoizedState=di(1|h,b,P,E))}function fr(u,h){Oi(8390656,8,u,h)}function ae(u,h){Li(2048,8,u,h)}function De(u,h){return Li(4,2,u,h)}function st(u,h){return Li(4,4,u,h)}function Et(u,h){if(typeof h=="function"){u=u();var b=h(u);return function(){typeof b=="function"?b():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function Dt(u,h,b){b=b!=null?b.concat([u]):null,Li(4,4,Et.bind(null,h,u),b)}function Ct(){}function mt(u,h){var b=zn();h=h===void 0?null:h;var E=b.memoizedState;return h!==null&&bt(h,E[1])?E[0]:(b.memoizedState=[u,h],u)}function jt(u,h){var b=zn();h=h===void 0?null:h;var E=b.memoizedState;if(h!==null&&bt(h,E[1]))return E[0];if(E=u(),Qo){W(!0);try{u()}finally{W(!1)}}return b.memoizedState=[E,h],E}function Vt(u,h,b){return b===void 0||(So&1073741824)!==0?u.memoizedState=h:(u.memoizedState=b,u=co(),yn.lanes|=u,Jr|=u,b)}function On(u,h,b,E){return Vr(b,h)?b:_o.current!==null?(u=Vt(u,b,E),Vr(u,h)||(ta=!0),u):(So&42)===0?(ta=!0,u.memoizedState=b):(u=co(),yn.lanes|=u,Jr|=u,h)}function Wt(u,h,b,E,R){var P=pa();Xa(P!==0&&8>P?P:8);var ie=sn.T,ye={};sn.T=ye,fc(u,!1,h,b);try{var Oe=R(),lt=sn.S;if(lt!==null&&lt(ye,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var _t=it(Oe,E);us(u,h,_t,rr(u))}else us(u,h,E,rr(u))}catch(Ot){us(u,h,{then:function(){},status:"rejected",reason:Ot},rr())}finally{Xa(P),sn.T=ie}}function yi(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:vr,baseState:vr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:vr},next:null};var b={};return h.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:b},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function ji(){return Da(cn)}function pi(){return zn().memoizedState}function Ei(){return zn().memoizedState}function cs(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var b=rr();u=ke(b);var E=Fe(h,u,b);E!==null&&(Ga(E,h,b),Ze(E,h,b)),h={cache:Wf()},u.payload=h;return}h=h.return}}function Sa(u,h,b){var E=rr();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},ro(u)?Ls(h,b):(b=Le(u,h,b,E),b!==null&&(Ga(b,u,E),zo(b,h,E)))}function ao(u,h,b){var E=rr();us(u,h,b,E)}function us(u,h,b,E){var R={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(ro(u))Ls(h,R);else{var P=u.alternate;if(u.lanes===0&&(P===null||P.lanes===0)&&(P=h.lastRenderedReducer,P!==null))try{var ie=h.lastRenderedState,ye=P(ie,b);if(R.hasEagerState=!0,R.eagerState=ye,Vr(ye,ie))return je(u,h,R,0),Dn===null&&Te(),!1}catch{}finally{}if(b=Le(u,h,R,E),b!==null)return Ga(b,u,E),zo(b,h,E),!0}return!1}function fc(u,h,b,E){if(E={lane:2,revertLane:Ae(),action:E,hasEagerState:!1,eagerState:null,next:null},ro(u)){if(h)throw Error(a(479))}else h=Le(u,b,E,2),h!==null&&Ga(h,u,2)}function ro(u){var h=u.alternate;return u===yn||h!==null&&h===yn}function Ls(u,h){ki=xs=!0;var b=u.pending;b===null?h.next=h:(h.next=b.next,b.next=h),u.pending=h}function zo(u,h,b){if((b&4194176)!==0){var E=h.lanes;E&=u.pendingLanes,b|=E,h.lanes=b,$(u,b)}}function zi(u,h,b,E){h=u.memoizedState,b=b(E,h),b=b==null?h:Mc({},h,b),u.memoizedState=b,u.lanes===0&&(u.updateQueue.baseState=b)}function zs(u,h,b,E,R,P,ie){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,P,ie):h.prototype&&h.prototype.isPureReactComponent?!nt(b,E)||!nt(R,P):!0}function Po(u,h,b,E){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(b,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(b,E),h.state!==u&&Nh.enqueueReplaceState(h,h.state,null)}function nr(u,h){var b=h;if("ref"in h){b={};for(var E in h)E!=="ref"&&(b[E]=h[E])}if(u=u.defaultProps){b===h&&(b=Mc({},b));for(var R in u)b[R]===void 0&&(b[R]=u[R])}return b}function so(u,h){try{var b=u.onUncaughtError;b(h.value,{componentStack:h.stack})}catch(E){setTimeout(function(){throw E})}}function hc(u,h,b){try{var E=u.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Ps(u,h,b){return b=ke(b),b.tag=3,b.payload={element:null},b.callback=function(){so(u,h)},b}function oo(u){return u=ke(u),u.tag=3,u}function ha(u,h,b,E){var R=b.type.getDerivedStateFromError;if(typeof R=="function"){var P=E.value;u.payload=function(){return R(P)},u.callback=function(){hc(h,b,E)}}var ie=b.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(u.callback=function(){hc(h,b,E),typeof R!="function"&&($r===null?$r=new Set([this]):$r.add(this));var ye=E.stack;this.componentDidCatch(E.value,{componentStack:ye!==null?ye:""})})}function Vf(u,h,b,E,R){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(h=b.alternate,h!==null&&mc(h,b,R,!0),b=Kr.current,b!==null){switch(b.tag){case 13:return vs===null?gr():b.alternate===null&&Vn===0&&(Vn=3),b.flags&=-257,b.flags|=65536,b.lanes=R,E===Ah?b.flags|=16384:(h=b.updateQueue,h===null?b.updateQueue=new Set([E]):h.add(E),rh(u,E,R)),!1;case 22:return b.flags|=65536,E===Ah?b.flags|=16384:(h=b.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=h):(b=h.retryQueue,b===null?h.retryQueue=new Set([E]):b.add(E)),rh(u,E,R)),!1}throw Error(a(435,b.tag))}return rh(u,E,R),gr(),!1}if(Yn)return h=Kr.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,E!==Xd&&(u=Error(a(422),{cause:E}),gt(ue(u,b)))):(E!==Xd&&(h=Error(a(423),{cause:E}),gt(ue(h,b))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,E=ue(E,b),R=Ps(u.stateNode,E,R),rt(u,R),Vn!==4&&(Vn=2)),!1;var P=Error(a(520),{cause:E});if(P=ue(P,b),Iu===null?Iu=[P]:Iu.push(P),Vn!==4&&(Vn=2),h===null)return!0;E=ue(E,b),b=h;do{switch(b.tag){case 3:return b.flags|=65536,u=R&-R,b.lanes|=u,u=Ps(b.stateNode,E,u),rt(b,u),!1;case 1:if(h=b.type,P=b.stateNode,(b.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&($r===null||!$r.has(P))))return b.flags|=65536,R&=-R,b.lanes|=R,R=oo(R),ha(R,u,b,E),rt(b,R),!1}b=b.return}while(b!==null);return!1}function Wi(u,h,b,E){h.child=u===null?sg(h,null,b,E):kl(h,u.child,b,E)}function pc(u,h,b,E,R){b=b.render;var P=h.ref;if("ref"in E){var ie={};for(var ye in E)ye!=="ref"&&(ie[ye]=E[ye])}else ie=E;return gc(h),E=$n(u,h,b,ie,P,R),ye=zr(),u!==null&&!ta?(Pr(u,h,R),Io(u,h,R)):(Yn&&ye&&ee(h),h.flags|=1,Wi(u,h,E,R),h.child)}function vd(u,h,b,E,R){if(u===null){var P=b.type;return typeof P=="function"&&!Vo(P)&&P.defaultProps===void 0&&b.compare===null?(h.tag=15,h.type=P,lu(u,h,P,E,R)):(u=fs(b.type,null,E,h,h.mode,R),u.ref=h.ref,u.return=h,h.child=u)}if(P=u.child,!am(u,R)){var ie=P.memoizedProps;if(b=b.compare,b=b!==null?b:nt,b(ie,E)&&u.ref===h.ref)return Io(u,h,R)}return h.flags|=1,u=Wa(P,E),u.ref=h.ref,u.return=h,h.child=u}function lu(u,h,b,E,R){if(u!==null){var P=u.memoizedProps;if(nt(P,E)&&u.ref===h.ref)if(ta=!1,h.pendingProps=E=P,am(u,R))(u.flags&131072)!==0&&(ta=!0);else return h.lanes=u.lanes,Io(u,h,R)}return ds(u,h,b,E,R)}function Ra(u,h,b){var E=h.pendingProps,R=E.children,P=(h.stateNode._pendingVisibility&2)!==0,ie=u!==null?u.memoizedState:null;if(la(u,h),E.mode==="hidden"||P){if((h.flags&128)!==0){if(E=ie!==null?ie.baseLanes|b:b,u!==null){for(R=h.child=u.child,P=0;R!==null;)P=P|R.lanes|R.childLanes,R=R.sibling;h.childLanes=P&~E}else h.childLanes=0,h.child=null;return hr(u,h,E,b)}if((b&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&Xf(h,ie!==null?ie.cachePool:null),ie!==null?Xn(h,ie):Rn(),Si(h);else return h.lanes=h.childLanes=536870912,hr(u,h,ie!==null?ie.baseLanes|b:b,b)}else ie!==null?(Xf(h,ie.cachePool),Xn(h,ie),Ui(),h.memoizedState=null):(u!==null&&Xf(h,null),Rn(),Ui());return Wi(u,h,R,b),h.child}function hr(u,h,b,E){var R=xl();return R=R===null?null:{parent:go?ri._currentValue:ri._currentValue2,pool:R},h.memoizedState={baseLanes:b,cachePool:R},u!==null&&Xf(h,null),Rn(),Si(h),u!==null&&mc(u,h,E,!0),null}function la(u,h){var b=h.ref;if(b===null)u!==null&&u.ref!==null&&(h.flags|=2097664);else{if(typeof b!="function"&&typeof b!="object")throw Error(a(284));(u===null||u.ref!==b)&&(h.flags|=2097664)}}function ds(u,h,b,E,R){return gc(h),b=$n(u,h,b,E,void 0,R),E=zr(),u!==null&&!ta?(Pr(u,h,R),Io(u,h,R)):(Yn&&E&&ee(h),h.flags|=1,Wi(u,h,b,R),h.child)}function xd(u,h,b,E,R,P){return gc(h),h.updateQueue=null,b=ls(h,E,b,R),ja(u),E=zr(),u!==null&&!ta?(Pr(u,h,P),Io(u,h,P)):(Yn&&E&&ee(h),h.flags|=1,Wi(u,h,b,P),h.child)}function $p(u,h,b,E,R){if(gc(h),h.stateNode===null){var P=Nc,ie=b.contextType;typeof ie=="object"&&ie!==null&&(P=Da(ie)),P=new b(E,P),h.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Nh,h.stateNode=P,P._reactInternals=h,P=h.stateNode,P.props=E,P.state=h.memoizedState,P.refs={},ht(h),ie=b.contextType,P.context=typeof ie=="object"&&ie!==null?Da(ie):Nc,P.state=h.memoizedState,ie=b.getDerivedStateFromProps,typeof ie=="function"&&(zi(h,b,ie,E),P.state=h.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(ie=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),ie!==P.state&&Nh.enqueueReplaceState(P,P.state,null),Ut(h,E,P,R),ut(),P.state=h.memoizedState),typeof P.componentDidMount=="function"&&(h.flags|=4194308),E=!0}else if(u===null){P=h.stateNode;var ye=h.memoizedProps,Oe=nr(b,ye);P.props=Oe;var lt=P.context,_t=b.contextType;ie=Nc,typeof _t=="object"&&_t!==null&&(ie=Da(_t));var Ot=b.getDerivedStateFromProps;_t=typeof Ot=="function"||typeof P.getSnapshotBeforeUpdate=="function",ye=h.pendingProps!==ye,_t||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(ye||lt!==ie)&&Po(h,P,E,ie),Jo=!1;var Pt=h.memoizedState;P.state=Pt,Ut(h,E,P,R),ut(),lt=h.memoizedState,ye||Pt!==lt||Jo?(typeof Ot=="function"&&(zi(h,b,Ot,E),lt=h.memoizedState),(Oe=Jo||zs(h,b,Oe,E,Pt,lt,ie))?(_t||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(h.flags|=4194308)):(typeof P.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=lt),P.props=E,P.state=lt,P.context=ie,E=Oe):(typeof P.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{P=h.stateNode,xt(u,h),ie=h.memoizedProps,_t=nr(b,ie),P.props=_t,Ot=h.pendingProps,Pt=P.context,lt=b.contextType,Oe=Nc,typeof lt=="object"&&lt!==null&&(Oe=Da(lt)),ye=b.getDerivedStateFromProps,(lt=typeof ye=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(ie!==Ot||Pt!==Oe)&&Po(h,P,E,Oe),Jo=!1,Pt=h.memoizedState,P.state=Pt,Ut(h,E,P,R),ut();var pn=h.memoizedState;ie!==Ot||Pt!==pn||Jo||u!==null&&u.dependencies!==null&&vl(u.dependencies)?(typeof ye=="function"&&(zi(h,b,ye,E),pn=h.memoizedState),(_t=Jo||zs(h,b,_t,E,Pt,pn,Oe)||u!==null&&u.dependencies!==null&&vl(u.dependencies))?(lt||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(E,pn,Oe),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(E,pn,Oe)),typeof P.componentDidUpdate=="function"&&(h.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof P.componentDidUpdate!="function"||ie===u.memoizedProps&&Pt===u.memoizedState||(h.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||ie===u.memoizedProps&&Pt===u.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=pn),P.props=E,P.state=pn,P.context=Oe,E=_t):(typeof P.componentDidUpdate!="function"||ie===u.memoizedProps&&Pt===u.memoizedState||(h.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||ie===u.memoizedProps&&Pt===u.memoizedState||(h.flags|=1024),E=!1)}return P=E,la(u,h),E=(h.flags&128)!==0,P||E?(P=h.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:P.render(),h.flags|=1,u!==null&&E?(h.child=kl(h,u.child,null,R),h.child=kl(h,null,b,R)):Wi(u,h,b,R),h.memoizedState=P.state,u=h.child):u=Io(u,h,R),u}function X0(u,h,b,E){return Pe(),h.flags|=256,Wi(u,h,b,E),h.child}function em(u){return{baseLanes:u,cachePool:J0()}}function tm(u,h,b){return u=u!==null?u.childLanes&~b:0,h&&(u|=wr),u}function Y0(u,h,b){var E=h.pendingProps,R=!1,P=(h.flags&128)!==0,ie;if((ie=P)||(ie=u!==null&&u.memoizedState===null?!1:(ua.current&2)!==0),ie&&(R=!0,h.flags&=-129),ie=(h.flags&32)!==0,h.flags&=-33,u===null){if(Yn){if(R?Qn(h):Ui(),Yn){var ye=Pa,Oe;(Oe=ye)&&(ye=Sv(ye,ms),ye!==null?(h.memoizedState={dehydrated:ye,treeContext:js!==null?{id:yo,overflow:ps}:null,retryLane:536870912},Oe=t(18,null,null,0),Oe.stateNode=ye,Oe.return=h,h.child=Oe,Ya=h,Pa=null,Oe=!0):Oe=!1),Oe||ve(h)}if(ye=h.memoizedState,ye!==null&&(ye=ye.dehydrated,ye!==null))return Bd(ye)?h.lanes=16:h.lanes=536870912,null;ai(h)}return ye=E.children,E=E.fallback,R?(Ui(),R=h.mode,ye=nm({mode:"hidden",children:ye},R),E=Wo(E,R,b,null),ye.return=h,E.return=h,ye.sibling=E,h.child=ye,R=h.child,R.memoizedState=em(b),R.childLanes=tm(u,ie,b),h.memoizedState=Ka,E):(Qn(h),yd(h,ye))}if(Oe=u.memoizedState,Oe!==null&&(ye=Oe.dehydrated,ye!==null)){if(P)h.flags&256?(Qn(h),h.flags&=-257,h=im(u,h,b)):h.memoizedState!==null?(Ui(),h.child=u.child,h.flags|=128,h=null):(Ui(),R=E.fallback,ye=h.mode,E=nm({mode:"visible",children:E.children},ye),R=Wo(R,ye,b,null),R.flags|=2,E.return=h,R.return=h,E.sibling=R,h.child=E,kl(h,u.child,null,b),E=h.child,E.memoizedState=em(b),E.childLanes=tm(u,ie,b),h.memoizedState=Ka,h=R);else if(Qn(h),Bd(ye))ie=mv(ye).digest,E=Error(a(419)),E.stack="",E.digest=ie,gt({value:E,source:null,stack:null}),h=im(u,h,b);else if(ta||mc(u,h,b,!1),ie=(b&u.childLanes)!==0,ta||ie){if(ie=Dn,ie!==null){if(E=b&-b,(E&42)!==0)E=1;else switch(E){case 2:E=1;break;case 8:E=4;break;case 32:E=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:E=64;break;case 268435456:E=134217728;break;default:E=0}if(E=(E&(ie.suspendedLanes|b))!==0?0:E,E!==0&&E!==Oe.retryLane)throw Oe.retryLane=E,$e(u,E),Ga(ie,u,E),Iv}vh(ye)||gr(),h=im(u,h,b)}else vh(ye)?(h.flags|=128,h.child=u.child,h=Sc.bind(null,u),O1(ye,h),h=null):(u=Oe.treeContext,sr&&(Pa=yv(ye),Ya=h,Yn=!0,Xr=null,ms=!1,u!==null&&(Gr[Wr++]=yo,Gr[Wr++]=ps,Gr[Wr++]=js,yo=u.id,ps=u.overflow,js=h)),h=yd(h,E.children),h.flags|=4096);return h}return R?(Ui(),R=E.fallback,ye=h.mode,Oe=u.child,P=Oe.sibling,E=Wa(Oe,{mode:"hidden",children:E.children}),E.subtreeFlags=Oe.subtreeFlags&31457280,P!==null?R=Wa(P,R):(R=Wo(R,ye,b,null),R.flags|=2),R.return=h,E.return=h,E.sibling=R,h.child=E,E=R,R=h.child,ye=u.child.memoizedState,ye===null?ye=em(b):(Oe=ye.cachePool,Oe!==null?(P=go?ri._currentValue:ri._currentValue2,Oe=Oe.parent!==P?{parent:P,pool:P}:Oe):Oe=J0(),ye={baseLanes:ye.baseLanes|b,cachePool:Oe}),R.memoizedState=ye,R.childLanes=tm(u,ie,b),h.memoizedState=Ka,E):(Qn(h),b=u.child,u=b.sibling,b=Wa(b,{mode:"visible",children:E.children}),b.return=h,b.sibling=null,u!==null&&(ie=h.deletions,ie===null?(h.deletions=[u],h.flags|=16):ie.push(u)),h.child=b,h.memoizedState=null,b)}function yd(u,h){return h=nm({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function nm(u,h){return sh(u,h,0,null)}function im(u,h,b){return kl(h,u.child,null,b),u=yd(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function q0(u,h,b){u.lanes|=h;var E=u.alternate;E!==null&&(E.lanes|=h),rm(u.return,h,b)}function Gf(u,h,b,E,R){var P=u.memoizedState;P===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:R}:(P.isBackwards=h,P.rendering=null,P.renderingStartTime=0,P.last=E,P.tail=b,P.tailMode=R)}function K0(u,h,b){var E=h.pendingProps,R=E.revealOrder,P=E.tail;if(Wi(u,h,E.children,b),E=ua.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&q0(u,b,h);else if(u.tag===19)q0(u,b,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}switch(N(ua,E),R){case"forwards":for(b=h.child,R=null;b!==null;)u=b.alternate,u!==null&&jn(u)===null&&(R=b),b=b.sibling;b=R,b===null?(R=h.child,h.child=null):(R=b.sibling,b.sibling=null),Gf(h,!1,R,b,P);break;case"backwards":for(b=null,R=h.child,h.child=null;R!==null;){if(u=R.alternate,u!==null&&jn(u)===null){h.child=R;break}u=R.sibling,R.sibling=b,b=R,R=u}Gf(h,!0,b,null,P);break;case"together":Gf(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Io(u,h,b){if(u!==null&&(h.dependencies=u.dependencies),Jr|=h.lanes,(b&h.childLanes)===0)if(u!==null){if(mc(u,h,b,!1),(b&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(a(153));if(h.child!==null){for(u=h.child,b=Wa(u,u.pendingProps),h.child=b,b.return=h;u.sibling!==null;)u=u.sibling,b=b.sibling=Wa(u,u.pendingProps),b.return=h;b.sibling=null}return h.child}function am(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&vl(u)))}function R1(u,h,b){switch(h.tag){case 3:oe(h,h.stateNode.containerInfo),gl(h,ri,u.memoizedState.cache),Pe();break;case 27:case 5:se(h);break;case 4:oe(h,h.stateNode.containerInfo);break;case 10:gl(h,h.type,h.memoizedProps.value);break;case 13:var E=h.memoizedState;if(E!==null)return E.dehydrated!==null?(Qn(h),h.flags|=128,null):(b&h.child.childLanes)!==0?Y0(u,h,b):(Qn(h),u=Io(u,h,b),u!==null?u.sibling:null);Qn(h);break;case 19:var R=(u.flags&128)!==0;if(E=(b&h.childLanes)!==0,E||(mc(u,h,b,!1),E=(b&h.childLanes)!==0),R){if(E)return K0(u,h,b);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),N(ua,ua.current),E)break;return null;case 22:case 23:return h.lanes=0,Ra(u,h,b);case 24:gl(h,ri,u.memoizedState.cache)}return Io(u,h,b)}function Z0(u,h,b){if(u!==null)if(u.memoizedProps!==h.pendingProps)ta=!0;else{if(!am(u,b)&&(h.flags&128)===0)return ta=!1,R1(u,h,b);ta=(u.flags&131072)!==0}else ta=!1,Yn&&(h.flags&1048576)!==0&&j(h,Gd,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var E=h.elementType,R=E._init;if(E=R(E._payload),h.type=E,typeof E=="function")Vo(E)?(u=nr(E,u),h.tag=1,h=$p(null,h,E,u,b)):(h.tag=0,h=ds(null,h,E,u,b));else{if(E!=null){if(R=E.$$typeof,R===Mu){h.tag=11,h=pc(null,h,E,u,b);break e}else if(R===Rd){h.tag=14,h=vd(null,h,E,u,b);break e}}throw h=o(E)||E,Error(a(306,h,""))}}return h;case 0:return ds(u,h,h.type,h.pendingProps,b);case 1:return E=h.type,R=nr(E,h.pendingProps),$p(u,h,E,R,b);case 3:e:{if(oe(h,h.stateNode.containerInfo),u===null)throw Error(a(387));var P=h.pendingProps;R=h.memoizedState,E=R.element,xt(u,h),Ut(h,P,null,b);var ie=h.memoizedState;if(P=ie.cache,gl(h,ri,P),P!==R.cache&&sm(h,[ri],b,!0),ut(),P=ie.element,sr&&R.isDehydrated)if(R={element:P,isDehydrated:!1,cache:ie.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=X0(u,h,P,b);break e}else if(P!==E){E=ue(Error(a(424)),h),gt(E),h=X0(u,h,P,b);break e}else for(sr&&(Pa=xv(h.stateNode.containerInfo),Ya=h,Yn=!0,Xr=null,ms=!0),b=sg(h,null,P,b),h.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Pe(),P===E){h=Io(u,h,b);break e}Wi(u,h,P,b)}h=h.child}return h;case 26:if(Hr)return la(u,h),u===null?(b=Sh(h.type,null,h.pendingProps,null))?h.memoizedState=b:Yn||(h.stateNode=z1(h.type,h.pendingProps,Hs.current,h)):h.memoizedState=Sh(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:if(La)return se(h),u===null&&La&&Yn&&(E=h.stateNode=ng(h.type,h.pendingProps,Hs.current,Aa.current,!1),Ya=h,ms=!0,Pa=xh(E)),E=h.pendingProps.children,u!==null||Yn?Wi(u,h,E,b):h.child=kl(h,null,E,b),la(u,h),h.child;case 5:return u===null&&Yn&&(Av(h.type,h.pendingProps,Aa.current),(R=E=Pa)&&(E=bv(E,h.type,h.pendingProps,ms),E!==null?(h.stateNode=E,Ya=h,Pa=xh(E),ms=!1,R=!0):R=!1),R||ve(h)),se(h),R=h.type,P=h.pendingProps,ie=u!==null?u.memoizedProps:null,E=P.children,Ll(R,P)?E=null:ie!==null&&Ll(R,ie)&&(h.flags|=32),h.memoizedState!==null&&(R=$n(u,h,Os,null,null,b),go?cn._currentValue=R:cn._currentValue2=R),la(u,h),Wi(u,h,E,b),h.child;case 6:return u===null&&Yn&&(Cv(h.pendingProps,Aa.current),(u=b=Pa)&&(b=_v(b,h.pendingProps,ms),b!==null?(h.stateNode=b,Ya=h,Pa=null,u=!0):u=!1),u||ve(h)),null;case 13:return Y0(u,h,b);case 4:return oe(h,h.stateNode.containerInfo),E=h.pendingProps,u===null?h.child=kl(h,null,E,b):Wi(u,h,E,b),h.child;case 11:return pc(u,h,h.type,h.pendingProps,b);case 7:return Wi(u,h,h.pendingProps,b),h.child;case 8:return Wi(u,h,h.pendingProps.children,b),h.child;case 12:return Wi(u,h,h.pendingProps.children,b),h.child;case 10:return E=h.pendingProps,gl(h,h.type,E.value),Wi(u,h,E.children,b),h.child;case 9:return R=h.type._context,E=h.pendingProps.children,gc(h),R=Da(R),E=E(R),h.flags|=1,Wi(u,h,E,b),h.child;case 14:return vd(u,h,h.type,h.pendingProps,b);case 15:return lu(u,h,h.type,h.pendingProps,b);case 19:return K0(u,h,b);case 22:return Ra(u,h,b);case 24:return gc(h),E=Da(ri),u===null?(R=xl(),R===null&&(R=Dn,P=Wf(),R.pooledCache=P,P.refCount++,P!==null&&(R.pooledCacheLanes|=b),R=P),h.memoizedState={parent:E,cache:R},ht(h),gl(h,ri,R)):((u.lanes&b)!==0&&(xt(u,h),Ut(h,null,null,b),ut()),R=u.memoizedState,P=h.memoizedState,R.parent!==E?(R={parent:E,cache:E},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),gl(h,ri,E)):(E=P.cache,gl(h,ri,E),E!==R.cache&&sm(h,[ri],b,!0))),Wi(u,h,h.pendingProps.children,b),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function gl(u,h,b){go?(N(_r,h._currentValue),h._currentValue=b):(N(_r,h._currentValue2),h._currentValue2=b)}function Bo(u){var h=_r.current;go?u._currentValue=h:u._currentValue2=h,w(_r)}function rm(u,h,b){for(;u!==null;){var E=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),u===b)break;u=u.return}}function sm(u,h,b,E){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var P=R.dependencies;if(P!==null){var ie=R.child;P=P.firstContext;e:for(;P!==null;){var ye=P;P=R;for(var Oe=0;Oe<h.length;Oe++)if(ye.context===h[Oe]){P.lanes|=b,ye=P.alternate,ye!==null&&(ye.lanes|=b),rm(P.return,b,u),E||(ie=null);break e}P=ye.next}}else if(R.tag===18){if(ie=R.return,ie===null)throw Error(a(341));ie.lanes|=b,P=ie.alternate,P!==null&&(P.lanes|=b),rm(ie,b,u),ie=null}else ie=R.child;if(ie!==null)ie.return=R;else for(ie=R;ie!==null;){if(ie===u){ie=null;break}if(R=ie.sibling,R!==null){R.return=ie.return,ie=R;break}ie=ie.return}R=ie}}function mc(u,h,b,E){u=null;for(var R=h,P=!1;R!==null;){if(!P){if((R.flags&524288)!==0)P=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var ie=R.alternate;if(ie===null)throw Error(a(387));if(ie=ie.memoizedProps,ie!==null){var ye=R.type;Vr(R.pendingProps.value,ie.value)||(u!==null?u.push(ye):u=[ye])}}else if(R===Du.current){if(ie=R.alternate,ie===null)throw Error(a(387));ie.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(cn):u=[cn])}R=R.return}u!==null&&sm(h,u,b,E),h.flags|=262144}function vl(u){for(u=u.firstContext;u!==null;){var h=u.context;if(!Vr(go?h._currentValue:h._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function gc(u){jl=u,Zi=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Da(u){return om(jl,u)}function bd(u,h){return jl===null&&gc(u),om(u,h)}function om(u,h){var b=go?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:b,next:null},Zi===null){if(u===null)throw Error(a(308));Zi=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else Zi=Zi.next=h;return b}function Wf(){return{controller:new Bv,data:new Map,refCount:0}}function cu(u){u.refCount--,u.refCount===0&&$o(Uc,function(){u.controller.abort()})}function xl(){var u=el.current;return u!==null?u:Dn.pooledCache}function Xf(u,h){h===null?N(el,el.current):N(el,h.pool)}function J0(){var u=xl();return u===null?null:{parent:go?ri._currentValue:ri._currentValue2,pool:u}}function Ir(u){u.flags|=4}function lm(u,h){if(u!==null&&u.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(u=h.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function Yf(u,h,b,E){if(Oa)for(b=h.child;b!==null;){if(b.tag===5||b.tag===6)mo(u,b.stateNode);else if(!(b.tag===4||La&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(Fr)for(var R=h.child;R!==null;){if(R.tag===5){var P=R.stateNode;b&&E&&(P=Vm(P,R.type,R.memoizedProps)),mo(u,P)}else if(R.tag===6)P=R.stateNode,b&&E&&(P=Gm(P,R.memoizedProps)),mo(u,P);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)P=R.child,P!==null&&(P.return=R),Yf(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function uu(u,h,b,E){if(Fr)for(var R=h.child;R!==null;){if(R.tag===5){var P=R.stateNode;b&&E&&(P=Vm(P,R.type,R.memoizedProps)),jm(u,P)}else if(R.tag===6)P=R.stateNode,b&&E&&(P=Gm(P,R.memoizedProps)),jm(u,P);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)P=R.child,P!==null&&(P.return=R),uu(u,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function du(u,h){if(Fr&&lm(u,h)){u=h.stateNode;var b=u.containerInfo,E=gh();uu(E,h,!1,!1),u.pendingChildren=E,Ir(h),pv(b,E)}}function cm(u,h,b,E){if(Oa)u.memoizedProps!==E&&Ir(h);else if(Fr){var R=u.stateNode,P=u.memoizedProps;if((u=lm(u,h))||P!==E){var ie=Aa.current;P=Fm(R,b,P,E,!u,null),P===R?h.stateNode=R:(Yo(P,b,E,ie)&&Ir(h),h.stateNode=P,u?Yf(P,h,!1,!1):Ir(h))}else h.stateNode=R}}function fu(u,h,b){if(dv(h,b)){if(u.flags|=16777216,!qo(h,b))if(Td())u.flags|=8192;else throw Dc=Ah,rg}else u.flags&=-16777217}function um(u,h){if(Nv(h)){if(u.flags|=16777216,!eg(h))if(Td())u.flags|=8192;else throw Dc=Ah,rg}else u.flags&=-16777217}function _d(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?L():536870912,u.lanes|=h,nl|=h)}function vc(u,h){if(!Yn)switch(u.tailMode){case"hidden":h=u.tail;for(var b=null;h!==null;)h.alternate!==null&&(b=h),h=h.sibling;b===null?u.tail=null:b.sibling=null;break;case"collapsed":b=u.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function Pi(u){var h=u.alternate!==null&&u.alternate.child===u.child,b=0,E=0;if(h)for(var R=u.child;R!==null;)b|=R.lanes|R.childLanes,E|=R.subtreeFlags&31457280,E|=R.flags&31457280,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)b|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=E,u.childLanes=b,h}function Q0(u,h,b){var E=h.pendingProps;switch(ne(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(h),null;case 1:return Pi(h),null;case 3:return b=h.stateNode,E=null,u!==null&&(E=u.memoizedState.cache),h.memoizedState.cache!==E&&(h.flags|=2048),Bo(ri),re(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(u===null||u.child===null)&&(Ke(h)?Ir(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Xr!==null&&(Fo(Xr),Xr=null))),du(u,h),Pi(h),null;case 26:if(Hr){b=h.type;var R=h.memoizedState;return u===null?(Ir(h),R!==null?(Pi(h),um(h,R)):(Pi(h),fu(h,b,E))):R?R!==u.memoizedState?(Ir(h),Pi(h),um(h,R)):(Pi(h),h.flags&=-16777217):(Oa?u.memoizedProps!==E&&Ir(h):cm(u,h,b,E),Pi(h),fu(h,b,E)),null}case 27:if(La){if(le(h),b=Hs.current,R=h.type,u!==null&&h.stateNode!=null)Oa?u.memoizedProps!==E&&Ir(h):cm(u,h,R,E);else{if(!E){if(h.stateNode===null)throw Error(a(166));return Pi(h),null}u=Aa.current,Ke(h)?ze(h,u):(u=ng(R,E,b,u,!0),h.stateNode=u,Ir(h))}return Pi(h),null}case 5:if(le(h),b=h.type,u!==null&&h.stateNode!=null)cm(u,h,b,E);else{if(!E){if(h.stateNode===null)throw Error(a(166));return Pi(h),null}u=Aa.current,Ke(h)?ze(h,u):(R=Nm(b,E,Hs.current,u,h),Yf(R,h,!1,!1),h.stateNode=R,Yo(R,b,E,u)&&Ir(h))}return Pi(h),fu(h,h.type,h.pendingProps),null;case 6:if(u&&h.stateNode!=null)b=u.memoizedProps,Oa?b!==E&&Ir(h):Fr&&(b!==E?(h.stateNode=uh(E,Hs.current,Aa.current,h),Ir(h)):h.stateNode=u.stateNode);else{if(typeof E!="string"&&h.stateNode===null)throw Error(a(166));if(u=Hs.current,b=Aa.current,Ke(h)){if(!sr)throw Error(a(176));if(u=h.stateNode,b=h.memoizedProps,E=null,R=Ya,R!==null)switch(R.tag){case 27:case 5:E=R.memoizedProps}wv(u,b,h,E)||ve(h)}else h.stateNode=uh(E,u,b,h)}return Pi(h),null;case 13:if(E=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=Ke(h),E!==null&&E.dehydrated!==null){if(u===null){if(!R)throw Error(a(318));if(!sr)throw Error(a(344));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(a(317));Tu(R,h)}else Pe(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Pi(h),R=!1}else Xr!==null&&(Fo(Xr),Xr=null),R=!0;if(!R)return h.flags&256?(ai(h),h):(ai(h),null)}if(ai(h),(h.flags&128)!==0)return h.lanes=b,h;if(b=E!==null,u=u!==null&&u.memoizedState!==null,b){E=h.child,R=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(R=E.alternate.memoizedState.cachePool.pool);var P=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(P=E.memoizedState.cachePool.pool),P!==R&&(E.flags|=2048)}return b!==u&&b&&(h.child.flags|=8192),_d(h,h.updateQueue),Pi(h),null;case 4:return re(),du(u,h),u===null&&Um(h.stateNode.containerInfo),Pi(h),null;case 10:return Bo(h.type),Pi(h),null;case 19:if(w(ua),R=h.memoizedState,R===null)return Pi(h),null;if(E=(h.flags&128)!==0,P=R.rendering,P===null)if(E)vc(R,!1);else{if(Vn!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(P=jn(u),P!==null){for(h.flags|=128,vc(R,!1),u=P.updateQueue,h.updateQueue=u,_d(h,u),h.subtreeFlags=0,u=b,b=h.child;b!==null;)Go(b,u),b=b.sibling;return N(ua,ua.current&1|2),h.child}u=u.sibling}R.tail!==null&&za()>Gi&&(h.flags|=128,E=!0,vc(R,!1),h.lanes=4194304)}else{if(!E)if(u=jn(P),u!==null){if(h.flags|=128,E=!0,u=u.updateQueue,h.updateQueue=u,_d(h,u),vc(R,!0),R.tail===null&&R.tailMode==="hidden"&&!P.alternate&&!Yn)return Pi(h),null}else 2*za()-R.renderingStartTime>Gi&&b!==536870912&&(h.flags|=128,E=!0,vc(R,!1),h.lanes=4194304);R.isBackwards?(P.sibling=h.child,h.child=P):(u=R.last,u!==null?u.sibling=P:h.child=P,R.last=P)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=za(),h.sibling=null,u=ua.current,N(ua,E?u&1|2:u&1),h):(Pi(h),null);case 22:case 23:return ai(h),Jn(),E=h.memoizedState!==null,u!==null?u.memoizedState!==null!==E&&(h.flags|=8192):E&&(h.flags|=8192),E?(b&536870912)!==0&&(h.flags&128)===0&&(Pi(h),h.subtreeFlags&6&&(h.flags|=8192)):Pi(h),b=h.updateQueue,b!==null&&_d(h,b.retryQueue),b=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==b&&(h.flags|=2048),u!==null&&w(el),null;case 24:return b=null,u!==null&&(b=u.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),Bo(ri),Pi(h),null;case 25:return null}throw Error(a(156,h.tag))}function $0(u,h){switch(ne(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Bo(ri),re(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return le(h),null;case 13:if(ai(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Pe()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return w(ua),null;case 4:return re(),null;case 10:return Bo(h.type),null;case 22:case 23:return ai(h),Jn(),u!==null&&w(el),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return Bo(ri),null;case 25:return null;default:return null}}function dm(u,h){switch(ne(h),h.tag){case 3:Bo(ri),re();break;case 26:case 27:case 5:le(h);break;case 4:re();break;case 13:ai(h);break;case 19:w(ua);break;case 10:Bo(h.type);break;case 22:case 23:ai(h),Jn(),u!==null&&w(el);break;case 24:Bo(ri)}}function Sd(u,h){try{var b=h.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var R=E.next;b=R;do{if((b.tag&u)===u){E=void 0;var P=b.create,ie=b.inst;E=P(),ie.destroy=E}b=b.next}while(b!==R)}}catch(ye){In(h,h.return,ye)}}function yl(u,h,b){try{var E=h.updateQueue,R=E!==null?E.lastEffect:null;if(R!==null){var P=R.next;E=P;do{if((E.tag&u)===u){var ie=E.inst,ye=ie.destroy;if(ye!==void 0){ie.destroy=void 0,R=h;var Oe=b;try{ye()}catch(lt){In(R,Oe,lt)}}}E=E.next}while(E!==P)}}catch(lt){In(h,h.return,lt)}}function ev(u){var h=u.updateQueue;if(h!==null){var b=u.stateNode;try{tt(h,b)}catch(E){In(u,u.return,E)}}}function tv(u,h,b){b.props=nr(u.type,u.memoizedProps),b.state=u.memoizedState;try{b.componentWillUnmount()}catch(E){In(u,h,E)}}function xc(u,h){try{var b=u.ref;if(b!==null){var E=u.stateNode;switch(u.tag){case 26:case 27:case 5:var R=Eu(E);break;default:R=E}typeof b=="function"?u.refCleanup=b(R):b.current=R}}catch(P){In(u,h,P)}}function Ii(u,h){var b=u.ref,E=u.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(R){In(u,h,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(R){In(u,h,R)}else b.current=null}function hu(u){var h=u.type,b=u.memoizedProps,E=u.stateNode;try{U1(E,h,b,u)}catch(R){In(u,u.return,R)}}function fm(u,h,b){try{Pm(u.stateNode,u.type,b,h,u)}catch(E){In(u,u.return,E)}}function hm(u){return u.tag===5||u.tag===3||(Hr?u.tag===26:!1)||(La?u.tag===27:!1)||u.tag===4}function qf(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||hm(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!La||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Kf(u,h,b){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?Bm(b,u,h):fv(b,u);else if(!(E===4||La&&E===27)&&(u=u.child,u!==null))for(Kf(u,h,b),u=u.sibling;u!==null;)Kf(u,h,b),u=u.sibling}function pu(u,h,b){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?Im(b,u,h):zm(b,u);else if(!(E===4||La&&E===27)&&(u=u.child,u!==null))for(pu(u,h,b),u=u.sibling;u!==null;)pu(u,h,b),u=u.sibling}function nv(u,h,b){u=u.containerInfo;try{Hm(u,b)}catch(E){In(h,h.return,E)}}function mu(u,h){for(Ol(u.containerInfo),Ji=h;Ji!==null;)if(u=Ji,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,Ji=h;else for(;Ji!==null;){u=Ji;var b=u.alternate;switch(h=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&b!==null){h=void 0;var E=u,R=b.memoizedProps;b=b.memoizedState;var P=E.stateNode;try{var ie=nr(E.type,R,E.elementType===E.type);h=P.getSnapshotBeforeUpdate(ie,b),P.__reactInternalSnapshotBeforeUpdate=h}catch(ye){In(E,E.return,ye)}}break;case 3:(h&1024)!==0&&Oa&&mh(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(a(163))}if(h=u.sibling,h!==null){h.return=u.return,Ji=h;break}Ji=u.return}return ie=Oc,Oc=!1,ie}function Zf(u,h,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:lo(u,b),E&4&&Sd(5,b);break;case 1:if(lo(u,b),E&4)if(u=b.stateNode,h===null)try{u.componentDidMount()}catch(ye){In(b,b.return,ye)}else{var R=nr(b.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(R,h,u.__reactInternalSnapshotBeforeUpdate)}catch(ye){In(b,b.return,ye)}}E&64&&ev(b),E&512&&xc(b,b.return);break;case 3:if(lo(u,b),E&64&&(E=b.updateQueue,E!==null)){if(u=null,b.child!==null)switch(b.child.tag){case 27:case 5:u=Eu(b.child.stateNode);break;case 1:u=b.child.stateNode}try{tt(E,u)}catch(ye){In(b,b.return,ye)}}break;case 26:if(Hr){lo(u,b),E&512&&xc(b,b.return);break}case 27:case 5:lo(u,b),h===null&&E&4&&hu(b),E&512&&xc(b,b.return);break;case 12:lo(u,b);break;case 13:lo(u,b),E&4&&bl(u,b);break;case 22:if(R=b.memoizedState!==null||ma,!R){h=h!==null&&h.memoizedState!==null||Vi;var P=ma,ie=Vi;ma=R,(Vi=h)&&!ie?Sl(u,b,(b.subtreeFlags&8772)!==0):lo(u,b),ma=P,Vi=ie}E&512&&(b.memoizedProps.mode==="manual"?xc(b,b.return):Ii(b,b.return));break;default:lo(u,b)}}function gu(u){var h=u.alternate;h!==null&&(u.alternate=null,gu(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Om(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function Br(u,h,b){for(b=b.child;b!==null;)Jf(u,h,b),b=b.sibling}function Jf(u,h,b){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(Ru,b)}catch{}switch(b.tag){case 26:if(Hr){Vi||Ii(b,h),Br(u,h,b),b.memoizedState?Km(b.memoizedState):b.stateNode&&Qm(b.stateNode);break}case 27:if(La){Vi||Ii(b,h);var E=na,R=Sr;na=b.stateNode,Br(u,h,b),Rv(b.stateNode),na=E,Sr=R;break}case 5:Vi||Ii(b,h);case 6:if(Oa){if(E=na,R=Sr,na=null,Br(u,h,b),na=E,Sr=R,na!==null)if(Sr)try{$i(na,b.stateNode)}catch(P){In(b,h,P)}else try{or(na,b.stateNode)}catch(P){In(b,h,P)}}else Br(u,h,b);break;case 18:Oa&&na!==null&&(Sr?Xm(na,b.stateNode):Ev(na,b.stateNode));break;case 4:Oa?(E=na,R=Sr,na=b.stateNode.containerInfo,Sr=!0,Br(u,h,b),na=E,Sr=R):(Fr&&nv(b.stateNode,b,gh()),Br(u,h,b));break;case 0:case 11:case 14:case 15:Vi||yl(2,b,h),Vi||yl(4,b,h),Br(u,h,b);break;case 1:Vi||(Ii(b,h),E=b.stateNode,typeof E.componentWillUnmount=="function"&&tv(b,h,E)),Br(u,h,b);break;case 21:Br(u,h,b);break;case 22:Vi||Ii(b,h),Vi=(E=Vi)||b.memoizedState!==null,Br(u,h,b),Vi=E;break;default:Br(u,h,b)}}function bl(u,h){if(sr&&h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{bh(u)}catch(b){In(h,h.return,b)}}function vu(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new Pu),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new Pu),h;default:throw Error(a(435,u.tag))}}function wd(u,h){var b=vu(u);h.forEach(function(E){var R=xm.bind(null,u,E);b.has(E)||(b.add(E),E.then(R,R))})}function ir(u,h){var b=h.deletions;if(b!==null)for(var E=0;E<b.length;E++){var R=b[E],P=u,ie=h;if(Oa){var ye=ie;e:for(;ye!==null;){switch(ye.tag){case 27:case 5:na=ye.stateNode,Sr=!1;break e;case 3:na=ye.stateNode.containerInfo,Sr=!0;break e;case 4:na=ye.stateNode.containerInfo,Sr=!0;break e}ye=ye.return}if(na===null)throw Error(a(160));Jf(P,ie,R),na=null,Sr=!1}else Jf(P,ie,R);P=R.alternate,P!==null&&(P.return=null),R.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)_l(h,u),h=h.sibling}function _l(u,h){var b=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:ir(h,u),pr(u),E&4&&(yl(3,u,u.return),Sd(3,u),yl(5,u,u.return));break;case 1:ir(h,u),pr(u),E&512&&(Vi||b===null||Ii(b,b.return)),E&64&&ma&&(u=u.updateQueue,u!==null&&(E=u.callbacks,E!==null&&(b=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:if(Hr){var R=lr;ir(h,u),pr(u),E&512&&(Vi||b===null||Ii(b,b.return)),E&4&&(E=b!==null?b.memoizedState:null,h=u.memoizedState,b===null?h===null?u.stateNode===null?u.stateNode=Zm(R,u.type,u.memoizedProps,u):Jm(R,u.type,u.stateNode):u.stateNode=qm(R,h,u.memoizedProps):E!==h?(E===null?b.stateNode!==null&&Qm(b.stateNode):Km(E),h===null?Jm(R,u.type,u.stateNode):qm(R,h,u.memoizedProps)):h===null&&u.stateNode!==null&&fm(u,u.memoizedProps,b.memoizedProps));break}case 27:if(La&&E&4&&u.alternate===null){R=u.stateNode;var P=u.memoizedProps;try{P1(R),I1(u.type,P,R,u)}catch(_t){In(u,u.return,_t)}}case 5:if(ir(h,u),pr(u),E&512&&(Vi||b===null||Ii(b,b.return)),Oa){if(u.flags&32){h=u.stateNode;try{Pd(h)}catch(_t){In(u,u.return,_t)}}E&4&&u.stateNode!=null&&(h=u.memoizedProps,fm(u,h,b!==null?b.memoizedProps:h)),E&1024&&(Hl=!0)}break;case 6:if(ir(h,u),pr(u),E&4&&Oa){if(u.stateNode===null)throw Error(a(162));E=u.memoizedProps,b=b!==null?b.memoizedProps:E,h=u.stateNode;try{hv(h,b,E)}catch(_t){In(u,u.return,_t)}}break;case 3:if(Hr?($m(),R=lr,lr=_h(h.containerInfo),ir(h,u),lr=R):ir(h,u),pr(u),E&4){if(Oa&&sr&&b!==null&&b.memoizedState.isDehydrated)try{yh(h.containerInfo)}catch(_t){In(u,u.return,_t)}if(Fr){E=h.containerInfo,b=h.pendingChildren;try{Hm(E,b)}catch(_t){In(u,u.return,_t)}}}Hl&&(Hl=!1,pm(u));break;case 4:Hr?(b=lr,lr=_h(u.stateNode.containerInfo),ir(h,u),pr(u),lr=b):(ir(h,u),pr(u)),E&4&&Fr&&nv(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:ir(h,u),pr(u);break;case 13:ir(h,u),pr(u),u.child.flags&8192&&u.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(wo=za()),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,wd(u,E)));break;case 22:E&512&&(Vi||b===null||Ii(b,b.return)),R=u.memoizedState!==null;var ie=b!==null&&b.memoizedState!==null,ye=ma,Oe=Vi;if(ma=ye||R,Vi=Oe||ie,ir(h,u),Vi=Oe,ma=ye,pr(u),h=u.stateNode,h._current=u,h._visibility&=-3,h._visibility|=h._pendingVisibility&2,E&8192&&(h._visibility=R?h._visibility&-2:h._visibility|1,R&&(h=ma||Vi,b===null||ie||h||xu(u)),Oa&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(b=null,Oa)for(h=u;;){if(h.tag===5||Hr&&h.tag===26||La&&h.tag===27){if(b===null){ie=b=h;try{P=ie.stateNode,R?Id(P):km(ie.stateNode,ie.memoizedProps)}catch(_t){In(ie,ie.return,_t)}}}else if(h.tag===6){if(b===null){ie=h;try{var lt=ie.stateNode;R?ph(lt):Ko(lt,ie.memoizedProps)}catch(_t){In(ie,ie.return,_t)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;b===h&&(b=null),h=h.return}b===h&&(b=null),h.sibling.return=h.return,h=h.sibling}}E&4&&(E=u.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,wd(u,b))));break;case 19:ir(h,u),pr(u),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,wd(u,E)));break;case 21:break;default:ir(h,u),pr(u)}}function pr(u){var h=u.flags;if(h&2){try{if(Oa&&(!La||u.tag!==27)){e:{for(var b=u.return;b!==null;){if(hm(b)){var E=b;break e}b=b.return}throw Error(a(160))}switch(E.tag){case 27:if(La){var R=E.stateNode,P=qf(u);pu(u,P,R);break}case 5:var ie=E.stateNode;E.flags&32&&(Pd(ie),E.flags&=-33);var ye=qf(u);pu(u,ye,ie);break;case 3:case 4:var Oe=E.stateNode.containerInfo,lt=qf(u);Kf(u,lt,Oe);break;default:throw Error(a(161))}}}catch(_t){In(u,u.return,_t)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function pm(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;pm(h),h.tag===5&&h.flags&1024&&mi(h.stateNode),u=u.sibling}}function lo(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Zf(u,h.alternate,h),h=h.sibling}function xu(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:yl(4,h,h.return),xu(h);break;case 1:Ii(h,h.return);var b=h.stateNode;typeof b.componentWillUnmount=="function"&&tv(h,h.return,b),xu(h);break;case 26:case 27:case 5:Ii(h,h.return),xu(h);break;case 22:Ii(h,h.return),h.memoizedState===null&&xu(h);break;default:xu(h)}u=u.sibling}}function Sl(u,h,b){for(b=b&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var E=h.alternate,R=u,P=h,ie=P.flags;switch(P.tag){case 0:case 11:case 15:Sl(R,P,b),Sd(4,P);break;case 1:if(Sl(R,P,b),E=P,R=E.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(lt){In(E,E.return,lt)}if(E=P,R=E.updateQueue,R!==null){var ye=E.stateNode;try{var Oe=R.shared.hiddenCallbacks;if(Oe!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Oe.length;R++)me(Oe[R],ye)}catch(lt){In(E,E.return,lt)}}b&&ie&64&&ev(P),xc(P,P.return);break;case 26:case 27:case 5:Sl(R,P,b),b&&E===null&&ie&4&&hu(P),xc(P,P.return);break;case 12:Sl(R,P,b);break;case 13:Sl(R,P,b),b&&ie&4&&bl(R,P);break;case 22:P.memoizedState===null&&Sl(R,P,b),xc(P,P.return);break;default:Sl(R,P,b)}h=h.sibling}}function mm(u,h){var b=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==b&&(u!=null&&u.refCount++,b!=null&&cu(b))}function Qf(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&cu(u))}function ko(u,h,b,E){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)$f(u,h,b,E),h=h.sibling}function $f(u,h,b,E){var R=h.flags;switch(h.tag){case 0:case 11:case 15:ko(u,h,b,E),R&2048&&Sd(9,h);break;case 3:ko(u,h,b,E),R&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&cu(u)));break;case 12:if(R&2048){ko(u,h,b,E),u=h.stateNode;try{var P=h.memoizedProps,ie=P.id,ye=P.onPostCommit;typeof ye=="function"&&ye(ie,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Oe){In(h,h.return,Oe)}}else ko(u,h,b,E);break;case 23:break;case 22:P=h.stateNode,h.memoizedState!==null?P._visibility&4?ko(u,h,b,E):wl(u,h):P._visibility&4?ko(u,h,b,E):(P._visibility|=4,Va(u,h,b,E,(h.subtreeFlags&10256)!==0)),R&2048&&mm(h.alternate,h);break;case 24:ko(u,h,b,E),R&2048&&Qf(h.alternate,h);break;default:ko(u,h,b,E)}}function Va(u,h,b,E,R){for(R=R&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var P=u,ie=h,ye=b,Oe=E,lt=ie.flags;switch(ie.tag){case 0:case 11:case 15:Va(P,ie,ye,Oe,R),Sd(8,ie);break;case 23:break;case 22:var _t=ie.stateNode;ie.memoizedState!==null?_t._visibility&4?Va(P,ie,ye,Oe,R):wl(P,ie):(_t._visibility|=4,Va(P,ie,ye,Oe,R)),R&&lt&2048&&mm(ie.alternate,ie);break;case 24:Va(P,ie,ye,Oe,R),R&&lt&2048&&Qf(ie.alternate,ie);break;default:Va(P,ie,ye,Oe,R)}h=h.sibling}}function wl(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var b=u,E=h,R=E.flags;switch(E.tag){case 22:wl(b,E),R&2048&&mm(E.alternate,E);break;case 24:wl(b,E),R&2048&&Qf(E.alternate,E);break;default:wl(b,E)}h=h.sibling}}function wa(u){if(u.subtreeFlags&Lc)for(u=u.child;u!==null;)yc(u),u=u.sibling}function yc(u){switch(u.tag){case 26:wa(u),u.flags&Lc&&(u.memoizedState!==null?tg(lr,u.memoizedState,u.memoizedProps):Xi(u.type,u.memoizedProps));break;case 5:wa(u),u.flags&Lc&&Xi(u.type,u.memoizedProps);break;case 3:case 4:if(Hr){var h=lr;lr=_h(u.stateNode.containerInfo),wa(u),lr=h}else wa(u);break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=Lc,Lc=16777216,wa(u),Lc=h):wa(u));break;default:wa(u)}}function eh(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Ml(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var E=h[b];Ji=E,El(E,u)}eh(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Md(u),u=u.sibling}function Md(u){switch(u.tag){case 0:case 11:case 15:Ml(u),u.flags&2048&&yl(9,u,u.return);break;case 3:Ml(u);break;case 12:Ml(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&4&&(u.return===null||u.return.tag!==13)?(h._visibility&=-5,yu(u)):Ml(u);break;default:Ml(u)}}function yu(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var E=h[b];Ji=E,El(E,u)}eh(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:yl(8,h,h.return),yu(h);break;case 22:b=h.stateNode,b._visibility&4&&(b._visibility&=-5,yu(h));break;default:yu(h)}u=u.sibling}}function El(u,h){for(;Ji!==null;){var b=Ji;switch(b.tag){case 0:case 11:case 15:yl(8,b,h);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:cu(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,Ji=E;else e:for(b=u;Ji!==null;){E=Ji;var R=E.sibling,P=E.return;if(gu(E),E===b){Ji=null;break e}if(R!==null){R.return=P,Ji=R;break e}Ji=P}}}function th(u){var h=Dm(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(a(364));return h}if(u=Cc(u),u===null)throw Error(a(362));return u.stateNode.current}function bu(u,h){var b=u.tag;switch(h.$$typeof){case Qd:if(u.type===h.value)return!0;break;case Uh:e:{for(h=h.value,u=[u,0],b=0;b<u.length;){var E=u[b++],R=E.tag,P=u[b++],ie=h[P];if(R!==5&&R!==26&&R!==27||!xo(E)){for(;ie!=null&&bu(E,ie);)P++,ie=h[P];if(P===h.length){h=!0;break e}else for(E=E.child;E!==null;)u.push(E,P),E=E.sibling}}h=!1}return h;case Oh:if((b===5||b===26||b===27)&&D1(u.stateNode,h.value))return!0;break;case si:if((b===5||b===6||b===26||b===27)&&(u=zd(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case Hn:if((b===5||b===26||b===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Tl(u){switch(u.$$typeof){case Qd:return"<"+(o(u.value)||"Unknown")+">";case Uh:return":has("+(Tl(u)||"")+")";case Oh:return'[role="'+u.value+'"]';case si:return'"'+u.value+'"';case Hn:return'[data-testname="'+u.value+'"]';default:throw Error(a(365))}}function iv(u,h){var b=[];u=[u,0];for(var E=0;E<u.length;){var R=u[E++],P=R.tag,ie=u[E++],ye=h[ie];if(P!==5&&P!==26&&P!==27||!xo(R)){for(;ye!=null&&bu(R,ye);)ie++,ye=h[ie];if(ie===h.length)b.push(R);else for(R=R.child;R!==null;)u.push(R,ie),R=R.sibling}}return b}function ar(u,h){if(!vo)throw Error(a(363));u=th(u),u=iv(u,h),h=[],u=Array.from(u);for(var b=0;b<u.length;){var E=u[b++],R=E.tag;if(R===5||R===26||R===27)xo(E)||h.push(E.stateNode);else for(E=E.child;E!==null;)u.push(E),E=E.sibling}return h}function rr(){if((nn&2)!==0&&An!==0)return An&-An;if(sn.T!==null){var u=br;return u!==0?u:Ae()}return hs()}function co(){wr===0&&(wr=(An&536870912)===0||Yn?F():536870912);var u=Kr.current;return u!==null&&(u.flags|=32),wr}function Ga(u,h,b){(u===Dn&&gi===2||u.cancelPendingCommit!==null)&&(Bs(u,0),Is(u,An,wr,!1)),Y(u,b),((nn&2)===0||u!==Dn)&&(u===Dn&&((nn&2)===0&&(Ws|=b),Vn===4&&Is(u,An,wr,!1)),We(u))}function Ed(u,h,b){if((nn&6)!==0)throw Error(a(327));var E=!b&&(h&60)===0&&(h&u.expiredLanes)===0||B(u,h),R=E?ho(u,h):uo(u,h,!0),P=E;do{if(R===0){Zr&&!E&&Is(u,h,0,!1);break}else if(R===6)Is(u,h,0,!oi);else{if(b=u.current.alternate,P&&!av(b)){R=uo(u,h,!1),P=!1;continue}if(R===2){if(P=h,u.errorRecoveryDisabledLanes&P)var ie=0;else ie=u.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){h=ie;e:{var ye=u;R=Iu;var Oe=sr&&ye.current.memoizedState.isDehydrated;if(Oe&&(Bs(ye,ie).flags|=256),ie=uo(ye,ie,!1),ie!==2){if(tl&&!Oe){ye.errorRecoveryDisabledLanes|=P,Ws|=P,R=4;break e}P=Qr,Qr=R,P!==null&&Fo(P)}R=ie}if(P=!1,R!==2)continue}}if(R===1){Bs(u,0),Is(u,h,0,!0);break}e:{switch(E=u,R){case 0:case 1:throw Error(a(345));case 4:if((h&4194176)===h){Is(E,h,wr,!oi);break e}break;case 2:Qr=null;break;case 3:case 5:break;default:throw Error(a(329))}if(E.finishedWork=b,E.finishedLanes=h,(h&62914560)===h&&(P=wo+300-za(),10<P)){if(Is(E,h,wr,!oi),O(E,0)!==0)break e;E.timeoutHandle=Rm(nh.bind(null,E,b,Qr,Xs,Bu,h,wr,Ws,nl,oi,2,-0,0),P);break e}nh(E,b,Qr,Xs,Bu,h,wr,Ws,nl,oi,0,-0,0)}}break}while(!0);We(u)}function Fo(u){Qr===null?Qr=u:Qr.push.apply(Qr,u)}function nh(u,h,b,E,R,P,ie,ye,Oe,lt,_t,Ot,Pt){var pn=h.subtreeFlags;if((pn&8192||(pn&16785408)===16785408)&&(jr(),yc(h),h=dh(),h!==null)){u.cancelPendingCommit=h(Ti.bind(null,u,b,E,R,ie,ye,Oe,1,Ot,Pt)),Is(u,P,ie,!lt);return}Ti(u,b,E,R,ie,ye,Oe,_t,Ot,Pt)}function av(u){for(var h=u;;){var b=h.tag;if((b===0||b===11||b===15)&&h.flags&16384&&(b=h.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var R=b[E],P=R.getSnapshot;R=R.value;try{if(!Vr(P(),R))return!1}catch{return!1}}if(b=h.child,h.subtreeFlags&16384&&b!==null)b.return=h,h=b;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Is(u,h,b,E){h&=~Za,h&=~Ws,u.suspendedLanes|=h,u.pingedLanes&=~h,E&&(u.warmLanes|=h),E=u.expirationTimes;for(var R=h;0<R;){var P=31-xr(R),ie=1<<P;E[P]=-1,R&=~ie}b!==0&&K(u,b,h)}function gm(){return(nn&6)===0?(Se(0),!1):!0}function mr(){if(mn!==null){if(gi===0)var u=mn.return;else u=mn,Zi=jl=null,Ha(u),bo=null,gs=0,u=mn;for(;u!==null;)dm(u.alternate,u),u=u.return;mn=null}}function Bs(u,h){u.finishedWork=null,u.finishedLanes=0;var b=u.timeoutHandle;b!==Ac&&(u.timeoutHandle=Ac,Ld(b)),b=u.cancelPendingCommit,b!==null&&(u.cancelPendingCommit=null,b()),mr(),Dn=u,mn=b=Wa(u.current,null),An=h,gi=0,ia=null,oi=!1,Zr=B(u,h),tl=!1,nl=wr=Za=Ws=Jr=Vn=0,Qr=Iu=null,Bu=!1,(h&8)!==0&&(h|=h&32);var E=u.entangledLanes;if(E!==0)for(u=u.entanglements,E&=h;0<E;){var R=31-xr(E),P=1<<R;h|=u[R],E&=~P}return Gs=h,Te(),b}function bc(u,h){yn=null,sn.H=qn,h===fi?(h=Ie(),gi=3):h===rg?(h=Ie(),gi=4):gi=h===Iv?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,ia=h,mn===null&&(Vn=1,so(u,ue(h,u.current)))}function Td(){var u=Kr.current;return u===null?!0:(An&4194176)===An?vs===null:(An&62914560)===An||(An&536870912)!==0?u===vs:!1}function _u(){var u=sn.H;return sn.H=qn,u===null?qn:u}function kr(){var u=sn.A;return sn.A=Dh,u}function gr(){Vn=4,oi||(An&4194176)!==An&&Kr.current!==null||(Zr=!0),(Jr&134217727)===0&&(Ws&134217727)===0||Dn===null||Is(Dn,An,wr,!1)}function uo(u,h,b){var E=nn;nn|=2;var R=_u(),P=kr();(Dn!==u||An!==h)&&(Xs=null,Bs(u,h)),h=!1;var ie=Vn;e:do try{if(gi!==0&&mn!==null){var ye=mn,Oe=ia;switch(gi){case 8:mr(),ie=6;break e;case 3:case 2:case 6:Kr.current===null&&(h=!0);var lt=gi;if(gi=0,ia=null,Al(u,ye,Oe,lt),b&&Zr){ie=0;break e}break;default:lt=gi,gi=0,ia=null,Al(u,ye,Oe,lt)}}fo(),ie=Vn;break}catch(_t){bc(u,_t)}while(!0);return h&&u.shellSuspendCounter++,Zi=jl=null,nn=E,sn.H=R,sn.A=P,mn===null&&(Dn=null,An=0,Te()),ie}function fo(){for(;mn!==null;)vm(mn)}function ho(u,h){var b=nn;nn|=2;var E=_u(),R=kr();Dn!==u||An!==h?(Xs=null,Gi=za()+500,Bs(u,h)):Zr=B(u,h);e:do try{if(gi!==0&&mn!==null){h=mn;var P=ia;t:switch(gi){case 1:gi=0,ia=null,Al(u,h,P,1);break;case 2:if(ge(P)){gi=0,ia=null,ih(h);break}h=function(){gi===2&&Dn===u&&(gi=7),We(u)},P.then(h,h);break e;case 3:gi=7;break e;case 4:gi=5;break e;case 7:ge(P)?(gi=0,ia=null,ih(h)):(gi=0,ia=null,Al(u,h,P,7));break;case 5:var ie=null;switch(mn.tag){case 26:ie=mn.memoizedState;case 5:case 27:var ye=mn,Oe=ye.type,lt=ye.pendingProps;if(ie?eg(ie):qo(Oe,lt)){gi=0,ia=null;var _t=ye.sibling;if(_t!==null)mn=_t;else{var Ot=ye.return;Ot!==null?(mn=Ot,Ad(Ot)):mn=null}break t}}gi=0,ia=null,Al(u,h,P,5);break;case 6:gi=0,ia=null,Al(u,h,P,6);break;case 8:mr(),Vn=6;break e;default:throw Error(a(462))}}jo();break}catch(Pt){bc(u,Pt)}while(!0);return Zi=jl=null,sn.H=E,sn.A=R,nn=b,mn!==null?0:(Dn=null,An=0,Te(),Vn)}function jo(){for(;mn!==null&&!Uv();)vm(mn)}function vm(u){var h=Z0(u.alternate,u,Gs);u.memoizedProps=u.pendingProps,h===null?Ad(u):mn=h}function ih(u){var h=u,b=h.alternate;switch(h.tag){case 15:case 0:h=xd(b,h,h.pendingProps,h.type,void 0,An);break;case 11:h=xd(b,h,h.pendingProps,h.type.render,h.ref,An);break;case 5:Ha(h);default:dm(b,h),h=mn=Go(h,Gs),h=Z0(b,h,Gs)}u.memoizedProps=u.pendingProps,h===null?Ad(u):mn=h}function Al(u,h,b,E){Zi=jl=null,Ha(h),bo=null,gs=0;var R=h.return;try{if(Vf(u,R,h,b,An)){Vn=1,so(u,ue(b,u.current)),mn=null;return}}catch(P){if(R!==null)throw mn=R,P;Vn=1,so(u,ue(b,u.current)),mn=null;return}h.flags&32768?(Yn||E===1?u=!0:Zr||(An&536870912)!==0?u=!1:(oi=u=!0,(E===2||E===3||E===6)&&(E=Kr.current,E!==null&&E.tag===13&&(E.flags|=16384))),Ma(h,u)):Ad(h)}function Ad(u){var h=u;do{if((h.flags&32768)!==0){Ma(h,oi);return}u=h.return;var b=Q0(h.alternate,h,Gs);if(b!==null){mn=b;return}if(h=h.sibling,h!==null){mn=h;return}mn=h=u}while(h!==null);Vn===0&&(Vn=5)}function Ma(u,h){do{var b=$0(u.alternate,u);if(b!==null){b.flags&=32767,mn=b;return}if(b=u.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!h&&(u=u.sibling,u!==null)){mn=u;return}mn=u=b}while(u!==null);Vn=6,mn=null}function Ti(u,h,b,E,R,P,ie,ye,Oe,lt){var _t=sn.T,Ot=pa();try{Xa(2),sn.T=null,kn(u,h,b,E,Ot,R,P,ie,ye,Oe,lt)}finally{sn.T=_t,Xa(Ot)}}function kn(u,h,b,E,R,P,ie,ye){do Ea();while(il!==null);if((nn&6)!==0)throw Error(a(327));var Oe=u.finishedWork;if(E=u.finishedLanes,Oe===null)return null;if(u.finishedWork=null,u.finishedLanes=0,Oe===u.current)throw Error(a(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var lt=Oe.lanes|Oe.childLanes;if(lt|=Uu,q(u,E,lt,P,ie,ye),u===Dn&&(mn=Dn=null,An=0),(Oe.subtreeFlags&10256)===0&&(Oe.flags&10256)===0||ys||(ys=!0,Lh=lt,Pc=b,Cd(wh,function(){return Ea(),null})),b=(Oe.flags&15990)!==0,(Oe.subtreeFlags&15990)!==0||b?(b=sn.T,sn.T=null,P=pa(),Xa(2),ie=nn,nn|=4,mu(u,Oe),_l(Oe,u),Cm(u.containerInfo),u.current=Oe,Zf(u,Oe.alternate,Oe),Ov(),nn=ie,Xa(P),sn.T=b):u.current=Oe,ys?(ys=!1,il=u,zc=E):Ho(u,lt),lt=u.pendingLanes,lt===0&&($r=null),G(Oe.stateNode),We(u),h!==null)for(R=u.onRecoverableError,Oe=0;Oe<h.length;Oe++)lt=h[Oe],R(lt.value,{componentStack:lt.stack});return(zc&3)!==0&&Ea(),lt=u.pendingLanes,(E&4194218)!==0&&(lt&42)!==0?u===cr?Ic++:(Ic=0,cr=u):Ic=0,Se(0),null}function Ho(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,cu(h)))}function Ea(){if(il!==null){var u=il,h=Lh;Lh=0;var b=ce(zc),E=32>b?32:b;b=sn.T;var R=pa();try{if(Xa(E),sn.T=null,il===null)var P=!1;else{E=Pc,Pc=null;var ie=il,ye=zc;if(il=null,zc=0,(nn&6)!==0)throw Error(a(331));var Oe=nn;if(nn|=4,Md(ie.current),$f(ie,ie.current,ye,E),nn=Oe,Se(0,!1),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(Ru,ie)}catch{}P=!0}return P}finally{Xa(R),sn.T=b,Ho(u,h)}}return!1}function ah(u,h,b){h=ue(b,h),h=Ps(u.stateNode,h,2),u=Fe(u,h,2),u!==null&&(Y(u,2),We(u))}function In(u,h,b){if(u.tag===3)ah(u,u,b);else for(;h!==null;){if(h.tag===3){ah(h,u,b);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&($r===null||!$r.has(E))){u=ue(b,u),b=oo(2),E=Fe(h,b,2),E!==null&&(ha(b,E,h,u),Y(E,2),We(E));break}}h=h.return}}function rh(u,h,b){var E=u.pingCache;if(E===null){E=u.pingCache=new Bn;var R=new Set;E.set(h,R)}else R=E.get(h),R===void 0&&(R=new Set,E.set(h,R));R.has(b)||(tl=!0,R.add(b),u=rv.bind(null,u,h,b),h.then(u,u))}function rv(u,h,b){var E=u.pingCache;E!==null&&E.delete(h),u.pingedLanes|=u.suspendedLanes&b,u.warmLanes&=~b,Dn===u&&(An&b)===b&&(Vn===4||Vn===3&&(An&62914560)===An&&300>za()-wo?(nn&2)===0&&Bs(u,0):Za|=b,nl===An&&(nl=0)),We(u)}function _c(u,h){h===0&&(h=L()),u=$e(u,h),u!==null&&(Y(u,h),We(u))}function Sc(u){var h=u.memoizedState,b=0;h!==null&&(b=h.retryLane),_c(u,b)}function xm(u,h){var b=0;switch(u.tag){case 13:var E=u.stateNode,R=u.memoizedState;R!==null&&(b=R.retryLane);break;case 19:E=u.stateNode;break;case 22:E=u.stateNode._retryCache;break;default:throw Error(a(314))}E!==null&&E.delete(h),_c(u,b)}function Cd(u,h){return Nu(u,h)}function ym(u,h,b,E){this.tag=u,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vo(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Wa(u,h){var b=u.alternate;return b===null?(b=t(u.tag,h,u.key,u.mode),b.elementType=u.elementType,b.type=u.type,b.stateNode=u.stateNode,b.alternate=u,u.alternate=b):(b.pendingProps=h,b.type=u.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=u.flags&31457280,b.childLanes=u.childLanes,b.lanes=u.lanes,b.child=u.child,b.memoizedProps=u.memoizedProps,b.memoizedState=u.memoizedState,b.updateQueue=u.updateQueue,h=u.dependencies,b.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},b.sibling=u.sibling,b.index=u.index,b.ref=u.ref,b.refCleanup=u.refCleanup,b}function Go(u,h){u.flags&=31457282;var b=u.alternate;return b===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=b.childLanes,u.lanes=b.lanes,u.child=b.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=b.memoizedProps,u.memoizedState=b.memoizedState,u.updateQueue=b.updateQueue,u.type=b.type,h=b.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function fs(u,h,b,E,R,P){var ie=0;if(E=u,typeof u=="function")Vo(u)&&(ie=1);else if(typeof u=="string")ie=Hr&&La?Ym(u,b,Aa.current)?26:Au(u)?27:5:Hr?Ym(u,b,Aa.current)?26:5:La&&Au(u)?27:5;else e:switch(u){case wu:return Wo(b.children,R,P,h);case Mm:ie=8,R|=24;break;case Em:return u=t(12,b,h,R|2),u.elementType=Em,u.lanes=P,u;case oh:return u=t(13,b,h,R),u.elementType=oh,u.lanes=P,u;case Rl:return u=t(19,b,h,R),u.elementType=Rl,u.lanes=P,u;case Dd:return sh(b,R,P,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case lv:case po:ie=10;break e;case Nl:ie=9;break e;case Mu:ie=11;break e;case Rd:ie=14;break e;case Fs:ie=16,E=null;break e}ie=29,b=Error(a(130,u===null?"null":typeof u,"")),E=null}return h=t(ie,b,h,R),h.elementType=u,h.type=E,h.lanes=P,h}function Wo(u,h,b,E){return u=t(7,u,E,h),u.lanes=b,u}function sh(u,h,b,E){u=t(22,u,E,h),u.elementType=Dd,u.lanes=b;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var P=R._current;if(P===null)throw Error(a(456));if((R._pendingVisibility&2)===0){var ie=$e(P,2);ie!==null&&(R._pendingVisibility|=2,Ga(ie,P,2))}},attach:function(){var P=R._current;if(P===null)throw Error(a(456));if((R._pendingVisibility&2)!==0){var ie=$e(P,2);ie!==null&&(R._pendingVisibility&=-3,Ga(ie,P,2))}}};return u.stateNode=R,u}function Cl(u,h,b){return u=t(6,u,null,h),u.lanes=b,u}function Su(u,h,b){return h=t(4,u.children!==null?u.children:[],u.key,h),h.lanes=b,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function wc(u,h,b,E,R,P,ie,ye){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ac,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=E,this.onUncaughtError=R,this.onCaughtError=P,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function Ta(u,h,b,E,R,P,ie,ye,Oe,lt,_t,Ot){return u=new wc(u,h,b,ie,ye,Oe,lt,Ot),h=1,P===!0&&(h|=24),P=t(3,null,null,h),u.current=P,P.stateNode=u,h=Wf(),h.refCount++,u.pooledCache=h,h.refCount++,P.memoizedState={element:E,isDehydrated:b,cache:h},ht(P),u}function Nd(u){return u?(u=Nc,u):Nc}function bm(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=_(h),u=u!==null?S(u):null,u===null?null:Eu(u.stateNode)}function sv(u,h,b,E,R,P){R=Nd(R),E.context===null?E.context=R:E.pendingContext=R,E=ke(h),E.payload={element:b},P=P===void 0?null:P,P!==null&&(E.callback=P),b=Fe(u,E,h),b!==null&&(Ga(b,u,h),Ze(b,u,h))}function ov(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var b=u.retryLane;u.retryLane=b!==0&&b<h?b:h}}function _m(u,h){ov(u,h),(u=u.alternate)&&ov(u,h)}var tn={},Sm=jp(),Ua=pR(),Mc=Object.assign,wm=Symbol.for("react.element"),Xo=Symbol.for("react.transitional.element"),ks=Symbol.for("react.portal"),wu=Symbol.for("react.fragment"),Mm=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),lv=Symbol.for("react.provider"),Nl=Symbol.for("react.consumer"),po=Symbol.for("react.context"),Mu=Symbol.for("react.forward_ref"),oh=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),Rd=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),Dd=Symbol.for("react.offscreen"),cv=Symbol.for("react.memo_cache_sentinel"),Tm=Symbol.iterator,Ec=Symbol.for("react.client.reference"),sn=Sm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lh,Am,Dl=!1,Ul=Array.isArray,ch=e.rendererVersion,Ud=e.rendererPackageName,Od=e.extraDevToolsConfig,Eu=e.getPublicInstance,Tc=e.getRootHostContext,uv=e.getChildHostContext,Ol=e.prepareForCommit,Cm=e.resetAfterCommit,Nm=e.createInstance,mo=e.appendInitialChild,Yo=e.finalizeInitialChildren,Ll=e.shouldSetTextContent,uh=e.createTextInstance,Rm=e.scheduleTimeout,Ld=e.cancelTimeout,Ac=e.noTimeout,go=e.isPrimaryRenderer;e.warnsIfNotActing;var Oa=e.supportsMutation,Fr=e.supportsPersistence,sr=e.supportsHydration,Dm=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Um=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Xa=e.setCurrentUpdatePriority,pa=e.getCurrentUpdatePriority,hs=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var zl=e.shouldAttemptEagerTransition,Om=e.detachDeletedInstance;e.requestPostPaintCallback;var dv=e.maySuspendCommit,qo=e.preloadInstance,jr=e.startSuspendingCommit,Xi=e.suspendInstance,dh=e.waitForCommitToBeReady,vr=e.NotPendingTransition,cn=e.HostTransitionContext,mi=e.resetFormInstance;e.bindToConsole;var ca=e.supportsMicrotasks,fh=e.scheduleMicrotask,vo=e.supportsTestSelectors,Cc=e.findFiberRoot,hh=e.getBoundingRect,zd=e.getTextContent,xo=e.isHiddenSubtree,D1=e.matchAccessibilityRole,Yi=e.setFocusIfFocusable,Lm=e.setupIntersectionObserver,zm=e.appendChild,fv=e.appendChildToContainer,hv=e.commitTextUpdate,U1=e.commitMount,Pm=e.commitUpdate,Im=e.insertBefore,Bm=e.insertInContainerBefore,or=e.removeChild,$i=e.removeChildFromContainer,Pd=e.resetTextContent,Id=e.hideInstance,ph=e.hideTextInstance,km=e.unhideInstance,Ko=e.unhideTextInstance,mh=e.clearContainer,Fm=e.cloneInstance,gh=e.createContainerChildSet,jm=e.appendChildToContainerChildSet,pv=e.finalizeContainerChildren,Hm=e.replaceContainerChildren,Vm=e.cloneHiddenInstance,Gm=e.cloneHiddenTextInstance,vh=e.isSuspenseInstancePending,Bd=e.isSuspenseInstanceFallback,mv=e.getSuspenseInstanceFallbackErrorDetails,O1=e.registerSuspenseInstanceRetry,gv=e.canHydrateFormStateMarker,vv=e.isFormStateMarkerMatching,Wm=e.getNextHydratableSibling,xh=e.getFirstHydratableChild,xv=e.getFirstHydratableChildWithinContainer,yv=e.getFirstHydratableChildWithinSuspenseInstance,bv=e.canHydrateInstance,_v=e.canHydrateTextInstance,Sv=e.canHydrateSuspenseInstance,L1=e.hydrateInstance,wv=e.hydrateTextInstance,Tu=e.hydrateSuspenseInstance,Mv=e.getNextHydratableInstanceAfterSuspenseInstance,yh=e.commitHydratedContainer,bh=e.commitHydratedSuspenseInstance,Ev=e.clearSuspenseBoundary,Xm=e.clearSuspenseBoundaryFromContainer,Tv=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Av=e.validateHydratableInstance,Cv=e.validateHydratableTextInstance,Hr=e.supportsResources,Ym=e.isHostHoistableType,_h=e.getHoistableRoot,Sh=e.getResource,qm=e.acquireResource,Km=e.releaseResource,Zm=e.hydrateHoistable,Jm=e.mountHoistable,Qm=e.unmountHoistable,z1=e.createHoistableInstance,$m=e.prepareToCommitHoistables,Nv=e.mayResourceSuspendCommit,eg=e.preloadResource,tg=e.suspendResource,La=e.supportsSingletons,ng=e.resolveSingletonInstance,P1=e.clearSingleton,I1=e.acquireSingletonInstance,Rv=e.releaseSingletonInstance,Au=e.isHostSingletonType,kd=[],Zo=-1,Nc={},xr=Math.clz32?Math.clz32:D,Fd=Math.log,Dv=Math.LN2,Cu=128,jd=4194304,Nu=Ua.unstable_scheduleCallback,Hd=Ua.unstable_cancelCallback,Uv=Ua.unstable_shouldYield,Ov=Ua.unstable_requestPaint,za=Ua.unstable_now,ig=Ua.unstable_ImmediatePriority,Lv=Ua.unstable_UserBlockingPriority,wh=Ua.unstable_NormalPriority,Mh=Ua.unstable_IdlePriority,zv=Ua.log,ag=Ua.unstable_setDisableYieldValue,Ru=null,yr=null,Vr=typeof Object.is=="function"?Object.is:Q,Eh=new WeakMap,Bi=[],qi=0,Vd=null,Gd=0,Gr=[],Wr=0,js=null,yo=1,ps="",Aa=T(null),Wd=T(null),Hs=T(null),Du=T(null),Ya=null,Pa=null,Yn=!1,Xr=null,ms=!1,Xd=Error(a(519)),Yr=[],Pl=0,Uu=0,Ou=null,Rc=null,Yd=!1,qd=!1,Vs=!1,Il=0,Kd=null,Th=0,br=0,Bl=null,Jo=!1,Lu=!1,Zd=Object.prototype.hasOwnProperty,fi=Error(a(460)),rg=Error(a(474)),Ah={then:function(){}},Dc=null,bo=null,gs=0,kl=dn(!0),sg=dn(!1),_o=T(null),qr=T(0),Kr=T(null),vs=null,ua=T(0),So=0,yn=null,ti=null,ea=null,xs=!1,ki=!1,Qo=!1,Jd=0,Ki=0,zu=null,Pv=0,Ch=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},qn={readContext:Da,use:kt,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on};qn.useCacheRefresh=on,qn.useMemoCache=on,qn.useHostTransitionStatus=on,qn.useFormState=on,qn.useActionState=on,qn.useOptimistic=on;var da={readContext:Da,use:kt,useCallback:function(u,h){return hi().memoizedState=[u,h===void 0?null:h],u},useContext:Da,useEffect:fr,useImperativeHandle:function(u,h,b){b=b!=null?b.concat([u]):null,Oi(4194308,4,Et.bind(null,h,u),b)},useLayoutEffect:function(u,h){return Oi(4194308,4,u,h)},useInsertionEffect:function(u,h){Oi(4,2,u,h)},useMemo:function(u,h){var b=hi();h=h===void 0?null:h;var E=u();if(Qo){W(!0);try{u()}finally{W(!1)}}return b.memoizedState=[E,h],E},useReducer:function(u,h,b){var E=hi();if(b!==void 0){var R=b(h);if(Qo){W(!0);try{b(h)}finally{W(!1)}}}else R=h;return E.memoizedState=E.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},E.queue=u,u=u.dispatch=Sa.bind(null,yn,u),[E.memoizedState,u]},useRef:function(u){var h=hi();return u={current:u},h.memoizedState=u},useState:function(u){u=Bt(u);var h=u.queue,b=ao.bind(null,yn,h);return h.dispatch=b,[u.memoizedState,b]},useDebugValue:Ct,useDeferredValue:function(u,h){var b=hi();return Vt(b,u,h)},useTransition:function(){var u=Bt(!1);return u=Wt.bind(null,yn,u.queue,!0,!1),hi().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,b){var E=yn,R=hi();if(Yn){if(b===void 0)throw Error(a(407));b=b()}else{if(b=h(),Dn===null)throw Error(a(349));(An&60)!==0||At(E,h,b)}R.memoizedState=b;var P={value:b,getSnapshot:h};return R.queue=P,fr(zt.bind(null,E,P,u),[u]),E.flags|=2048,di(9,Mt.bind(null,E,P,b,h),{destroy:void 0},null),b},useId:function(){var u=hi(),h=Dn.identifierPrefix;if(Yn){var b=ps,E=yo;b=(E&~(1<<32-xr(E)-1)).toString(32)+b,h=":"+h+"R"+b,b=Jd++,0<b&&(h+="H"+b.toString(32)),h+=":"}else b=Pv++,h=":"+h+"r"+b.toString(32)+":";return u.memoizedState=h},useCacheRefresh:function(){return hi().memoizedState=cs.bind(null,yn)}};da.useMemoCache=Z,da.useHostTransitionStatus=ji,da.useFormState=Hi,da.useActionState=Hi,da.useOptimistic=function(u){var h=hi();h.memoizedState=h.baseState=u;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=b,h=fc.bind(null,yn,!0,b),b.dispatch=h,[u,h]};var qa={readContext:Da,use:kt,useCallback:mt,useContext:Da,useEffect:ae,useImperativeHandle:Dt,useInsertionEffect:De,useLayoutEffect:st,useMemo:jt,useReducer:Ge,useRef:Mi,useState:function(){return Ge(Me)},useDebugValue:Ct,useDeferredValue:function(u,h){var b=zn();return On(b,ti.memoizedState,u,h)},useTransition:function(){var u=Ge(Me)[0],h=zn().memoizedState;return[typeof u=="boolean"?u:ba(u),h]},useSyncExternalStore:wt,useId:pi};qa.useCacheRefresh=Ei,qa.useMemoCache=Z,qa.useHostTransitionStatus=ji,qa.useFormState=Na,qa.useActionState=Na,qa.useOptimistic=function(u,h){var b=zn();return $t(b,ti,u,h)};var Fl={readContext:Da,use:kt,useCallback:mt,useContext:Da,useEffect:ae,useImperativeHandle:Dt,useInsertionEffect:De,useLayoutEffect:st,useMemo:jt,useReducer:Ue,useRef:Mi,useState:function(){return Ue(Me)},useDebugValue:Ct,useDeferredValue:function(u,h){var b=zn();return ti===null?Vt(b,u,h):On(b,ti.memoizedState,u,h)},useTransition:function(){var u=Ue(Me)[0],h=zn().memoizedState;return[typeof u=="boolean"?u:ba(u),h]},useSyncExternalStore:wt,useId:pi};Fl.useCacheRefresh=Ei,Fl.useMemoCache=Z,Fl.useHostTransitionStatus=ji,Fl.useFormState=Sn,Fl.useActionState=Sn,Fl.useOptimistic=function(u,h){var b=zn();return ti!==null?$t(b,ti,u,h):(b.baseState=u,[u,b.queue.dispatch])};var Nh={isMounted:function(u){return(u=u._reactInternals)?g(u)===u:!1},enqueueSetState:function(u,h,b){u=u._reactInternals;var E=rr(),R=ke(E);R.payload=h,b!=null&&(R.callback=b),h=Fe(u,R,E),h!==null&&(Ga(h,u,E),Ze(h,u,E))},enqueueReplaceState:function(u,h,b){u=u._reactInternals;var E=rr(),R=ke(E);R.tag=1,R.payload=h,b!=null&&(R.callback=b),h=Fe(u,R,E),h!==null&&(Ga(h,u,E),Ze(h,u,E))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var b=rr(),E=ke(b);E.tag=2,h!=null&&(E.callback=h),h=Fe(u,E,b),h!==null&&(Ga(h,u,b),Ze(h,u,b))}},og=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Iv=Error(a(461)),ta=!1,Ka={dehydrated:null,treeContext:null,retryLane:0},_r=T(null),jl=null,Zi=null,Bv=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(b,E){u.push(E)}};this.abort=function(){h.aborted=!0,u.forEach(function(b){return b()})}},$o=Ua.unstable_scheduleCallback,Uc=Ua.unstable_NormalPriority,ri={$$typeof:po,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Rh=sn.S;sn.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&we(u,h),Rh!==null&&Rh(u,h)};var el=T(null),ma=!1,Vi=!1,Hl=!1,Pu=typeof WeakSet=="function"?WeakSet:Set,Ji=null,Oc=!1,na=null,Sr=!1,lr=null,Lc=8192,Dh={getCacheForType:function(u){var h=Da(ri),b=h.data.get(u);return b===void 0&&(b=u(),h.data.set(u,b)),b}},Qd=0,Uh=1,Oh=2,Hn=3,si=4;if(typeof Symbol=="function"&&Symbol.for){var bn=Symbol.for;Qd=bn("selector.component"),Uh=bn("selector.has_pseudo_class"),Oh=bn("selector.role"),Hn=bn("selector.test_id"),si=bn("selector.text")}var Bn=typeof WeakMap=="function"?WeakMap:Map,nn=0,Dn=null,mn=null,An=0,gi=0,ia=null,oi=!1,Zr=!1,tl=!1,Gs=0,Vn=0,Jr=0,Ws=0,Za=0,wr=0,nl=0,Iu=null,Qr=null,Bu=!1,wo=0,Gi=1/0,Xs=null,$r=null,ys=!1,il=null,zc=0,Lh=0,Pc=null,Ic=0,cr=null;return tn.attemptContinuousHydration=function(u){if(u.tag===13){var h=$e(u,67108864);h!==null&&Ga(h,u,67108864),_m(u,67108864)}},tn.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=rr(),b=$e(u,h);b!==null&&Ga(b,u,h),_m(u,h)}},tn.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=U(u.pendingLanes);if(h!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;h;){var b=1<<31-xr(h);u.entanglements[1]|=b,h&=~b}We(u),(nn&6)===0&&(Gi=za()+500,Se(0))}}break;case 13:h=$e(u,2),h!==null&&Ga(h,u,2),gm(),_m(u,2)}},tn.batchedUpdates=function(u,h){return u(h)},tn.createComponentSelector=function(u){return{$$typeof:Qd,value:u}},tn.createContainer=function(u,h,b,E,R,P,ie,ye,Oe,lt){return Ta(u,h,!1,null,b,E,P,ie,ye,Oe,lt,null)},tn.createHasPseudoClassSelector=function(u){return{$$typeof:Uh,value:u}},tn.createHydrationContainer=function(u,h,b,E,R,P,ie,ye,Oe,lt,_t,Ot,Pt){return u=Ta(b,E,!0,u,R,P,ye,Oe,lt,_t,Ot,Pt),u.context=Nd(null),b=u.current,E=rr(),R=ke(E),R.callback=h??null,Fe(b,R,E),u.current.lanes=E,Y(u,E),We(u),u},tn.createPortal=function(u,h,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ks,key:E==null?null:""+E,children:u,containerInfo:h,implementation:b}},tn.createRoleSelector=function(u){return{$$typeof:Oh,value:u}},tn.createTestNameSelector=function(u){return{$$typeof:Hn,value:u}},tn.createTextSelector=function(u){return{$$typeof:si,value:u}},tn.defaultOnCaughtError=function(u){console.error(u)},tn.defaultOnRecoverableError=function(u){og(u)},tn.defaultOnUncaughtError=function(u){og(u)},tn.deferredUpdates=function(u){var h=sn.T,b=pa();try{return Xa(32),sn.T=null,u()}finally{Xa(b),sn.T=h}},tn.discreteUpdates=function(u,h,b,E,R){var P=sn.T,ie=pa();try{return Xa(2),sn.T=null,u(h,b,E,R)}finally{Xa(ie),sn.T=P,nn===0&&(Gi=za()+500)}},tn.findAllNodes=ar,tn.findBoundingRects=function(u,h){if(!vo)throw Error(a(363));h=ar(u,h),u=[];for(var b=0;b<h.length;b++)u.push(hh(h[b]));for(h=u.length-1;0<h;h--){b=u[h];for(var E=b.x,R=E+b.width,P=b.y,ie=P+b.height,ye=h-1;0<=ye;ye--)if(h!==ye){var Oe=u[ye],lt=Oe.x,_t=lt+Oe.width,Ot=Oe.y,Pt=Ot+Oe.height;if(E>=lt&&P>=Ot&&R<=_t&&ie<=Pt){u.splice(h,1);break}else if(E!==lt||b.width!==Oe.width||Pt<P||Ot>ie){if(!(P!==Ot||b.height!==Oe.height||_t<E||lt>R)){lt>E&&(Oe.width+=lt-E,Oe.x=E),_t<R&&(Oe.width=R-lt),u.splice(h,1);break}}else{Ot>P&&(Oe.height+=Ot-P,Oe.y=P),Pt<ie&&(Oe.height=ie-Ot),u.splice(h,1);break}}}return u},tn.findHostInstance=bm,tn.findHostInstanceWithNoPortals=function(u){return u=_(u),u=u!==null?A(u):null,u===null?null:Eu(u.stateNode)},tn.findHostInstanceWithWarning=function(u){return bm(u)},tn.flushPassiveEffects=Ea,tn.flushSyncFromReconciler=function(u){var h=nn;nn|=1;var b=sn.T,E=pa();try{if(Xa(2),sn.T=null,u)return u()}finally{Xa(E),sn.T=b,nn=h,(nn&6)===0&&Se(0)}},tn.flushSyncWork=gm,tn.focusWithin=function(u,h){if(!vo)throw Error(a(363));for(u=th(u),h=iv(u,h),h=Array.from(h),u=0;u<h.length;){var b=h[u++],E=b.tag;if(!xo(b)){if((E===5||E===26||E===27)&&Yi(b.stateNode))return!0;for(b=b.child;b!==null;)h.push(b),b=b.sibling}}return!1},tn.getFindAllNodesFailureDescription=function(u,h){if(!vo)throw Error(a(363));var b=0,E=[];u=[th(u),0];for(var R=0;R<u.length;){var P=u[R++],ie=P.tag,ye=u[R++],Oe=h[ye];if((ie!==5&&ie!==26&&ie!==27||!xo(P))&&(bu(P,Oe)&&(E.push(Tl(Oe)),ye++,ye>b&&(b=ye)),ye<h.length))for(P=P.child;P!==null;)u.push(P,ye),P=P.sibling}if(b<h.length){for(u=[];b<h.length;b++)u.push(Tl(h[b]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},tn.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return Eu(u.child.stateNode);default:return u.child.stateNode}},tn.injectIntoDevTools=function(){var u={bundleType:0,version:ch,rendererPackageName:Ud,currentDispatcherRef:sn,findFiberByHostInstance:Dm,reconcilerVersion:"19.0.0"};if(Od!==null&&(u.rendererConfig=Od),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{Ru=h.inject(u),yr=h}catch{}u=!!h.checkDCE}}return u},tn.isAlreadyRendering=function(){return!1},tn.observeVisibleRects=function(u,h,b,E){if(!vo)throw Error(a(363));u=ar(u,h);var R=Lm(u,b,E).disconnect;return{disconnect:function(){R()}}},tn.shouldError=function(){return null},tn.shouldSuspend=function(){return!1},tn.startHostTransition=function(u,h,b,E){if(u.tag!==5)throw Error(a(476));var R=yi(u).queue;Wt(u,R,h,vr,b===null?i:function(){var P=yi(u).next.queue;return us(u,P,{},rr()),b(E)})},tn.updateContainer=function(u,h,b,E){var R=h.current,P=rr();return sv(R,P,u,h,b,E),P},tn.updateContainerSync=function(u,h,b,E){return h.tag===0&&Ea(),sv(h.current,2,u,h,b,E),2},tn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(hS)),hS.exports}var NA;function mF(){return NA||(NA=1,fS.exports=pF()),fS.exports}var gF=mF();const vF=Tb(gF);var RA=pR();function Ww(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const a=Ww(i,e,t);if(a)return a;i=e?null:i.sibling}}function mR(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Xw=mR(k.createContext(null));class gR extends k.Component{render(){return k.createElement(Xw.Provider,{value:this._reactInternals},this.props.children)}}function vR(){const n=k.useContext(Xw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=k.useId();return k.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=Ww(t,!1,a=>{let r=a.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(i)return i}},[n,e])}const xF=Symbol.for("react.context"),yF=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===xF;function bF(){const n=vR(),[e]=k.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;yF(i)&&i!==Xw&&!e.has(i)&&e.set(i,k.use(mR(i))),t=t.return}return e}function _F(){const n=bF();return k.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>k.createElement(e,null,k.createElement(t.Provider,{...i,value:n.get(t)})),e=>k.createElement(gR,{...e})),[n])}function xR(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const yR=n=>n&&n.isOrthographicCamera,SF=n=>n&&n.hasOwnProperty("current"),wF=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),F0=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?k.useLayoutEffect:k.useEffect;function bR(n){const e=k.useRef(n);return F0(()=>void(e.current=n),[n]),e}function MF(){const n=vR(),e=_F();return k.useMemo(()=>({children:t})=>{const a=!!Ww(n,!0,r=>r.type===k.StrictMode)?k.StrictMode:k.Fragment;return x.jsx(a,{children:x.jsx(e,{children:t})})},[n,e])}function EF({set:n}){return F0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const TF=(n=>(n=class extends k.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function _R(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function lp(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Qi={obj:n=>n===Object(n)&&!Qi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:a=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Qi.str(n)||Qi.num(n)||Qi.boo(n))return n===e;const r=Qi.obj(n);if(r&&i==="reference")return n===e;const o=Qi.arr(n);if(o&&t==="reference")return n===e;if((o||r)&&n===e)return!0;let c;for(c in n)if(!(c in e))return!1;if(r&&t==="shallow"&&i==="shallow"){for(c in a?e:n)if(!Qi.equ(n[c],e[c],{strict:a,objects:"reference"}))return!1}else for(c in a?e:n)if(n[c]!==e[c])return!1;if(Qi.und(c)){if(o&&n.length===0&&e.length===0||r&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function AF(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function CF(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const SR=["children","key","ref"];function NF(n){const e={};for(const t in n)SR.includes(t)||(e[t]=n[t]);return e}function db(n,e,t,i){const a=n;let r=a?.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:NF(i),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=r)),r}function T0(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const a of i){if(typeof t!="object"||t===null){if(t!==void 0){const r=i.slice(i.indexOf(a)).join("-");return{root:t,key:r,target:void 0}}return{root:n,key:e,target:void 0}}e=a,n=t,t=t[e]}return{root:n,key:e,target:t}}const DA=/-\d+$/;function fb(n,e){if(Qi.str(e.props.attach)){if(DA.test(e.props.attach)){const a=e.props.attach.replace(DA,""),{root:r,key:o}=T0(n.object,a);Array.isArray(r[o])||(r[o]=[])}const{root:t,key:i}=T0(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Qi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function hb(n,e){if(Qi.str(e.props.attach)){const{root:t,key:i}=T0(n.object,e.props.attach),a=e.previousAttach;a===void 0?delete t[i]:t[i]=a}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const v2=[...SR,"args","dispose","attach","object","onUpdate","dispose"],UA=new Map;function RF(n){let e=UA.get(n.constructor);try{e||(e=new n.constructor,UA.set(n.constructor,e))}catch{}return e}function DF(n,e){const t={};for(const i in e)if(!v2.includes(i)&&!Qi.equ(e[i],n.props[i])){t[i]=e[i];for(const a in e)a.startsWith(`${i}-`)&&(t[a]=e[a])}for(const i in n.props){if(v2.includes(i)||e.hasOwnProperty(i))continue;const{root:a,key:r}=T0(n.object,i);if(a.constructor&&a.constructor.length===0){const o=RF(a);Qi.und(o)||(t[r]=o[r])}else t[r]=0}return t}const UF=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],OF=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function id(n,e){var t;const i=n.__r3f,a=i&&xR(i).getState(),r=i?.eventCount;for(const c in e){let d=e[c];if(v2.includes(c))continue;if(i&&OF.test(c)){typeof d=="function"?i.handlers[c]=d:delete i.handlers[c],i.eventCount=Object.keys(i.handlers).length;continue}if(d===void 0)continue;let{root:f,key:m,target:g}=T0(n,c);if(g===void 0&&(typeof f!="object"||f===null))throw Error(`R3F: Cannot set "${c}". Ensure it is an object before setting "${m}".`);if(g instanceof Op&&d instanceof Op)g.mask=d.mask;else if(g instanceof Tt&&wF(d))g.set(d);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&d!=null&&d.constructor&&g.constructor===d.constructor)g.copy(d);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(d))typeof g.fromArray=="function"?g.fromArray(d):g.set(...d);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof d=="number")typeof g.setScalar=="function"?g.setScalar(d):g.set(d);else{var o;f[m]=d,a&&!a.linear&&UF.includes(m)&&(o=f[m])!=null&&o.isTexture&&f[m].format===Dr&&f[m].type===as&&(f[m].colorSpace=Rr)}}if(i!=null&&i.parent&&a!=null&&a.internal&&(t=i.object)!=null&&t.isObject3D&&r!==i.eventCount){const c=i.object,d=a.internal.interaction.indexOf(c);d>-1&&a.internal.interaction.splice(d,1),i.eventCount&&c.raycast!==null&&a.internal.interaction.push(c)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Yp(i),n}function Yp(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function LF(n,e){n.manual||(yR(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const is=n=>n?.isObject3D;function qx(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function wR(n,e,t,i){const a=t.get(e);a&&(t.delete(e),t.size===0&&(n.delete(i),a.target.releasePointerCapture(i)))}function zF(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,a)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(a)}),t.capturedMap.forEach((i,a)=>{wR(t.capturedMap,e,i,a)})}function PF(n){function e(d){const{internal:f}=n.getState(),m=d.offsetX-f.initialClick[0],g=d.offsetY-f.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function t(d){return d.filter(f=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function i(d,f){const m=n.getState(),g=new Set,y=[],_=f?f(m.internal.interaction):m.internal.interaction;for(let w=0;w<_.length;w++){const N=lp(_[w]);N&&(N.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(d,m);function S(w){const N=lp(w);if(!N||!N.events.enabled||N.raycaster.camera===null)return[];if(N.raycaster.camera===void 0){var D;N.events.compute==null||N.events.compute(d,N,(D=N.previousRoot)==null?void 0:D.getState()),N.raycaster.camera===void 0&&(N.raycaster.camera=null)}return N.raycaster.camera?N.raycaster.intersectObject(w,!0):[]}let A=_.flatMap(S).sort((w,N)=>{const D=lp(w.object),U=lp(N.object);return!D||!U?w.distance-N.distance:U.events.priority-D.events.priority||w.distance-N.distance}).filter(w=>{const N=qx(w);return g.has(N)?!1:(g.add(N),!0)});m.events.filter&&(A=m.events.filter(A,m));for(const w of A){let N=w.object;for(;N;){var T;(T=N.__r3f)!=null&&T.eventCount&&y.push({...w,eventObject:N}),N=N.parent}}if("pointerId"in d&&m.internal.capturedMap.has(d.pointerId))for(let w of m.internal.capturedMap.get(d.pointerId).values())g.has(qx(w.intersection))||y.push(w.intersection);return y}function a(d,f,m,g){if(d.length){const y={stopped:!1};for(const _ of d){let S=lp(_.object);if(S||_.object.traverseAncestors(A=>{const T=lp(A);if(T)return S=T,!1}),S){const{raycaster:A,pointer:T,camera:w,internal:N}=S,D=new he(T.x,T.y,0).unproject(w),U=L=>{var I,Y;return(I=(Y=N.capturedMap.get(L))==null?void 0:Y.has(_.eventObject))!=null?I:!1},O=L=>{const I={intersection:_,target:f.target};N.capturedMap.has(L)?N.capturedMap.get(L).set(_.eventObject,I):N.capturedMap.set(L,new Map([[_.eventObject,I]])),f.target.setPointerCapture(L)},B=L=>{const I=N.capturedMap.get(L);I&&wR(N.capturedMap,_.eventObject,I,L)};let z={};for(let L in f){let I=f[L];typeof I!="function"&&(z[L]=I)}let F={..._,...z,pointer:T,intersections:d,stopped:y.stopped,delta:m,unprojectedPoint:D,ray:A.ray,camera:w,stopPropagation(){const L="pointerId"in f&&N.capturedMap.get(f.pointerId);if((!L||L.has(_.eventObject))&&(F.stopped=y.stopped=!0,N.hovered.size&&Array.from(N.hovered.values()).find(I=>I.eventObject===_.eventObject))){const I=d.slice(0,d.indexOf(_));r([...I,_])}},target:{hasPointerCapture:U,setPointerCapture:O,releasePointerCapture:B},currentTarget:{hasPointerCapture:U,setPointerCapture:O,releasePointerCapture:B},nativeEvent:f};if(g(F),y.stopped===!0)break}}}return d}function r(d){const{internal:f}=n.getState();for(const m of f.hovered.values())if(!d.length||!d.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const y=m.eventObject.__r3f;if(f.hovered.delete(qx(m)),y!=null&&y.eventCount){const _=y.handlers,S={...m,intersections:d};_.onPointerOut==null||_.onPointerOut(S),_.onPointerLeave==null||_.onPointerLeave(S)}}}function o(d,f){for(let m=0;m<f.length;m++){const g=f[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(d)}}function c(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return f=>{const{internal:m}=n.getState();"pointerId"in f&&m.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(f.pointerId)&&(m.capturedMap.delete(f.pointerId),r([]))})}}return function(m){const{onPointerMissed:g,internal:y}=n.getState();y.lastEvent.current=m;const _=d==="onPointerMove",S=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",T=i(m,_?t:void 0),w=S?e(m):0;d==="onPointerDown"&&(y.initialClick=[m.offsetX,m.offsetY],y.initialHits=T.map(D=>D.eventObject)),S&&!T.length&&w<=2&&(o(m,y.interaction),g&&g(m)),_&&r(T);function N(D){const U=D.eventObject,O=U.__r3f;if(!(O!=null&&O.eventCount))return;const B=O.handlers;if(_){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const z=qx(D),F=y.hovered.get(z);F?F.stopped&&D.stopPropagation():(y.hovered.set(z,D),B.onPointerOver==null||B.onPointerOver(D),B.onPointerEnter==null||B.onPointerEnter(D))}B.onPointerMove==null||B.onPointerMove(D)}else{const z=B[d];z?(!S||y.initialHits.includes(U))&&(o(m,y.interaction.filter(F=>!y.initialHits.includes(F))),z(D)):S&&y.initialHits.includes(U)&&o(m,y.interaction.filter(F=>!y.initialHits.includes(F)))}}a(T,m,w,N)}}return{handlePointer:c}}const OA=n=>!!(n!=null&&n.render),MR=k.createContext(null),IF=(n,e)=>{const t=cF((c,d)=>{const f=new he,m=new he,g=new he;function y(w=d().camera,N=m,D=d().size){const{width:U,height:O,top:B,left:z}=D,F=U/O;N.isVector3?g.copy(N):g.set(...N);const L=w.getWorldPosition(f).distanceTo(g);if(yR(w))return{width:U/w.zoom,height:O/w.zoom,top:B,left:z,factor:1,distance:L,aspect:F};{const I=w.fov*Math.PI/180,Y=2*Math.tan(I/2)*L,q=Y*(U/O);return{width:q,height:Y,top:B,left:z,factor:U/q,distance:L,aspect:F}}}let _;const S=w=>c(N=>({performance:{...N.performance,current:w}})),A=new ft;return{set:c,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(w=1)=>n(d(),w),advance:(w,N)=>e(w,N,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Fw,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=d();_&&clearTimeout(_),w.performance.current!==w.performance.min&&S(w.performance.min),_=setTimeout(()=>S(d().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:w=>c(N=>({...N,events:{...N.events,...w}})),setSize:(w,N,D=0,U=0)=>{const O=d().camera,B={width:w,height:N,top:D,left:U};c(z=>({size:B,viewport:{...z.viewport,...y(O,m,B)}}))},setDpr:w=>c(N=>{const D=_R(w);return{viewport:{...N.viewport,dpr:D,initialDpr:N.viewport.initialDpr||D}}}),setFrameloop:(w="always")=>{const N=d().clock;N.stop(),N.elapsedTime=0,w!=="never"&&(N.start(),N.elapsedTime=0),c(()=>({frameloop:w}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:k.createRef(),active:!1,frames:0,priority:0,subscribe:(w,N,D)=>{const U=d().internal;return U.priority=U.priority+(N>0?1:0),U.subscribers.push({ref:w,priority:N,store:D}),U.subscribers=U.subscribers.sort((O,B)=>O.priority-B.priority),()=>{const O=d().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(N>0?1:0),O.subscribers=O.subscribers.filter(B=>B.ref!==w))}}}}}),i=t.getState();let a=i.size,r=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:c,size:d,viewport:f,gl:m,set:g}=t.getState();if(d.width!==a.width||d.height!==a.height||f.dpr!==r){a=d,r=f.dpr,LF(c,d),f.dpr>0&&m.setPixelRatio(f.dpr);const y=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(d.width,d.height,y)}c!==o&&(o=c,g(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>n(c)),t};function ER(){const n=k.useContext(MR);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function e0(n=t=>t,e){return ER()(n,e)}function ru(n,e=0){const t=ER(),i=t.getState().internal.subscribe,a=bR(n);return F0(()=>i(a,e,t),[e,i,t]),null}const LA=new WeakMap,BF=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function TR(n,e){return function(t,...i){let a;return BF(t)?(a=LA.get(t),a||(a=new t,LA.set(t,a))):a=t,n&&n(a),Promise.all(i.map(r=>new Promise((o,c)=>a.load(r,d=>{is(d?.scene)&&Object.assign(d,AF(d.scene)),o(d)},e,d=>c(new Error(`Could not load ${r}: ${d?.message}`))))))}}function Yw(n,e,t,i){const a=Array.isArray(e)?e:[e],r=hR(TR(t,i),[n,...a],{equal:Qi.equ});return Array.isArray(e)?r:r[0]}Yw.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return dF(TR(t),[n,...i])};Yw.clear=function(n,e){const t=Array.isArray(e)?e:[e];return fF([n,...t])};var kF={version:"9.4.2"};function FF(n){const e=vF(n);return e.injectIntoDevTools(),e}const AR=0,Ip={},jF=/^three(?=[A-Z])/,h1=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let HF=0;const VF=n=>typeof n=="function";function GF(n){if(VF(n)){const e=`${HF++}`;return Ip[e]=n,e}else Object.assign(Ip,n)}function CR(n,e){const t=h1(n),i=Ip[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function WF(n,e,t){var i;return n=h1(n)in Ip?n:n.replace(jF,""),CR(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,db(e.object,t,n,e)}function XF(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?hb(n.parent,n):is(n.object)&&(n.object.visible=!1),n.isHidden=!0,Yp(n)}}function NR(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?fb(n.parent,n):is(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Yp(n)}}function qw(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var a,r;const o=Ip[h1(e.type)];e.object=(a=e.props.object)!=null?a:new o(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(id(e.object,e.props),e.props.attach)fb(n,e);else if(is(e.object)&&is(n.object)){const o=n.object.children.indexOf(t?.object);if(t&&o!==-1){const c=n.object.children.indexOf(e.object);if(c!==-1){n.object.children.splice(c,1);const d=c<o?o-1:o;n.object.children.splice(d,0,e.object)}else e.object.parent=n.object,n.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const o of e.children)qw(e,o);Yp(e)}}function gS(n,e){e&&(e.parent=n,n.children.push(e),qw(n,e))}function zA(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),qw(n,e,t)}function RR(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():RA.unstable_scheduleCallback(RA.unstable_IdlePriority,e)}}function x2(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?hb(n,e):is(e.object)&&is(n.object)&&(n.object.remove(e.object),zF(xR(e),e.object));const a=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const o=e.children[r];x2(e,o,a)}e.children.length=0,delete e.object.__r3f,a&&e.type!=="primitive"&&e.object.type!=="Scene"&&RR(e.object),t===void 0&&Yp(e)}function YF(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const dy=[];function qF(){for(const[t]of dy){const i=t.parent;if(i){t.props.attach?hb(i,t):is(t.object)&&is(i.object)&&i.object.remove(t.object);for(const a of t.children)a.props.attach?hb(t,a):is(a.object)&&is(t.object)&&t.object.remove(a.object)}t.isHidden&&NR(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&RR(t.object)}for(const[t,i,a]of dy){t.props=i;const r=t.parent;if(r){var n,e;const o=Ip[h1(t.type)];t.object=(n=t.props.object)!=null?n:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,YF(a,t.object),id(t.object,t.props),t.props.attach?fb(r,t):is(t.object)&&is(r.object)&&r.object.add(t.object);for(const c of t.children)c.props.attach?fb(t,c):is(c.object)&&is(t.object)&&t.object.add(c.object);Yp(t)}}dy.length=0}const vS=()=>{},PA={};let Kx=AR;const KF=0,ZF=4,y2=FF({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:WF,removeChild:x2,appendChild:gS,appendInitialChild:gS,insertBefore:zA,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||gS(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||x2(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||zA(i,e,t)},getRootHostContext:()=>PA,getChildHostContext:()=>PA,commitUpdate(n,e,t,i,a){var r,o,c;CR(e,i);let d=!1;if((n.type==="primitive"&&t.object!==i.object||((r=i.args)==null?void 0:r.length)!==((o=t.args)==null?void 0:o.length)||(c=i.args)!=null&&c.some((m,g)=>{var y;return m!==((y=t.args)==null?void 0:y[g])}))&&(d=!0),d)dy.push([n,{...i},a]);else{const m=DF(n,i);Object.keys(m).length&&(Object.assign(n.props,m),id(n.object,m))}(a.sibling===null||(a.flags&ZF)===KF)&&qF()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>db(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:XF,unhideInstance:NR,createTextInstance:vS,hideTextInstance:vS,unhideTextInstance:vS,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:k.createContext(null),setCurrentUpdatePriority(n){Kx=n},getCurrentUpdatePriority(){return Kx},resolveUpdatePriority(){var n;if(Kx!==AR)return Kx;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return oy.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return oy.ContinuousEventPriority;default:return oy.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:kF.version}),If=new Map,cp={objects:"shallow",strict:!1};function JF(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:a,left:r}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:a,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function QF(n){const e=If.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,r=i||IF(S2,BA),o=t||y2.createContainer(r,oy.ConcurrentRoot,null,!1,null,"",a,a,a,null);e||If.set(n,{fiber:o,store:r});let c,d,f=!1,m=null;return{async configure(g={}){let y;m=new Promise(j=>y=j);let{gl:_,size:S,scene:A,events:T,onCreated:w,shadows:N=!1,linear:D=!1,flat:U=!1,legacy:O=!1,orthographic:B=!1,frameloop:z="always",dpr:F=[1,2],performance:L,raycaster:I,camera:Y,onPointerMissed:q}=g,K=r.getState(),$=K.gl;if(!K.gl){const j={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ee=typeof _=="function"?await _(j):_;OA(ee)?$=ee:$=new uR({...j,..._}),K.set({gl:$})}let ce=K.raycaster;ce||K.set({raycaster:ce=new nR});const{params:G,...W}=I||{};if(Qi.equ(W,ce,cp)||id(ce,{...W}),Qi.equ(G,ce.params,cp)||id(ce,{params:{...ce.params,...G}}),!K.camera||K.camera===d&&!Qi.equ(d,Y,cp)){d=Y;const j=Y?.isCamera,ee=j?Y:B?new Wp(0,0,0,0,.1,1e3):new Qa(75,0,.1,1e3);j||(ee.position.z=5,Y&&(id(ee,Y),ee.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(ee.manual=!0,ee.updateProjectionMatrix())),!K.camera&&!(Y!=null&&Y.rotation)&&ee.lookAt(0,0,0)),K.set({camera:ee}),ce.camera=ee}if(!K.scene){let j;A!=null&&A.isScene?(j=A,db(j,r,"",{})):(j=new yw,db(j,r,"",{}),A&&id(j,A)),K.set({scene:j})}T&&!K.events.handlers&&K.set({events:T(r)});const Q=JF(n,S);if(Qi.equ(Q,K.size,cp)||K.setSize(Q.width,Q.height,Q.top,Q.left),F&&K.viewport.dpr!==_R(F)&&K.setDpr(F),K.frameloop!==z&&K.setFrameloop(z),K.onPointerMissed||K.set({onPointerMissed:q}),L&&!Qi.equ(L,K.performance,cp)&&K.set(j=>({performance:{...j.performance,...L}})),!K.xr){var ue;const j=(oe,re)=>{const se=r.getState();se.frameloop!=="never"&&BA(oe,!0,se,re)},ee=()=>{const oe=r.getState();oe.gl.xr.enabled=oe.gl.xr.isPresenting,oe.gl.xr.setAnimationLoop(oe.gl.xr.isPresenting?j:null),oe.gl.xr.isPresenting||S2(oe)},ne={connect(){const oe=r.getState().gl;oe.xr.addEventListener("sessionstart",ee),oe.xr.addEventListener("sessionend",ee)},disconnect(){const oe=r.getState().gl;oe.xr.removeEventListener("sessionstart",ee),oe.xr.removeEventListener("sessionend",ee)}};typeof((ue=$.xr)==null?void 0:ue.addEventListener)=="function"&&ne.connect(),K.set({xr:ne})}if($.shadowMap){const j=$.shadowMap.enabled,ee=$.shadowMap.type;if($.shadowMap.enabled=!!N,Qi.boo(N))$.shadowMap.type=Wg;else if(Qi.str(N)){var de;const ne={basic:wC,percentage:Sp,soft:Wg,variance:_f};$.shadowMap.type=(de=ne[N])!=null?de:Wg}else Qi.obj(N)&&Object.assign($.shadowMap,N);(j!==$.shadowMap.enabled||ee!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}return Wn.enabled=!O,f||($.outputColorSpace=D?cd:Rr,$.toneMapping=U?No:Cb),K.legacy!==O&&K.set(()=>({legacy:O})),K.linear!==D&&K.set(()=>({linear:D})),K.flat!==U&&K.set(()=>({flat:U})),_&&!Qi.fun(_)&&!OA(_)&&!Qi.equ(_,$,cp)&&id($,_),c=w,f=!0,y(),this},render(g){return!f&&!m&&this.configure(),m.then(()=>{y2.updateContainer(x.jsx($F,{store:r,children:g,onCreated:c,rootElement:n}),o,null,()=>{})}),r},unmount(){DR(n)}}}function $F({store:n,children:e,onCreated:t,rootElement:i}){return F0(()=>{const a=n.getState();a.set(r=>({internal:{...r.internal,active:!0}})),t&&t(a),n.getState().events.connected||a.events.connect==null||a.events.connect(i)},[]),x.jsx(MR.Provider,{value:n,children:e})}function DR(n,e){const t=If.get(n),i=t?.fiber;if(i){const a=t?.store.getState();a&&(a.internal.active=!1),y2.updateContainer(null,i,null,()=>{a&&setTimeout(()=>{try{var r,o,c,d;a.events.disconnect==null||a.events.disconnect(),(r=a.gl)==null||(o=r.renderLists)==null||o.dispose==null||o.dispose(),(c=a.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(d=a.gl)!=null&&d.xr&&a.xr.disconnect(),CF(a.scene),If.delete(n)}catch{}},500)})}}const ej=new Set,tj=new Set,nj=new Set;function xS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function t0(n,e){switch(n){case"before":return xS(ej,e);case"after":return xS(tj,e);case"tail":return xS(nj,e)}}let yS,bS;function b2(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),yS=e.internal.subscribers;for(let a=0;a<yS.length;a++)bS=yS[a],bS.ref.current(bS.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let pb=!1,_2=!1,_S,IA,up;function UR(n){IA=requestAnimationFrame(UR),pb=!0,_S=0,t0("before",n),_2=!0;for(const t of If.values()){var e;up=t.store.getState(),up.internal.active&&(up.frameloop==="always"||up.internal.frames>0)&&!((e=up.gl.xr)!=null&&e.isPresenting)&&(_S+=b2(n,up))}if(_2=!1,t0("after",n),_S===0)return t0("tail",n),pb=!1,cancelAnimationFrame(IA)}function S2(n,e=1){var t;if(!n)return If.forEach(i=>S2(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):_2?n.internal.frames=2:n.internal.frames=1,pb||(pb=!0,requestAnimationFrame(UR)))}function BA(n,e=!0,t,i){if(e&&t0("before",n),t)b2(n,t,i);else for(const a of If.values())b2(n,a.store.getState());e&&t0("after",n)}const SS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function ij(n){const{handlePointer:e}=PF(n);return{priority:1,enabled:!0,compute(t,i,a){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(SS).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:a}=n.getState();(t=a.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(a.lastEvent.current)},connect:t=>{const{set:i,events:a}=n.getState();if(a.disconnect==null||a.disconnect(),i(r=>({events:{...r.events,connected:t}})),a.handlers)for(const r in a.handlers){const o=a.handlers[r],[c,d]=SS[r];t.addEventListener(c,o,{passive:d})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const a in i.handlers){const r=i.handlers[a],[o]=SS[a];i.connected.removeEventListener(o,r)}t(a=>({events:{...a.events,connected:void 0}}))}}}}function kA(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function aj({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const a=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,o]=k.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=k.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),d=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,m=k.useRef(!1);k.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,y,_]=k.useMemo(()=>{const w=()=>{if(!c.current.element)return;const{left:N,top:D,width:U,height:O,bottom:B,right:z,x:F,y:L}=c.current.element.getBoundingClientRect(),I={left:N,top:D,width:U,height:O,bottom:B,right:z,x:F,y:L};c.current.element instanceof HTMLElement&&i&&(I.height=c.current.element.offsetHeight,I.width=c.current.element.offsetWidth),Object.freeze(I),m.current&&!lj(c.current.lastBounds,I)&&o(c.current.lastBounds=I)};return[w,f?kA(w,f):w,d?kA(w,d):w]},[o,i,d,f]);function S(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",_,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function A(){c.current.element&&(c.current.resizeObserver=new a(_),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(w=>w.addEventListener("scroll",_,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const T=w=>{!w||w===c.current.element||(S(),c.current.element=w,c.current.scrollContainers=OR(w),A())};return sj(_,!!e),rj(y),k.useEffect(()=>{S(),A()},[e,_,y]),k.useEffect(()=>S,[]),[T,r,g]}function rj(n){k.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function sj(n,e){k.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function OR(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:a}=window.getComputedStyle(n);return[t,i,a].some(r=>r==="auto"||r==="scroll")&&e.push(n),[...e,...OR(n.parentElement)]}const oj=["x","y","top","bottom","left","right","width","height"],lj=(n,e)=>oj.every(t=>n[t]===e[t]);function cj({ref:n,children:e,fallback:t,resize:i,style:a,gl:r,events:o=ij,eventSource:c,eventPrefix:d,shadows:f,linear:m,flat:g,legacy:y,orthographic:_,frameloop:S,dpr:A,performance:T,raycaster:w,camera:N,scene:D,onPointerMissed:U,onCreated:O,...B}){k.useMemo(()=>GF(Q8),[]);const z=MF(),[F,L]=aj({scroll:!0,debounce:{scroll:50,resize:0},...i}),I=k.useRef(null),Y=k.useRef(null);k.useImperativeHandle(n,()=>I.current);const q=bR(U),[K,$]=k.useState(!1),[ce,G]=k.useState(!1);if(K)throw K;if(ce)throw ce;const W=k.useRef(null);F0(()=>{const ue=I.current;if(L.width>0&&L.height>0&&ue){W.current||(W.current=QF(ue));async function de(){await W.current.configure({gl:r,scene:D,events:o,shadows:f,linear:m,flat:g,legacy:y,orthographic:_,frameloop:S,dpr:A,performance:T,raycaster:w,camera:N,size:L,onPointerMissed:(...j)=>q.current==null?void 0:q.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(c?SF(c)?c.current:c:Y.current),d&&j.setEvents({compute:(ee,ne)=>{const oe=ee[d+"X"],re=ee[d+"Y"];ne.pointer.set(oe/ne.size.width*2-1,-(re/ne.size.height)*2+1),ne.raycaster.setFromCamera(ne.pointer,ne.camera)}}),O?.(j)}}),W.current.render(x.jsx(z,{children:x.jsx(TF,{set:G,children:x.jsx(k.Suspense,{fallback:x.jsx(EF,{set:$}),children:e??null})})}))}de()}}),k.useEffect(()=>{const ue=I.current;if(ue)return()=>DR(ue)},[]);const Q=c?"none":"auto";return x.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...a},...B,children:x.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:x.jsx("canvas",{ref:I,style:{display:"block"},children:t})})})}function uj(n){return x.jsx(gR,{children:x.jsx(cj,{...n})})}function w2(){return w2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},w2.apply(null,arguments)}function dj(){var n=Object.create(null);function e(a,r){var o=a.id,c=a.name,d=a.dependencies;d===void 0&&(d=[]);var f=a.init;f===void 0&&(f=function(){});var m=a.getTransferables;if(m===void 0&&(m=null),!n[o])try{d=d.map(function(y){return y&&y.isWorkerModule&&(e(y,function(_){if(_ instanceof Error)throw _}),y=n[y.id].value),y}),f=i("<"+c+">.init",f),m&&(m=i("<"+c+">.getTransferables",m));var g=null;typeof f=="function"?g=f.apply(void 0,d):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:g,getTransferables:m},r(g)}catch(y){y&&y.noLog||console.error(y),r(y)}}function t(a,r){var o,c=a.id,d=a.args;(!n[c]||typeof n[c].value!="function")&&r(new Error("Worker module "+c+": not found or its 'init' did not return a function"));try{var f=(o=n[c]).value.apply(o,d);f&&typeof f.then=="function"?f.then(m,function(g){return r(g instanceof Error?g:new Error(""+g))}):m(f)}catch(g){r(g)}function m(g){try{var y=n[c].getTransferables&&n[c].getTransferables(g);(!y||!Array.isArray(y)||!y.length)&&(y=void 0),r(g,y)}catch(_){console.error(_),r(_)}}}function i(a,r){var o=void 0;self.troikaDefine=function(d){return o=d};var c=URL.createObjectURL(new Blob(["/** "+a.replace(/\*/g,"")+` **/

troikaDefine(
`+r+`
)`],{type:"application/javascript"}));try{importScripts(c)}catch(d){console.error(d)}return URL.revokeObjectURL(c),delete self.troikaDefine,o}self.addEventListener("message",function(a){var r=a.data,o=r.messageId,c=r.action,d=r.data;try{c==="registerModule"&&e(d,function(f){f instanceof Error?postMessage({messageId:o,success:!1,error:f.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof f=="function"}})}),c==="callModule"&&t(d,function(f,m){f instanceof Error?postMessage({messageId:o,success:!1,error:f.message}):postMessage({messageId:o,success:!0,result:f},m||void 0)})}catch(f){postMessage({messageId:o,success:!1,error:f.stack})}})}function fj(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(a){if(typeof a=="function")return a.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(r){return r&&(r=r.onMainThread||r,r._getInitResult&&(r=r._getInitResult())),r}):[];var a=Promise.all(t).then(function(r){return i.apply(null,r)});return e._getInitResult=function(){return a},a},e}var LR=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return LR=function(){return n},n},hj=0,pj=0,wS=!1,n0=Object.create(null),i0=Object.create(null),M2=Object.create(null);function qp(n){if((!n||typeof n.init!="function")&&!wS)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,a=n.workerId,r=fj(n);a==null&&(a="#default");var o="workerModule"+ ++hj,c=n.name||o,d=null;e=e&&e.map(function(m){return typeof m=="function"&&!m.workerModuleData&&(wS=!0,m=qp({workerId:a,name:"<"+c+"> function dependency: "+m.name,init:`function(){return (
`+fy(m)+`
)}`}),wS=!1),m&&m.workerModuleData&&(m=m.workerModuleData),m});function f(){for(var m=[],g=arguments.length;g--;)m[g]=arguments[g];if(!LR())return r.apply(void 0,m);if(!d){d=FA(a,"registerModule",f.workerModuleData);var y=function(){d=null,i0[a].delete(y)};(i0[a]||(i0[a]=new Set)).add(y)}return d.then(function(_){var S=_.isCallable;if(S)return FA(a,"callModule",{id:o,args:m});throw new Error("Worker module function was called but `init` did not return a callable function")})}return f.workerModuleData={isWorkerModule:!0,id:o,name:c,dependencies:e,init:fy(t),getTransferables:i&&fy(i)},f.onMainThread=r,f}function mj(n){i0[n]&&i0[n].forEach(function(e){e()}),n0[n]&&(n0[n].terminate(),delete n0[n])}function fy(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function gj(n){var e=n0[n];if(!e){var t=fy(dj);e=n0[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var a=i.data,r=a.messageId,o=M2[r];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete M2[r],o(a)}}return e}function FA(n,e,t){return new Promise(function(i,a){var r=++pj;M2[r]=function(o){o.success?i(o.result):a(new Error("Error in worker "+e+" call: "+o.error))},gj(n).postMessage({messageId:r,action:e,data:t})})}function zR(){var n=(function(e){function t(ue,de,j,ee,ne,oe,re,se){var le=1-re;se.x=le*le*ue+2*le*re*j+re*re*ne,se.y=le*le*de+2*le*re*ee+re*re*oe}function i(ue,de,j,ee,ne,oe,re,se,le,ve){var ze=1-le;ve.x=ze*ze*ze*ue+3*ze*ze*le*j+3*ze*le*le*ne+le*le*le*re,ve.y=ze*ze*ze*de+3*ze*ze*le*ee+3*ze*le*le*oe+le*le*le*se}function a(ue,de){for(var j=/([MLQCZ])([^MLQCZ]*)/g,ee,ne,oe,re,se;ee=j.exec(ue);){var le=ee[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ve){return parseFloat(ve)});switch(ee[1]){case"M":re=ne=le[0],se=oe=le[1];break;case"L":(le[0]!==re||le[1]!==se)&&de("L",re,se,re=le[0],se=le[1]);break;case"Q":{de("Q",re,se,re=le[2],se=le[3],le[0],le[1]);break}case"C":{de("C",re,se,re=le[4],se=le[5],le[0],le[1],le[2],le[3]);break}case"Z":(re!==ne||se!==oe)&&de("L",re,se,ne,oe);break}}}function r(ue,de,j){j===void 0&&(j=16);var ee={x:0,y:0};a(ue,function(ne,oe,re,se,le,ve,ze,qe,Ke){switch(ne){case"L":de(oe,re,se,le);break;case"Q":{for(var Pe=oe,gt=re,Te=1;Te<j;Te++)t(oe,re,ve,ze,se,le,Te/(j-1),ee),de(Pe,gt,ee.x,ee.y),Pe=ee.x,gt=ee.y;break}case"C":{for(var je=oe,Le=re,$e=1;$e<j;$e++)i(oe,re,ve,ze,qe,Ke,se,le,$e/(j-1),ee),de(je,Le,ee.x,ee.y),je=ee.x,Le=ee.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",c="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",d=new WeakMap,f={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function m(ue,de){var j=ue.getContext?ue.getContext("webgl",f):ue,ee=d.get(j);if(!ee){let je=function(Se){var Ee=oe[Se];if(!Ee&&(Ee=oe[Se]=j.getExtension(Se),!Ee))throw new Error(Se+" not supported");return Ee},Le=function(Se,Ee){var X=j.createShader(Ee);return j.shaderSource(X,Se),j.compileShader(X),X},$e=function(Se,Ee,X,V){if(!re[Se]){var fe={},Ce={},Ae=j.createProgram();j.attachShader(Ae,Le(Ee,j.VERTEX_SHADER)),j.attachShader(Ae,Le(X,j.FRAGMENT_SHADER)),j.linkProgram(Ae),re[Se]={program:Ae,transaction:function(ot){j.useProgram(Ae),ot({setUniform:function(ht,xt){for(var ke=[],Fe=arguments.length-2;Fe-- >0;)ke[Fe]=arguments[Fe+2];var Ze=Ce[xt]||(Ce[xt]=j.getUniformLocation(Ae,xt));j["uniform"+ht].apply(j,[Ze].concat(ke))},setAttribute:function(ht,xt,ke,Fe,Ze){var rt=fe[ht];rt||(rt=fe[ht]={buf:j.createBuffer(),loc:j.getAttribLocation(Ae,ht),data:null}),j.bindBuffer(j.ARRAY_BUFFER,rt.buf),j.vertexAttribPointer(rt.loc,xt,j.FLOAT,!1,0,0),j.enableVertexAttribArray(rt.loc),ne?j.vertexAttribDivisor(rt.loc,Fe):je("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(rt.loc,Fe),Ze!==rt.data&&(j.bufferData(j.ARRAY_BUFFER,Ze,ke),rt.data=Ze)}})}}}re[Se].transaction(V)},J=function(Se,Ee){le++;try{j.activeTexture(j.TEXTURE0+le);var X=se[Se];X||(X=se[Se]=j.createTexture(),j.bindTexture(j.TEXTURE_2D,X),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.NEAREST),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.NEAREST)),j.bindTexture(j.TEXTURE_2D,X),Ee(X,le)}finally{le--}},et=function(Se,Ee,X){var V=j.createFramebuffer();ve.push(V),j.bindFramebuffer(j.FRAMEBUFFER,V),j.activeTexture(j.TEXTURE0+Ee),j.bindTexture(j.TEXTURE_2D,Se),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Se,0);try{X(V)}finally{j.deleteFramebuffer(V),j.bindFramebuffer(j.FRAMEBUFFER,ve[--ve.length-1]||null)}},We=function(){oe={},re={},se={},le=-1,ve.length=0};var ze=je,qe=Le,Ke=$e,Pe=J,gt=et,Te=We,ne=typeof WebGL2RenderingContext<"u"&&j instanceof WebGL2RenderingContext,oe={},re={},se={},le=-1,ve=[];j.canvas.addEventListener("webglcontextlost",function(Se){We(),Se.preventDefault()},!1),d.set(j,ee={gl:j,isWebGL2:ne,getExtension:je,withProgram:$e,withTexture:J,withTextureFramebuffer:et,handleContextLoss:We})}de(ee)}function g(ue,de,j,ee,ne,oe,re,se){re===void 0&&(re=15),se===void 0&&(se=null),m(ue,function(le){var ve=le.gl,ze=le.withProgram,qe=le.withTexture;qe("copy",function(Ke,Pe){ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,ne,oe,0,ve.RGBA,ve.UNSIGNED_BYTE,de),ze("copy",o,c,function(gt){var Te=gt.setUniform,je=gt.setAttribute;je("aUV",2,ve.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Te("1i","image",Pe),ve.bindFramebuffer(ve.FRAMEBUFFER,se||null),ve.disable(ve.BLEND),ve.colorMask(re&8,re&4,re&2,re&1),ve.viewport(j,ee,ne,oe),ve.scissor(j,ee,ne,oe),ve.drawArrays(ve.TRIANGLES,0,3)})})})}function y(ue,de,j){var ee=ue.width,ne=ue.height;m(ue,function(oe){var re=oe.gl,se=new Uint8Array(ee*ne*4);re.readPixels(0,0,ee,ne,re.RGBA,re.UNSIGNED_BYTE,se),ue.width=de,ue.height=j,g(re,se,0,0,ee,ne)})}var _=Object.freeze({__proto__:null,withWebGLContext:m,renderImageData:g,resizeWebGLCanvasWithoutClearing:y});function S(ue,de,j,ee,ne,oe){oe===void 0&&(oe=1);var re=new Uint8Array(ue*de),se=ee[2]-ee[0],le=ee[3]-ee[1],ve=[];r(j,function(je,Le,$e,J){ve.push({x1:je,y1:Le,x2:$e,y2:J,minX:Math.min(je,$e),minY:Math.min(Le,J),maxX:Math.max(je,$e),maxY:Math.max(Le,J)})}),ve.sort(function(je,Le){return je.maxX-Le.maxX});for(var ze=0;ze<ue;ze++)for(var qe=0;qe<de;qe++){var Ke=gt(ee[0]+se*(ze+.5)/ue,ee[1]+le*(qe+.5)/de),Pe=Math.pow(1-Math.abs(Ke)/ne,oe)/2;Ke<0&&(Pe=1-Pe),Pe=Math.max(0,Math.min(255,Math.round(Pe*255))),re[qe*ue+ze]=Pe}return re;function gt(je,Le){for(var $e=1/0,J=1/0,et=ve.length;et--;){var We=ve[et];if(We.maxX+J<=je)break;if(je+J>We.minX&&Le-J<We.maxY&&Le+J>We.minY){var Se=w(je,Le,We.x1,We.y1,We.x2,We.y2);Se<$e&&($e=Se,J=Math.sqrt($e))}}return Te(je,Le)&&(J=-J),J}function Te(je,Le){for(var $e=0,J=ve.length;J--;){var et=ve[J];if(et.maxX<=je)break;var We=et.y1>Le!=et.y2>Le&&je<(et.x2-et.x1)*(Le-et.y1)/(et.y2-et.y1)+et.x1;We&&($e+=et.y1<et.y2?1:-1)}return $e!==0}}function A(ue,de,j,ee,ne,oe,re,se,le,ve){oe===void 0&&(oe=1),se===void 0&&(se=0),le===void 0&&(le=0),ve===void 0&&(ve=0),T(ue,de,j,ee,ne,oe,re,null,se,le,ve)}function T(ue,de,j,ee,ne,oe,re,se,le,ve,ze){oe===void 0&&(oe=1),le===void 0&&(le=0),ve===void 0&&(ve=0),ze===void 0&&(ze=0);for(var qe=S(ue,de,j,ee,ne,oe),Ke=new Uint8Array(qe.length*4),Pe=0;Pe<qe.length;Pe++)Ke[Pe*4+ze]=qe[Pe];g(re,Ke,le,ve,ue,de,1<<3-ze,se)}function w(ue,de,j,ee,ne,oe){var re=ne-j,se=oe-ee,le=re*re+se*se,ve=le?Math.max(0,Math.min(1,((ue-j)*re+(de-ee)*se)/le)):0,ze=ue-(j+ve*re),qe=de-(ee+ve*se);return ze*ze+qe*qe}var N=Object.freeze({__proto__:null,generate:S,generateIntoCanvas:A,generateIntoFramebuffer:T}),D="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",U="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",O="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",B=new Float32Array([0,0,2,0,0,2]),z=null,F=!1,L={},I=new WeakMap;function Y(ue){if(!F&&!ce(ue))throw new Error("WebGL generation not supported")}function q(ue,de,j,ee,ne,oe,re){if(oe===void 0&&(oe=1),re===void 0&&(re=null),!re&&(re=z,!re)){var se=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!se)throw new Error("OffscreenCanvas or DOM canvas not supported");re=z=se.getContext("webgl",{depth:!1})}Y(re);var le=new Uint8Array(ue*de*4);m(re,function(Ke){var Pe=Ke.gl,gt=Ke.withTexture,Te=Ke.withTextureFramebuffer;gt("readable",function(je,Le){Pe.texImage2D(Pe.TEXTURE_2D,0,Pe.RGBA,ue,de,0,Pe.RGBA,Pe.UNSIGNED_BYTE,null),Te(je,Le,function($e){$(ue,de,j,ee,ne,oe,Pe,$e,0,0,0),Pe.readPixels(0,0,ue,de,Pe.RGBA,Pe.UNSIGNED_BYTE,le)})})});for(var ve=new Uint8Array(ue*de),ze=0,qe=0;ze<le.length;ze+=4)ve[qe++]=le[ze];return ve}function K(ue,de,j,ee,ne,oe,re,se,le,ve){oe===void 0&&(oe=1),se===void 0&&(se=0),le===void 0&&(le=0),ve===void 0&&(ve=0),$(ue,de,j,ee,ne,oe,re,null,se,le,ve)}function $(ue,de,j,ee,ne,oe,re,se,le,ve,ze){oe===void 0&&(oe=1),le===void 0&&(le=0),ve===void 0&&(ve=0),ze===void 0&&(ze=0),Y(re);var qe=[];r(j,function(Ke,Pe,gt,Te){qe.push(Ke,Pe,gt,Te)}),qe=new Float32Array(qe),m(re,function(Ke){var Pe=Ke.gl,gt=Ke.isWebGL2,Te=Ke.getExtension,je=Ke.withProgram,Le=Ke.withTexture,$e=Ke.withTextureFramebuffer,J=Ke.handleContextLoss;if(Le("rawDistances",function(et,We){(ue!==et._lastWidth||de!==et._lastHeight)&&Pe.texImage2D(Pe.TEXTURE_2D,0,Pe.RGBA,et._lastWidth=ue,et._lastHeight=de,0,Pe.RGBA,Pe.UNSIGNED_BYTE,null),je("main",D,U,function(Se){var Ee=Se.setAttribute,X=Se.setUniform,V=!gt&&Te("ANGLE_instanced_arrays"),fe=!gt&&Te("EXT_blend_minmax");Ee("aUV",2,Pe.STATIC_DRAW,0,B),Ee("aLineSegment",4,Pe.DYNAMIC_DRAW,1,qe),X.apply(void 0,["4f","uGlyphBounds"].concat(ee)),X("1f","uMaxDistance",ne),X("1f","uExponent",oe),$e(et,We,function(Ce){Pe.enable(Pe.BLEND),Pe.colorMask(!0,!0,!0,!0),Pe.viewport(0,0,ue,de),Pe.scissor(0,0,ue,de),Pe.blendFunc(Pe.ONE,Pe.ONE),Pe.blendEquationSeparate(Pe.FUNC_ADD,gt?Pe.MAX:fe.MAX_EXT),Pe.clear(Pe.COLOR_BUFFER_BIT),gt?Pe.drawArraysInstanced(Pe.TRIANGLES,0,3,qe.length/4):V.drawArraysInstancedANGLE(Pe.TRIANGLES,0,3,qe.length/4)})}),je("post",o,O,function(Se){Se.setAttribute("aUV",2,Pe.STATIC_DRAW,0,B),Se.setUniform("1i","tex",We),Pe.bindFramebuffer(Pe.FRAMEBUFFER,se),Pe.disable(Pe.BLEND),Pe.colorMask(ze===0,ze===1,ze===2,ze===3),Pe.viewport(le,ve,ue,de),Pe.scissor(le,ve,ue,de),Pe.drawArrays(Pe.TRIANGLES,0,3)})}),Pe.isContextLost())throw J(),new Error("webgl context lost")})}function ce(ue){var de=!ue||ue===z?L:ue.canvas||ue,j=I.get(de);if(j===void 0){F=!0;var ee=null;try{var ne=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],oe=q(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,ue);j=oe&&ne.length===oe.length&&oe.every(function(re,se){return re===ne[se]}),j||(ee="bad trial run results",console.info(ne,oe))}catch(re){j=!1,ee=re.message}ee&&console.warn("WebGL SDF generation not supported:",ee),F=!1,I.set(de,j)}return j}var G=Object.freeze({__proto__:null,generate:q,generateIntoCanvas:K,generateIntoFramebuffer:$,isSupported:ce});function W(ue,de,j,ee,ne,oe){ne===void 0&&(ne=Math.max(ee[2]-ee[0],ee[3]-ee[1])/2),oe===void 0&&(oe=1);try{return q.apply(G,arguments)}catch(re){return console.info("WebGL SDF generation failed, falling back to JS",re),S.apply(N,arguments)}}function Q(ue,de,j,ee,ne,oe,re,se,le,ve){ne===void 0&&(ne=Math.max(ee[2]-ee[0],ee[3]-ee[1])/2),oe===void 0&&(oe=1),se===void 0&&(se=0),le===void 0&&(le=0),ve===void 0&&(ve=0);try{return K.apply(G,arguments)}catch(ze){return console.info("WebGL SDF generation failed, falling back to JS",ze),A.apply(N,arguments)}}return e.forEachPathCommand=a,e.generate=W,e.generateIntoCanvas=Q,e.javascript=N,e.pathToLineSegments=r,e.webgl=G,e.webglUtils=_,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}function vj(){var n=(function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},a={};i.L=1,a[1]="L",Object.keys(t).forEach(function(J,et){i[J]=1<<et+1,a[i[J]]=J}),Object.freeze(i);var r=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,c=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,d=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,f=i.S|i.WS|i.B|r|i.PDI|d,m=null;function g(){if(!m){m=new Map;var J=function(We){if(t.hasOwnProperty(We)){var Se=0;t[We].split(",").forEach(function(Ee){var X=Ee.split("+"),V=X[0],fe=X[1];V=parseInt(V,36),fe=fe?parseInt(fe,36):0,m.set(Se+=V,i[We]);for(var Ce=0;Ce<fe;Ce++)m.set(++Se,i[We])})}};for(var et in t)J(et)}}function y(J){return g(),m.get(J.codePointAt(0))||i.L}function _(J){return a[y(J)]}var S={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function A(J,et){var We=36,Se=0,Ee=new Map,X=et&&new Map,V;return J.split(",").forEach(function fe(Ce){if(Ce.indexOf("+")!==-1)for(var Ae=+Ce;Ae--;)fe(V);else{V=Ce;var we=Ce.split(">"),ot=we[0],it=we[1];ot=String.fromCodePoint(Se+=parseInt(ot,We)),it=String.fromCodePoint(Se+=parseInt(it,We)),Ee.set(ot,it),et&&X.set(it,ot)}}),{map:Ee,reverseMap:X}}var T,w,N;function D(){if(!T){var J=A(S.pairs,!0),et=J.map,We=J.reverseMap;T=et,w=We,N=A(S.canonical,!1).map}}function U(J){return D(),T.get(J)||null}function O(J){return D(),w.get(J)||null}function B(J){return D(),N.get(J)||null}var z=i.L,F=i.R,L=i.EN,I=i.ES,Y=i.ET,q=i.AN,K=i.CS,$=i.B,ce=i.S,G=i.ON,W=i.BN,Q=i.NSM,ue=i.AL,de=i.LRO,j=i.RLO,ee=i.LRE,ne=i.RLE,oe=i.PDF,re=i.LRI,se=i.RLI,le=i.FSI,ve=i.PDI;function ze(J,et){for(var We=125,Se=new Uint32Array(J.length),Ee=0;Ee<J.length;Ee++)Se[Ee]=y(J[Ee]);var X=new Map;function V(Ra,hr){var la=Se[Ra];Se[Ra]=hr,X.set(la,X.get(la)-1),la&c&&X.set(c,X.get(c)-1),X.set(hr,(X.get(hr)||0)+1),hr&c&&X.set(c,(X.get(c)||0)+1)}for(var fe=new Uint8Array(J.length),Ce=new Map,Ae=[],we=null,ot=0;ot<J.length;ot++)we||Ae.push(we={start:ot,end:J.length-1,level:et==="rtl"?1:et==="ltr"?0:vd(ot,!1)}),Se[ot]&$&&(we.end=ot,we=null);for(var it=ne|ee|j|de|r|ve|oe|$,ht=function(Ra){return Ra+(Ra&1?1:2)},xt=function(Ra){return Ra+(Ra&1?2:1)},ke=0;ke<Ae.length;ke++){we=Ae[ke];var Fe=[{_level:we.level,_override:0,_isolate:0}],Ze=void 0,rt=0,ut=0,Ut=0;X.clear();for(var me=we.start;me<=we.end;me++){var tt=Se[me];if(Ze=Fe[Fe.length-1],X.set(tt,(X.get(tt)||0)+1),tt&c&&X.set(c,(X.get(c)||0)+1),tt&it)if(tt&(ne|ee)){fe[me]=Ze._level;var nt=(tt===ne?xt:ht)(Ze._level);nt<=We&&!rt&&!ut?Fe.push({_level:nt,_override:0,_isolate:0}):rt||ut++}else if(tt&(j|de)){fe[me]=Ze._level;var ge=(tt===j?xt:ht)(Ze._level);ge<=We&&!rt&&!ut?Fe.push({_level:ge,_override:tt&j?F:z,_isolate:0}):rt||ut++}else if(tt&r){tt&le&&(tt=vd(me+1,!0)===1?se:re),fe[me]=Ze._level,Ze._override&&V(me,Ze._override);var xe=(tt===se?xt:ht)(Ze._level);xe<=We&&rt===0&&ut===0?(Ut++,Fe.push({_level:xe,_override:0,_isolate:1,_isolInitIndex:me})):rt++}else if(tt&ve){if(rt>0)rt--;else if(Ut>0){for(ut=0;!Fe[Fe.length-1]._isolate;)Fe.pop();var pe=Fe[Fe.length-1]._isolInitIndex;pe!=null&&(Ce.set(pe,me),Ce.set(me,pe)),Fe.pop(),Ut--}Ze=Fe[Fe.length-1],fe[me]=Ze._level,Ze._override&&V(me,Ze._override)}else tt&oe?(rt===0&&(ut>0?ut--:!Ze._isolate&&Fe.length>1&&(Fe.pop(),Ze=Fe[Fe.length-1])),fe[me]=Ze._level):tt&$&&(fe[me]=we.level);else fe[me]=Ze._level,Ze._override&&tt!==W&&V(me,Ze._override)}for(var Ie=[],pt=null,yt=we.start;yt<=we.end;yt++){var Nt=Se[yt];if(!(Nt&d)){var Kt=fe[yt],dn=Nt&r,Xn=Nt===ve;pt&&Kt===pt._level?(pt._end=yt,pt._endsWithIsolInit=dn):Ie.push(pt={_start:yt,_end:yt,_level:Kt,_startsWithPDI:Xn,_endsWithIsolInit:dn})}}for(var Rn=[],Jn=0;Jn<Ie.length;Jn++){var Qn=Ie[Jn];if(!Qn._startsWithPDI||Qn._startsWithPDI&&!Ce.has(Qn._start)){for(var Si=[pt=Qn],Ui=void 0;pt&&pt._endsWithIsolInit&&(Ui=Ce.get(pt._end))!=null;)for(var ai=Jn+1;ai<Ie.length;ai++)if(Ie[ai]._start===Ui){Si.push(pt=Ie[ai]);break}for(var jn=[],on=0;on<Si.length;on++)for(var bt=Si[on],$n=bt._start;$n<=bt._end;$n++)jn.push($n);for(var ja=fe[jn[0]],ls=we.level,Os=jn[0]-1;Os>=0;Os--)if(!(Se[Os]&d)){ls=fe[Os];break}var zr=jn[jn.length-1],Pr=fe[zr],Ha=we.level;if(!(Se[zr]&r)){for(var hi=zr+1;hi<=we.end;hi++)if(!(Se[hi]&d)){Ha=fe[hi];break}}Rn.push({_seqIndices:jn,_sosType:Math.max(ls,ja)%2?F:z,_eosType:Math.max(Ha,Pr)%2?F:z})}}for(var zn=0;zn<Rn.length;zn++){var ba=Rn[zn],kt=ba._seqIndices,Z=ba._sosType,Me=ba._eosType,Ge=fe[kt[0]]&1?F:z;if(X.get(Q))for(var Be=0;Be<kt.length;Be++){var Ue=kt[Be];if(Se[Ue]&Q){for(var wt=Z,At=Be-1;At>=0;At--)if(!(Se[kt[At]]&d)){wt=Se[kt[At]];break}V(Ue,wt&(r|ve)?G:wt)}}if(X.get(L))for(var Mt=0;Mt<kt.length;Mt++){var zt=kt[Mt];if(Se[zt]&L)for(var It=Mt-1;It>=-1;It--){var Zt=It===-1?Z:Se[kt[It]];if(Zt&o){Zt===ue&&V(zt,q);break}}}if(X.get(ue))for(var Bt=0;Bt<kt.length;Bt++){var $t=kt[Bt];Se[$t]&ue&&V($t,F)}if(X.get(I)||X.get(K))for(var Tn=1;Tn<kt.length-1;Tn++){var ei=kt[Tn];if(Se[ei]&(I|K)){for(var Pn=0,Un=0,Ft=Tn-1;Ft>=0&&(Pn=Se[kt[Ft]],!!(Pn&d));Ft--);for(var _n=Tn+1;_n<kt.length&&(Un=Se[kt[_n]],!!(Un&d));_n++);Pn===Un&&(Se[ei]===I?Pn===L:Pn&(L|q))&&V(ei,Pn)}}if(X.get(L))for(var qt=0;qt<kt.length;qt++){var Hi=kt[qt];if(Se[Hi]&L){for(var Na=qt-1;Na>=0&&Se[kt[Na]]&(Y|d);Na--)V(kt[Na],L);for(qt++;qt<kt.length&&Se[kt[qt]]&(Y|d|L);qt++)Se[kt[qt]]!==L&&V(kt[qt],L)}}if(X.get(Y)||X.get(I)||X.get(K))for(var wi=0;wi<kt.length;wi++){var _a=kt[wi];if(Se[_a]&(Y|I|K)){V(_a,G);for(var Sn=wi-1;Sn>=0&&Se[kt[Sn]]&d;Sn--)V(kt[Sn],G);for(var di=wi+1;di<kt.length&&Se[kt[di]]&d;di++)V(kt[di],G)}}if(X.get(L))for(var Mi=0,Oi=Z;Mi<kt.length;Mi++){var Li=kt[Mi],fr=Se[Li];fr&L?Oi===z&&V(Li,z):fr&o&&(Oi=fr)}if(X.get(c)){var ae=F|L|q,De=ae|z,st=[];{for(var Et=[],Dt=0;Dt<kt.length;Dt++)if(Se[kt[Dt]]&c){var Ct=J[kt[Dt]],mt=void 0;if(U(Ct)!==null)if(Et.length<63)Et.push({char:Ct,seqIndex:Dt});else break;else if((mt=O(Ct))!==null)for(var jt=Et.length-1;jt>=0;jt--){var Vt=Et[jt].char;if(Vt===mt||Vt===O(B(Ct))||U(B(Vt))===Ct){st.push([Et[jt].seqIndex,Dt]),Et.length=jt;break}}}st.sort(function(Ra,hr){return Ra[0]-hr[0]})}for(var On=0;On<st.length;On++){for(var Wt=st[On],yi=Wt[0],ji=Wt[1],pi=!1,Ei=0,cs=yi+1;cs<ji;cs++){var Sa=kt[cs];if(Se[Sa]&De){pi=!0;var ao=Se[Sa]&ae?F:z;if(ao===Ge){Ei=ao;break}}}if(pi&&!Ei){Ei=Z;for(var us=yi-1;us>=0;us--){var fc=kt[us];if(Se[fc]&De){var ro=Se[fc]&ae?F:z;ro!==Ge?Ei=ro:Ei=Ge;break}}}if(Ei){if(Se[kt[yi]]=Se[kt[ji]]=Ei,Ei!==Ge){for(var Ls=yi+1;Ls<kt.length;Ls++)if(!(Se[kt[Ls]]&d)){y(J[kt[Ls]])&Q&&(Se[kt[Ls]]=Ei);break}}if(Ei!==Ge){for(var zo=ji+1;zo<kt.length;zo++)if(!(Se[kt[zo]]&d)){y(J[kt[zo]])&Q&&(Se[kt[zo]]=Ei);break}}}}for(var zi=0;zi<kt.length;zi++)if(Se[kt[zi]]&c){for(var zs=zi,Po=zi,nr=Z,so=zi-1;so>=0;so--)if(Se[kt[so]]&d)zs=so;else{nr=Se[kt[so]]&ae?F:z;break}for(var hc=Me,Ps=zi+1;Ps<kt.length;Ps++)if(Se[kt[Ps]]&(c|d))Po=Ps;else{hc=Se[kt[Ps]]&ae?F:z;break}for(var oo=zs;oo<=Po;oo++)Se[kt[oo]]=nr===hc?nr:Ge;zi=Po}}}for(var ha=we.start;ha<=we.end;ha++){var Vf=fe[ha],Wi=Se[ha];if(Vf&1?Wi&(z|L|q)&&fe[ha]++:Wi&F?fe[ha]++:Wi&(q|L)&&(fe[ha]+=2),Wi&d&&(fe[ha]=ha===0?we.level:fe[ha-1]),ha===we.end||y(J[ha])&(ce|$))for(var pc=ha;pc>=0&&y(J[pc])&f;pc--)fe[pc]=we.level}}return{levels:fe,paragraphs:Ae};function vd(Ra,hr){for(var la=Ra;la<J.length;la++){var ds=Se[la];if(ds&(F|ue))return 1;if(ds&($|z)||hr&&ds===ve)return 0;if(ds&r){var xd=lu(la);la=xd===-1?J.length:xd}}return 0}function lu(Ra){for(var hr=1,la=Ra+1;la<J.length;la++){var ds=Se[la];if(ds&$)break;if(ds&ve){if(--hr===0)return la}else ds&r&&hr++}return-1}}var qe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ke;function Pe(){if(!Ke){var J=A(qe,!0),et=J.map,We=J.reverseMap;We.forEach(function(Se,Ee){et.set(Ee,Se)}),Ke=et}}function gt(J){return Pe(),Ke.get(J)||null}function Te(J,et,We,Se){var Ee=J.length;We=Math.max(0,We==null?0:+We),Se=Math.min(Ee-1,Se==null?Ee-1:+Se);for(var X=new Map,V=We;V<=Se;V++)if(et[V]&1){var fe=gt(J[V]);fe!==null&&X.set(V,fe)}return X}function je(J,et,We,Se){var Ee=J.length;We=Math.max(0,We==null?0:+We),Se=Math.min(Ee-1,Se==null?Ee-1:+Se);var X=[];return et.paragraphs.forEach(function(V){var fe=Math.max(We,V.start),Ce=Math.min(Se,V.end);if(fe<Ce){for(var Ae=et.levels.slice(fe,Ce+1),we=Ce;we>=fe&&y(J[we])&f;we--)Ae[we]=V.level;for(var ot=V.level,it=1/0,ht=0;ht<Ae.length;ht++){var xt=Ae[ht];xt>ot&&(ot=xt),xt<it&&(it=xt|1)}for(var ke=ot;ke>=it;ke--)for(var Fe=0;Fe<Ae.length;Fe++)if(Ae[Fe]>=ke){for(var Ze=Fe;Fe+1<Ae.length&&Ae[Fe+1]>=ke;)Fe++;Fe>Ze&&X.push([Ze+fe,Fe+fe])}}}),X}function Le(J,et,We,Se){var Ee=$e(J,et,We,Se),X=[].concat(J);return Ee.forEach(function(V,fe){X[fe]=(et.levels[V]&1?gt(J[V]):null)||J[V]}),X.join("")}function $e(J,et,We,Se){for(var Ee=je(J,et,We,Se),X=[],V=0;V<J.length;V++)X[V]=V;return Ee.forEach(function(fe){for(var Ce=fe[0],Ae=fe[1],we=X.slice(Ce,Ae+1),ot=we.length;ot--;)X[Ae-ot]=we[ot]}),X}return e.closingToOpeningBracket=O,e.getBidiCharType=y,e.getBidiCharTypeName=_,e.getCanonicalBracket=B,e.getEmbeddingLevels=ze,e.getMirroredCharacter=gt,e.getMirroredCharactersMap=Te,e.getReorderSegments=je,e.getReorderedIndices=$e,e.getReorderedString=Le,e.openingToClosingBracket=U,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}const PR=/\bvoid\s+main\s*\(\s*\)\s*{/g;function E2(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,a){let r=wn[a];return r?E2(r):i}return n.replace(e,t)}const dr=[];for(let n=0;n<256;n++)dr[n]=(n<16?"0":"")+n.toString(16);function xj(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(dr[n&255]+dr[n>>8&255]+dr[n>>16&255]+dr[n>>24&255]+"-"+dr[e&255]+dr[e>>8&255]+"-"+dr[e>>16&15|64]+dr[e>>24&255]+"-"+dr[t&63|128]+dr[t>>8&255]+"-"+dr[t>>16&255]+dr[t>>24&255]+dr[i&255]+dr[i>>8&255]+dr[i>>16&255]+dr[i>>24&255]).toUpperCase()}const mf=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},yj=Date.now(),jA=new WeakMap,HA=new Map;let bj=1e10;function T2(n,e){const t=Mj(e);let i=jA.get(n);if(i||jA.set(n,i=Object.create(null)),i[t])return new i[t];const a=`_onBeforeCompile${t}`,r=function(f,m){n.onBeforeCompile.call(this,f,m);const g=this.customProgramCacheKey()+"|"+f.vertexShader+"|"+f.fragmentShader;let y=HA[g];if(!y){const _=_j(this,f,e,t);y=HA[g]=_}f.vertexShader=y.vertexShader,f.fragmentShader=y.fragmentShader,mf(f.uniforms,this.uniforms),e.timeUniform&&(f.uniforms[e.timeUniform]={get value(){return Date.now()-yj}}),this[a]&&this[a](f)},o=function(){return c(e.chained?n:n.clone())},c=function(f){const m=Object.create(f,d);return Object.defineProperty(m,"baseMaterial",{value:n}),Object.defineProperty(m,"id",{value:bj++}),m.uuid=xj(),m.uniforms=mf({},f.uniforms,e.uniforms),m.defines=mf({},f.defines,e.defines),m.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",m.extensions=mf({},f.extensions,e.extensions),m._listeners=void 0,m},d={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:f=>{n.type=f}},isDerivedFrom:{writable:!0,configurable:!0,value:function(f){const m=this.baseMaterial;return f===m||m.isDerivedMaterial&&m.isDerivedFrom(f)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return r},set(f){this[a]=f}},copy:{writable:!0,configurable:!0,value:function(f){return n.copy.call(this,f),!n.isShaderMaterial&&!n.isDerivedMaterial&&(mf(this.extensions,f.extensions),mf(this.defines,f.defines),mf(this.uniforms,vw.clone(f.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const f=new n.constructor;return c(f).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let f=this._depthMaterial;return f||(f=this._depthMaterial=T2(n.isDerivedMaterial?n.getDepthMaterial():new l1({depthPacking:KC}),e),f.defines.IS_DEPTH_MATERIAL="",f.uniforms=this.uniforms),f}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let f=this._distanceMaterial;return f||(f=this._distanceMaterial=T2(n.isDerivedMaterial?n.getDistanceMaterial():new c1,e),f.defines.IS_DISTANCE_MATERIAL="",f.uniforms=this.uniforms),f}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:f,_distanceMaterial:m}=this;f&&f.dispose(),m&&m.dispose(),n.dispose.call(this)}}};return i[t]=o,new o}function _j(n,{vertexShader:e,fragmentShader:t},i,a){let{vertexDefs:r,vertexMainIntro:o,vertexMainOutro:c,vertexTransform:d,fragmentDefs:f,fragmentMainIntro:m,fragmentMainOutro:g,fragmentColorTransform:y,customRewriter:_,timeUniform:S}=i;if(r=r||"",o=o||"",c=c||"",f=f||"",m=m||"",g=g||"",(d||_)&&(e=E2(e)),(y||_)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=E2(t)),_){let A=_({vertexShader:e,fragmentShader:t});e=A.vertexShader,t=A.fragmentShader}if(y){let A=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,T=>(A.push(T),"")),g=`${y}
${A.join(`
`)}
${g}`}if(S){const A=`
uniform float ${S};
`;r=A+r,f=A+f}return d&&(e=`vec3 troika_position_${a};
vec3 troika_normal_${a};
vec2 troika_uv_${a};
${e}
`,r=`${r}
void troikaVertexTransform${a}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${d}
}
`,o=`
troika_position_${a} = vec3(position);
troika_normal_${a} = vec3(normal);
troika_uv_${a} = vec2(uv);
troikaVertexTransform${a}(troika_position_${a}, troika_normal_${a}, troika_uv_${a});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(A,T,w,N)=>/\battribute\s+vec[23]\s+$/.test(N.substr(0,w))?T:`troika_${T}_${a}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${a}`))),e=VA(e,a,r,o,c),t=VA(t,a,f,m,g),{vertexShader:e,fragmentShader:t}}function VA(n,e,t,i,a){return(i||a||t)&&(n=n.replace(PR,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${a}
}`),n}function Sj(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let wj=0;const GA=new Map;function Mj(n){const e=JSON.stringify(n,Sj);let t=GA.get(e);return t==null&&GA.set(e,t=++wj),t}function Ej(){return typeof window>"u"&&(self.window=self),(function(n){var e={parse:function(a){var r=e._bin,o=new Uint8Array(a);if(r.readASCII(o,0,4)=="ttcf"){var c=4;r.readUshort(o,c),c+=2,r.readUshort(o,c),c+=2;var d=r.readUint(o,c);c+=4;for(var f=[],m=0;m<d;m++){var g=r.readUint(o,c);c+=4,f.push(e._readFont(o,g))}return f}return[e._readFont(o,0)]},_readFont:function(a,r){var o=e._bin,c=r;o.readFixed(a,r),r+=4;var d=o.readUshort(a,r);r+=2,o.readUshort(a,r),r+=2,o.readUshort(a,r),r+=2,o.readUshort(a,r),r+=2;for(var f=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],m={_data:a,_offset:c},g={},y=0;y<d;y++){var _=o.readASCII(a,r,4);r+=4,o.readUint(a,r),r+=4;var S=o.readUint(a,r);r+=4;var A=o.readUint(a,r);r+=4,g[_]={offset:S,length:A}}for(y=0;y<f.length;y++){var T=f[y];g[T]&&(m[T.trim()]=e[T.trim()].parse(a,g[T].offset,g[T].length,m))}return m},_tabOffset:function(a,r,o){for(var c=e._bin,d=c.readUshort(a,o+4),f=o+12,m=0;m<d;m++){var g=c.readASCII(a,f,4);f+=4,c.readUint(a,f),f+=4;var y=c.readUint(a,f);if(f+=4,c.readUint(a,f),f+=4,g==r)return y}return 0}};e._bin={readFixed:function(a,r){return(a[r]<<8|a[r+1])+(a[r+2]<<8|a[r+3])/65540},readF2dot14:function(a,r){return e._bin.readShort(a,r)/16384},readInt:function(a,r){return e._bin._view(a).getInt32(r)},readInt8:function(a,r){return e._bin._view(a).getInt8(r)},readShort:function(a,r){return e._bin._view(a).getInt16(r)},readUshort:function(a,r){return e._bin._view(a).getUint16(r)},readUshorts:function(a,r,o){for(var c=[],d=0;d<o;d++)c.push(e._bin.readUshort(a,r+2*d));return c},readUint:function(a,r){return e._bin._view(a).getUint32(r)},readUint64:function(a,r){return 4294967296*e._bin.readUint(a,r)+e._bin.readUint(a,r+4)},readASCII:function(a,r,o){for(var c="",d=0;d<o;d++)c+=String.fromCharCode(a[r+d]);return c},readUnicode:function(a,r,o){for(var c="",d=0;d<o;d++){var f=a[r++]<<8|a[r++];c+=String.fromCharCode(f)}return c},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(a,r,o){var c=e._bin._tdec;return c&&r==0&&o==a.length?c.decode(a):e._bin.readASCII(a,r,o)},readBytes:function(a,r,o){for(var c=[],d=0;d<o;d++)c.push(a[r+d]);return c},readASCIIArray:function(a,r,o){for(var c=[],d=0;d<o;d++)c.push(String.fromCharCode(a[r+d]));return c},_view:function(a){return a._dataView||(a._dataView=a.buffer?new DataView(a.buffer,a.byteOffset,a.byteLength):new DataView(new Uint8Array(a).buffer))}},e._lctf={},e._lctf.parse=function(a,r,o,c,d){var f=e._bin,m={},g=r;f.readFixed(a,r),r+=4;var y=f.readUshort(a,r);r+=2;var _=f.readUshort(a,r);r+=2;var S=f.readUshort(a,r);return r+=2,m.scriptList=e._lctf.readScriptList(a,g+y),m.featureList=e._lctf.readFeatureList(a,g+_),m.lookupList=e._lctf.readLookupList(a,g+S,d),m},e._lctf.readLookupList=function(a,r,o){var c=e._bin,d=r,f=[],m=c.readUshort(a,r);r+=2;for(var g=0;g<m;g++){var y=c.readUshort(a,r);r+=2;var _=e._lctf.readLookupTable(a,d+y,o);f.push(_)}return f},e._lctf.readLookupTable=function(a,r,o){var c=e._bin,d=r,f={tabs:[]};f.ltype=c.readUshort(a,r),r+=2,f.flag=c.readUshort(a,r),r+=2;var m=c.readUshort(a,r);r+=2;for(var g=f.ltype,y=0;y<m;y++){var _=c.readUshort(a,r);r+=2;var S=o(a,g,d+_,f);f.tabs.push(S)}return f},e._lctf.numOfOnes=function(a){for(var r=0,o=0;o<32;o++)(a>>>o&1)!=0&&r++;return r},e._lctf.readClassDef=function(a,r){var o=e._bin,c=[],d=o.readUshort(a,r);if(r+=2,d==1){var f=o.readUshort(a,r);r+=2;var m=o.readUshort(a,r);r+=2;for(var g=0;g<m;g++)c.push(f+g),c.push(f+g),c.push(o.readUshort(a,r)),r+=2}if(d==2){var y=o.readUshort(a,r);for(r+=2,g=0;g<y;g++)c.push(o.readUshort(a,r)),r+=2,c.push(o.readUshort(a,r)),r+=2,c.push(o.readUshort(a,r)),r+=2}return c},e._lctf.getInterval=function(a,r){for(var o=0;o<a.length;o+=3){var c=a[o],d=a[o+1];if(a[o+2],c<=r&&r<=d)return o}return-1},e._lctf.readCoverage=function(a,r){var o=e._bin,c={};c.fmt=o.readUshort(a,r),r+=2;var d=o.readUshort(a,r);return r+=2,c.fmt==1&&(c.tab=o.readUshorts(a,r,d)),c.fmt==2&&(c.tab=o.readUshorts(a,r,3*d)),c},e._lctf.coverageIndex=function(a,r){var o=a.tab;if(a.fmt==1)return o.indexOf(r);if(a.fmt==2){var c=e._lctf.getInterval(o,r);if(c!=-1)return o[c+2]+(r-o[c])}return-1},e._lctf.readFeatureList=function(a,r){var o=e._bin,c=r,d=[],f=o.readUshort(a,r);r+=2;for(var m=0;m<f;m++){var g=o.readASCII(a,r,4);r+=4;var y=o.readUshort(a,r);r+=2;var _=e._lctf.readFeatureTable(a,c+y);_.tag=g.trim(),d.push(_)}return d},e._lctf.readFeatureTable=function(a,r){var o=e._bin,c=r,d={},f=o.readUshort(a,r);r+=2,f>0&&(d.featureParams=c+f);var m=o.readUshort(a,r);r+=2,d.tab=[];for(var g=0;g<m;g++)d.tab.push(o.readUshort(a,r+2*g));return d},e._lctf.readScriptList=function(a,r){var o=e._bin,c=r,d={},f=o.readUshort(a,r);r+=2;for(var m=0;m<f;m++){var g=o.readASCII(a,r,4);r+=4;var y=o.readUshort(a,r);r+=2,d[g.trim()]=e._lctf.readScriptTable(a,c+y)}return d},e._lctf.readScriptTable=function(a,r){var o=e._bin,c=r,d={},f=o.readUshort(a,r);r+=2,f>0&&(d.default=e._lctf.readLangSysTable(a,c+f));var m=o.readUshort(a,r);r+=2;for(var g=0;g<m;g++){var y=o.readASCII(a,r,4);r+=4;var _=o.readUshort(a,r);r+=2,d[y.trim()]=e._lctf.readLangSysTable(a,c+_)}return d},e._lctf.readLangSysTable=function(a,r){var o=e._bin,c={};o.readUshort(a,r),r+=2,c.reqFeature=o.readUshort(a,r),r+=2;var d=o.readUshort(a,r);return r+=2,c.features=o.readUshorts(a,r,d),c},e.CFF={},e.CFF.parse=function(a,r,o){var c=e._bin;(a=new Uint8Array(a.buffer,r,o))[r=0],a[++r],a[++r],a[++r],r++;var d=[];r=e.CFF.readIndex(a,r,d);for(var f=[],m=0;m<d.length-1;m++)f.push(c.readASCII(a,r+d[m],d[m+1]-d[m]));r+=d[d.length-1];var g=[];r=e.CFF.readIndex(a,r,g);var y=[];for(m=0;m<g.length-1;m++)y.push(e.CFF.readDict(a,r+g[m],r+g[m+1]));r+=g[g.length-1];var _=y[0],S=[];r=e.CFF.readIndex(a,r,S);var A=[];for(m=0;m<S.length-1;m++)A.push(c.readASCII(a,r+S[m],S[m+1]-S[m]));if(r+=S[S.length-1],e.CFF.readSubrs(a,r,_),_.CharStrings){r=_.CharStrings,S=[],r=e.CFF.readIndex(a,r,S);var T=[];for(m=0;m<S.length-1;m++)T.push(c.readBytes(a,r+S[m],S[m+1]-S[m]));_.CharStrings=T}if(_.ROS){r=_.FDArray;var w=[];for(r=e.CFF.readIndex(a,r,w),_.FDArray=[],m=0;m<w.length-1;m++){var N=e.CFF.readDict(a,r+w[m],r+w[m+1]);e.CFF._readFDict(a,N,A),_.FDArray.push(N)}r+=w[w.length-1],r=_.FDSelect,_.FDSelect=[];var D=a[r];if(r++,D!=3)throw D;var U=c.readUshort(a,r);for(r+=2,m=0;m<U+1;m++)_.FDSelect.push(c.readUshort(a,r),a[r+2]),r+=3}return _.Encoding&&(_.Encoding=e.CFF.readEncoding(a,_.Encoding,_.CharStrings.length)),_.charset&&(_.charset=e.CFF.readCharset(a,_.charset,_.CharStrings.length)),e.CFF._readFDict(a,_,A),_},e.CFF._readFDict=function(a,r,o){var c;for(var d in r.Private&&(c=r.Private[1],r.Private=e.CFF.readDict(a,c,c+r.Private[0]),r.Private.Subrs&&e.CFF.readSubrs(a,c+r.Private.Subrs,r.Private)),r)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(d)!=-1&&(r[d]=o[r[d]-426+35])},e.CFF.readSubrs=function(a,r,o){var c=e._bin,d=[];r=e.CFF.readIndex(a,r,d);var f,m=d.length;f=m<1240?107:m<33900?1131:32768,o.Bias=f,o.Subrs=[];for(var g=0;g<d.length-1;g++)o.Subrs.push(c.readBytes(a,r+d[g],d[g+1]-d[g]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(a,r){for(var o=0;o<a.charset.length;o++)if(a.charset[o]==r)return o;return-1},e.CFF.glyphBySE=function(a,r){return r<0||r>255?-1:e.CFF.glyphByUnicode(a,e.CFF.tableSE[r])},e.CFF.readEncoding=function(a,r,o){e._bin;var c=[".notdef"],d=a[r];if(r++,d!=0)throw"error: unknown encoding format: "+d;var f=a[r];r++;for(var m=0;m<f;m++)c.push(a[r+m]);return c},e.CFF.readCharset=function(a,r,o){var c=e._bin,d=[".notdef"],f=a[r];if(r++,f==0)for(var m=0;m<o;m++){var g=c.readUshort(a,r);r+=2,d.push(g)}else{if(f!=1&&f!=2)throw"error: format: "+f;for(;d.length<o;){g=c.readUshort(a,r),r+=2;var y=0;for(f==1?(y=a[r],r++):(y=c.readUshort(a,r),r+=2),m=0;m<=y;m++)d.push(g),g++}}return d},e.CFF.readIndex=function(a,r,o){var c=e._bin,d=c.readUshort(a,r)+1,f=a[r+=2];if(r++,f==1)for(var m=0;m<d;m++)o.push(a[r+m]);else if(f==2)for(m=0;m<d;m++)o.push(c.readUshort(a,r+2*m));else if(f==3)for(m=0;m<d;m++)o.push(16777215&c.readUint(a,r+3*m-1));else if(d!=1)throw"unsupported offset size: "+f+", count: "+d;return(r+=d*f)-1},e.CFF.getCharString=function(a,r,o){var c=e._bin,d=a[r],f=a[r+1];a[r+2],a[r+3],a[r+4];var m=1,g=null,y=null;d<=20&&(g=d,m=1),d==12&&(g=100*d+f,m=2),21<=d&&d<=27&&(g=d,m=1),d==28&&(y=c.readShort(a,r+1),m=3),29<=d&&d<=31&&(g=d,m=1),32<=d&&d<=246&&(y=d-139,m=1),247<=d&&d<=250&&(y=256*(d-247)+f+108,m=2),251<=d&&d<=254&&(y=256*-(d-251)-f-108,m=2),d==255&&(y=c.readInt(a,r+1)/65535,m=5),o.val=y??"o"+g,o.size=m},e.CFF.readCharString=function(a,r,o){for(var c=r+o,d=e._bin,f=[];r<c;){var m=a[r],g=a[r+1];a[r+2],a[r+3],a[r+4];var y=1,_=null,S=null;m<=20&&(_=m,y=1),m==12&&(_=100*m+g,y=2),m!=19&&m!=20||(_=m,y=2),21<=m&&m<=27&&(_=m,y=1),m==28&&(S=d.readShort(a,r+1),y=3),29<=m&&m<=31&&(_=m,y=1),32<=m&&m<=246&&(S=m-139,y=1),247<=m&&m<=250&&(S=256*(m-247)+g+108,y=2),251<=m&&m<=254&&(S=256*-(m-251)-g-108,y=2),m==255&&(S=d.readInt(a,r+1)/65535,y=5),f.push(S??"o"+_),r+=y}return f},e.CFF.readDict=function(a,r,o){for(var c=e._bin,d={},f=[];r<o;){var m=a[r],g=a[r+1];a[r+2],a[r+3],a[r+4];var y=1,_=null,S=null;if(m==28&&(S=c.readShort(a,r+1),y=3),m==29&&(S=c.readInt(a,r+1),y=5),32<=m&&m<=246&&(S=m-139,y=1),247<=m&&m<=250&&(S=256*(m-247)+g+108,y=2),251<=m&&m<=254&&(S=256*-(m-251)-g-108,y=2),m==255)throw S=c.readInt(a,r+1)/65535,y=5,"unknown number";if(m==30){var A=[];for(y=1;;){var T=a[r+y];y++;var w=T>>4,N=15&T;if(w!=15&&A.push(w),N!=15&&A.push(N),N==15)break}for(var D="",U=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],O=0;O<A.length;O++)D+=U[A[O]];S=parseFloat(D)}m<=21&&(_=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][m],y=1,m==12&&(_=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][g],y=2)),_!=null?(d[_]=f.length==1?f[0]:f,f=[]):f.push(S),r+=y}return d},e.cmap={},e.cmap.parse=function(a,r,o){a=new Uint8Array(a.buffer,r,o),r=0;var c=e._bin,d={};c.readUshort(a,r),r+=2;var f=c.readUshort(a,r);r+=2;var m=[];d.tables=[];for(var g=0;g<f;g++){var y=c.readUshort(a,r);r+=2;var _=c.readUshort(a,r);r+=2;var S=c.readUint(a,r);r+=4;var A="p"+y+"e"+_,T=m.indexOf(S);if(T==-1){var w;T=d.tables.length,m.push(S);var N=c.readUshort(a,S);N==0?w=e.cmap.parse0(a,S):N==4?w=e.cmap.parse4(a,S):N==6?w=e.cmap.parse6(a,S):N==12?w=e.cmap.parse12(a,S):console.debug("unknown format: "+N,y,_,S),d.tables.push(w)}if(d[A]!=null)throw"multiple tables for one platform+encoding";d[A]=T}return d},e.cmap.parse0=function(a,r){var o=e._bin,c={};c.format=o.readUshort(a,r),r+=2;var d=o.readUshort(a,r);r+=2,o.readUshort(a,r),r+=2,c.map=[];for(var f=0;f<d-6;f++)c.map.push(a[r+f]);return c},e.cmap.parse4=function(a,r){var o=e._bin,c=r,d={};d.format=o.readUshort(a,r),r+=2;var f=o.readUshort(a,r);r+=2,o.readUshort(a,r),r+=2;var m=o.readUshort(a,r);r+=2;var g=m/2;d.searchRange=o.readUshort(a,r),r+=2,d.entrySelector=o.readUshort(a,r),r+=2,d.rangeShift=o.readUshort(a,r),r+=2,d.endCount=o.readUshorts(a,r,g),r+=2*g,r+=2,d.startCount=o.readUshorts(a,r,g),r+=2*g,d.idDelta=[];for(var y=0;y<g;y++)d.idDelta.push(o.readShort(a,r)),r+=2;for(d.idRangeOffset=o.readUshorts(a,r,g),r+=2*g,d.glyphIdArray=[];r<c+f;)d.glyphIdArray.push(o.readUshort(a,r)),r+=2;return d},e.cmap.parse6=function(a,r){var o=e._bin,c={};c.format=o.readUshort(a,r),r+=2,o.readUshort(a,r),r+=2,o.readUshort(a,r),r+=2,c.firstCode=o.readUshort(a,r),r+=2;var d=o.readUshort(a,r);r+=2,c.glyphIdArray=[];for(var f=0;f<d;f++)c.glyphIdArray.push(o.readUshort(a,r)),r+=2;return c},e.cmap.parse12=function(a,r){var o=e._bin,c={};c.format=o.readUshort(a,r),r+=2,r+=2,o.readUint(a,r),r+=4,o.readUint(a,r),r+=4;var d=o.readUint(a,r);r+=4,c.groups=[];for(var f=0;f<d;f++){var m=r+12*f,g=o.readUint(a,m+0),y=o.readUint(a,m+4),_=o.readUint(a,m+8);c.groups.push([g,y,_])}return c},e.glyf={},e.glyf.parse=function(a,r,o,c){for(var d=[],f=0;f<c.maxp.numGlyphs;f++)d.push(null);return d},e.glyf._parseGlyf=function(a,r){var o=e._bin,c=a._data,d=e._tabOffset(c,"glyf",a._offset)+a.loca[r];if(a.loca[r]==a.loca[r+1])return null;var f={};if(f.noc=o.readShort(c,d),d+=2,f.xMin=o.readShort(c,d),d+=2,f.yMin=o.readShort(c,d),d+=2,f.xMax=o.readShort(c,d),d+=2,f.yMax=o.readShort(c,d),d+=2,f.xMin>=f.xMax||f.yMin>=f.yMax)return null;if(f.noc>0){f.endPts=[];for(var m=0;m<f.noc;m++)f.endPts.push(o.readUshort(c,d)),d+=2;var g=o.readUshort(c,d);if(d+=2,c.length-d<g)return null;f.instructions=o.readBytes(c,d,g),d+=g;var y=f.endPts[f.noc-1]+1;for(f.flags=[],m=0;m<y;m++){var _=c[d];if(d++,f.flags.push(_),(8&_)!=0){var S=c[d];d++;for(var A=0;A<S;A++)f.flags.push(_),m++}}for(f.xs=[],m=0;m<y;m++){var T=(2&f.flags[m])!=0,w=(16&f.flags[m])!=0;T?(f.xs.push(w?c[d]:-c[d]),d++):w?f.xs.push(0):(f.xs.push(o.readShort(c,d)),d+=2)}for(f.ys=[],m=0;m<y;m++)T=(4&f.flags[m])!=0,w=(32&f.flags[m])!=0,T?(f.ys.push(w?c[d]:-c[d]),d++):w?f.ys.push(0):(f.ys.push(o.readShort(c,d)),d+=2);var N=0,D=0;for(m=0;m<y;m++)N+=f.xs[m],D+=f.ys[m],f.xs[m]=N,f.ys[m]=D}else{var U;f.parts=[];do{U=o.readUshort(c,d),d+=2;var O={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(f.parts.push(O),O.glyphIndex=o.readUshort(c,d),d+=2,1&U){var B=o.readShort(c,d);d+=2;var z=o.readShort(c,d);d+=2}else B=o.readInt8(c,d),d++,z=o.readInt8(c,d),d++;2&U?(O.m.tx=B,O.m.ty=z):(O.p1=B,O.p2=z),8&U?(O.m.a=O.m.d=o.readF2dot14(c,d),d+=2):64&U?(O.m.a=o.readF2dot14(c,d),d+=2,O.m.d=o.readF2dot14(c,d),d+=2):128&U&&(O.m.a=o.readF2dot14(c,d),d+=2,O.m.b=o.readF2dot14(c,d),d+=2,O.m.c=o.readF2dot14(c,d),d+=2,O.m.d=o.readF2dot14(c,d),d+=2)}while(32&U);if(256&U){var F=o.readUshort(c,d);for(d+=2,f.instr=[],m=0;m<F;m++)f.instr.push(c[d]),d++}}return f},e.GDEF={},e.GDEF.parse=function(a,r,o,c){var d=r;r+=4;var f=e._bin.readUshort(a,r);return{glyphClassDef:f===0?null:e._lctf.readClassDef(a,d+f)}},e.GPOS={},e.GPOS.parse=function(a,r,o,c){return e._lctf.parse(a,r,o,c,e.GPOS.subt)},e.GPOS.subt=function(a,r,o,c){var d=e._bin,f=o,m={};if(m.fmt=d.readUshort(a,o),o+=2,r==1||r==2||r==3||r==7||r==8&&m.fmt<=2){var g=d.readUshort(a,o);o+=2,m.coverage=e._lctf.readCoverage(a,g+f)}if(r==1&&m.fmt==1){var y=d.readUshort(a,o);o+=2,y!=0&&(m.pos=e.GPOS.readValueRecord(a,o,y))}else if(r==2&&m.fmt>=1&&m.fmt<=2){y=d.readUshort(a,o),o+=2;var _=d.readUshort(a,o);o+=2;var S=e._lctf.numOfOnes(y),A=e._lctf.numOfOnes(_);if(m.fmt==1){m.pairsets=[];var T=d.readUshort(a,o);o+=2;for(var w=0;w<T;w++){var N=f+d.readUshort(a,o);o+=2;var D=d.readUshort(a,N);N+=2;for(var U=[],O=0;O<D;O++){var B=d.readUshort(a,N);N+=2,y!=0&&(q=e.GPOS.readValueRecord(a,N,y),N+=2*S),_!=0&&(K=e.GPOS.readValueRecord(a,N,_),N+=2*A),U.push({gid2:B,val1:q,val2:K})}m.pairsets.push(U)}}if(m.fmt==2){var z=d.readUshort(a,o);o+=2;var F=d.readUshort(a,o);o+=2;var L=d.readUshort(a,o);o+=2;var I=d.readUshort(a,o);for(o+=2,m.classDef1=e._lctf.readClassDef(a,f+z),m.classDef2=e._lctf.readClassDef(a,f+F),m.matrix=[],w=0;w<L;w++){var Y=[];for(O=0;O<I;O++){var q=null,K=null;y!=0&&(q=e.GPOS.readValueRecord(a,o,y),o+=2*S),_!=0&&(K=e.GPOS.readValueRecord(a,o,_),o+=2*A),Y.push({val1:q,val2:K})}m.matrix.push(Y)}}}else if(r==4&&m.fmt==1)m.markCoverage=e._lctf.readCoverage(a,d.readUshort(a,o)+f),m.baseCoverage=e._lctf.readCoverage(a,d.readUshort(a,o+2)+f),m.markClassCount=d.readUshort(a,o+4),m.markArray=e.GPOS.readMarkArray(a,d.readUshort(a,o+6)+f),m.baseArray=e.GPOS.readBaseArray(a,d.readUshort(a,o+8)+f,m.markClassCount);else if(r==6&&m.fmt==1)m.mark1Coverage=e._lctf.readCoverage(a,d.readUshort(a,o)+f),m.mark2Coverage=e._lctf.readCoverage(a,d.readUshort(a,o+2)+f),m.markClassCount=d.readUshort(a,o+4),m.mark1Array=e.GPOS.readMarkArray(a,d.readUshort(a,o+6)+f),m.mark2Array=e.GPOS.readBaseArray(a,d.readUshort(a,o+8)+f,m.markClassCount);else{if(r==9&&m.fmt==1){var $=d.readUshort(a,o);o+=2;var ce=d.readUint(a,o);if(o+=4,c.ltype==9)c.ltype=$;else if(c.ltype!=$)throw"invalid extension substitution";return e.GPOS.subt(a,c.ltype,f+ce)}console.debug("unsupported GPOS table LookupType",r,"format",m.fmt)}return m},e.GPOS.readValueRecord=function(a,r,o){var c=e._bin,d=[];return d.push(1&o?c.readShort(a,r):0),r+=1&o?2:0,d.push(2&o?c.readShort(a,r):0),r+=2&o?2:0,d.push(4&o?c.readShort(a,r):0),r+=4&o?2:0,d.push(8&o?c.readShort(a,r):0),r+=8&o?2:0,d},e.GPOS.readBaseArray=function(a,r,o){var c=e._bin,d=[],f=r,m=c.readUshort(a,r);r+=2;for(var g=0;g<m;g++){for(var y=[],_=0;_<o;_++)y.push(e.GPOS.readAnchorRecord(a,f+c.readUshort(a,r))),r+=2;d.push(y)}return d},e.GPOS.readMarkArray=function(a,r){var o=e._bin,c=[],d=r,f=o.readUshort(a,r);r+=2;for(var m=0;m<f;m++){var g=e.GPOS.readAnchorRecord(a,o.readUshort(a,r+2)+d);g.markClass=o.readUshort(a,r),c.push(g),r+=4}return c},e.GPOS.readAnchorRecord=function(a,r){var o=e._bin,c={};return c.fmt=o.readUshort(a,r),c.x=o.readShort(a,r+2),c.y=o.readShort(a,r+4),c},e.GSUB={},e.GSUB.parse=function(a,r,o,c){return e._lctf.parse(a,r,o,c,e.GSUB.subt)},e.GSUB.subt=function(a,r,o,c){var d=e._bin,f=o,m={};if(m.fmt=d.readUshort(a,o),o+=2,r!=1&&r!=2&&r!=4&&r!=5&&r!=6)return null;if(r==1||r==2||r==4||r==5&&m.fmt<=2||r==6&&m.fmt<=2){var g=d.readUshort(a,o);o+=2,m.coverage=e._lctf.readCoverage(a,f+g)}if(r==1&&m.fmt>=1&&m.fmt<=2){if(m.fmt==1)m.delta=d.readShort(a,o),o+=2;else if(m.fmt==2){var y=d.readUshort(a,o);o+=2,m.newg=d.readUshorts(a,o,y),o+=2*m.newg.length}}else if(r==2&&m.fmt==1){y=d.readUshort(a,o),o+=2,m.seqs=[];for(var _=0;_<y;_++){var S=d.readUshort(a,o)+f;o+=2;var A=d.readUshort(a,S);m.seqs.push(d.readUshorts(a,S+2,A))}}else if(r==4)for(m.vals=[],y=d.readUshort(a,o),o+=2,_=0;_<y;_++){var T=d.readUshort(a,o);o+=2,m.vals.push(e.GSUB.readLigatureSet(a,f+T))}else if(r==5&&m.fmt==2){if(m.fmt==2){var w=d.readUshort(a,o);o+=2,m.cDef=e._lctf.readClassDef(a,f+w),m.scset=[];var N=d.readUshort(a,o);for(o+=2,_=0;_<N;_++){var D=d.readUshort(a,o);o+=2,m.scset.push(D==0?null:e.GSUB.readSubClassSet(a,f+D))}}}else if(r==6&&m.fmt==3){if(m.fmt==3){for(_=0;_<3;_++){y=d.readUshort(a,o),o+=2;for(var U=[],O=0;O<y;O++)U.push(e._lctf.readCoverage(a,f+d.readUshort(a,o+2*O)));o+=2*y,_==0&&(m.backCvg=U),_==1&&(m.inptCvg=U),_==2&&(m.ahedCvg=U)}y=d.readUshort(a,o),o+=2,m.lookupRec=e.GSUB.readSubstLookupRecords(a,o,y)}}else{if(r==7&&m.fmt==1){var B=d.readUshort(a,o);o+=2;var z=d.readUint(a,o);if(o+=4,c.ltype==9)c.ltype=B;else if(c.ltype!=B)throw"invalid extension substitution";return e.GSUB.subt(a,c.ltype,f+z)}console.debug("unsupported GSUB table LookupType",r,"format",m.fmt)}return m},e.GSUB.readSubClassSet=function(a,r){var o=e._bin.readUshort,c=r,d=[],f=o(a,r);r+=2;for(var m=0;m<f;m++){var g=o(a,r);r+=2,d.push(e.GSUB.readSubClassRule(a,c+g))}return d},e.GSUB.readSubClassRule=function(a,r){var o=e._bin.readUshort,c={},d=o(a,r),f=o(a,r+=2);r+=2,c.input=[];for(var m=0;m<d-1;m++)c.input.push(o(a,r)),r+=2;return c.substLookupRecords=e.GSUB.readSubstLookupRecords(a,r,f),c},e.GSUB.readSubstLookupRecords=function(a,r,o){for(var c=e._bin.readUshort,d=[],f=0;f<o;f++)d.push(c(a,r),c(a,r+2)),r+=4;return d},e.GSUB.readChainSubClassSet=function(a,r){var o=e._bin,c=r,d=[],f=o.readUshort(a,r);r+=2;for(var m=0;m<f;m++){var g=o.readUshort(a,r);r+=2,d.push(e.GSUB.readChainSubClassRule(a,c+g))}return d},e.GSUB.readChainSubClassRule=function(a,r){for(var o=e._bin,c={},d=["backtrack","input","lookahead"],f=0;f<d.length;f++){var m=o.readUshort(a,r);r+=2,f==1&&m--,c[d[f]]=o.readUshorts(a,r,m),r+=2*c[d[f]].length}return m=o.readUshort(a,r),r+=2,c.subst=o.readUshorts(a,r,2*m),r+=2*c.subst.length,c},e.GSUB.readLigatureSet=function(a,r){var o=e._bin,c=r,d=[],f=o.readUshort(a,r);r+=2;for(var m=0;m<f;m++){var g=o.readUshort(a,r);r+=2,d.push(e.GSUB.readLigature(a,c+g))}return d},e.GSUB.readLigature=function(a,r){var o=e._bin,c={chain:[]};c.nglyph=o.readUshort(a,r),r+=2;var d=o.readUshort(a,r);r+=2;for(var f=0;f<d-1;f++)c.chain.push(o.readUshort(a,r)),r+=2;return c},e.head={},e.head.parse=function(a,r,o){var c=e._bin,d={};return c.readFixed(a,r),r+=4,d.fontRevision=c.readFixed(a,r),r+=4,c.readUint(a,r),r+=4,c.readUint(a,r),r+=4,d.flags=c.readUshort(a,r),r+=2,d.unitsPerEm=c.readUshort(a,r),r+=2,d.created=c.readUint64(a,r),r+=8,d.modified=c.readUint64(a,r),r+=8,d.xMin=c.readShort(a,r),r+=2,d.yMin=c.readShort(a,r),r+=2,d.xMax=c.readShort(a,r),r+=2,d.yMax=c.readShort(a,r),r+=2,d.macStyle=c.readUshort(a,r),r+=2,d.lowestRecPPEM=c.readUshort(a,r),r+=2,d.fontDirectionHint=c.readShort(a,r),r+=2,d.indexToLocFormat=c.readShort(a,r),r+=2,d.glyphDataFormat=c.readShort(a,r),r+=2,d},e.hhea={},e.hhea.parse=function(a,r,o){var c=e._bin,d={};return c.readFixed(a,r),r+=4,d.ascender=c.readShort(a,r),r+=2,d.descender=c.readShort(a,r),r+=2,d.lineGap=c.readShort(a,r),r+=2,d.advanceWidthMax=c.readUshort(a,r),r+=2,d.minLeftSideBearing=c.readShort(a,r),r+=2,d.minRightSideBearing=c.readShort(a,r),r+=2,d.xMaxExtent=c.readShort(a,r),r+=2,d.caretSlopeRise=c.readShort(a,r),r+=2,d.caretSlopeRun=c.readShort(a,r),r+=2,d.caretOffset=c.readShort(a,r),r+=2,r+=8,d.metricDataFormat=c.readShort(a,r),r+=2,d.numberOfHMetrics=c.readUshort(a,r),r+=2,d},e.hmtx={},e.hmtx.parse=function(a,r,o,c){for(var d=e._bin,f={aWidth:[],lsBearing:[]},m=0,g=0,y=0;y<c.maxp.numGlyphs;y++)y<c.hhea.numberOfHMetrics&&(m=d.readUshort(a,r),r+=2,g=d.readShort(a,r),r+=2),f.aWidth.push(m),f.lsBearing.push(g);return f},e.kern={},e.kern.parse=function(a,r,o,c){var d=e._bin,f=d.readUshort(a,r);if(r+=2,f==1)return e.kern.parseV1(a,r-2,o,c);var m=d.readUshort(a,r);r+=2;for(var g={glyph1:[],rval:[]},y=0;y<m;y++){r+=2,o=d.readUshort(a,r),r+=2;var _=d.readUshort(a,r);r+=2;var S=_>>>8;if((S&=15)!=0)throw"unknown kern table format: "+S;r=e.kern.readFormat0(a,r,g)}return g},e.kern.parseV1=function(a,r,o,c){var d=e._bin;d.readFixed(a,r),r+=4;var f=d.readUint(a,r);r+=4;for(var m={glyph1:[],rval:[]},g=0;g<f;g++){d.readUint(a,r),r+=4;var y=d.readUshort(a,r);r+=2,d.readUshort(a,r),r+=2;var _=y>>>8;if((_&=15)!=0)throw"unknown kern table format: "+_;r=e.kern.readFormat0(a,r,m)}return m},e.kern.readFormat0=function(a,r,o){var c=e._bin,d=-1,f=c.readUshort(a,r);r+=2,c.readUshort(a,r),r+=2,c.readUshort(a,r),r+=2,c.readUshort(a,r),r+=2;for(var m=0;m<f;m++){var g=c.readUshort(a,r);r+=2;var y=c.readUshort(a,r);r+=2;var _=c.readShort(a,r);r+=2,g!=d&&(o.glyph1.push(g),o.rval.push({glyph2:[],vals:[]}));var S=o.rval[o.rval.length-1];S.glyph2.push(y),S.vals.push(_),d=g}return r},e.loca={},e.loca.parse=function(a,r,o,c){var d=e._bin,f=[],m=c.head.indexToLocFormat,g=c.maxp.numGlyphs+1;if(m==0)for(var y=0;y<g;y++)f.push(d.readUshort(a,r+(y<<1))<<1);if(m==1)for(y=0;y<g;y++)f.push(d.readUint(a,r+(y<<2)));return f},e.maxp={},e.maxp.parse=function(a,r,o){var c=e._bin,d={},f=c.readUint(a,r);return r+=4,d.numGlyphs=c.readUshort(a,r),r+=2,f==65536&&(d.maxPoints=c.readUshort(a,r),r+=2,d.maxContours=c.readUshort(a,r),r+=2,d.maxCompositePoints=c.readUshort(a,r),r+=2,d.maxCompositeContours=c.readUshort(a,r),r+=2,d.maxZones=c.readUshort(a,r),r+=2,d.maxTwilightPoints=c.readUshort(a,r),r+=2,d.maxStorage=c.readUshort(a,r),r+=2,d.maxFunctionDefs=c.readUshort(a,r),r+=2,d.maxInstructionDefs=c.readUshort(a,r),r+=2,d.maxStackElements=c.readUshort(a,r),r+=2,d.maxSizeOfInstructions=c.readUshort(a,r),r+=2,d.maxComponentElements=c.readUshort(a,r),r+=2,d.maxComponentDepth=c.readUshort(a,r),r+=2),d},e.name={},e.name.parse=function(a,r,o){var c=e._bin,d={};c.readUshort(a,r),r+=2;var f=c.readUshort(a,r);r+=2,c.readUshort(a,r);for(var m,g=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],y=r+=2,_=0;_<f;_++){var S=c.readUshort(a,r);r+=2;var A=c.readUshort(a,r);r+=2;var T=c.readUshort(a,r);r+=2;var w=c.readUshort(a,r);r+=2;var N=c.readUshort(a,r);r+=2;var D=c.readUshort(a,r);r+=2;var U,O=g[w],B=y+12*f+D;if(S==0)U=c.readUnicode(a,B,N/2);else if(S==3&&A==0)U=c.readUnicode(a,B,N/2);else if(A==0)U=c.readASCII(a,B,N);else if(A==1)U=c.readUnicode(a,B,N/2);else if(A==3)U=c.readUnicode(a,B,N/2);else{if(S!=1)throw"unknown encoding "+A+", platformID: "+S;U=c.readASCII(a,B,N),console.debug("reading unknown MAC encoding "+A+" as ASCII")}var z="p"+S+","+T.toString(16);d[z]==null&&(d[z]={}),d[z][O!==void 0?O:w]=U,d[z]._lang=T}for(var F in d)if(d[F].postScriptName!=null&&d[F]._lang==1033)return d[F];for(var F in d)if(d[F].postScriptName!=null&&d[F]._lang==0)return d[F];for(var F in d)if(d[F].postScriptName!=null&&d[F]._lang==3084)return d[F];for(var F in d)if(d[F].postScriptName!=null)return d[F];for(var F in d){m=F;break}return console.debug("returning name table with languageID "+d[m]._lang),d[m]},e["OS/2"]={},e["OS/2"].parse=function(a,r,o){var c=e._bin.readUshort(a,r);r+=2;var d={};if(c==0)e["OS/2"].version0(a,r,d);else if(c==1)e["OS/2"].version1(a,r,d);else if(c==2||c==3||c==4)e["OS/2"].version2(a,r,d);else{if(c!=5)throw"unknown OS/2 table version: "+c;e["OS/2"].version5(a,r,d)}return d},e["OS/2"].version0=function(a,r,o){var c=e._bin;return o.xAvgCharWidth=c.readShort(a,r),r+=2,o.usWeightClass=c.readUshort(a,r),r+=2,o.usWidthClass=c.readUshort(a,r),r+=2,o.fsType=c.readUshort(a,r),r+=2,o.ySubscriptXSize=c.readShort(a,r),r+=2,o.ySubscriptYSize=c.readShort(a,r),r+=2,o.ySubscriptXOffset=c.readShort(a,r),r+=2,o.ySubscriptYOffset=c.readShort(a,r),r+=2,o.ySuperscriptXSize=c.readShort(a,r),r+=2,o.ySuperscriptYSize=c.readShort(a,r),r+=2,o.ySuperscriptXOffset=c.readShort(a,r),r+=2,o.ySuperscriptYOffset=c.readShort(a,r),r+=2,o.yStrikeoutSize=c.readShort(a,r),r+=2,o.yStrikeoutPosition=c.readShort(a,r),r+=2,o.sFamilyClass=c.readShort(a,r),r+=2,o.panose=c.readBytes(a,r,10),r+=10,o.ulUnicodeRange1=c.readUint(a,r),r+=4,o.ulUnicodeRange2=c.readUint(a,r),r+=4,o.ulUnicodeRange3=c.readUint(a,r),r+=4,o.ulUnicodeRange4=c.readUint(a,r),r+=4,o.achVendID=[c.readInt8(a,r),c.readInt8(a,r+1),c.readInt8(a,r+2),c.readInt8(a,r+3)],r+=4,o.fsSelection=c.readUshort(a,r),r+=2,o.usFirstCharIndex=c.readUshort(a,r),r+=2,o.usLastCharIndex=c.readUshort(a,r),r+=2,o.sTypoAscender=c.readShort(a,r),r+=2,o.sTypoDescender=c.readShort(a,r),r+=2,o.sTypoLineGap=c.readShort(a,r),r+=2,o.usWinAscent=c.readUshort(a,r),r+=2,o.usWinDescent=c.readUshort(a,r),r+=2},e["OS/2"].version1=function(a,r,o){var c=e._bin;return r=e["OS/2"].version0(a,r,o),o.ulCodePageRange1=c.readUint(a,r),r+=4,o.ulCodePageRange2=c.readUint(a,r),r+=4},e["OS/2"].version2=function(a,r,o){var c=e._bin;return r=e["OS/2"].version1(a,r,o),o.sxHeight=c.readShort(a,r),r+=2,o.sCapHeight=c.readShort(a,r),r+=2,o.usDefault=c.readUshort(a,r),r+=2,o.usBreak=c.readUshort(a,r),r+=2,o.usMaxContext=c.readUshort(a,r),r+=2},e["OS/2"].version5=function(a,r,o){var c=e._bin;return r=e["OS/2"].version2(a,r,o),o.usLowerOpticalPointSize=c.readUshort(a,r),r+=2,o.usUpperOpticalPointSize=c.readUshort(a,r),r+=2},e.post={},e.post.parse=function(a,r,o){var c=e._bin,d={};return d.version=c.readFixed(a,r),r+=4,d.italicAngle=c.readFixed(a,r),r+=4,d.underlinePosition=c.readShort(a,r),r+=2,d.underlineThickness=c.readShort(a,r),r+=2,d},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(a,r){var o=a.cmap,c=-1;if(o.p0e4!=null?c=o.p0e4:o.p3e1!=null?c=o.p3e1:o.p1e0!=null?c=o.p1e0:o.p0e3!=null&&(c=o.p0e3),c==-1)throw"no familiar platform and encoding!";var d=o.tables[c];if(d.format==0)return r>=d.map.length?0:d.map[r];if(d.format==4){for(var f=-1,m=0;m<d.endCount.length;m++)if(r<=d.endCount[m]){f=m;break}return f==-1||d.startCount[f]>r?0:65535&(d.idRangeOffset[f]!=0?d.glyphIdArray[r-d.startCount[f]+(d.idRangeOffset[f]>>1)-(d.idRangeOffset.length-f)]:r+d.idDelta[f])}if(d.format==12){if(r>d.groups[d.groups.length-1][1])return 0;for(m=0;m<d.groups.length;m++){var g=d.groups[m];if(g[0]<=r&&r<=g[1])return g[2]+(r-g[0])}return 0}throw"unknown cmap table format "+d.format},e.U.glyphToPath=function(a,r){var o={cmds:[],crds:[]};if(a.SVG&&a.SVG.entries[r]){var c=a.SVG.entries[r];return c==null?o:(typeof c=="string"&&(c=e.SVG.toPath(c),a.SVG.entries[r]=c),c)}if(a.CFF){var d={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:a.CFF.Private?a.CFF.Private.defaultWidthX:0,open:!1},f=a.CFF,m=a.CFF.Private;if(f.ROS){for(var g=0;f.FDSelect[g+2]<=r;)g+=2;m=f.FDArray[f.FDSelect[g+1]].Private}e.U._drawCFF(a.CFF.CharStrings[r],d,f,m,o)}else a.glyf&&e.U._drawGlyf(r,a,o);return o},e.U._drawGlyf=function(a,r,o){var c=r.glyf[a];c==null&&(c=r.glyf[a]=e.glyf._parseGlyf(r,a)),c!=null&&(c.noc>-1?e.U._simpleGlyph(c,o):e.U._compoGlyph(c,r,o))},e.U._simpleGlyph=function(a,r){for(var o=0;o<a.noc;o++){for(var c=o==0?0:a.endPts[o-1]+1,d=a.endPts[o],f=c;f<=d;f++){var m=f==c?d:f-1,g=f==d?c:f+1,y=1&a.flags[f],_=1&a.flags[m],S=1&a.flags[g],A=a.xs[f],T=a.ys[f];if(f==c)if(y){if(!_){e.U.P.moveTo(r,A,T);continue}e.U.P.moveTo(r,a.xs[m],a.ys[m])}else _?e.U.P.moveTo(r,a.xs[m],a.ys[m]):e.U.P.moveTo(r,(a.xs[m]+A)/2,(a.ys[m]+T)/2);y?_&&e.U.P.lineTo(r,A,T):S?e.U.P.qcurveTo(r,A,T,a.xs[g],a.ys[g]):e.U.P.qcurveTo(r,A,T,(A+a.xs[g])/2,(T+a.ys[g])/2)}e.U.P.closePath(r)}},e.U._compoGlyph=function(a,r,o){for(var c=0;c<a.parts.length;c++){var d={cmds:[],crds:[]},f=a.parts[c];e.U._drawGlyf(f.glyphIndex,r,d);for(var m=f.m,g=0;g<d.crds.length;g+=2){var y=d.crds[g],_=d.crds[g+1];o.crds.push(y*m.a+_*m.b+m.tx),o.crds.push(y*m.c+_*m.d+m.ty)}for(g=0;g<d.cmds.length;g++)o.cmds.push(d.cmds[g])}},e.U._getGlyphClass=function(a,r){var o=e._lctf.getInterval(r,a);return o==-1?0:r[o+2]},e.U._applySubs=function(a,r,o,c){for(var d=a.length-r-1,f=0;f<o.tabs.length;f++)if(o.tabs[f]!=null){var m,g=o.tabs[f];if(!g.coverage||(m=e._lctf.coverageIndex(g.coverage,a[r]))!=-1){if(o.ltype==1)a[r],g.fmt==1?a[r]=a[r]+g.delta:a[r]=g.newg[m];else if(o.ltype==4)for(var y=g.vals[m],_=0;_<y.length;_++){var S=y[_],A=S.chain.length;if(!(A>d)){for(var T=!0,w=0,N=0;N<A;N++){for(;a[r+w+(1+N)]==-1;)w++;S.chain[N]!=a[r+w+(1+N)]&&(T=!1)}if(T){for(a[r]=S.nglyph,N=0;N<A+w;N++)a[r+N+1]=-1;break}}}else if(o.ltype==5&&g.fmt==2)for(var D=e._lctf.getInterval(g.cDef,a[r]),U=g.cDef[D+2],O=g.scset[U],B=0;B<O.length;B++){var z=O[B],F=z.input;if(!(F.length>d)){for(T=!0,N=0;N<F.length;N++){var L=e._lctf.getInterval(g.cDef,a[r+1+N]);if(D==-1&&g.cDef[L+2]!=F[N]){T=!1;break}}if(T){var I=z.substLookupRecords;for(_=0;_<I.length;_+=2)I[_],I[_+1]}}}else if(o.ltype==6&&g.fmt==3){if(!e.U._glsCovered(a,g.backCvg,r-g.backCvg.length)||!e.U._glsCovered(a,g.inptCvg,r)||!e.U._glsCovered(a,g.ahedCvg,r+g.inptCvg.length))continue;var Y=g.lookupRec;for(B=0;B<Y.length;B+=2){D=Y[B];var q=c[Y[B+1]];e.U._applySubs(a,r+D,q,c)}}}}},e.U._glsCovered=function(a,r,o){for(var c=0;c<r.length;c++)if(e._lctf.coverageIndex(r[c],a[o+c])==-1)return!1;return!0},e.U.glyphsToPath=function(a,r,o){for(var c={cmds:[],crds:[]},d=0,f=0;f<r.length;f++){var m=r[f];if(m!=-1){for(var g=f<r.length-1&&r[f+1]!=-1?r[f+1]:0,y=e.U.glyphToPath(a,m),_=0;_<y.crds.length;_+=2)c.crds.push(y.crds[_]+d),c.crds.push(y.crds[_+1]);for(o&&c.cmds.push(o),_=0;_<y.cmds.length;_++)c.cmds.push(y.cmds[_]);o&&c.cmds.push("X"),d+=a.hmtx.aWidth[m],f<r.length-1&&(d+=e.U.getPairAdjustment(a,m,g))}}return c},e.U.P={},e.U.P.moveTo=function(a,r,o){a.cmds.push("M"),a.crds.push(r,o)},e.U.P.lineTo=function(a,r,o){a.cmds.push("L"),a.crds.push(r,o)},e.U.P.curveTo=function(a,r,o,c,d,f,m){a.cmds.push("C"),a.crds.push(r,o,c,d,f,m)},e.U.P.qcurveTo=function(a,r,o,c,d){a.cmds.push("Q"),a.crds.push(r,o,c,d)},e.U.P.closePath=function(a){a.cmds.push("Z")},e.U._drawCFF=function(a,r,o,c,d){for(var f=r.stack,m=r.nStems,g=r.haveWidth,y=r.width,_=r.open,S=0,A=r.x,T=r.y,w=0,N=0,D=0,U=0,O=0,B=0,z=0,F=0,L=0,I=0,Y={val:0,size:0};S<a.length;){e.CFF.getCharString(a,S,Y);var q=Y.val;if(S+=Y.size,q=="o1"||q=="o18")f.length%2!=0&&!g&&(y=f.shift()+c.nominalWidthX),m+=f.length>>1,f.length=0,g=!0;else if(q=="o3"||q=="o23")f.length%2!=0&&!g&&(y=f.shift()+c.nominalWidthX),m+=f.length>>1,f.length=0,g=!0;else if(q=="o4")f.length>1&&!g&&(y=f.shift()+c.nominalWidthX,g=!0),_&&e.U.P.closePath(d),T+=f.pop(),e.U.P.moveTo(d,A,T),_=!0;else if(q=="o5")for(;f.length>0;)A+=f.shift(),T+=f.shift(),e.U.P.lineTo(d,A,T);else if(q=="o6"||q=="o7")for(var K=f.length,$=q=="o6",ce=0;ce<K;ce++){var G=f.shift();$?A+=G:T+=G,$=!$,e.U.P.lineTo(d,A,T)}else if(q=="o8"||q=="o24"){K=f.length;for(var W=0;W+6<=K;)w=A+f.shift(),N=T+f.shift(),D=w+f.shift(),U=N+f.shift(),A=D+f.shift(),T=U+f.shift(),e.U.P.curveTo(d,w,N,D,U,A,T),W+=6;q=="o24"&&(A+=f.shift(),T+=f.shift(),e.U.P.lineTo(d,A,T))}else{if(q=="o11")break;if(q=="o1234"||q=="o1235"||q=="o1236"||q=="o1237")q=="o1234"&&(N=T,D=(w=A+f.shift())+f.shift(),I=U=N+f.shift(),B=U,F=T,A=(z=(O=(L=D+f.shift())+f.shift())+f.shift())+f.shift(),e.U.P.curveTo(d,w,N,D,U,L,I),e.U.P.curveTo(d,O,B,z,F,A,T)),q=="o1235"&&(w=A+f.shift(),N=T+f.shift(),D=w+f.shift(),U=N+f.shift(),L=D+f.shift(),I=U+f.shift(),O=L+f.shift(),B=I+f.shift(),z=O+f.shift(),F=B+f.shift(),A=z+f.shift(),T=F+f.shift(),f.shift(),e.U.P.curveTo(d,w,N,D,U,L,I),e.U.P.curveTo(d,O,B,z,F,A,T)),q=="o1236"&&(w=A+f.shift(),N=T+f.shift(),D=w+f.shift(),I=U=N+f.shift(),B=U,z=(O=(L=D+f.shift())+f.shift())+f.shift(),F=B+f.shift(),A=z+f.shift(),e.U.P.curveTo(d,w,N,D,U,L,I),e.U.P.curveTo(d,O,B,z,F,A,T)),q=="o1237"&&(w=A+f.shift(),N=T+f.shift(),D=w+f.shift(),U=N+f.shift(),L=D+f.shift(),I=U+f.shift(),O=L+f.shift(),B=I+f.shift(),z=O+f.shift(),F=B+f.shift(),Math.abs(z-A)>Math.abs(F-T)?A=z+f.shift():T=F+f.shift(),e.U.P.curveTo(d,w,N,D,U,L,I),e.U.P.curveTo(d,O,B,z,F,A,T));else if(q=="o14"){if(f.length>0&&!g&&(y=f.shift()+o.nominalWidthX,g=!0),f.length==4){var Q=f.shift(),ue=f.shift(),de=f.shift(),j=f.shift(),ee=e.CFF.glyphBySE(o,de),ne=e.CFF.glyphBySE(o,j);e.U._drawCFF(o.CharStrings[ee],r,o,c,d),r.x=Q,r.y=ue,e.U._drawCFF(o.CharStrings[ne],r,o,c,d)}_&&(e.U.P.closePath(d),_=!1)}else if(q=="o19"||q=="o20")f.length%2!=0&&!g&&(y=f.shift()+c.nominalWidthX),m+=f.length>>1,f.length=0,g=!0,S+=m+7>>3;else if(q=="o21")f.length>2&&!g&&(y=f.shift()+c.nominalWidthX,g=!0),T+=f.pop(),A+=f.pop(),_&&e.U.P.closePath(d),e.U.P.moveTo(d,A,T),_=!0;else if(q=="o22")f.length>1&&!g&&(y=f.shift()+c.nominalWidthX,g=!0),A+=f.pop(),_&&e.U.P.closePath(d),e.U.P.moveTo(d,A,T),_=!0;else if(q=="o25"){for(;f.length>6;)A+=f.shift(),T+=f.shift(),e.U.P.lineTo(d,A,T);w=A+f.shift(),N=T+f.shift(),D=w+f.shift(),U=N+f.shift(),A=D+f.shift(),T=U+f.shift(),e.U.P.curveTo(d,w,N,D,U,A,T)}else if(q=="o26")for(f.length%2&&(A+=f.shift());f.length>0;)w=A,N=T+f.shift(),A=D=w+f.shift(),T=(U=N+f.shift())+f.shift(),e.U.P.curveTo(d,w,N,D,U,A,T);else if(q=="o27")for(f.length%2&&(T+=f.shift());f.length>0;)N=T,D=(w=A+f.shift())+f.shift(),U=N+f.shift(),A=D+f.shift(),T=U,e.U.P.curveTo(d,w,N,D,U,A,T);else if(q=="o10"||q=="o29"){var oe=q=="o10"?c:o;if(f.length==0)console.debug("error: empty stack");else{var re=f.pop(),se=oe.Subrs[re+oe.Bias];r.x=A,r.y=T,r.nStems=m,r.haveWidth=g,r.width=y,r.open=_,e.U._drawCFF(se,r,o,c,d),A=r.x,T=r.y,m=r.nStems,g=r.haveWidth,y=r.width,_=r.open}}else if(q=="o30"||q=="o31"){var le=f.length,ve=(W=0,q=="o31");for(W+=le-(K=-3&le);W<K;)ve?(N=T,D=(w=A+f.shift())+f.shift(),T=(U=N+f.shift())+f.shift(),K-W==5?(A=D+f.shift(),W++):A=D,ve=!1):(w=A,N=T+f.shift(),D=w+f.shift(),U=N+f.shift(),A=D+f.shift(),K-W==5?(T=U+f.shift(),W++):T=U,ve=!0),e.U.P.curveTo(d,w,N,D,U,A,T),W+=4}else{if((q+"").charAt(0)=="o")throw console.debug("Unknown operation: "+q,a),q;f.push(q)}}}r.x=A,r.y=T,r.nStems=m,r.haveWidth=g,r.width=y,r.open=_};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n})({}).Typr}function Tj(){return(function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,a=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(q,K){for(var $=new t(31),ce=0;ce<31;++ce)$[ce]=K+=1<<q[ce-1];var G=new i($[30]);for(ce=1;ce<30;++ce)for(var W=$[ce];W<$[ce+1];++W)G[W]=W-$[ce]<<5|ce;return[$,G]},d=c(a,2),f=d[0],m=d[1];f[28]=258,m[258]=28;for(var g=c(r,0)[0],y=new t(32768),_=0;_<32768;++_){var S=(43690&_)>>>1|(21845&_)<<1;S=(61680&(S=(52428&S)>>>2|(13107&S)<<2))>>>4|(3855&S)<<4,y[_]=((65280&S)>>>8|(255&S)<<8)>>>1}var A=function(q,K,$){for(var ce=q.length,G=0,W=new t(K);G<ce;++G)++W[q[G]-1];var Q,ue=new t(K);for(G=0;G<K;++G)ue[G]=ue[G-1]+W[G-1]<<1;{Q=new t(1<<K);var de=15-K;for(G=0;G<ce;++G)if(q[G])for(var j=G<<4|q[G],ee=K-q[G],ne=ue[q[G]-1]++<<ee,oe=ne|(1<<ee)-1;ne<=oe;++ne)Q[y[ne]>>>de]=j}return Q},T=new e(288);for(_=0;_<144;++_)T[_]=8;for(_=144;_<256;++_)T[_]=9;for(_=256;_<280;++_)T[_]=7;for(_=280;_<288;++_)T[_]=8;var w=new e(32);for(_=0;_<32;++_)w[_]=5;var N=A(T,9),D=A(w,5),U=function(q){for(var K=q[0],$=1;$<q.length;++$)q[$]>K&&(K=q[$]);return K},O=function(q,K,$){var ce=K/8|0;return(q[ce]|q[ce+1]<<8)>>(7&K)&$},B=function(q,K){var $=K/8|0;return(q[$]|q[$+1]<<8|q[$+2]<<16)>>(7&K)},z=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],F=function(q,K,$){var ce=new Error(K||z[q]);if(ce.code=q,Error.captureStackTrace&&Error.captureStackTrace(ce,F),!$)throw ce;return ce},L=function(q,K,$){var ce=q.length;if(!ce||$&&!$.l&&ce<5)return K||new e(0);var G=!K||$,W=!$||$.i;$||($={}),K||(K=new e(3*ce));var Q,ue=function(Ze){var rt=K.length;if(Ze>rt){var ut=new e(Math.max(2*rt,Ze));ut.set(K),K=ut}},de=$.f||0,j=$.p||0,ee=$.b||0,ne=$.l,oe=$.d,re=$.m,se=$.n,le=8*ce;do{if(!ne){$.f=de=O(q,j,1);var ve=O(q,j+1,3);if(j+=3,!ve){var ze=q[(We=((Q=j)/8|0)+(7&Q&&1)+4)-4]|q[We-3]<<8,qe=We+ze;if(qe>ce){W&&F(0);break}G&&ue(ee+ze),K.set(q.subarray(We,qe),ee),$.b=ee+=ze,$.p=j=8*qe;continue}if(ve==1)ne=N,oe=D,re=9,se=5;else if(ve==2){var Ke=O(q,j,31)+257,Pe=O(q,j+10,15)+4,gt=Ke+O(q,j+5,31)+1;j+=14;for(var Te=new e(gt),je=new e(19),Le=0;Le<Pe;++Le)je[o[Le]]=O(q,j+3*Le,7);j+=3*Pe;var $e=U(je),J=(1<<$e)-1,et=A(je,$e);for(Le=0;Le<gt;){var We,Se=et[O(q,j,J)];if(j+=15&Se,(We=Se>>>4)<16)Te[Le++]=We;else{var Ee=0,X=0;for(We==16?(X=3+O(q,j,3),j+=2,Ee=Te[Le-1]):We==17?(X=3+O(q,j,7),j+=3):We==18&&(X=11+O(q,j,127),j+=7);X--;)Te[Le++]=Ee}}var V=Te.subarray(0,Ke),fe=Te.subarray(Ke);re=U(V),se=U(fe),ne=A(V,re),oe=A(fe,se)}else F(1);if(j>le){W&&F(0);break}}G&&ue(ee+131072);for(var Ce=(1<<re)-1,Ae=(1<<se)-1,we=j;;we=j){var ot=(Ee=ne[B(q,j)&Ce])>>>4;if((j+=15&Ee)>le){W&&F(0);break}if(Ee||F(2),ot<256)K[ee++]=ot;else{if(ot==256){we=j,ne=null;break}var it=ot-254;if(ot>264){var ht=a[Le=ot-257];it=O(q,j,(1<<ht)-1)+f[Le],j+=ht}var xt=oe[B(q,j)&Ae],ke=xt>>>4;if(xt||F(3),j+=15&xt,fe=g[ke],ke>3&&(ht=r[ke],fe+=B(q,j)&(1<<ht)-1,j+=ht),j>le){W&&F(0);break}G&&ue(ee+131072);for(var Fe=ee+it;ee<Fe;ee+=4)K[ee]=K[ee-fe],K[ee+1]=K[ee+1-fe],K[ee+2]=K[ee+2-fe],K[ee+3]=K[ee+3-fe];ee=Fe}}$.l=ne,$.p=we,$.b=ee,ne&&(de=1,$.m=re,$.d=oe,$.n=se)}while(!de);return ee==K.length?K:(function(Ze,rt,ut){(ut==null||ut>Ze.length)&&(ut=Ze.length);var Ut=new(Ze instanceof t?t:Ze instanceof i?i:e)(ut-rt);return Ut.set(Ze.subarray(rt,ut)),Ut})(K,0,ee)},I=new e(0),Y=typeof TextDecoder<"u"&&new TextDecoder;try{Y.decode(I,{stream:!0})}catch{}return n.convert_streams=function(q){var K=new DataView(q),$=0;function ce(){var Ke=K.getUint16($);return $+=2,Ke}function G(){var Ke=K.getUint32($);return $+=4,Ke}function W(Ke){ze.setUint16(qe,Ke),qe+=2}function Q(Ke){ze.setUint32(qe,Ke),qe+=4}for(var ue={signature:G(),flavor:G(),length:G(),numTables:ce(),reserved:ce(),totalSfntSize:G(),majorVersion:ce(),minorVersion:ce(),metaOffset:G(),metaLength:G(),metaOrigLength:G(),privOffset:G(),privLength:G()},de=0;Math.pow(2,de)<=ue.numTables;)de++;de--;for(var j=16*Math.pow(2,de),ee=16*ue.numTables-j,ne=12,oe=[],re=0;re<ue.numTables;re++)oe.push({tag:G(),offset:G(),compLength:G(),origLength:G(),origChecksum:G()}),ne+=16;var se,le=new Uint8Array(12+16*oe.length+oe.reduce((function(Ke,Pe){return Ke+Pe.origLength+4}),0)),ve=le.buffer,ze=new DataView(ve),qe=0;return Q(ue.flavor),W(ue.numTables),W(j),W(de),W(ee),oe.forEach((function(Ke){Q(Ke.tag),Q(Ke.origChecksum),Q(ne),Q(Ke.origLength),Ke.outOffset=ne,(ne+=Ke.origLength)%4!=0&&(ne+=4-ne%4)})),oe.forEach((function(Ke){var Pe,gt=q.slice(Ke.offset,Ke.offset+Ke.compLength);if(Ke.compLength!=Ke.origLength){var Te=new Uint8Array(Ke.origLength);Pe=new Uint8Array(gt,2),L(Pe,Te)}else Te=new Uint8Array(gt);le.set(Te,Ke.outOffset);var je=0;(ne=Ke.outOffset+Ke.origLength)%4!=0&&(je=4-ne%4),le.set(new Uint8Array(je).buffer,Ke.outOffset+Ke.origLength),se=ne+je})),ve.slice(0,se)},Object.defineProperty(n,"__esModule",{value:!0}),n})({}).convert_streams}function Aj(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},a=1,r=2,o=4,c=8,d=16,f=32;let m;function g(z){if(!m){const F={R:r,L:a,D:o,C:d,U:f,T:c};m=new Map;for(let L in i){let I=0;i[L].split(",").forEach(Y=>{let[q,K]=Y.split("+");q=parseInt(q,36),K=K?parseInt(K,36):0,m.set(I+=q,F[L]);for(let $=K;$--;)m.set(++I,F[L])})}}return m.get(z)||f}const y=1,_=2,S=3,A=4,T=[null,"isol","init","fina","medi"];function w(z){const F=new Uint8Array(z.length);let L=f,I=y,Y=-1;for(let q=0;q<z.length;q++){const K=z.codePointAt(q);let $=g(K)|0,ce=y;$&c||(L&(a|o|d)?$&(r|o|d)?(ce=S,(I===y||I===S)&&F[Y]++):$&(a|f)&&(I===_||I===A)&&F[Y]--:L&(r|f)&&(I===_||I===A)&&F[Y]--,I=F[q]=ce,L=$,Y=q,K>65535&&q++)}return F}function N(z,F){const L=[];for(let Y=0;Y<F.length;Y++){const q=F.codePointAt(Y);q>65535&&Y++,L.push(n.U.codeToGlyph(z,q))}const I=z.GSUB;if(I){const{lookupList:Y,featureList:q}=I;let K;const $=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ce=[];q.forEach(G=>{if($.test(G.tag))for(let W=0;W<G.tab.length;W++){if(ce[G.tab[W]])continue;ce[G.tab[W]]=!0;const Q=Y[G.tab[W]],ue=/^(isol|init|fina|medi)$/.test(G.tag);ue&&!K&&(K=w(F));for(let de=0;de<L.length;de++)(!K||!ue||T[K[de]]===G.tag)&&n.U._applySubs(L,de,Q,Y)}})}return L}function D(z,F){const L=new Int16Array(F.length*3);let I=0;for(;I<F.length;I++){const $=F[I];if($===-1)continue;L[I*3+2]=z.hmtx.aWidth[$];const ce=z.GPOS;if(ce){const G=ce.lookupList;for(let W=0;W<G.length;W++){const Q=G[W];for(let ue=0;ue<Q.tabs.length;ue++){const de=Q.tabs[ue];if(Q.ltype===1){if(n._lctf.coverageIndex(de.coverage,$)!==-1&&de.pos){K(de.pos,I);break}}else if(Q.ltype===2){let j=null,ee=Y();if(ee!==-1){const ne=n._lctf.coverageIndex(de.coverage,F[ee]);if(ne!==-1){if(de.fmt===1){const oe=de.pairsets[ne];for(let re=0;re<oe.length;re++)oe[re].gid2===$&&(j=oe[re])}else if(de.fmt===2){const oe=n.U._getGlyphClass(F[ee],de.classDef1),re=n.U._getGlyphClass($,de.classDef2);j=de.matrix[oe][re]}if(j){j.val1&&K(j.val1,ee),j.val2&&K(j.val2,I);break}}}}else if(Q.ltype===4){const j=n._lctf.coverageIndex(de.markCoverage,$);if(j!==-1){const ee=Y(q),ne=ee===-1?-1:n._lctf.coverageIndex(de.baseCoverage,F[ee]);if(ne!==-1){const oe=de.markArray[j],re=de.baseArray[ne][oe.markClass];L[I*3]=re.x-oe.x+L[ee*3]-L[ee*3+2],L[I*3+1]=re.y-oe.y+L[ee*3+1];break}}}else if(Q.ltype===6){const j=n._lctf.coverageIndex(de.mark1Coverage,$);if(j!==-1){const ee=Y();if(ee!==-1){const ne=F[ee];if(U(z,ne)===3){const oe=n._lctf.coverageIndex(de.mark2Coverage,ne);if(oe!==-1){const re=de.mark1Array[j],se=de.mark2Array[oe][re.markClass];L[I*3]=se.x-re.x+L[ee*3]-L[ee*3+2],L[I*3+1]=se.y-re.y+L[ee*3+1];break}}}}}}}}else if(z.kern&&!z.cff){const G=Y();if(G!==-1){const W=z.kern.glyph1.indexOf(F[G]);if(W!==-1){const Q=z.kern.rval[W].glyph2.indexOf($);Q!==-1&&(L[G*3+2]+=z.kern.rval[W].vals[Q])}}}}return L;function Y($){for(let ce=I-1;ce>=0;ce--)if(F[ce]!==-1&&(!$||$(F[ce])))return ce;return-1}function q($){return U(z,$)===1}function K($,ce){for(let G=0;G<3;G++)L[ce*3+G]+=$[G]||0}}function U(z,F){const L=z.GDEF&&z.GDEF.glyphClassDef;return L?n.U._getGlyphClass(F,L):0}function O(...z){for(let F=0;F<z.length;F++)if(typeof z[F]=="number")return z[F]}function B(z){const F=Object.create(null),L=z["OS/2"],I=z.hhea,Y=z.head.unitsPerEm,q=O(L&&L.sTypoAscender,I&&I.ascender,Y),K={unitsPerEm:Y,ascender:q,descender:O(L&&L.sTypoDescender,I&&I.descender,0),capHeight:O(L&&L.sCapHeight,q),xHeight:O(L&&L.sxHeight,q),lineGap:O(L&&L.sTypoLineGap,I&&I.lineGap),supportsCodePoint($){return n.U.codeToGlyph(z,$)>0},forEachGlyph($,ce,G,W){let Q=0;const ue=1/K.unitsPerEm*ce,de=N(z,$);let j=0;const ee=D(z,de);return de.forEach((ne,oe)=>{if(ne!==-1){let re=F[ne];if(!re){const{cmds:se,crds:le}=n.U.glyphToPath(z,ne);let ve="",ze=0;for(let Te=0,je=se.length;Te<je;Te++){const Le=t[se[Te]];ve+=se[Te];for(let $e=1;$e<=Le;$e++)ve+=($e>1?",":"")+le[ze++]}let qe,Ke,Pe,gt;if(le.length){qe=Ke=1/0,Pe=gt=-1/0;for(let Te=0,je=le.length;Te<je;Te+=2){let Le=le[Te],$e=le[Te+1];Le<qe&&(qe=Le),$e<Ke&&(Ke=$e),Le>Pe&&(Pe=Le),$e>gt&&(gt=$e)}}else qe=Pe=Ke=gt=0;re=F[ne]={index:ne,advanceWidth:z.hmtx.aWidth[ne],xMin:qe,yMin:Ke,xMax:Pe,yMax:gt,path:ve}}W.call(null,re,Q+ee[oe*3]*ue,ee[oe*3+1]*ue,j),Q+=ee[oe*3+2]*ue,G&&(Q+=G*ce)}j+=$.codePointAt(j)>65535?2:1}),Q}};return K}return function(F){const L=new Uint8Array(F,0,4),I=n._bin.readASCII(L,0,4);if(I==="wOFF")F=e(F);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return B(n.parse(F)[0])}}const Cj=qp({name:"Typr Font Parser",dependencies:[Ej,Tj,Aj],init(n,e,t){const i=n(),a=e();return t(i,a)}});function Nj(){return(function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(D){var U=D>>5;this.buckets.set(U,(this.buckets.get(U)||0)|1<<(31&D))},e.prototype.has=function(D){var U=this.buckets.get(D>>5);return U!==void 0&&(U&1<<(31&D))!=0},e.prototype.serialize=function(){var D=[];return this.buckets.forEach((function(U,O){D.push((+O).toString(36)+":"+U.toString(36))})),D.join(",")},e.prototype.deserialize=function(D){var U=this;this.buckets.clear(),D.split(",").forEach((function(O){var B=O.split(":");U.buckets.set(parseInt(B[0],36),parseInt(B[1],36))}))};var t=Math.pow(2,8),i=t-1,a=~i;function r(D){var U=(function(B){return B&a})(D).toString(16),O=(function(B){return(B&a)+t-1})(D).toString(16);return"codepoint-index/plane"+(D>>16)+"/"+U+"-"+O+".json"}function o(D,U){var O=D&i,B=U.codePointAt(O/6|0);return((B=(B||48)-48)&1<<O%6)!=0}function c(D,U){var O;(O=D,O.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(B){return B.split("-").map((function(z){return parseInt(z.trim(),16)}))}))).forEach((function(B){var z=B[0],F=B[1];F===void 0&&(F=z),U(z,F)}))}function d(D,U){c(D,(function(O,B){for(var z=O;z<=B;z++)U(z)}))}var f={},m={},g=new WeakMap,y="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function _(D){var U=g.get(D);return U||(U=new e,d(D.ranges,(function(O){return U.add(O)})),g.set(D,U)),U}var S,A=new Map;function T(D,U,O){return D[U]?U:D[O]?O:(function(B){for(var z in B)return z})(D)}function w(D,U){var O=U;if(!D.includes(O)){O=1/0;for(var B=0;B<D.length;B++)Math.abs(D[B]-U)<Math.abs(O-U)&&(O=D[B])}return O}function N(D){return S||(S=new Set,d("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(U){S.add(U)}))),S.has(D)}return n.CodePointSet=e,n.clearCache=function(){f={},m={}},n.getFontsForString=function(D,U){U===void 0&&(U={});var O,B=U.lang;B===void 0&&(B=new RegExp("\\p{Script=Hangul}","u").test(O=D)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(O)?"ja":"en");var z=U.category;z===void 0&&(z="sans-serif");var F=U.style;F===void 0&&(F="normal");var L=U.weight;L===void 0&&(L=400);var I=(U.dataUrl||y).replace(/\/$/g,""),Y=new Map,q=new Uint8Array(D.length),K={},$={},ce=new Array(D.length),G=new Map,W=!1;function Q(j){var ee=A.get(j);return ee||(ee=fetch(I+"/"+j).then((function(ne){if(!ne.ok)throw new Error(ne.statusText);return ne.json().then((function(oe){if(!Array.isArray(oe)||oe[0]!==1)throw new Error("Incorrect schema version; need 1, got "+oe[0]);return oe[1]}))})).catch((function(ne){if(I!==y)return W||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+I+'", trying default CDN. '+ne.message),W=!0),I=y,A.delete(j),Q(j);throw ne})),A.set(j,ee)),ee}for(var ue=function(j){var ee=D.codePointAt(j),ne=r(ee);ce[j]=ne,f[ne]||G.has(ne)||G.set(ne,Q(ne).then((function(oe){f[ne]=oe}))),ee>65535&&(j++,de=j)},de=0;de<D.length;de++)ue(de);return Promise.all(G.values()).then((function(){G.clear();for(var j=function(ne){var oe=D.codePointAt(ne),re=null,se=f[ce[ne]],le=void 0;for(var ve in se){var ze=$[ve];if(ze===void 0&&(ze=$[ve]=new RegExp(ve).test(B||"en")),ze){for(var qe in le=ve,se[ve])if(o(oe,se[ve][qe])){re=qe;break}break}}if(!re){e:for(var Ke in se)if(Ke!==le){for(var Pe in se[Ke])if(o(oe,se[Ke][Pe])){re=Pe;break e}}}re||(console.debug("No font coverage for U+"+oe.toString(16)),re="latin"),ce[ne]=re,m[re]||G.has(re)||G.set(re,Q("font-meta/"+re+".json").then((function(gt){m[re]=gt}))),oe>65535&&(ne++,ee=ne)},ee=0;ee<D.length;ee++)j(ee);return Promise.all(G.values())})).then((function(){for(var j,ee=null,ne=0;ne<D.length;ne++){var oe=D.codePointAt(ne);if(ee&&(N(oe)||_(ee).has(oe)))q[ne]=q[ne-1];else{ee=m[ce[ne]];var re=K[ee.id];if(!re){var se=ee.typeforms,le=T(se,z,"sans-serif"),ve=T(se[le],F,"normal"),ze=w((j=se[le])===null||j===void 0?void 0:j[ve],L);re=K[ee.id]=I+"/font-files/"+ee.id+"/"+le+"."+ve+"."+ze+".woff"}var qe=Y.get(re);qe==null&&(qe=Y.size,Y.set(re,qe)),q[ne]=qe}oe>65535&&(ne++,q[ne]=q[ne-1])}return{fontUrls:Array.from(Y.keys()),chars:q}}))},Object.defineProperty(n,"__esModule",{value:!0}),n})({})}function Rj(n,e){const t=Object.create(null),i=Object.create(null);function a(o,c){const d=f=>{console.error(`Failure loading font ${o}`,f)};try{const f=new XMLHttpRequest;f.open("get",o,!0),f.responseType="arraybuffer",f.onload=function(){if(f.status>=400)d(new Error(f.statusText));else if(f.status>0)try{const m=n(f.response);m.src=o,c(m)}catch(m){d(m)}},f.onerror=d,f.send()}catch(f){d(f)}}function r(o,c){let d=t[o];d?c(d):i[o]?i[o].push(c):(i[o]=[c],a(o,f=>{f.src=o,t[o]=f,i[o].forEach(m=>m(f)),delete i[o]}))}return function(o,c,{lang:d,fonts:f=[],style:m="normal",weight:g="normal",unicodeFontsURL:y}={}){const _=new Uint8Array(o.length),S=[];o.length||N();const A=new Map,T=[];if(m!=="italic"&&(m="normal"),typeof g!="number"&&(g=g==="bold"?700:400),f&&!Array.isArray(f)&&(f=[f]),f=f.slice().filter(U=>!U.lang||U.lang.test(d)).reverse(),f.length){let z=0;(function F(L=0){for(let I=L,Y=o.length;I<Y;I++){const q=o.codePointAt(I);if(z===1&&S[_[I-1]].supportsCodePoint(q)||I>0&&/\s/.test(o[I]))_[I]=_[I-1],z===2&&(T[T.length-1][1]=I);else for(let K=_[I],$=f.length;K<=$;K++)if(K===$){const ce=z===2?T[T.length-1]:T[T.length]=[I,I];ce[1]=I,z=2}else{_[I]=K;const{src:ce,unicodeRange:G}=f[K];if(!G||D(q,G)){const W=t[ce];if(!W){r(ce,()=>{F(I)});return}if(W.supportsCodePoint(q)){let Q=A.get(W);typeof Q!="number"&&(Q=S.length,S.push(W),A.set(W,Q)),_[I]=Q,z=1;break}}}q>65535&&I+1<Y&&(_[I+1]=_[I],I++,z===2&&(T[T.length-1][1]=I))}w()})()}else T.push([0,o.length-1]),w();function w(){if(T.length){const U=T.map(O=>o.substring(O[0],O[1]+1)).join(`
`);e.getFontsForString(U,{lang:d||void 0,style:m,weight:g,dataUrl:y}).then(({fontUrls:O,chars:B})=>{const z=S.length;let F=0;T.forEach(I=>{for(let Y=0,q=I[1]-I[0];Y<=q;Y++)_[I[0]+Y]=B[F++]+z;F++});let L=0;O.forEach((I,Y)=>{r(I,q=>{S[Y+z]=q,++L===O.length&&N()})})})}else N()}function N(){c({chars:_,fonts:S})}function D(U,O){for(let B=0;B<O.length;B++){const[z,F=z]=O[B];if(z<=U&&U<=F)return!0}return!1}}}const Dj=qp({name:"FontResolver",dependencies:[Rj,Cj,Nj],init(n,e,t){return n(e,t())}});function Uj(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",r=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:S,lang:A,fonts:T,style:w,weight:N,preResolvedFonts:D,unicodeFontsURL:U},O){const B=({chars:z,fonts:F})=>{let L,I;const Y=[];for(let q=0;q<z.length;q++)z[q]!==I?(I=z[q],Y.push(L={start:q,end:q,fontObj:F[z[q]]})):L.end=q;O(Y)};D?B(D):n(S,B,{lang:A,fonts:T,style:w,weight:N,unicodeFontsURL:U})}function c({text:S="",font:A,lang:T,sdfGlyphSize:w=64,fontSize:N=400,fontWeight:D=1,fontStyle:U="normal",letterSpacing:O=0,lineHeight:B="normal",maxWidth:z=1/0,direction:F,textAlign:L="left",textIndent:I=0,whiteSpace:Y="normal",overflowWrap:q="normal",anchorX:K=0,anchorY:$=0,metricsOnly:ce=!1,unicodeFontsURL:G,preResolvedFonts:W=null,includeCaretPositions:Q=!1,chunkedBoundsSize:ue=8192,colorRanges:de=null},j){const ee=g(),ne={fontLoad:0,typesetting:0};S.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),S=S.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),N=+N,O=+O,z=+z,B=B||"normal",I=+I,o({text:S,lang:T,style:U,weight:D,fonts:typeof A=="string"?[{src:A}]:A,unicodeFontsURL:G,preResolvedFonts:W},oe=>{ne.fontLoad=g()-ee;const re=isFinite(z);let se=null,le=null,ve=null,ze=null,qe=null,Ke=null,Pe=null,gt=null,Te=0,je=0,Le=Y!=="nowrap";const $e=new Map,J=g();let et=I,We=0,Se=new y;const Ee=[Se];oe.forEach(Ae=>{const{fontObj:we}=Ae,{ascender:ot,descender:it,unitsPerEm:ht,lineGap:xt,capHeight:ke,xHeight:Fe}=we;let Ze=$e.get(we);if(!Ze){const tt=N/ht,nt=B==="normal"?(ot-it+xt)*tt:B*N,ge=(nt-(ot-it)*tt)/2,xe=Math.min(nt,(ot-it)*tt),pe=(ot+it)/2*tt+xe/2;Ze={index:$e.size,src:we.src,fontObj:we,fontSizeMult:tt,unitsPerEm:ht,ascender:ot*tt,descender:it*tt,capHeight:ke*tt,xHeight:Fe*tt,lineHeight:nt,baseline:-ge-ot*tt,caretTop:pe,caretBottom:pe-xe},$e.set(we,Ze)}const{fontSizeMult:rt}=Ze,ut=S.slice(Ae.start,Ae.end+1);let Ut,me;we.forEachGlyph(ut,N,O,(tt,nt,ge,xe)=>{nt+=We,xe+=Ae.start,Ut=nt,me=tt;const pe=S.charAt(xe),Ie=tt.advanceWidth*rt,pt=Se.count;let yt;if("isEmpty"in tt||(tt.isWhitespace=!!pe&&new RegExp(a).test(pe),tt.canBreakAfter=!!pe&&r.test(pe),tt.isEmpty=tt.xMin===tt.xMax||tt.yMin===tt.yMax||i.test(pe)),!tt.isWhitespace&&!tt.isEmpty&&je++,Le&&re&&!tt.isWhitespace&&nt+Ie+et>z&&pt){if(Se.glyphAt(pt-1).glyphObj.canBreakAfter)yt=new y,et=-nt;else for(let Kt=pt;Kt--;)if(Kt===0&&q==="break-word"){yt=new y,et=-nt;break}else if(Se.glyphAt(Kt).glyphObj.canBreakAfter){yt=Se.splitAt(Kt+1);const dn=yt.glyphAt(0).x;et-=dn;for(let Xn=yt.count;Xn--;)yt.glyphAt(Xn).x-=dn;break}yt&&(Se.isSoftWrapped=!0,Se=yt,Ee.push(Se),Te=z)}let Nt=Se.glyphAt(Se.count);Nt.glyphObj=tt,Nt.x=nt+et,Nt.y=ge,Nt.width=Ie,Nt.charIndex=xe,Nt.fontData=Ze,pe===`
`&&(Se=new y,Ee.push(Se),et=-(nt+Ie+O*N)+I)}),We=Ut+me.advanceWidth*rt+O*N});let X=0;Ee.forEach(Ae=>{let we=!0;for(let ot=Ae.count;ot--;){const it=Ae.glyphAt(ot);we&&!it.glyphObj.isWhitespace&&(Ae.width=it.x+it.width,Ae.width>Te&&(Te=Ae.width),we=!1);let{lineHeight:ht,capHeight:xt,xHeight:ke,baseline:Fe}=it.fontData;ht>Ae.lineHeight&&(Ae.lineHeight=ht);const Ze=Fe-Ae.baseline;Ze<0&&(Ae.baseline+=Ze,Ae.cap+=Ze,Ae.ex+=Ze),Ae.cap=Math.max(Ae.cap,Ae.baseline+xt),Ae.ex=Math.max(Ae.ex,Ae.baseline+ke)}Ae.baseline-=X,Ae.cap-=X,Ae.ex-=X,X+=Ae.lineHeight});let V=0,fe=0;if(K&&(typeof K=="number"?V=-K:typeof K=="string"&&(V=-Te*(K==="left"?0:K==="center"?.5:K==="right"?1:f(K)))),$&&(typeof $=="number"?fe=-$:typeof $=="string"&&(fe=$==="top"?0:$==="top-baseline"?-Ee[0].baseline:$==="top-cap"?-Ee[0].cap:$==="top-ex"?-Ee[0].ex:$==="middle"?X/2:$==="bottom"?X:$==="bottom-baseline"?-Ee[Ee.length-1].baseline:f($)*X)),!ce){const Ae=e.getEmbeddingLevels(S,F);se=new Uint16Array(je),le=new Uint8Array(je),ve=new Float32Array(je*2),ze={},Pe=[1/0,1/0,-1/0,-1/0],gt=[],Q&&(Ke=new Float32Array(S.length*4)),de&&(qe=new Uint8Array(je*3));let we=0,ot=-1,it=-1,ht,xt;if(Ee.forEach((ke,Fe)=>{let{count:Ze,width:rt}=ke;if(Ze>0){let ut=0;for(let xe=Ze;xe--&&ke.glyphAt(xe).glyphObj.isWhitespace;)ut++;let Ut=0,me=0;if(L==="center")Ut=(Te-rt)/2;else if(L==="right")Ut=Te-rt;else if(L==="justify"&&ke.isSoftWrapped){let xe=0;for(let pe=Ze-ut;pe--;)ke.glyphAt(pe).glyphObj.isWhitespace&&xe++;me=(Te-rt)/xe}if(me||Ut){let xe=0;for(let pe=0;pe<Ze;pe++){let Ie=ke.glyphAt(pe);const pt=Ie.glyphObj;Ie.x+=Ut+xe,me!==0&&pt.isWhitespace&&pe<Ze-ut&&(xe+=me,Ie.width+=me)}}const tt=e.getReorderSegments(S,Ae,ke.glyphAt(0).charIndex,ke.glyphAt(ke.count-1).charIndex);for(let xe=0;xe<tt.length;xe++){const[pe,Ie]=tt[xe];let pt=1/0,yt=-1/0;for(let Nt=0;Nt<Ze;Nt++)if(ke.glyphAt(Nt).charIndex>=pe){let Kt=Nt,dn=Nt;for(;dn<Ze;dn++){let Xn=ke.glyphAt(dn);if(Xn.charIndex>Ie)break;dn<Ze-ut&&(pt=Math.min(pt,Xn.x),yt=Math.max(yt,Xn.x+Xn.width))}for(let Xn=Kt;Xn<dn;Xn++){const Rn=ke.glyphAt(Xn);Rn.x=yt-(Rn.x+Rn.width-pt)}break}}let nt;const ge=xe=>nt=xe;for(let xe=0;xe<Ze;xe++){const pe=ke.glyphAt(xe);nt=pe.glyphObj;const Ie=nt.index,pt=Ae.levels[pe.charIndex]&1;if(pt){const yt=e.getMirroredCharacter(S[pe.charIndex]);yt&&pe.fontData.fontObj.forEachGlyph(yt,0,0,ge)}if(Q){const{charIndex:yt,fontData:Nt}=pe,Kt=pe.x+V,dn=pe.x+pe.width+V;Ke[yt*4]=pt?dn:Kt,Ke[yt*4+1]=pt?Kt:dn,Ke[yt*4+2]=ke.baseline+Nt.caretBottom+fe,Ke[yt*4+3]=ke.baseline+Nt.caretTop+fe;const Xn=yt-ot;Xn>1&&m(Ke,ot,Xn),ot=yt}if(de){const{charIndex:yt}=pe;for(;yt>it;)it++,de.hasOwnProperty(it)&&(xt=de[it])}if(!nt.isWhitespace&&!nt.isEmpty){const yt=we++,{fontSizeMult:Nt,src:Kt,index:dn}=pe.fontData,Xn=ze[Kt]||(ze[Kt]={});Xn[Ie]||(Xn[Ie]={path:nt.path,pathBounds:[nt.xMin,nt.yMin,nt.xMax,nt.yMax]});const Rn=pe.x+V,Jn=pe.y+ke.baseline+fe;ve[yt*2]=Rn,ve[yt*2+1]=Jn;const Qn=Rn+nt.xMin*Nt,Si=Jn+nt.yMin*Nt,Ui=Rn+nt.xMax*Nt,ai=Jn+nt.yMax*Nt;Qn<Pe[0]&&(Pe[0]=Qn),Si<Pe[1]&&(Pe[1]=Si),Ui>Pe[2]&&(Pe[2]=Ui),ai>Pe[3]&&(Pe[3]=ai),yt%ue===0&&(ht={start:yt,end:yt,rect:[1/0,1/0,-1/0,-1/0]},gt.push(ht)),ht.end++;const jn=ht.rect;if(Qn<jn[0]&&(jn[0]=Qn),Si<jn[1]&&(jn[1]=Si),Ui>jn[2]&&(jn[2]=Ui),ai>jn[3]&&(jn[3]=ai),se[yt]=Ie,le[yt]=dn,de){const on=yt*3;qe[on]=xt>>16&255,qe[on+1]=xt>>8&255,qe[on+2]=xt&255}}}}}),Ke){const ke=S.length-ot;ke>1&&m(Ke,ot,ke)}}const Ce=[];$e.forEach(({index:Ae,src:we,unitsPerEm:ot,ascender:it,descender:ht,lineHeight:xt,capHeight:ke,xHeight:Fe})=>{Ce[Ae]={src:we,unitsPerEm:ot,ascender:it,descender:ht,lineHeight:xt,capHeight:ke,xHeight:Fe}}),ne.typesetting=g()-J,j({glyphIds:se,glyphFontIndices:le,glyphPositions:ve,glyphData:ze,fontData:Ce,caretPositions:Ke,glyphColors:qe,chunkedBounds:gt,fontSize:N,topBaseline:fe+Ee[0].baseline,blockBounds:[V,fe-X,V+Te,fe],visibleBounds:Pe,timings:ne})})}function d(S,A){c({...S,metricsOnly:!0},T=>{const[w,N,D,U]=T.blockBounds;A({width:D-w,height:U-N})})}function f(S){let A=S.match(/^([\d.]+)%$/),T=A?parseFloat(A[1]):NaN;return isNaN(T)?0:T/100}function m(S,A,T){const w=S[A*4],N=S[A*4+1],D=S[A*4+2],U=S[A*4+3],O=(N-w)/T;for(let B=0;B<T;B++){const z=(A+B)*4;S[z]=w+O*B,S[z+1]=w+O*(B+1),S[z+2]=D,S[z+3]=U}}function g(){return(self.performance||Date).now()}function y(){this.data=[]}const _=["glyphObj","x","y","width","charIndex","fontData"];return y.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/_.length)},glyphAt(S){let A=y.flyweight;return A.data=this.data,A.index=S,A},splitAt(S){let A=new y;return A.data=this.data.splice(S*_.length),A}},y.flyweight=_.reduce((S,A,T,w)=>(Object.defineProperty(S,A,{get(){return this.data[this.index*_.length+T]},set(N){this.data[this.index*_.length+T]=N}}),S),{data:null,index:0}),{typeset:c,measure:d}}const Rf=()=>(self.performance||Date).now(),p1=zR();let WA;function Oj(n,e,t,i,a,r,o,c,d,f,m=!0){return m?zj(n,e,t,i,a,r,o,c,d,f).then(null,g=>(WA||(console.warn("WebGL SDF generation failed, falling back to JS",g),WA=!0),YA(n,e,t,i,a,r,o,c,d,f))):YA(n,e,t,i,a,r,o,c,d,f)}const hy=[],Lj=5;let A2=0;function IR(){const n=Rf();for(;hy.length&&Rf()-n<Lj;)hy.shift()();A2=hy.length?setTimeout(IR,0):0}const zj=(...n)=>new Promise((e,t)=>{hy.push(()=>{const i=Rf();try{p1.webgl.generateIntoCanvas(...n),e({timing:Rf()-i})}catch(a){t(a)}}),A2||(A2=setTimeout(IR,0))}),Pj=4,Ij=2e3,XA={};let Bj=0;function YA(n,e,t,i,a,r,o,c,d,f){const m="TroikaTextSDFGenerator_JS_"+Bj++%Pj;let g=XA[m];return g||(g=XA[m]={workerModule:qp({name:m,workerId:m,dependencies:[zR,Rf],init(y,_){const S=y().javascript.generate;return function(...A){const T=_();return{textureData:S(...A),timing:_()-T}}},getTransferables(y){return[y.textureData.buffer]}}),requests:0,idleTimer:null}),g.requests++,clearTimeout(g.idleTimer),g.workerModule(n,e,t,i,a,r).then(({textureData:y,timing:_})=>{const S=Rf(),A=new Uint8Array(y.length*4);for(let T=0;T<y.length;T++)A[T*4+f]=y[T];return p1.webglUtils.renderImageData(o,A,c,d,n,e,1<<3-f),_+=Rf()-S,--g.requests===0&&(g.idleTimer=setTimeout(()=>{mj(m)},Ij)),{timing:_}})}function kj(n){n._warm||(p1.webgl.isSupported(n),n._warm=!0)}const Fj=p1.webglUtils.resizeWebGLCanvasWithoutClearing,jg={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},jj=new Tt;function dp(){return(self.performance||Date).now()}const qA=Object.create(null);function BR(n,e){n=Gj({},n);const t=dp(),i=[];if(n.font&&i.push({label:"user",src:Wj(n.font)}),n.font=i,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||jg.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||jg.unicodeFontsURL,n.colorRanges!=null){let y={};for(let _ in n.colorRanges)if(n.colorRanges.hasOwnProperty(_)){let S=n.colorRanges[_];typeof S!="number"&&(S=jj.set(S).getHex()),y[_]=S}n.colorRanges=y}Object.freeze(n);const{textureWidth:a,sdfExponent:r}=jg,{sdfGlyphSize:o}=n,c=a/o*4;let d=qA[o];if(!d){const y=document.createElement("canvas");y.width=a,y.height=o*256/c,d=qA[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:y,sdfTexture:new ra(y,void 0,void 0,void 0,Fi,Fi),contextLost:!1,glyphsByFont:new Map},d.sdfTexture.generateMipmaps=!1,Hj(d)}const{sdfTexture:f,sdfCanvas:m}=d;jR(n).then(y=>{const{glyphIds:_,glyphFontIndices:S,fontData:A,glyphPositions:T,fontSize:w,timings:N}=y,D=[],U=new Float32Array(_.length*4);let O=0,B=0;const z=dp(),F=A.map(K=>{let $=d.glyphsByFont.get(K.src);return $||d.glyphsByFont.set(K.src,$=new Map),$});_.forEach((K,$)=>{const ce=S[$],{src:G,unitsPerEm:W}=A[ce];let Q=F[ce].get(K);if(!Q){const{path:ne,pathBounds:oe}=y.glyphData[G][K],re=Math.max(oe[2]-oe[0],oe[3]-oe[1])/o*(jg.sdfMargin*o+.5),se=d.glyphCount++,le=[oe[0]-re,oe[1]-re,oe[2]+re,oe[3]+re];F[ce].set(K,Q={path:ne,atlasIndex:se,sdfViewBox:le}),D.push(Q)}const{sdfViewBox:ue}=Q,de=T[B++],j=T[B++],ee=w/W;U[O++]=de+ue[0]*ee,U[O++]=j+ue[1]*ee,U[O++]=de+ue[2]*ee,U[O++]=j+ue[3]*ee,_[$]=Q.atlasIndex}),N.quads=(N.quads||0)+(dp()-z);const L=dp();N.sdf={};const I=m.height,Y=Math.ceil(d.glyphCount/c),q=Math.pow(2,Math.ceil(Math.log2(Y*o)));q>I&&(console.info(`Increasing SDF texture size ${I}->${q}`),Fj(m,a,q),f.dispose()),Promise.all(D.map(K=>kR(K,d,n.gpuAccelerateSDF).then(({timing:$})=>{N.sdf[K.atlasIndex]=$}))).then(()=>{D.length&&!d.contextLost&&(FR(d),f.needsUpdate=!0),N.sdfTotal=dp()-L,N.total=dp()-t,e(Object.freeze({parameters:n,sdfTexture:f,sdfGlyphSize:o,sdfExponent:r,glyphBounds:U,glyphAtlasIndices:_,glyphColors:y.glyphColors,caretPositions:y.caretPositions,chunkedBounds:y.chunkedBounds,ascender:y.ascender,descender:y.descender,lineHeight:y.lineHeight,capHeight:y.capHeight,xHeight:y.xHeight,topBaseline:y.topBaseline,blockBounds:y.blockBounds,visibleBounds:y.visibleBounds,timings:y.timings}))})}),Promise.resolve().then(()=>{d.contextLost||kj(m)})}function kR({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:a,contextLost:r},o){if(r)return Promise.resolve({timing:-1});const{textureWidth:c,sdfExponent:d}=jg,f=Math.max(t[2]-t[0],t[3]-t[1]),m=Math.floor(e/4),g=m%(c/i)*i,y=Math.floor(m/(c/i))*i,_=e%4;return Oj(i,i,n,t,f,d,a,g,y,_,o)}function Hj(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(a=>{a.forEach(r=>{i.push(kR(r,n,!0))})}),Promise.all(i).then(()=>{FR(n),n.sdfTexture.needsUpdate=!0})})}function Vj({font:n,characters:e,sdfGlyphSize:t},i){let a=Array.isArray(e)?e.join(`
`):""+e;BR({font:n,sdfGlyphSize:t,text:a},i)}function Gj(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let Zx;function Wj(n){return Zx||(Zx=typeof document>"u"?{}:document.createElement("a")),Zx.href=n,Zx.href}function FR(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:a}=e,r=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*a*4)&&(o=new Uint8Array(i*a*4),t.image={width:i,height:a,data:o},t.flipY=!1,t.isDataTexture=!0),r.readPixels(0,0,i,a,r.RGBA,r.UNSIGNED_BYTE,o)}}const Xj=qp({name:"Typesetter",dependencies:[Uj,Dj,vj],init(n,e,t){return n(e,t())}}),jR=qp({name:"Typesetter",dependencies:[Xj],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});jR.onMainThread;const KA={};function Yj(n){let e=KA[n];return e||(e=KA[n]=new au(1,1,n,n).translate(.5,.5,0)),e}const qj="aTroikaGlyphBounds",ZA="aTroikaGlyphIndex",Kj="aTroikaGlyphColor";class Zj extends Bw{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new er,this.boundingBox=new $a}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=Yj(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,a,r){this.updateAttributeData(qj,e,4),this.updateAttributeData(ZA,t,1),this.updateAttributeData(Kj,r,3),this._blockBounds=i,this._chunkedBounds=a,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:a,floor:r,min:o,max:c,sin:d,cos:f}=Math,m=a/2,g=a*2,y=Math.abs(t),_=e[0]/y,S=e[2]/y,A=r((_+m)/g)!==r((S+m)/g)?-y:o(d(_)*y,d(S)*y),T=r((_-m)/g)!==r((S-m)/g)?y:c(d(_)*y,d(S)*y),w=r((_+a)/g)!==r((S+a)/g)?y*2:c(y-f(_)*y,y-f(S)*y);i.min.set(A,e[1],t<0?-w:0),i.max.set(T,e[3],t<0?0:w)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(ZA).count,i=this._chunkedBounds;if(i)for(let a=i.length;a--;){t=i[a].end;let r=i[a].rect;if(r[1]<e.w&&r[3]>e.y&&r[0]<e.z&&r[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,i){const a=this.getAttribute(e);t?a&&a.array.length===t.length?(a.array.set(t),a.needsUpdate=!0):(this.setAttribute(e,new zf(t,i)),delete this._maxInstanceCount,this.dispose()):a&&this.deleteAttribute(e)}}const Jj=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Qj=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,$j=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,eH=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function tH(n){const e=T2(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ft},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new _i(0,0,0,0)},uTroikaClipRect:{value:new _i(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ft},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Tt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new vn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Jj,vertexTransform:Qj,fragmentDefs:$j,fragmentColorTransform:eH,customRewriter({vertexShader:t,fragmentShader:i}){let a=/\buniform\s+vec3\s+diffuse\b/;return a.test(i)&&(i=i.replace(a,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),a.test(t)||(t=t.replace(PR,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const Kw=new iu({color:16777215,side:Co,transparent:!0}),JA=8421504,QA=new hn,Jx=new he,MS=new he,Og=[],nH=new he,ES="+x+y";function $A(n){return Array.isArray(n)?n[0]:n}let HR=()=>{const n=new sa(new au(1,1),Kw);return HR=()=>n,n},VR=()=>{const n=new sa(new au(1,1,32,1),Kw);return VR=()=>n,n};const iH={type:"syncstart"},aH={type:"synccomplete"},GR=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],rH=GR.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let WR=class extends sa{constructor(){const e=new Zj;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=JA,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=ES,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(iH),BR({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(a=>a&&a())})),this.dispatchEvent(aH),e&&e()})))}onBeforeRender(e,t,i,a,r,o){this.sync(),r.isTroikaTextMaterial&&this._prepareForRender(r)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return tH(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Kw.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function a(){e.removeEventListener("dispose",a),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return $A(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return $A(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,a=this.textRenderInfo;if(a){const{sdfTexture:c,blockBounds:d}=a;i.uTroikaSDFTexture.value=c,i.uTroikaSDFTextureSize.value.set(c.image.width,c.image.height),i.uTroikaSDFGlyphSize.value=a.sdfGlyphSize,i.uTroikaSDFExponent.value=a.sdfExponent,i.uTroikaTotalBounds.value.fromArray(d),i.uTroikaUseGlyphColors.value=!t&&!!a.glyphColors;let f=0,m=0,g=0,y,_,S,A=0,T=0;if(t){let{outlineWidth:N,outlineOffsetX:D,outlineOffsetY:U,outlineBlur:O,outlineOpacity:B}=this;f=this._parsePercent(N)||0,m=Math.max(0,this._parsePercent(O)||0),y=B,A=this._parsePercent(D)||0,T=this._parsePercent(U)||0}else g=Math.max(0,this._parsePercent(this.strokeWidth)||0),g&&(S=this.strokeColor,i.uTroikaStrokeColor.value.set(S??JA),_=this.strokeOpacity,_==null&&(_=1)),y=this.fillOpacity;i.uTroikaEdgeOffset.value=f,i.uTroikaPositionOffset.value.set(A,T),i.uTroikaBlurRadius.value=m,i.uTroikaStrokeWidth.value=g,i.uTroikaStrokeOpacity.value=_,i.uTroikaFillOpacity.value=y??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let w=this.clipRect;if(w&&Array.isArray(w)&&w.length===4)i.uTroikaClipRect.value.fromArray(w);else{const N=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(d[0]-N,d[1]-N,d[2]+N,d[3]+N)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const r=t?this.outlineColor||0:this.color;if(r==null)delete e.color;else{const c=e.hasOwnProperty("color")?e.color:e.color=new Tt;(r!==c._input||typeof r=="object")&&c.set(c._input=r)}let o=this.orientation||ES;if(o!==e._orientation){let c=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let d=o!==ES&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(d){let[,f,m,g,y]=d;Jx.set(0,0,0)[m]=f==="-"?1:-1,MS.set(0,0,0)[y]=g==="-"?-1:1,QA.lookAt(nH,Jx.cross(MS),MS),c.setFromMatrix4(QA)}else c.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new ft){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new ft){return Jx.copy(e),this.localPositionToTextCoords(this.worldToLocal(Jx),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:a}=this;if(i){const r=i.blockBounds,o=a?VR():HR(),c=o.geometry,{position:d,uv:f}=c.attributes;for(let m=0;m<f.count;m++){let g=r[0]+f.getX(m)*(r[2]-r[0]);const y=r[1]+f.getY(m)*(r[3]-r[1]);let _=0;a&&(_=a-Math.cos(g/a)*a,g=Math.sin(g/a)*a),d.setXYZ(m,g,y,_)}c.boundingSphere=this.geometry.boundingSphere,c.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Og.length=0,o.raycast(e,Og);for(let m=0;m<Og.length;m++)Og[m].object=this,t.push(Og[m])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,rH.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};GR.forEach(n=>{const e="_private_"+n;Object.defineProperty(WR.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new $a;new Tt;const sH=k.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:a=1,children:r,characters:o,onSync:c,...d},f)=>{const m=e0(({invalidate:S})=>S),[g]=k.useState(()=>new WR),[y,_]=k.useMemo(()=>{const S=[];let A="";return k.Children.forEach(r,T=>{typeof T=="string"||typeof T=="number"?A+=T:S.push(T)}),[S,A]},[r]);return hR(()=>new Promise(S=>Vj({font:i,characters:o},S)),["troika-text",i,o]),k.useLayoutEffect(()=>void g.sync(()=>{m(),c&&c(g)})),k.useEffect(()=>()=>g.dispose(),[g]),k.createElement("primitive",w2({object:g,ref:f,font:i,text:_,anchorX:e,anchorY:t,fontSize:a,sdfGlyphSize:n},d),y)}),oH="modulepreload",lH=function(n){return"/"+n},e3={},t3=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let f=function(m){return Promise.all(m.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var o=f;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=f(t.map(m=>{if(m=lH(m),m in e3)return;e3[m]=!0;const g=m.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":oH,g||(_.as="script"),_.crossOrigin="",_.href=m,d&&_.setAttribute("nonce",d),document.head.appendChild(_),g)return new Promise((S,A)=>{_.addEventListener("load",S),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${m}`)))})}))}function r(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&r(d.reason);return e().catch(r)})};function cH({all:n,scene:e,camera:t}){const i=e0(({gl:o})=>o),a=e0(({camera:o})=>o),r=e0(({scene:o})=>o);return k.useLayoutEffect(()=>{const o=[];n&&(e||r).traverse(f=>{f.visible===!1&&(o.push(f),f.visible=!0)}),i.compile(e||r,t||a);const c=new Hb(128);new xw(.01,1e5,c).update(i,e||r),c.dispose(),o.forEach(f=>f.visible=!1)},[]),null}const uH=`
  attribute float size;
  attribute float twinkleSpeed;
  attribute float twinkleOffset;
  varying float vTwinkleSpeed;
  varying float vTwinkleOffset;

  void main() {
    vTwinkleSpeed = twinkleSpeed;
    vTwinkleOffset = twinkleOffset;
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    gl_PointSize = size * (300.0 / -mvPosition.z);
    gl_Position = projectionMatrix * mvPosition;
  }
`,dH=`
  uniform float uTime;
  varying float vTwinkleSpeed;
  varying float vTwinkleOffset;

  void main() {
    float dist = length(gl_PointCoord - vec2(0.5));
    if (dist > 0.5) discard;

    float twinkle = sin(uTime * vTwinkleSpeed + vTwinkleOffset) * 0.5 + 0.5;
    float alpha = (1.0 - dist * 2.0) * (0.5 + twinkle * 0.5);

    vec3 coreColor = vec3(1.0, 1.0, 1.0);
    vec3 glowColor = vec3(0.7, 0.8, 1.0);
    vec3 color = mix(glowColor, coreColor, 1.0 - dist * 2.0);

    gl_FragColor = vec4(color, alpha);
  }
`,fH=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,hH=`
  uniform float uTime;
  varying vec2 vUv;

  // Simplex noise functions
  vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
  vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }

  float snoise(vec3 v) {
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

    vec3 i  = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);

    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);

    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy;
    vec3 x3 = x0 - D.yyy;

    i = mod289(i);
    vec4 p = permute(permute(permute(
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));

    float n_ = 0.142857142857;
    vec3 ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);

    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;

    vec3 p0 = vec3(a0.xy, h.x);
    vec3 p1 = vec3(a0.zw, h.y);
    vec3 p2 = vec3(a1.xy, h.z);
    vec3 p3 = vec3(a1.zw, h.w);

    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }

  float fbm(vec3 p) {
    float value = 0.0;
    float amplitude = 0.5;
    float frequency = 1.0;
    for (int i = 0; i < 5; i++) {
      value += amplitude * snoise(p * frequency);
      amplitude *= 0.5;
      frequency *= 2.0;
    }
    return value;
  }

  void main() {
    vec2 uv = vUv * 2.0 - 1.0;

    float noise1 = fbm(vec3(uv * 1.5, uTime * 0.02));
    float noise2 = fbm(vec3(uv * 2.0 + 100.0, uTime * 0.015));
    float noise3 = fbm(vec3(uv * 3.0 + 200.0, uTime * 0.01));

    // Purple nebula
    vec3 purple = vec3(0.4, 0.1, 0.6);
    // Cyan nebula
    vec3 cyan = vec3(0.1, 0.4, 0.6);
    // Pink nebula
    vec3 pink = vec3(0.6, 0.2, 0.5);

    vec3 color = vec3(0.0);
    color += purple * smoothstep(-0.2, 0.8, noise1) * 0.3;
    color += cyan * smoothstep(-0.1, 0.9, noise2) * 0.2;
    color += pink * smoothstep(0.0, 1.0, noise3) * 0.15;

    float alpha = (noise1 + noise2 + noise3) * 0.15 + 0.05;
    alpha = clamp(alpha, 0.0, 0.4);

    gl_FragColor = vec4(color, alpha);
  }
`;function pH({count:n=3e3}){const e=k.useRef(),t=k.useRef({uTime:{value:0}}),[i,a,r,o]=k.useMemo(()=>{const c=new Float32Array(n*3),d=new Float32Array(n),f=new Float32Array(n),m=new Float32Array(n);for(let g=0;g<n;g++){const y=Math.random()*Math.PI*2,_=Math.acos(2*Math.random()-1),S=50+Math.random()*100;c[g*3]=S*Math.sin(_)*Math.cos(y),c[g*3+1]=S*Math.sin(_)*Math.sin(y),c[g*3+2]=S*Math.cos(_),d[g]=Math.random()*2+.5,f[g]=Math.random()*3+1,m[g]=Math.random()*Math.PI*2}return[c,d,f,m]},[n]);return ru(c=>{t.current.uTime.value=c.clock.elapsedTime,e.current&&(e.current.rotation.y+=1e-4)}),x.jsxs("points",{ref:e,children:[x.jsxs("bufferGeometry",{children:[x.jsx("bufferAttribute",{attach:"attributes-position",count:n,array:i,itemSize:3}),x.jsx("bufferAttribute",{attach:"attributes-size",count:n,array:a,itemSize:1}),x.jsx("bufferAttribute",{attach:"attributes-twinkleSpeed",count:n,array:r,itemSize:1}),x.jsx("bufferAttribute",{attach:"attributes-twinkleOffset",count:n,array:o,itemSize:1})]}),x.jsx("shaderMaterial",{vertexShader:uH,fragmentShader:dH,uniforms:t.current,transparent:!0,depthWrite:!1,blending:nc})]})}function mH(){const n=k.useRef(),e=k.useRef({uTime:{value:0}});return ru(t=>{e.current.uTime.value=t.clock.elapsedTime}),x.jsxs("mesh",{ref:n,position:[0,0,-50],children:[x.jsx("planeGeometry",{args:[200,200]}),x.jsx("shaderMaterial",{vertexShader:fH,fragmentShader:hH,uniforms:e.current,transparent:!0,depthWrite:!1,blending:nc})]})}function gH(){return x.jsxs("group",{children:[x.jsx(pH,{count:4e3}),x.jsx(mH,{}),x.jsx("color",{attach:"background",args:["#050510"]})]})}const vH=`
  varying vec3 vNormal;
  varying vec3 vPositionNormal;

  void main() {
    vNormal = normalize(normalMatrix * normal);
    vPositionNormal = normalize((modelViewMatrix * vec4(position, 1.0)).xyz);
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,xH=`
  uniform vec3 uColor;
  uniform float uIntensity;
  varying vec3 vNormal;
  varying vec3 vPositionNormal;

  void main() {
    float intensity = pow(0.7 - dot(vNormal, vPositionNormal), 2.0) * uIntensity;
    gl_FragColor = vec4(uColor, intensity);
  }
`,yH=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,bH=`
  uniform vec3 uColor;
  uniform float uTime;
  varying vec2 vUv;

  void main() {
    float dist = length(vUv - 0.5) * 2.0;

    // Ring bands
    float ring = smoothstep(0.3, 0.35, dist) * smoothstep(0.95, 0.9, dist);

    // Inner rings detail
    float bands = sin(dist * 50.0 + uTime * 0.5) * 0.1 + 0.9;

    // Gap in the ring
    float gap = smoothstep(0.55, 0.58, dist) * smoothstep(0.62, 0.59, dist);
    ring *= (1.0 - gap * 0.7);

    float alpha = ring * bands * 0.6;
    gl_FragColor = vec4(uColor * bands, alpha);
  }
`;function Lg({position:n,size:e,color:t,glowColor:i,rotationSpeed:a=.001,hasRing:r=!1,ringColor:o}){const c=k.useRef(),d=k.useRef(),f=k.useRef(),m=k.useMemo(()=>({uColor:{value:new Tt(i||t)},uIntensity:{value:1.5}}),[i,t]),g=k.useRef({uColor:{value:new Tt(o||t)},uTime:{value:0}});return ru(y=>{c.current&&(c.current.rotation.y+=a),f.current&&(g.current.uTime.value=y.clock.elapsedTime)}),x.jsxs("group",{position:n,children:[x.jsxs("mesh",{ref:c,children:[x.jsx("sphereGeometry",{args:[e,64,64]}),x.jsx("meshStandardMaterial",{color:t,roughness:.8,metalness:.2,emissive:t,emissiveIntensity:.1})]}),x.jsxs("mesh",{ref:d,scale:[1.2,1.2,1.2],children:[x.jsx("sphereGeometry",{args:[e,32,32]}),x.jsx("shaderMaterial",{vertexShader:vH,fragmentShader:xH,uniforms:m,transparent:!0,side:Ur,depthWrite:!1,blending:nc})]}),r&&x.jsxs("mesh",{ref:f,rotation:[Math.PI/2.5,0,0],children:[x.jsx("ringGeometry",{args:[e*1.4,e*2.2,64]}),x.jsx("shaderMaterial",{vertexShader:yH,fragmentShader:bH,uniforms:g.current,transparent:!0,side:Co,depthWrite:!1,blending:nc})]})]})}function _H(){return x.jsxs("group",{children:[x.jsx(Lg,{position:[35,20,-40],size:8,color:"#E8A87C",glowColor:"#FFD4B8",rotationSpeed:5e-4,hasRing:!0,ringColor:"#FFECD2"}),x.jsx(Lg,{position:[-40,-25,-50],size:4,color:"#41B3A3",glowColor:"#85DCBA",rotationSpeed:.002}),x.jsx(Lg,{position:[50,-10,-60],size:2,color:"#E27D60",glowColor:"#F8B4B4",rotationSpeed:.003}),x.jsx(Lg,{position:[-55,30,-70],size:6,color:"#C38D9E",glowColor:"#E8B4CB",rotationSpeed:.001}),x.jsx(Lg,{position:[45,-30,-55],size:3,color:"#5AB9EA",glowColor:"#A8D8EA",rotationSpeed:.0015})]})}const SH="/assets/2k_earth_daymap-DKLT2WuX.jpg";function wH({radius:n,count:e=80}){const t=k.useRef(),i=k.useMemo(()=>{const a=new Float32Array(e*3),r=new Float32Array(e),o=new Float32Array(e);for(let c=0;c<e;c++){const d=Math.random()*Math.PI*2,f=Math.acos(2*Math.random()-1),m=n*(1.05+Math.random()*.4);a[c*3]=m*Math.sin(f)*Math.cos(d),a[c*3+1]=m*Math.sin(f)*Math.sin(d),a[c*3+2]=m*Math.cos(f),r[c]=.02+Math.random()*.04,o[c]=Math.random()*Math.PI*2}return{positions:a,sizes:r,phases:o}},[n,e]);return ru(a=>{if(!t.current)return;const r=a.clock.elapsedTime;t.current.rotation.y=r*.05;const o=t.current.material;o.opacity=.6+Math.sin(r*2)*.2}),x.jsxs("points",{ref:t,children:[x.jsx("bufferGeometry",{children:x.jsx("bufferAttribute",{attach:"attributes-position",count:e,array:i.positions,itemSize:3})}),x.jsx("pointsMaterial",{size:.06,color:"#ffffff",transparent:!0,opacity:.7,sizeAttenuation:!0,blending:nc})]})}function MH({radius:n}){const e=k.useRef(),t=k.useMemo(()=>{const i=[];for(let a=0;a<12;a++){const r=a/12*Math.PI*2,o=(Math.random()-.5)*n*1.5,c=n*(1.4+Math.random()*.4);i.push({position:[c*Math.cos(r),o,c*Math.sin(r)],scale:.08+Math.random()*.08,speed:.3+Math.random()*.3,phase:Math.random()*Math.PI*2,color:["#FF6B6B","#4ECDC4","#FFE66D","#95E1D3"][Math.floor(Math.random()*4)]})}return i},[n]);return ru(i=>{if(!e.current)return;const a=i.clock.elapsedTime;e.current.rotation.y=a*.1,e.current.children.forEach((r,o)=>{const c=t[o];r.position.y=c.position[1]+Math.sin(a*c.speed+c.phase)*.3,r.rotation.z=Math.sin(a*.5+c.phase)*.3})}),x.jsx("group",{ref:e,children:t.map((i,a)=>x.jsxs("mesh",{position:i.position,scale:i.scale,children:[x.jsx("sphereGeometry",{args:[1,16,16]}),x.jsx("meshBasicMaterial",{color:i.color,transparent:!0,opacity:.8})]},a))})}function EH({radius:n=3}){const e=k.useRef(),t=Yw(VN,SH);return ru(i=>{e.current&&(e.current.rotation.y+=.002)}),x.jsxs("group",{children:[x.jsxs("group",{ref:e,children:[x.jsxs("mesh",{children:[x.jsx("sphereGeometry",{args:[n*.99,64,64]}),x.jsx("meshBasicMaterial",{map:t})]}),x.jsxs("mesh",{children:[x.jsx("sphereGeometry",{args:[n,64,64]}),x.jsx("meshBasicMaterial",{color:"#4ECDC4",transparent:!0,opacity:.15,blending:nc})]})]}),x.jsx(wH,{radius:n,count:100}),x.jsx(MH,{radius:n})]})}const TH=[{text:"",lang:"Japanese"},{text:"",lang:"Korean"},{text:"Espaol",lang:"Spanish"},{text:"Franais",lang:"French"},{text:"Deutsch",lang:"German"},{text:"Italiano",lang:"Italian"},{text:"Portugus",lang:"Portuguese"},{text:"",lang:"Russian"},{text:"",lang:"Chinese"},{text:"",lang:"Arabic"},{text:"",lang:"Hindi"},{text:"",lang:"Thai"},{text:"Ting Vit",lang:"Vietnamese"},{text:"Nederlands",lang:"Dutch"},{text:"Polski",lang:"Polish"},{text:"Trke",lang:"Turkish"},{text:"Svenska",lang:"Swedish"},{text:"",lang:"Greek"},{text:"",lang:"Hebrew"},{text:"Bahasa",lang:"Indonesian"}],AH=`
  attribute float size;
  attribute float speed;
  attribute vec3 customColor;

  varying vec3 vColor;
  varying float vSpeed;

  void main() {
    vColor = customColor;
    vSpeed = speed;

    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    gl_PointSize = size * (300.0 / -mvPosition.z);
    gl_Position = projectionMatrix * mvPosition;
  }
`,CH=`
  varying vec3 vColor;
  varying float vSpeed;

  void main() {
    float dist = length(gl_PointCoord - vec2(0.5));
    if (dist > 0.5) discard;

    // Elongated shape for speed effect
    float alpha = (1.0 - dist * 2.0) * 0.8;

    // Color intensity based on speed
    vec3 color = vColor * (0.8 + vSpeed * 0.4);

    gl_FragColor = vec4(color, alpha);
  }
`;function NH({text:n,initialPosition:e,speed:t,delay:i,color:a}){const r=k.useRef(),[o,c]=k.useState(e),[d,f]=k.useState(0),m=k.useRef(Date.now()+i*1e3);return ru(()=>{const g=(Date.now()-m.current)/1e3;if(g<0)return;const y=g*t%1,_=s2.lerp(e[2],5,y),S=s2.lerp(1,.1,y);let A=1;y<.1?A=y/.1:y>.8&&(A=(1-y)/.2),r.current&&(r.current.position.z=_,r.current.scale.setScalar(S),r.current.material.opacity=A*.9),y>.95&&(m.current=Date.now())}),x.jsx(sH,{ref:r,position:o,fontSize:.8,color:a,anchorX:"center",anchorY:"middle","material-transparent":!0,"material-opacity":d,"material-depthWrite":!1,children:n})}function RH({count:n=100}){const e=k.useRef(),[t,i,a,r]=k.useMemo(()=>{const o=new Float32Array(n*3),c=new Float32Array(n),d=new Float32Array(n),f=new Float32Array(n*3),m=[new Tt("#9b6dff"),new Tt("#4ecdc4"),new Tt("#ff6b9d"),new Tt("#64b5f6")];for(let g=0;g<n;g++){const y=Math.random()*Math.PI*2,_=15+Math.random()*20,S=(Math.random()-.5)*15;o[g*3]=Math.cos(y)*_,o[g*3+1]=S,o[g*3+2]=-30-Math.random()*40,c[g]=Math.random()*2+.5,d[g]=Math.random()*.15+.08;const A=m[Math.floor(Math.random()*m.length)];f[g*3]=A.r,f[g*3+1]=A.g,f[g*3+2]=A.b}return[o,c,d,f]},[n]);return ru(o=>{if(!e.current)return;const c=e.current.geometry.attributes.position,d=e.current.geometry.attributes.speed;for(let f=0;f<n;f++)c.array[f*3+2]+=d.array[f]*.15,c.array[f*3+2]>10&&(c.array[f*3+2]=-30-Math.random()*40);c.needsUpdate=!0}),x.jsxs("points",{ref:e,children:[x.jsxs("bufferGeometry",{children:[x.jsx("bufferAttribute",{attach:"attributes-position",count:n,array:t,itemSize:3}),x.jsx("bufferAttribute",{attach:"attributes-size",count:n,array:i,itemSize:1}),x.jsx("bufferAttribute",{attach:"attributes-speed",count:n,array:a,itemSize:1}),x.jsx("bufferAttribute",{attach:"attributes-customColor",count:n,array:r,itemSize:3})]}),x.jsx("shaderMaterial",{vertexShader:AH,fragmentShader:CH,transparent:!0,depthWrite:!1,blending:nc})]})}function DH(){const n=k.useMemo(()=>{const e=[],t=["#9b6dff","#4ecdc4","#ff6b9d","#64b5f6","#b794f6"];return TH.forEach((i,a)=>{for(let r=0;r<2;r++){const o=Math.random()*Math.PI*2,c=8+Math.random()*12,d=(Math.random()-.5)*10;e.push({text:i.text,position:[Math.cos(o)*c,d,-25-Math.random()*30],speed:.15+Math.random()*.1,delay:Math.random()*5,color:t[Math.floor(Math.random()*t.length)],key:`${i.lang}-${r}`})}}),e},[]);return x.jsx("group",{children:n.map(e=>x.jsx(NH,{text:e.text,initialPosition:e.position,speed:e.speed,delay:e.delay,color:e.color},e.key))})}function UH(){return x.jsxs("group",{children:[x.jsx(RH,{count:150}),x.jsx(DH,{})]})}const C2=document.createElement("style");C2.textContent=`
  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  @keyframes glow-pulse {
    0%, 100% {
      filter: drop-shadow(0 0 10px rgba(208, 188, 255, 0.6)) drop-shadow(0 0 30px rgba(208, 188, 255, 0.4));
    }
    50% {
      filter: drop-shadow(0 0 20px rgba(79, 195, 186, 0.8)) drop-shadow(0 0 40px rgba(79, 195, 186, 0.5));
    }
  }
  @keyframes shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
  }
`;document.querySelector("#welcome-animations")||(C2.id="welcome-animations",document.head.appendChild(C2));const n3={color:"#ffffff",fontWeight:"bold",WebkitTextStroke:"0.5px black",textShadow:"1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 0 4px 8px rgba(0,0,0,0.5), 0 8px 20px rgba(0,0,0,0.4)"};function OH({onGetStarted:n}){const[e,t]=k.useState(!1),[i,a]=k.useState(!1);k.useEffect(()=>{const o=setTimeout(()=>t(!0),500);return()=>clearTimeout(o)},[]);const r=()=>{a(!0),setTimeout(()=>{n()},800)};return x.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center z-10 pointer-events-none transition-opacity duration-700 ${e&&!i?"opacity-100":"opacity-0"}`,children:[x.jsxs("div",{className:"relative text-center px-6 max-w-2xl",children:[x.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-4 tracking-tight",children:[x.jsx("span",{className:"bg-gradient-to-r from-white via-[#E8DEF8] to-[#D0BCFF] bg-clip-text text-transparent",children:"iOS App Distribution"}),x.jsx("br",{}),x.jsx("span",{className:"bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(90deg, #D0BCFF, #FFB4AB, #7DD3C0, #D0BCFF)",backgroundSize:"300% 100%",animation:"gradient-shift 4s ease infinite, glow-pulse 3s ease-in-out infinite",WebkitTextStroke:"1px rgba(255,255,255,0.8)"},children:"Localizer"})]}),x.jsx("p",{className:"text-lg md:text-xl mb-2",style:n3,children:"Superboost your app's global launch."}),x.jsx("p",{className:"text-base md:text-lg mb-8",style:n3,children:"Translate to 35+ languages in minutes, not weeks."}),x.jsxs("button",{onClick:r,className:"pointer-events-auto group relative inline-flex items-center gap-2 px-8 py-4 text-lg font-semibold text-[#381E72] rounded-full overflow-hidden transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-[#D0BCFF]/30",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#D0BCFF] via-[#FFB4AB] to-[#7DD3C0] opacity-90 group-hover:opacity-100 transition-opacity"}),x.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity",children:x.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})}),x.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[#D0BCFF] via-[#FFB4AB] to-[#7DD3C0] rounded-full blur-lg opacity-40 group-hover:opacity-60 transition-opacity"}),x.jsx("span",{className:"relative",children:"Get Started"}),x.jsx("svg",{className:"relative w-5 h-5 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),x.jsxs("div",{className:"absolute bottom-8 left-0 right-0 flex flex-col items-center gap-4 px-6",children:[x.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3",children:["Open Source","AI-Powered","35+ Languages","App Store Ready"].map(o=>x.jsx("span",{className:"px-3 py-1.5 text-xs font-medium text-gray-300 bg-white/5 backdrop-blur-sm rounded-full border border-white/10",children:o},o))}),x.jsxs("div",{className:"flex items-center justify-center gap-6 pointer-events-auto",children:[x.jsxs("a",{href:"https://github.com/fayharinn/iOS-App-Distribution-Localizer",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors group",children:[x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),x.jsx("span",{className:"text-sm font-medium",children:"Open Source"})]}),x.jsx("div",{className:"w-px h-4 bg-gray-600"}),x.jsxs("a",{href:"https://x.com/fayhecode",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors group",children:[x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),x.jsx("span",{className:"text-sm font-medium",children:"@fayhecode"})]})]}),x.jsx("button",{onClick:r,className:"pointer-events-auto text-sm text-gray-500 hover:text-gray-300 transition-colors",children:"Press Enter or click anywhere to continue "})]})]})}function LH(){const{camera:n}=e0(),e=k.useRef({x:0,y:0}),t=k.useRef({x:0,y:0});return k.useEffect(()=>{const i=a=>{e.current.x=(a.clientX/window.innerWidth-.5)*2,e.current.y=(a.clientY/window.innerHeight-.5)*2};return window.addEventListener("mousemove",i),()=>window.removeEventListener("mousemove",i)},[]),ru(()=>{t.current.x+=(e.current.x-t.current.x)*.02,t.current.y+=(e.current.y-t.current.y)*.02,n.position.x=t.current.x*1.5,n.position.y=t.current.y*1,n.lookAt(0,0,0)}),null}function zH(){return x.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#050510] z-50",children:x.jsxs("div",{className:"text-center",children:[x.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-4",children:[x.jsx("div",{className:"absolute inset-0 border-2 border-purple-500/30 rounded-full"}),x.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-purple-500 rounded-full animate-spin"}),x.jsx("div",{className:"absolute inset-2 bg-purple-500/10 rounded-full animate-pulse"})]}),x.jsx("p",{className:"text-gray-400 text-sm animate-pulse",children:"Loading experience..."})]})})}function PH(){return x.jsxs(x.Fragment,{children:[x.jsx(LH,{}),x.jsx("ambientLight",{intensity:.1}),x.jsx("pointLight",{position:[10,10,10],intensity:.5,color:"#9b6dff"}),x.jsx("pointLight",{position:[-10,-10,-10],intensity:.3,color:"#4ecdc4"}),x.jsx(gH,{}),x.jsx(_H,{}),x.jsx(EH,{radius:3}),x.jsx(UH,{}),x.jsx(cH,{all:!0})]})}function IH({onComplete:n}){const[e,t]=k.useState(!0),[i,a]=k.useState(!1),r=k.useRef();k.useEffect(()=>{const c=setTimeout(()=>t(!1),1500);return()=>clearTimeout(c)},[]),k.useEffect(()=>{const c=d=>{(d.key==="Enter"||d.key===" ")&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]);const o=()=>{a(!0),setTimeout(()=>{n()},800)};return x.jsxs("div",{ref:r,className:`fixed inset-0 bg-[#050510] transition-opacity duration-700 ${i?"opacity-0":"opacity-100"}`,style:{zIndex:9999},children:[e&&x.jsx(zH,{}),x.jsx("div",{className:`absolute inset-0 transition-opacity duration-1000 ${e?"opacity-0":"opacity-100"}`,children:x.jsx(uj,{camera:{position:[0,0,12],fov:60},gl:{antialias:!0,alpha:!1,powerPreference:"high-performance"},dpr:[1,2],children:x.jsx(k.Suspense,{fallback:null,children:x.jsx(PH,{})})})}),!e&&x.jsx(OH,{onGetStarted:o}),x.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(ellipse at center, transparent 0%, rgba(5, 5, 16, 0.4) 70%, rgba(5, 5, 16, 0.8) 100%)"}})]})}function i3(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function j0(...n){return e=>{let t=!1;const i=n.map(a=>{const r=i3(a,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let a=0;a<i.length;a++){const r=i[a];typeof r=="function"?r():i3(n[a],null)}}}}function oa(...n){return k.useCallback(j0(...n),n)}var BH=Symbol.for("react.lazy"),mb=J2[" use ".trim().toString()];function kH(n){return typeof n=="object"&&n!==null&&"then"in n}function XR(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===BH&&"_payload"in n&&kH(n._payload)}function Zw(n){const e=FH(n),t=k.forwardRef((i,a)=>{let{children:r,...o}=i;XR(r)&&typeof mb=="function"&&(r=mb(r._payload));const c=k.Children.toArray(r),d=c.find(HH);if(d){const f=d.props.children,m=c.map(g=>g===d?k.Children.count(f)>1?k.Children.only(null):k.isValidElement(f)?f.props.children:null:g);return x.jsx(e,{...o,ref:a,children:k.isValidElement(f)?k.cloneElement(f,void 0,m):null})}return x.jsx(e,{...o,ref:a,children:r})});return t.displayName=`${n}.Slot`,t}var m1=Zw("Slot");function FH(n){const e=k.forwardRef((t,i)=>{let{children:a,...r}=t;if(XR(a)&&typeof mb=="function"&&(a=mb(a._payload)),k.isValidElement(a)){const o=GH(a),c=VH(r,a.props);return a.type!==k.Fragment&&(c.ref=i?j0(i,o):o),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var jH=Symbol("radix.slottable");function HH(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===jH}function VH(n,e){const t={...e};for(const i in e){const a=n[i],r=e[i];/^on[A-Z]/.test(i)?a&&r?t[i]=(...c)=>{const d=r(...c);return a(...c),d}:a&&(t[i]=a):i==="style"?t[i]={...a,...r}:i==="className"&&(t[i]=[a,r].filter(Boolean).join(" "))}return{...n,...t}}function GH(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function YR(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=YR(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function qR(){for(var n,e,t=0,i="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=YR(n))&&(i&&(i+=" "),i+=e);return i}const a3=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,r3=qR,Jw=(n,e)=>t=>{var i;if(e?.variants==null)return r3(n,t?.class,t?.className);const{variants:a,defaultVariants:r}=e,o=Object.keys(a).map(f=>{const m=t?.[f],g=r?.[f];if(m===null)return null;const y=a3(m)||a3(g);return a[f][y]}),c=t&&Object.entries(t).reduce((f,m)=>{let[g,y]=m;return y===void 0||(f[g]=y),f},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((f,m)=>{let{class:g,className:y,..._}=m;return Object.entries(_).every(S=>{let[A,T]=S;return Array.isArray(T)?T.includes({...r,...c}[A]):{...r,...c}[A]===T})?[...f,g,y]:f},[]);return r3(n,o,d,t?.class,t?.className)},WH=(n,e)=>{const t=new Array(n.length+e.length);for(let i=0;i<n.length;i++)t[i]=n[i];for(let i=0;i<e.length;i++)t[n.length+i]=e[i];return t},XH=(n,e)=>({classGroupId:n,validator:e}),KR=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),gb="-",s3=[],YH="arbitrary..",qH=n=>{const e=ZH(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return KH(o);const c=o.split(gb),d=c[0]===""&&c.length>1?1:0;return ZR(c,d,e)},getConflictingClassGroupIds:(o,c)=>{if(c){const d=i[o],f=t[o];return d?f?WH(f,d):d:f||s3}return t[o]||s3}}},ZR=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const a=n[e],r=t.nextPart.get(a);if(r){const f=ZR(n,e+1,r);if(f)return f}const o=t.validators;if(o===null)return;const c=e===0?n.join(gb):n.slice(e).join(gb),d=o.length;for(let f=0;f<d;f++){const m=o[f];if(m.validator(c))return m.classGroupId}},KH=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),i=e.slice(0,t);return i?YH+i:void 0})(),ZH=n=>{const{theme:e,classGroups:t}=n;return JH(t,e)},JH=(n,e)=>{const t=KR();for(const i in n){const a=n[i];Qw(a,t,i,e)}return t},Qw=(n,e,t,i)=>{const a=n.length;for(let r=0;r<a;r++){const o=n[r];QH(o,e,t,i)}},QH=(n,e,t,i)=>{if(typeof n=="string"){$H(n,e,t);return}if(typeof n=="function"){eV(n,e,t,i);return}tV(n,e,t,i)},$H=(n,e,t)=>{const i=n===""?e:JR(e,n);i.classGroupId=t},eV=(n,e,t,i)=>{if(nV(n)){Qw(n(i),e,t,i);return}e.validators===null&&(e.validators=[]),e.validators.push(XH(t,n))},tV=(n,e,t,i)=>{const a=Object.entries(n),r=a.length;for(let o=0;o<r;o++){const[c,d]=a[o];Qw(d,JR(e,c),t,i)}},JR=(n,e)=>{let t=n;const i=e.split(gb),a=i.length;for(let r=0;r<a;r++){const o=i[r];let c=t.nextPart.get(o);c||(c=KR(),t.nextPart.set(o,c)),t=c}return t},nV=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,iV=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),i=Object.create(null);const a=(r,o)=>{t[r]=o,e++,e>n&&(e=0,i=t,t=Object.create(null))};return{get(r){let o=t[r];if(o!==void 0)return o;if((o=i[r])!==void 0)return a(r,o),o},set(r,o){r in t?t[r]=o:a(r,o)}}},N2="!",o3=":",aV=[],l3=(n,e,t,i,a)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:i,isExternal:a}),rV=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=a=>{const r=[];let o=0,c=0,d=0,f;const m=a.length;for(let A=0;A<m;A++){const T=a[A];if(o===0&&c===0){if(T===o3){r.push(a.slice(d,A)),d=A+1;continue}if(T==="/"){f=A;continue}}T==="["?o++:T==="]"?o--:T==="("?c++:T===")"&&c--}const g=r.length===0?a:a.slice(d);let y=g,_=!1;g.endsWith(N2)?(y=g.slice(0,-1),_=!0):g.startsWith(N2)&&(y=g.slice(1),_=!0);const S=f&&f>d?f-d:void 0;return l3(r,_,y,S)};if(e){const a=e+o3,r=i;i=o=>o.startsWith(a)?r(o.slice(a.length)):l3(aV,!1,o,void 0,!0)}if(t){const a=i;i=r=>t({className:r,parseClassName:a})}return i},sV=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,i)=>{e.set(t,1e6+i)}),t=>{const i=[];let a=[];for(let r=0;r<t.length;r++){const o=t[r],c=o[0]==="[",d=e.has(o);c||d?(a.length>0&&(a.sort(),i.push(...a),a=[]),i.push(o)):a.push(o)}return a.length>0&&(a.sort(),i.push(...a)),i}},oV=n=>({cache:iV(n.cacheSize),parseClassName:rV(n),sortModifiers:sV(n),...qH(n)}),lV=/\s+/,cV=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:r}=e,o=[],c=n.trim().split(lV);let d="";for(let f=c.length-1;f>=0;f-=1){const m=c[f],{isExternal:g,modifiers:y,hasImportantModifier:_,baseClassName:S,maybePostfixModifierPosition:A}=t(m);if(g){d=m+(d.length>0?" "+d:d);continue}let T=!!A,w=i(T?S.substring(0,A):S);if(!w){if(!T){d=m+(d.length>0?" "+d:d);continue}if(w=i(S),!w){d=m+(d.length>0?" "+d:d);continue}T=!1}const N=y.length===0?"":y.length===1?y[0]:r(y).join(":"),D=_?N+N2:N,U=D+w;if(o.indexOf(U)>-1)continue;o.push(U);const O=a(w,T);for(let B=0;B<O.length;++B){const z=O[B];o.push(D+z)}d=m+(d.length>0?" "+d:d)}return d},uV=(...n)=>{let e=0,t,i,a="";for(;e<n.length;)(t=n[e++])&&(i=QR(t))&&(a&&(a+=" "),a+=i);return a},QR=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=QR(n[i]))&&(t&&(t+=" "),t+=e);return t},dV=(n,...e)=>{let t,i,a,r;const o=d=>{const f=e.reduce((m,g)=>g(m),n());return t=oV(f),i=t.cache.get,a=t.cache.set,r=c,c(d)},c=d=>{const f=i(d);if(f)return f;const m=cV(d,t);return a(d,m),m};return r=o,(...d)=>r(uV(...d))},fV=[],Ia=n=>{const e=t=>t[n]||fV;return e.isThemeGetter=!0,e},$R=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,e5=/^\((?:(\w[\w-]*):)?(.+)\)$/i,hV=/^\d+\/\d+$/,pV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,vV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fp=n=>hV.test(n),Ln=n=>!!n&&!Number.isNaN(Number(n)),$u=n=>!!n&&Number.isInteger(Number(n)),TS=n=>n.endsWith("%")&&Ln(n.slice(0,-1)),Yc=n=>pV.test(n),yV=()=>!0,bV=n=>mV.test(n)&&!gV.test(n),t5=()=>!1,_V=n=>vV.test(n),SV=n=>xV.test(n),wV=n=>!Xt(n)&&!Yt(n),MV=n=>Kp(n,a5,t5),Xt=n=>$R.test(n),gf=n=>Kp(n,r5,bV),AS=n=>Kp(n,NV,Ln),c3=n=>Kp(n,n5,t5),EV=n=>Kp(n,i5,SV),Qx=n=>Kp(n,s5,_V),Yt=n=>e5.test(n),zg=n=>Zp(n,r5),TV=n=>Zp(n,RV),u3=n=>Zp(n,n5),AV=n=>Zp(n,a5),CV=n=>Zp(n,i5),$x=n=>Zp(n,s5,!0),Kp=(n,e,t)=>{const i=$R.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},Zp=(n,e,t=!1)=>{const i=e5.exec(n);return i?i[1]?e(i[1]):t:!1},n5=n=>n==="position"||n==="percentage",i5=n=>n==="image"||n==="url",a5=n=>n==="length"||n==="size"||n==="bg-size",r5=n=>n==="length",NV=n=>n==="number",RV=n=>n==="family-name",s5=n=>n==="shadow",DV=()=>{const n=Ia("color"),e=Ia("font"),t=Ia("text"),i=Ia("font-weight"),a=Ia("tracking"),r=Ia("leading"),o=Ia("breakpoint"),c=Ia("container"),d=Ia("spacing"),f=Ia("radius"),m=Ia("shadow"),g=Ia("inset-shadow"),y=Ia("text-shadow"),_=Ia("drop-shadow"),S=Ia("blur"),A=Ia("perspective"),T=Ia("aspect"),w=Ia("ease"),N=Ia("animate"),D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...U(),Yt,Xt],B=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto","contain","none"],F=()=>[Yt,Xt,d],L=()=>[fp,"full","auto",...F()],I=()=>[$u,"none","subgrid",Yt,Xt],Y=()=>["auto",{span:["full",$u,Yt,Xt]},$u,Yt,Xt],q=()=>[$u,"auto",Yt,Xt],K=()=>["auto","min","max","fr",Yt,Xt],$=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ce=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...F()],W=()=>[fp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...F()],Q=()=>[n,Yt,Xt],ue=()=>[...U(),u3,c3,{position:[Yt,Xt]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],j=()=>["auto","cover","contain",AV,MV,{size:[Yt,Xt]}],ee=()=>[TS,zg,gf],ne=()=>["","none","full",f,Yt,Xt],oe=()=>["",Ln,zg,gf],re=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[Ln,TS,u3,c3],ve=()=>["","none",S,Yt,Xt],ze=()=>["none",Ln,Yt,Xt],qe=()=>["none",Ln,Yt,Xt],Ke=()=>[Ln,Yt,Xt],Pe=()=>[fp,"full",...F()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yc],breakpoint:[Yc],color:[yV],container:[Yc],"drop-shadow":[Yc],ease:["in","out","in-out"],font:[wV],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yc],shadow:[Yc],spacing:["px",Ln],text:[Yc],"text-shadow":[Yc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",fp,Xt,Yt,T]}],container:["container"],columns:[{columns:[Ln,Xt,Yt,c]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[$u,"auto",Yt,Xt]}],basis:[{basis:[fp,"full","auto",c,...F()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ln,fp,"auto","initial","none",Xt]}],grow:[{grow:["",Ln,Yt,Xt]}],shrink:[{shrink:["",Ln,Yt,Xt]}],order:[{order:[$u,"first","last","none",Yt,Xt]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:F()}],"gap-x":[{"gap-x":F()}],"gap-y":[{"gap-y":F()}],"justify-content":[{justify:[...$(),"normal"]}],"justify-items":[{"justify-items":[...ce(),"normal"]}],"justify-self":[{"justify-self":["auto",...ce()]}],"align-content":[{content:["normal",...$()]}],"align-items":[{items:[...ce(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ce(),{baseline:["","last"]}]}],"place-content":[{"place-content":$()}],"place-items":[{"place-items":[...ce(),"baseline"]}],"place-self":[{"place-self":["auto",...ce()]}],p:[{p:F()}],px:[{px:F()}],py:[{py:F()}],ps:[{ps:F()}],pe:[{pe:F()}],pt:[{pt:F()}],pr:[{pr:F()}],pb:[{pb:F()}],pl:[{pl:F()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":F()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":F()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[c,"screen",...W()]}],"min-w":[{"min-w":[c,"screen","none",...W()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[o]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",t,zg,gf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Yt,AS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",TS,Xt]}],"font-family":[{font:[TV,Xt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Yt,Xt]}],"line-clamp":[{"line-clamp":[Ln,"none",Yt,AS]}],leading:[{leading:[r,...F()]}],"list-image":[{"list-image":["none",Yt,Xt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Yt,Xt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ln,"from-font","auto",Yt,gf]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[Ln,"auto",Yt,Xt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Yt,Xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Yt,Xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ue()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:j()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$u,Yt,Xt],radial:["",Yt,Xt],conic:[$u,Yt,Xt]},CV,EV]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:oe()}],"border-w-x":[{"border-x":oe()}],"border-w-y":[{"border-y":oe()}],"border-w-s":[{"border-s":oe()}],"border-w-e":[{"border-e":oe()}],"border-w-t":[{"border-t":oe()}],"border-w-r":[{"border-r":oe()}],"border-w-b":[{"border-b":oe()}],"border-w-l":[{"border-l":oe()}],"divide-x":[{"divide-x":oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...re(),"hidden","none"]}],"divide-style":[{divide:[...re(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ln,Yt,Xt]}],"outline-w":[{outline:["",Ln,zg,gf]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",m,$x,Qx]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",g,$x,Qx]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[Ln,gf]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":oe()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",y,$x,Qx]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[Ln,Yt,Xt]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ln]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[Yt,Xt]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":U()}],"mask-image-conic-pos":[{"mask-conic":[Ln]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ue()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:j()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Yt,Xt]}],filter:[{filter:["","none",Yt,Xt]}],blur:[{blur:ve()}],brightness:[{brightness:[Ln,Yt,Xt]}],contrast:[{contrast:[Ln,Yt,Xt]}],"drop-shadow":[{"drop-shadow":["","none",_,$x,Qx]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",Ln,Yt,Xt]}],"hue-rotate":[{"hue-rotate":[Ln,Yt,Xt]}],invert:[{invert:["",Ln,Yt,Xt]}],saturate:[{saturate:[Ln,Yt,Xt]}],sepia:[{sepia:["",Ln,Yt,Xt]}],"backdrop-filter":[{"backdrop-filter":["","none",Yt,Xt]}],"backdrop-blur":[{"backdrop-blur":ve()}],"backdrop-brightness":[{"backdrop-brightness":[Ln,Yt,Xt]}],"backdrop-contrast":[{"backdrop-contrast":[Ln,Yt,Xt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ln,Yt,Xt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ln,Yt,Xt]}],"backdrop-invert":[{"backdrop-invert":["",Ln,Yt,Xt]}],"backdrop-opacity":[{"backdrop-opacity":[Ln,Yt,Xt]}],"backdrop-saturate":[{"backdrop-saturate":[Ln,Yt,Xt]}],"backdrop-sepia":[{"backdrop-sepia":["",Ln,Yt,Xt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":F()}],"border-spacing-x":[{"border-spacing-x":F()}],"border-spacing-y":[{"border-spacing-y":F()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Yt,Xt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ln,"initial",Yt,Xt]}],ease:[{ease:["linear","initial",w,Yt,Xt]}],delay:[{delay:[Ln,Yt,Xt]}],animate:[{animate:["none",N,Yt,Xt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Yt,Xt]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:ze()}],"rotate-x":[{"rotate-x":ze()}],"rotate-y":[{"rotate-y":ze()}],"rotate-z":[{"rotate-z":ze()}],scale:[{scale:qe()}],"scale-x":[{"scale-x":qe()}],"scale-y":[{"scale-y":qe()}],"scale-z":[{"scale-z":qe()}],"scale-3d":["scale-3d"],skew:[{skew:Ke()}],"skew-x":[{"skew-x":Ke()}],"skew-y":[{"skew-y":Ke()}],transform:[{transform:[Yt,Xt,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Pe()}],"translate-x":[{"translate-x":Pe()}],"translate-y":[{"translate-y":Pe()}],"translate-z":[{"translate-z":Pe()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Yt,Xt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Yt,Xt]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[Ln,zg,gf,AS]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},UV=dV(DV);function en(...n){return UV(qR(n))}const $w=Jw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md",destructive:"bg-destructive text-white shadow-sm hover:bg-destructive/90 hover:shadow-md focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-border/50 bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:border-border dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-5 py-2 has-[>svg]:px-4",sm:"h-9 rounded-lg gap-1.5 px-4 has-[>svg]:px-3",lg:"h-12 rounded-xl px-8 text-base has-[>svg]:px-6",icon:"size-10","icon-sm":"size-9","icon-lg":"size-12"}},defaultVariants:{variant:"default",size:"default"}});function Nn({className:n,variant:e,size:t,asChild:i=!1,...a}){const r=i?m1:"button";return x.jsx(r,{"data-slot":"button",className:en($w({variant:e,size:t,className:n})),...a})}function ws({className:n,...e}){return x.jsx("div",{"data-slot":"card",className:en("bg-card text-card-foreground flex flex-col gap-6 rounded-2xl border border-border/50 py-6 shadow-sm transition-all duration-300",n),...e})}function Ms({className:n,...e}){return x.jsx("div",{"data-slot":"card-header",className:en("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function Es({className:n,...e}){return x.jsx("div",{"data-slot":"card-title",className:en("leading-none font-semibold",n),...e})}function Ts({className:n,...e}){return x.jsx("div",{"data-slot":"card-description",className:en("text-muted-foreground text-sm",n),...e})}function As({className:n,...e}){return x.jsx("div",{"data-slot":"card-content",className:en("px-6",n),...e})}function xa({className:n,type:e,...t}){return x.jsx("input",{type:e,"data-slot":"input",className:en("file:text-foreground placeholder:text-muted-foreground/70 selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-border/50 h-10 w-full min-w-0 rounded-xl border bg-background px-4 py-2 text-base shadow-sm transition-all duration-200 outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","hover:border-border focus-visible:border-primary/50 focus-visible:ring-2 focus-visible:ring-primary/20","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}function OV(n,e){const t=k.createContext(e),i=r=>{const{children:o,...c}=r,d=k.useMemo(()=>c,Object.values(c));return x.jsx(t.Provider,{value:d,children:o})};i.displayName=n+"Provider";function a(r){const o=k.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${r}\` must be used within \`${n}\``)}return[i,a]}function su(n,e=[]){let t=[];function i(r,o){const c=k.createContext(o),d=t.length;t=[...t,o];const f=g=>{const{scope:y,children:_,...S}=g,A=y?.[n]?.[d]||c,T=k.useMemo(()=>S,Object.values(S));return x.jsx(A.Provider,{value:T,children:_})};f.displayName=r+"Provider";function m(g,y){const _=y?.[n]?.[d]||c,S=k.useContext(_);if(S)return S;if(o!==void 0)return o;throw new Error(`\`${g}\` must be used within \`${r}\``)}return[f,m]}const a=()=>{const r=t.map(o=>k.createContext(o));return function(c){const d=c?.[n]||r;return k.useMemo(()=>({[`__scope${n}`]:{...c,[n]:d}}),[c,d])}};return a.scopeName=n,[i,LV(a,...e)]}function LV(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(r){const o=i.reduce((c,{useScope:d,scopeName:f})=>{const g=d(r)[`__scope${f}`];return{...c,...g}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function ui(n,e,{checkForDefaultPrevented:t=!0}={}){return function(a){if(n?.(a),t===!1||!a.defaultPrevented)return e?.(a)}}var sc=globalThis?.document?k.useLayoutEffect:()=>{},zV=J2[" useInsertionEffect ".trim().toString()]||sc;function H0({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[a,r,o]=PV({defaultProp:e,onChange:t}),c=n!==void 0,d=c?n:a;{const m=k.useRef(n!==void 0);k.useEffect(()=>{const g=m.current;g!==c&&console.warn(`${i} is changing from ${g?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,i])}const f=k.useCallback(m=>{if(c){const g=IV(m)?m(n):m;g!==n&&o.current?.(g)}else r(m)},[c,n,r,o]);return[d,f]}function PV({defaultProp:n,onChange:e}){const[t,i]=k.useState(n),a=k.useRef(t),r=k.useRef(e);return zV(()=>{r.current=e},[e]),k.useEffect(()=>{a.current!==t&&(r.current?.(t),a.current=t)},[t,a]),[t,i,r]}function IV(n){return typeof n=="function"}function BV(n){const[e,t]=k.useState(void 0);return sc(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const r=a[0];let o,c;if("borderBoxSize"in r){const d=r.borderBoxSize,f=Array.isArray(d)?d[0]:d;o=f.inlineSize,c=f.blockSize}else o=n.offsetWidth,c=n.offsetHeight;t({width:o,height:c})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}function kV(n,e){return k.useReducer((t,i)=>e[t][i]??t,n)}var Oo=n=>{const{present:e,children:t}=n,i=FV(e),a=typeof t=="function"?t({present:i.isPresent}):k.Children.only(t),r=oa(i.ref,jV(a));return typeof t=="function"||i.isPresent?k.cloneElement(a,{ref:r}):null};Oo.displayName="Presence";function FV(n){const[e,t]=k.useState(),i=k.useRef(null),a=k.useRef(n),r=k.useRef("none"),o=n?"mounted":"unmounted",[c,d]=kV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const f=ey(i.current);r.current=c==="mounted"?f:"none"},[c]),sc(()=>{const f=i.current,m=a.current;if(m!==n){const y=r.current,_=ey(f);n?d("MOUNT"):_==="none"||f?.display==="none"?d("UNMOUNT"):d(m&&y!==_?"ANIMATION_OUT":"UNMOUNT"),a.current=n}},[n,d]),sc(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,g=_=>{const A=ey(i.current).includes(CSS.escape(_.animationName));if(_.target===e&&A&&(d("ANIMATION_END"),!a.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},y=_=>{_.target===e&&(r.current=ey(i.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:k.useCallback(f=>{i.current=f?getComputedStyle(f):null,t(f)},[])}}function ey(n){return n?.animationName||"none"}function jV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function HV(n){const e=VV(n),t=k.forwardRef((i,a)=>{const{children:r,...o}=i,c=k.Children.toArray(r),d=c.find(WV);if(d){const f=d.props.children,m=c.map(g=>g===d?k.Children.count(f)>1?k.Children.only(null):k.isValidElement(f)?f.props.children:null:g);return x.jsx(e,{...o,ref:a,children:k.isValidElement(f)?k.cloneElement(f,void 0,m):null})}return x.jsx(e,{...o,ref:a,children:r})});return t.displayName=`${n}.Slot`,t}function VV(n){const e=k.forwardRef((t,i)=>{const{children:a,...r}=t;if(k.isValidElement(a)){const o=YV(a),c=XV(r,a.props);return a.type!==k.Fragment&&(c.ref=i?j0(i,o):o),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var GV=Symbol("radix.slottable");function WV(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===GV}function XV(n,e){const t={...e};for(const i in e){const a=n[i],r=e[i];/^on[A-Z]/.test(i)?a&&r?t[i]=(...c)=>{const d=r(...c);return a(...c),d}:a&&(t[i]=a):i==="style"?t[i]={...a,...r}:i==="className"&&(t[i]=[a,r].filter(Boolean).join(" "))}return{...n,...t}}function YV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var qV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Di=qV.reduce((n,e)=>{const t=HV(`Primitive.${e}`),i=k.forwardRef((a,r)=>{const{asChild:o,...c}=a,d=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(d,{...c,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function KV(n,e){n&&Q2.flushSync(()=>n.dispatchEvent(e))}const ZV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),d3=n=>{const e=JV(n);return e.charAt(0).toUpperCase()+e.slice(1)},o5=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),QV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var $V={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const eG=k.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:r,iconNode:o,...c},d)=>k.createElement("svg",{ref:d,...$V,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:o5("lucide",a),...!r&&!QV(c)&&{"aria-hidden":"true"},...c},[...o.map(([f,m])=>k.createElement(f,m)),...Array.isArray(r)?r:[r]]));const En=(n,e)=>{const t=k.forwardRef(({className:i,...a},r)=>k.createElement(eG,{ref:r,iconNode:e,className:o5(`lucide-${ZV(d3(n))}`,`lucide-${n}`,i),...a}));return t.displayName=d3(n),t};const tG=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],R2=En("app-window",tG);const nG=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vb=En("chevron-down",nG);const iG=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],aG=En("chevron-left",iG);const rG=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],sG=En("chevron-right",rG);const oG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nr=En("circle-alert",oG);const lG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ba=En("circle-check",lG);const cG=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],a0=En("clock",cG);const uG=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],f3=En("copy",uG);const dG=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],h3=En("download",dG);const fG=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],hG=En("external-link",fG);const pG=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],p3=En("file-text",pG);const mG=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],gG=En("folder-open",mG);const vG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],l5=En("globe",vG);const xG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ad=En("image",xG);const yG=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],CS=En("key",yG);const bG=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Hg=En("languages",bG);const _G=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],D2=En("layers",_G);const SG=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],c5=En("link-2",SG);const wG=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ks=En("loader-circle",wG);const MG=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],EG=En("lock-open",MG);const TG=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],AG=En("lock",TG);const CG=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],eM=En("monitor",CG);const NG=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],u5=En("moon",NG);const RG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],DG=En("panel-left",RG);const UG=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],r0=En("pen-line",UG);const OG=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],d5=En("plus",OG);const LG=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zG=En("refresh-cw",LG);const PG=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],IG=En("save",PG);const BG=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],U2=En("search",BG);const kG=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],m3=En("shield",kG);const FG=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],g3=En("smartphone",FG);const jG=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Kl=En("sparkles",jG);const HG=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],tM=En("store",HG);const VG=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],f5=En("sun",VG);const GG=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],WG=En("tablet",GG);const XG=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],A0=En("terminal",XG);const YG=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],v3=En("trash-2",YG);const qG=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],O2=En("trending-up",qG);const KG=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],s0=En("upload",KG);const ZG=[["path",{d:"M12 10v2.2l1.6 1",key:"n3r21l"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}]],JG=En("watch",ZG);const QG=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],g1=En("x",QG);const $G=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],e9=En("zap",$G);var t9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],n9=t9.reduce((n,e)=>{const t=Zw(`Primitive.${e}`),i=k.forwardRef((a,r)=>{const{asChild:o,...c}=a,d=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(d,{...c,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),i9="Label",h5=k.forwardRef((n,e)=>x.jsx(n9.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));h5.displayName=i9;var a9=h5;function xi({className:n,...e}){return x.jsx(a9,{"data-slot":"label",className:en("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}function Ns(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>e.current?.(...t),[])}var r9=k.createContext(void 0);function nM(n){const e=k.useContext(r9);return n||e||"ltr"}function s9(n,[e,t]){return Math.min(t,Math.max(e,n))}function o9(n,e){return k.useReducer((t,i)=>e[t][i]??t,n)}var iM="ScrollArea",[p5]=su(iM),[l9,Lo]=p5(iM),m5=k.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:i="hover",dir:a,scrollHideDelay:r=600,...o}=n,[c,d]=k.useState(null),[f,m]=k.useState(null),[g,y]=k.useState(null),[_,S]=k.useState(null),[A,T]=k.useState(null),[w,N]=k.useState(0),[D,U]=k.useState(0),[O,B]=k.useState(!1),[z,F]=k.useState(!1),L=oa(e,Y=>d(Y)),I=nM(a);return x.jsx(l9,{scope:t,type:i,dir:I,scrollHideDelay:r,scrollArea:c,viewport:f,onViewportChange:m,content:g,onContentChange:y,scrollbarX:_,onScrollbarXChange:S,scrollbarXEnabled:O,onScrollbarXEnabledChange:B,scrollbarY:A,onScrollbarYChange:T,scrollbarYEnabled:z,onScrollbarYEnabledChange:F,onCornerWidthChange:N,onCornerHeightChange:U,children:x.jsx(Di.div,{dir:I,...o,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":D+"px",...n.style}})})});m5.displayName=iM;var g5="ScrollAreaViewport",v5=k.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:i,nonce:a,...r}=n,o=Lo(g5,t),c=k.useRef(null),d=oa(e,c,o.onViewportChange);return x.jsxs(x.Fragment,{children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),x.jsx(Di.div,{"data-radix-scroll-area-viewport":"",...r,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...n.style},children:x.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});v5.displayName=g5;var uc="ScrollAreaScrollbar",x5=k.forwardRef((n,e)=>{const{forceMount:t,...i}=n,a=Lo(uc,n.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:o}=a,c=n.orientation==="horizontal";return k.useEffect(()=>(c?r(!0):o(!0),()=>{c?r(!1):o(!1)}),[c,r,o]),a.type==="hover"?x.jsx(c9,{...i,ref:e,forceMount:t}):a.type==="scroll"?x.jsx(u9,{...i,ref:e,forceMount:t}):a.type==="auto"?x.jsx(y5,{...i,ref:e,forceMount:t}):a.type==="always"?x.jsx(aM,{...i,ref:e}):null});x5.displayName=uc;var c9=k.forwardRef((n,e)=>{const{forceMount:t,...i}=n,a=Lo(uc,n.__scopeScrollArea),[r,o]=k.useState(!1);return k.useEffect(()=>{const c=a.scrollArea;let d=0;if(c){const f=()=>{window.clearTimeout(d),o(!0)},m=()=>{d=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",m)}}},[a.scrollArea,a.scrollHideDelay]),x.jsx(Oo,{present:t||r,children:x.jsx(y5,{"data-state":r?"visible":"hidden",...i,ref:e})})}),u9=k.forwardRef((n,e)=>{const{forceMount:t,...i}=n,a=Lo(uc,n.__scopeScrollArea),r=n.orientation==="horizontal",o=x1(()=>d("SCROLL_END"),100),[c,d]=o9("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return k.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,a.scrollHideDelay,d]),k.useEffect(()=>{const f=a.viewport,m=r?"scrollLeft":"scrollTop";if(f){let g=f[m];const y=()=>{const _=f[m];g!==_&&(d("SCROLL"),o()),g=_};return f.addEventListener("scroll",y),()=>f.removeEventListener("scroll",y)}},[a.viewport,r,d,o]),x.jsx(Oo,{present:t||c!=="hidden",children:x.jsx(aM,{"data-state":c==="hidden"?"hidden":"visible",...i,ref:e,onPointerEnter:ui(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:ui(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),y5=k.forwardRef((n,e)=>{const t=Lo(uc,n.__scopeScrollArea),{forceMount:i,...a}=n,[r,o]=k.useState(!1),c=n.orientation==="horizontal",d=x1(()=>{if(t.viewport){const f=t.viewport.offsetWidth<t.viewport.scrollWidth,m=t.viewport.offsetHeight<t.viewport.scrollHeight;o(c?f:m)}},10);return Bp(t.viewport,d),Bp(t.content,d),x.jsx(Oo,{present:i||r,children:x.jsx(aM,{"data-state":r?"visible":"hidden",...a,ref:e})})}),aM=k.forwardRef((n,e)=>{const{orientation:t="vertical",...i}=n,a=Lo(uc,n.__scopeScrollArea),r=k.useRef(null),o=k.useRef(0),[c,d]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=M5(c.viewport,c.content),m={...i,sizes:c,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:y=>r.current=y,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:y=>o.current=y};function g(y,_){return g9(y,o.current,c,_)}return t==="horizontal"?x.jsx(d9,{...m,ref:e,onThumbPositionChange:()=>{if(a.viewport&&r.current){const y=a.viewport.scrollLeft,_=x3(y,c,a.dir);r.current.style.transform=`translate3d(${_}px, 0, 0)`}},onWheelScroll:y=>{a.viewport&&(a.viewport.scrollLeft=y)},onDragScroll:y=>{a.viewport&&(a.viewport.scrollLeft=g(y,a.dir))}}):t==="vertical"?x.jsx(f9,{...m,ref:e,onThumbPositionChange:()=>{if(a.viewport&&r.current){const y=a.viewport.scrollTop,_=x3(y,c);r.current.style.transform=`translate3d(0, ${_}px, 0)`}},onWheelScroll:y=>{a.viewport&&(a.viewport.scrollTop=y)},onDragScroll:y=>{a.viewport&&(a.viewport.scrollTop=g(y))}}):null}),d9=k.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,...a}=n,r=Lo(uc,n.__scopeScrollArea),[o,c]=k.useState(),d=k.useRef(null),f=oa(e,d,r.onScrollbarXChange);return k.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),x.jsx(_5,{"data-orientation":"horizontal",...a,ref:f,sizes:t,style:{bottom:0,left:r.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:r.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":v1(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.x),onDragScroll:m=>n.onDragScroll(m.x),onWheelScroll:(m,g)=>{if(r.viewport){const y=r.viewport.scrollLeft+m.deltaX;n.onWheelScroll(y),T5(y,g)&&m.preventDefault()}},onResize:()=>{d.current&&r.viewport&&o&&i({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:yb(o.paddingLeft),paddingEnd:yb(o.paddingRight)}})}})}),f9=k.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,...a}=n,r=Lo(uc,n.__scopeScrollArea),[o,c]=k.useState(),d=k.useRef(null),f=oa(e,d,r.onScrollbarYChange);return k.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),x.jsx(_5,{"data-orientation":"vertical",...a,ref:f,sizes:t,style:{top:0,right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":v1(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.y),onDragScroll:m=>n.onDragScroll(m.y),onWheelScroll:(m,g)=>{if(r.viewport){const y=r.viewport.scrollTop+m.deltaY;n.onWheelScroll(y),T5(y,g)&&m.preventDefault()}},onResize:()=>{d.current&&r.viewport&&o&&i({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:yb(o.paddingTop),paddingEnd:yb(o.paddingBottom)}})}})}),[h9,b5]=p5(uc),_5=k.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:i,hasThumb:a,onThumbChange:r,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:m,onResize:g,...y}=n,_=Lo(uc,t),[S,A]=k.useState(null),T=oa(e,L=>A(L)),w=k.useRef(null),N=k.useRef(""),D=_.viewport,U=i.content-i.viewport,O=Ns(m),B=Ns(d),z=x1(g,10);function F(L){if(w.current){const I=L.clientX-w.current.left,Y=L.clientY-w.current.top;f({x:I,y:Y})}}return k.useEffect(()=>{const L=I=>{const Y=I.target;S?.contains(Y)&&O(I,U)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[D,S,U,O]),k.useEffect(B,[i,B]),Bp(S,z),Bp(_.content,z),x.jsx(h9,{scope:t,scrollbar:S,hasThumb:a,onThumbChange:Ns(r),onThumbPointerUp:Ns(o),onThumbPositionChange:B,onThumbPointerDown:Ns(c),children:x.jsx(Di.div,{...y,ref:T,style:{position:"absolute",...y.style},onPointerDown:ui(n.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),w.current=S.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),F(L))}),onPointerMove:ui(n.onPointerMove,F),onPointerUp:ui(n.onPointerUp,L=>{const I=L.target;I.hasPointerCapture(L.pointerId)&&I.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=N.current,_.viewport&&(_.viewport.style.scrollBehavior=""),w.current=null})})})}),xb="ScrollAreaThumb",S5=k.forwardRef((n,e)=>{const{forceMount:t,...i}=n,a=b5(xb,n.__scopeScrollArea);return x.jsx(Oo,{present:t||a.hasThumb,children:x.jsx(p9,{ref:e,...i})})}),p9=k.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:i,...a}=n,r=Lo(xb,t),o=b5(xb,t),{onThumbPositionChange:c}=o,d=oa(e,g=>o.onThumbChange(g)),f=k.useRef(void 0),m=x1(()=>{f.current&&(f.current(),f.current=void 0)},100);return k.useEffect(()=>{const g=r.viewport;if(g){const y=()=>{if(m(),!f.current){const _=v9(g,c);f.current=_,c()}};return c(),g.addEventListener("scroll",y),()=>g.removeEventListener("scroll",y)}},[r.viewport,m,c]),x.jsx(Di.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:ui(n.onPointerDownCapture,g=>{const _=g.target.getBoundingClientRect(),S=g.clientX-_.left,A=g.clientY-_.top;o.onThumbPointerDown({x:S,y:A})}),onPointerUp:ui(n.onPointerUp,o.onThumbPointerUp)})});S5.displayName=xb;var rM="ScrollAreaCorner",w5=k.forwardRef((n,e)=>{const t=Lo(rM,n.__scopeScrollArea),i=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&i?x.jsx(m9,{...n,ref:e}):null});w5.displayName=rM;var m9=k.forwardRef((n,e)=>{const{__scopeScrollArea:t,...i}=n,a=Lo(rM,t),[r,o]=k.useState(0),[c,d]=k.useState(0),f=!!(r&&c);return Bp(a.scrollbarX,()=>{const m=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(m),d(m)}),Bp(a.scrollbarY,()=>{const m=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(m),o(m)}),f?x.jsx(Di.div,{...i,ref:e,style:{width:r,height:c,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function yb(n){return n?parseInt(n,10):0}function M5(n,e){const t=n/e;return isNaN(t)?0:t}function v1(n){const e=M5(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,i=(n.scrollbar.size-t)*e;return Math.max(i,18)}function g9(n,e,t,i="ltr"){const a=v1(t),r=a/2,o=e||r,c=a-o,d=t.scrollbar.paddingStart+o,f=t.scrollbar.size-t.scrollbar.paddingEnd-c,m=t.content-t.viewport,g=i==="ltr"?[0,m]:[m*-1,0];return E5([d,f],g)(n)}function x3(n,e,t="ltr"){const i=v1(e),a=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=e.scrollbar.size-a,o=e.content-e.viewport,c=r-i,d=t==="ltr"?[0,o]:[o*-1,0],f=s9(n,d);return E5([0,o],[0,c])(f)}function E5(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(n[1]-n[0]);return e[0]+i*(t-n[0])}}function T5(n,e){return n>0&&n<e}var v9=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},i=0;return(function a(){const r={left:n.scrollLeft,top:n.scrollTop},o=t.left!==r.left,c=t.top!==r.top;(o||c)&&e(),t=r,i=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(i)};function x1(n,e){const t=Ns(n),i=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(i.current),[]),k.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(t,e)},[t,e])}function Bp(n,e){const t=Ns(e);sc(()=>{let i=0;if(n){const a=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(t)});return a.observe(n),()=>{window.cancelAnimationFrame(i),a.unobserve(n)}}},[n,t])}var x9=m5,y9=v5,b9=w5;function A5({className:n,children:e,...t}){return x.jsxs(x9,{"data-slot":"scroll-area",className:en("relative",n),...t,children:[x.jsx(y9,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),x.jsx(_9,{}),x.jsx(b9,{})]})}function _9({className:n,orientation:e="vertical",...t}){return x.jsx(x5,{"data-slot":"scroll-area-scrollbar",orientation:e,className:en("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...t,children:x.jsx(S5,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const S9=Jw("inline-flex items-center justify-center rounded-full border px-2.5 py-1 text-xs font-semibold w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1.5 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-all duration-200 overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-sm [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white shadow-sm [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border-border/50 text-foreground bg-background shadow-sm [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",success:"border-transparent bg-emerald-500/10 text-emerald-500 [a&]:hover:bg-emerald-500/20",warning:"border-transparent bg-amber-500/10 text-amber-500 [a&]:hover:bg-amber-500/20"}},defaultVariants:{variant:"default"}});function ll({className:n,variant:e,asChild:t=!1,...i}){const a=t?m1:"span";return x.jsx(a,{"data-slot":"badge",className:en(S9({variant:e}),n),...i})}function y3(n){const e=w9(n),t=k.forwardRef((i,a)=>{const{children:r,...o}=i,c=k.Children.toArray(r),d=c.find(E9);if(d){const f=d.props.children,m=c.map(g=>g===d?k.Children.count(f)>1?k.Children.only(null):k.isValidElement(f)?f.props.children:null:g);return x.jsx(e,{...o,ref:a,children:k.isValidElement(f)?k.cloneElement(f,void 0,m):null})}return x.jsx(e,{...o,ref:a,children:r})});return t.displayName=`${n}.Slot`,t}function w9(n){const e=k.forwardRef((t,i)=>{const{children:a,...r}=t;if(k.isValidElement(a)){const o=A9(a),c=T9(r,a.props);return a.type!==k.Fragment&&(c.ref=i?j0(i,o):o),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var M9=Symbol("radix.slottable");function E9(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===M9}function T9(n,e){const t={...e};for(const i in e){const a=n[i],r=e[i];/^on[A-Z]/.test(i)?a&&r?t[i]=(...c)=>{const d=r(...c);return a(...c),d}:a&&(t[i]=a):i==="style"?t[i]={...a,...r}:i==="className"&&(t[i]=[a,r].filter(Boolean).join(" "))}return{...n,...t}}function A9(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function C9(n){const e=n+"CollectionProvider",[t,i]=su(e),[a,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=A=>{const{scope:T,children:w}=A,N=St.useRef(null),D=St.useRef(new Map).current;return x.jsx(a,{scope:T,itemMap:D,collectionRef:N,children:w})};o.displayName=e;const c=n+"CollectionSlot",d=y3(c),f=St.forwardRef((A,T)=>{const{scope:w,children:N}=A,D=r(c,w),U=oa(T,D.collectionRef);return x.jsx(d,{ref:U,children:N})});f.displayName=c;const m=n+"CollectionItemSlot",g="data-radix-collection-item",y=y3(m),_=St.forwardRef((A,T)=>{const{scope:w,children:N,...D}=A,U=St.useRef(null),O=oa(T,U),B=r(m,w);return St.useEffect(()=>(B.itemMap.set(U,{ref:U,...D}),()=>void B.itemMap.delete(U))),x.jsx(y,{[g]:"",ref:O,children:N})});_.displayName=m;function S(A){const T=r(n+"CollectionConsumer",A);return St.useCallback(()=>{const N=T.collectionRef.current;if(!N)return[];const D=Array.from(N.querySelectorAll(`[${g}]`));return Array.from(T.itemMap.values()).sort((B,z)=>D.indexOf(B.ref.current)-D.indexOf(z.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:o,Slot:f,ItemSlot:_},S,i]}var N9=J2[" useId ".trim().toString()]||(()=>{}),R9=0;function Df(n){const[e,t]=k.useState(N9());return sc(()=>{t(i=>i??String(R9++))},[n]),n||(e?`radix-${e}`:"")}var NS="rovingFocusGroup.onEntryFocus",D9={bubbles:!1,cancelable:!0},V0="RovingFocusGroup",[L2,C5,U9]=C9(V0),[O9,N5]=su(V0,[U9]),[L9,z9]=O9(V0),R5=k.forwardRef((n,e)=>x.jsx(L2.Provider,{scope:n.__scopeRovingFocusGroup,children:x.jsx(L2.Slot,{scope:n.__scopeRovingFocusGroup,children:x.jsx(P9,{...n,ref:e})})}));R5.displayName=V0;var P9=k.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:a=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...g}=n,y=k.useRef(null),_=oa(e,y),S=nM(r),[A,T]=H0({prop:o,defaultProp:c??null,onChange:d,caller:V0}),[w,N]=k.useState(!1),D=Ns(f),U=C5(t),O=k.useRef(!1),[B,z]=k.useState(0);return k.useEffect(()=>{const F=y.current;if(F)return F.addEventListener(NS,D),()=>F.removeEventListener(NS,D)},[D]),x.jsx(L9,{scope:t,orientation:i,dir:S,loop:a,currentTabStopId:A,onItemFocus:k.useCallback(F=>T(F),[T]),onItemShiftTab:k.useCallback(()=>N(!0),[]),onFocusableItemAdd:k.useCallback(()=>z(F=>F+1),[]),onFocusableItemRemove:k.useCallback(()=>z(F=>F-1),[]),children:x.jsx(Di.div,{tabIndex:w||B===0?-1:0,"data-orientation":i,...g,ref:_,style:{outline:"none",...n.style},onMouseDown:ui(n.onMouseDown,()=>{O.current=!0}),onFocus:ui(n.onFocus,F=>{const L=!O.current;if(F.target===F.currentTarget&&L&&!w){const I=new CustomEvent(NS,D9);if(F.currentTarget.dispatchEvent(I),!I.defaultPrevented){const Y=U().filter(G=>G.focusable),q=Y.find(G=>G.active),K=Y.find(G=>G.id===A),ce=[q,K,...Y].filter(Boolean).map(G=>G.ref.current);O5(ce,m)}}O.current=!1}),onBlur:ui(n.onBlur,()=>N(!1))})})}),D5="RovingFocusGroupItem",U5=k.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:a=!1,tabStopId:r,children:o,...c}=n,d=Df(),f=r||d,m=z9(D5,t),g=m.currentTabStopId===f,y=C5(t),{onFocusableItemAdd:_,onFocusableItemRemove:S,currentTabStopId:A}=m;return k.useEffect(()=>{if(i)return _(),()=>S()},[i,_,S]),x.jsx(L2.ItemSlot,{scope:t,id:f,focusable:i,active:a,children:x.jsx(Di.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:ui(n.onMouseDown,T=>{i?m.onItemFocus(f):T.preventDefault()}),onFocus:ui(n.onFocus,()=>m.onItemFocus(f)),onKeyDown:ui(n.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){m.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const w=k9(T,m.orientation,m.dir);if(w!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let D=y().filter(U=>U.focusable).map(U=>U.ref.current);if(w==="last")D.reverse();else if(w==="prev"||w==="next"){w==="prev"&&D.reverse();const U=D.indexOf(T.currentTarget);D=m.loop?F9(D,U+1):D.slice(U+1)}setTimeout(()=>O5(D))}}),children:typeof o=="function"?o({isCurrentTabStop:g,hasTabStop:A!=null}):o})})});U5.displayName=D5;var I9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function B9(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function k9(n,e,t){const i=B9(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return I9[i]}function O5(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function F9(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var j9=R5,H9=U5,y1="Tabs",[V9]=su(y1,[N5]),L5=N5(),[G9,sM]=V9(y1),z5=k.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,onValueChange:a,defaultValue:r,orientation:o="horizontal",dir:c,activationMode:d="automatic",...f}=n,m=nM(c),[g,y]=H0({prop:i,onChange:a,defaultProp:r??"",caller:y1});return x.jsx(G9,{scope:t,baseId:Df(),value:g,onValueChange:y,orientation:o,dir:m,activationMode:d,children:x.jsx(Di.div,{dir:m,"data-orientation":o,...f,ref:e})})});z5.displayName=y1;var P5="TabsList",I5=k.forwardRef((n,e)=>{const{__scopeTabs:t,loop:i=!0,...a}=n,r=sM(P5,t),o=L5(t);return x.jsx(j9,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:i,children:x.jsx(Di.div,{role:"tablist","aria-orientation":r.orientation,...a,ref:e})})});I5.displayName=P5;var B5="TabsTrigger",k5=k.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,disabled:a=!1,...r}=n,o=sM(B5,t),c=L5(t),d=H5(o.baseId,i),f=V5(o.baseId,i),m=i===o.value;return x.jsx(H9,{asChild:!0,...c,focusable:!a,active:m,children:x.jsx(Di.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...r,ref:e,onMouseDown:ui(n.onMouseDown,g=>{!a&&g.button===0&&g.ctrlKey===!1?o.onValueChange(i):g.preventDefault()}),onKeyDown:ui(n.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&o.onValueChange(i)}),onFocus:ui(n.onFocus,()=>{const g=o.activationMode!=="manual";!m&&!a&&g&&o.onValueChange(i)})})})});k5.displayName=B5;var F5="TabsContent",j5=k.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,forceMount:a,children:r,...o}=n,c=sM(F5,t),d=H5(c.baseId,i),f=V5(c.baseId,i),m=i===c.value,g=k.useRef(m);return k.useEffect(()=>{const y=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(y)},[]),x.jsx(Oo,{present:a||m,children:({present:y})=>x.jsx(Di.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:f,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:g.current?"0s":void 0},children:y&&r})})});j5.displayName=F5;function H5(n,e){return`${n}-trigger-${e}`}function V5(n,e){return`${n}-content-${e}`}var W9=z5,X9=I5,Y9=k5,q9=j5;function K9({className:n,...e}){return x.jsx(W9,{"data-slot":"tabs",className:en("flex flex-col gap-2",n),...e})}function Z9({className:n,...e}){return x.jsx(X9,{"data-slot":"tabs-list",className:en("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",n),...e})}function b3({className:n,...e}){return x.jsx(Y9,{"data-slot":"tabs-trigger",className:en("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...e})}function _3({className:n,...e}){return x.jsx(q9,{"data-slot":"tabs-content",className:en("flex-1 outline-none",n),...e})}function z2({className:n,...e}){return x.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:x.jsx("table",{"data-slot":"table",className:en("w-full caption-bottom text-sm",n),...e})})}function P2({className:n,...e}){return x.jsx("thead",{"data-slot":"table-header",className:en("[&_tr]:border-b",n),...e})}function I2({className:n,...e}){return x.jsx("tbody",{"data-slot":"table-body",className:en("[&_tr:last-child]:border-0",n),...e})}function Tf({className:n,...e}){return x.jsx("tr",{"data-slot":"table-row",className:en("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),...e})}function Ao({className:n,...e}){return x.jsx("th",{"data-slot":"table-head",className:en("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e})}function Zs({className:n,...e}){return x.jsx("td",{"data-slot":"table-cell",className:en("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e})}function J9(n,e=globalThis?.document){const t=Ns(n);k.useEffect(()=>{const i=a=>{a.key==="Escape"&&t(a)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var Q9="DismissableLayer",B2="dismissableLayer.update",$9="dismissableLayer.pointerDownOutside",e7="dismissableLayer.focusOutside",S3,G5=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),oM=k.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:r,onInteractOutside:o,onDismiss:c,...d}=n,f=k.useContext(G5),[m,g]=k.useState(null),y=m?.ownerDocument??globalThis?.document,[,_]=k.useState({}),S=oa(e,z=>g(z)),A=Array.from(f.layers),[T]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),w=A.indexOf(T),N=m?A.indexOf(m):-1,D=f.layersWithOutsidePointerEventsDisabled.size>0,U=N>=w,O=i7(z=>{const F=z.target,L=[...f.branches].some(I=>I.contains(F));!U||L||(a?.(z),o?.(z),z.defaultPrevented||c?.())},y),B=a7(z=>{const F=z.target;[...f.branches].some(I=>I.contains(F))||(r?.(z),o?.(z),z.defaultPrevented||c?.())},y);return J9(z=>{N===f.layers.size-1&&(i?.(z),!z.defaultPrevented&&c&&(z.preventDefault(),c()))},y),k.useEffect(()=>{if(m)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(S3=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),w3(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=S3)}},[m,y,t,f]),k.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),w3())},[m,f]),k.useEffect(()=>{const z=()=>_({});return document.addEventListener(B2,z),()=>document.removeEventListener(B2,z)},[]),x.jsx(Di.div,{...d,ref:S,style:{pointerEvents:D?U?"auto":"none":void 0,...n.style},onFocusCapture:ui(n.onFocusCapture,B.onFocusCapture),onBlurCapture:ui(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:ui(n.onPointerDownCapture,O.onPointerDownCapture)})});oM.displayName=Q9;var t7="DismissableLayerBranch",n7=k.forwardRef((n,e)=>{const t=k.useContext(G5),i=k.useRef(null),a=oa(e,i);return k.useEffect(()=>{const r=i.current;if(r)return t.branches.add(r),()=>{t.branches.delete(r)}},[t.branches]),x.jsx(Di.div,{...n,ref:a})});n7.displayName=t7;function i7(n,e=globalThis?.document){const t=Ns(n),i=k.useRef(!1),a=k.useRef(()=>{});return k.useEffect(()=>{const r=c=>{if(c.target&&!i.current){let d=function(){W5($9,t,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=d,e.addEventListener("click",a.current,{once:!0})):d()}else e.removeEventListener("click",a.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",r),e.removeEventListener("click",a.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function a7(n,e=globalThis?.document){const t=Ns(n),i=k.useRef(!1);return k.useEffect(()=>{const a=r=>{r.target&&!i.current&&W5(e7,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function w3(){const n=new CustomEvent(B2);document.dispatchEvent(n)}function W5(n,e,t,{discrete:i}){const a=t.originalEvent.target,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&a.addEventListener(n,e,{once:!0}),i?KV(a,r):a.dispatchEvent(r)}var RS="focusScope.autoFocusOnMount",DS="focusScope.autoFocusOnUnmount",M3={bubbles:!1,cancelable:!0},r7="FocusScope",X5=k.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:r,...o}=n,[c,d]=k.useState(null),f=Ns(a),m=Ns(r),g=k.useRef(null),y=oa(e,A=>d(A)),_=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(i){let A=function(D){if(_.paused||!c)return;const U=D.target;c.contains(U)?g.current=U:ed(g.current,{select:!0})},T=function(D){if(_.paused||!c)return;const U=D.relatedTarget;U!==null&&(c.contains(U)||ed(g.current,{select:!0}))},w=function(D){if(document.activeElement===document.body)for(const O of D)O.removedNodes.length>0&&ed(c)};document.addEventListener("focusin",A),document.addEventListener("focusout",T);const N=new MutationObserver(w);return c&&N.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",T),N.disconnect()}}},[i,c,_.paused]),k.useEffect(()=>{if(c){T3.add(_);const A=document.activeElement;if(!c.contains(A)){const w=new CustomEvent(RS,M3);c.addEventListener(RS,f),c.dispatchEvent(w),w.defaultPrevented||(s7(d7(Y5(c)),{select:!0}),document.activeElement===A&&ed(c))}return()=>{c.removeEventListener(RS,f),setTimeout(()=>{const w=new CustomEvent(DS,M3);c.addEventListener(DS,m),c.dispatchEvent(w),w.defaultPrevented||ed(A??document.body,{select:!0}),c.removeEventListener(DS,m),T3.remove(_)},0)}}},[c,f,m,_]);const S=k.useCallback(A=>{if(!t&&!i||_.paused)return;const T=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,w=document.activeElement;if(T&&w){const N=A.currentTarget,[D,U]=o7(N);D&&U?!A.shiftKey&&w===U?(A.preventDefault(),t&&ed(D,{select:!0})):A.shiftKey&&w===D&&(A.preventDefault(),t&&ed(U,{select:!0})):w===N&&A.preventDefault()}},[t,i,_.paused]);return x.jsx(Di.div,{tabIndex:-1,...o,ref:y,onKeyDown:S})});X5.displayName=r7;function s7(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(ed(i,{select:e}),document.activeElement!==t)return}function o7(n){const e=Y5(n),t=E3(e,n),i=E3(e.reverse(),n);return[t,i]}function Y5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function E3(n,e){for(const t of n)if(!l7(t,{upTo:e}))return t}function l7(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function c7(n){return n instanceof HTMLInputElement&&"select"in n}function ed(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&c7(n)&&e&&n.select()}}var T3=u7();function u7(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=A3(n,e),n.unshift(e)},remove(e){n=A3(n,e),n[0]?.resume()}}}function A3(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function d7(n){return n.filter(e=>e.tagName!=="A")}var f7="Portal",lM=k.forwardRef((n,e)=>{const{container:t,...i}=n,[a,r]=k.useState(!1);sc(()=>r(!0),[]);const o=t||a&&globalThis?.document?.body;return o?bC.createPortal(x.jsx(Di.div,{...i,ref:e}),o):null});lM.displayName=f7;var US=0;function h7(){k.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??C3()),document.body.insertAdjacentElement("beforeend",n[1]??C3()),US++,()=>{US===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),US--}},[])}function C3(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Zl=function(){return Zl=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Zl.apply(this,arguments)};function q5(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function p7(n,e,t){if(t||arguments.length===2)for(var i=0,a=e.length,r;i<a;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}var py="right-scroll-bar-position",my="width-before-scroll-bar",m7="with-scroll-bars-hidden",g7="--removed-body-scroll-bar-size";function OS(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function v7(n,e){var t=k.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var a=t.value;a!==i&&(t.value=i,t.callback(i,a))}}}})[0];return t.callback=e,t.facade}var x7=typeof window<"u"?k.useLayoutEffect:k.useEffect,N3=new WeakMap;function y7(n,e){var t=v7(null,function(i){return n.forEach(function(a){return OS(a,i)})});return x7(function(){var i=N3.get(t);if(i){var a=new Set(i),r=new Set(n),o=t.current;a.forEach(function(c){r.has(c)||OS(c,null)}),r.forEach(function(c){a.has(c)||OS(c,o)})}N3.set(t,n)},[n]),t}function b7(n){return n}function _7(n,e){e===void 0&&(e=b7);var t=[],i=!1,a={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(r){var o=e(r,i);return t.push(o),function(){t=t.filter(function(c){return c!==o})}},assignSyncMedium:function(r){for(i=!0;t.length;){var o=t;t=[],o.forEach(r)}t={push:function(c){return r(c)},filter:function(){return t}}},assignMedium:function(r){i=!0;var o=[];if(t.length){var c=t;t=[],c.forEach(r),o=t}var d=function(){var m=o;o=[],m.forEach(r)},f=function(){return Promise.resolve().then(d)};f(),t={push:function(m){o.push(m),f()},filter:function(m){return o=o.filter(m),t}}}};return a}function S7(n){n===void 0&&(n={});var e=_7(null);return e.options=Zl({async:!0,ssr:!1},n),e}var K5=function(n){var e=n.sideCar,t=q5(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return k.createElement(i,Zl({},t))};K5.isSideCarExport=!0;function w7(n,e){return n.useMedium(e),K5}var Z5=S7(),LS=function(){},b1=k.forwardRef(function(n,e){var t=k.useRef(null),i=k.useState({onScrollCapture:LS,onWheelCapture:LS,onTouchMoveCapture:LS}),a=i[0],r=i[1],o=n.forwardProps,c=n.children,d=n.className,f=n.removeScrollBar,m=n.enabled,g=n.shards,y=n.sideCar,_=n.noRelative,S=n.noIsolation,A=n.inert,T=n.allowPinchZoom,w=n.as,N=w===void 0?"div":w,D=n.gapMode,U=q5(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=y,B=y7([t,e]),z=Zl(Zl({},U),a);return k.createElement(k.Fragment,null,m&&k.createElement(O,{sideCar:Z5,removeScrollBar:f,shards:g,noRelative:_,noIsolation:S,inert:A,setCallbacks:r,allowPinchZoom:!!T,lockRef:t,gapMode:D}),o?k.cloneElement(k.Children.only(c),Zl(Zl({},z),{ref:B})):k.createElement(N,Zl({},z,{className:d,ref:B}),c))});b1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};b1.classNames={fullWidth:my,zeroRight:py};var M7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function E7(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=M7();return e&&n.setAttribute("nonce",e),n}function T7(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function A7(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var C7=function(){var n=0,e=null;return{add:function(t){n==0&&(e=E7())&&(T7(e,t),A7(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},N7=function(){var n=C7();return function(e,t){k.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},J5=function(){var n=N7(),e=function(t){var i=t.styles,a=t.dynamic;return n(i,a),null};return e},R7={left:0,top:0,right:0,gap:0},zS=function(n){return parseInt(n||"",10)||0},D7=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],a=e[n==="padding"?"paddingRight":"marginRight"];return[zS(t),zS(i),zS(a)]},U7=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return R7;var e=D7(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},O7=J5(),Mp="data-scroll-locked",L7=function(n,e,t,i){var a=n.left,r=n.top,o=n.right,c=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(m7,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(c,"px ").concat(i,`;
  }
  body[`).concat(Mp,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(py,` {
    right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(my,` {
    margin-right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(py," .").concat(py,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(my," .").concat(my,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Mp,`] {
    `).concat(g7,": ").concat(c,`px;
  }
`)},R3=function(){var n=parseInt(document.body.getAttribute(Mp)||"0",10);return isFinite(n)?n:0},z7=function(){k.useEffect(function(){return document.body.setAttribute(Mp,(R3()+1).toString()),function(){var n=R3()-1;n<=0?document.body.removeAttribute(Mp):document.body.setAttribute(Mp,n.toString())}},[])},P7=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,a=i===void 0?"margin":i;z7();var r=k.useMemo(function(){return U7(a)},[a]);return k.createElement(O7,{styles:L7(r,!e,a,t?"":"!important")})},k2=!1;if(typeof window<"u")try{var ty=Object.defineProperty({},"passive",{get:function(){return k2=!0,!0}});window.addEventListener("test",ty,ty),window.removeEventListener("test",ty,ty)}catch{k2=!1}var hp=k2?{passive:!1}:!1,I7=function(n){return n.tagName==="TEXTAREA"},Q5=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!I7(n)&&t[e]==="visible")},B7=function(n){return Q5(n,"overflowY")},k7=function(n){return Q5(n,"overflowX")},D3=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var a=$5(n,i);if(a){var r=eD(n,i),o=r[1],c=r[2];if(o>c)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},F7=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},j7=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},$5=function(n,e){return n==="v"?B7(e):k7(e)},eD=function(n,e){return n==="v"?F7(e):j7(e)},H7=function(n,e){return n==="h"&&e==="rtl"?-1:1},V7=function(n,e,t,i,a){var r=H7(n,window.getComputedStyle(e).direction),o=r*i,c=t.target,d=e.contains(c),f=!1,m=o>0,g=0,y=0;do{if(!c)break;var _=eD(n,c),S=_[0],A=_[1],T=_[2],w=A-T-r*S;(S||w)&&$5(n,c)&&(g+=w,y+=S);var N=c.parentNode;c=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(m&&Math.abs(g)<1||!m&&Math.abs(y)<1)&&(f=!0),f},ny=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},U3=function(n){return[n.deltaX,n.deltaY]},O3=function(n){return n&&"current"in n?n.current:n},G7=function(n,e){return n[0]===e[0]&&n[1]===e[1]},W7=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},X7=0,pp=[];function Y7(n){var e=k.useRef([]),t=k.useRef([0,0]),i=k.useRef(),a=k.useState(X7++)[0],r=k.useState(J5)[0],o=k.useRef(n);k.useEffect(function(){o.current=n},[n]),k.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(a));var A=p7([n.lockRef.current],(n.shards||[]).map(O3),!0).filter(Boolean);return A.forEach(function(T){return T.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),A.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(a))})}}},[n.inert,n.lockRef.current,n.shards]);var c=k.useCallback(function(A,T){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!o.current.allowPinchZoom;var w=ny(A),N=t.current,D="deltaX"in A?A.deltaX:N[0]-w[0],U="deltaY"in A?A.deltaY:N[1]-w[1],O,B=A.target,z=Math.abs(D)>Math.abs(U)?"h":"v";if("touches"in A&&z==="h"&&B.type==="range")return!1;var F=window.getSelection(),L=F&&F.anchorNode,I=L?L===B||L.contains(B):!1;if(I)return!1;var Y=D3(z,B);if(!Y)return!0;if(Y?O=z:(O=z==="v"?"h":"v",Y=D3(z,B)),!Y)return!1;if(!i.current&&"changedTouches"in A&&(D||U)&&(i.current=O),!O)return!0;var q=i.current||O;return V7(q,T,A,q==="h"?D:U)},[]),d=k.useCallback(function(A){var T=A;if(!(!pp.length||pp[pp.length-1]!==r)){var w="deltaY"in T?U3(T):ny(T),N=e.current.filter(function(O){return O.name===T.type&&(O.target===T.target||T.target===O.shadowParent)&&G7(O.delta,w)})[0];if(N&&N.should){T.cancelable&&T.preventDefault();return}if(!N){var D=(o.current.shards||[]).map(O3).filter(Boolean).filter(function(O){return O.contains(T.target)}),U=D.length>0?c(T,D[0]):!o.current.noIsolation;U&&T.cancelable&&T.preventDefault()}}},[]),f=k.useCallback(function(A,T,w,N){var D={name:A,delta:T,target:w,should:N,shadowParent:q7(w)};e.current.push(D),setTimeout(function(){e.current=e.current.filter(function(U){return U!==D})},1)},[]),m=k.useCallback(function(A){t.current=ny(A),i.current=void 0},[]),g=k.useCallback(function(A){f(A.type,U3(A),A.target,c(A,n.lockRef.current))},[]),y=k.useCallback(function(A){f(A.type,ny(A),A.target,c(A,n.lockRef.current))},[]);k.useEffect(function(){return pp.push(r),n.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",d,hp),document.addEventListener("touchmove",d,hp),document.addEventListener("touchstart",m,hp),function(){pp=pp.filter(function(A){return A!==r}),document.removeEventListener("wheel",d,hp),document.removeEventListener("touchmove",d,hp),document.removeEventListener("touchstart",m,hp)}},[]);var _=n.removeScrollBar,S=n.inert;return k.createElement(k.Fragment,null,S?k.createElement(r,{styles:W7(a)}):null,_?k.createElement(P7,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function q7(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const K7=w7(Z5,Y7);var tD=k.forwardRef(function(n,e){return k.createElement(b1,Zl({},n,{ref:e,sideCar:K7}))});tD.classNames=b1.classNames;var Z7=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},mp=new WeakMap,iy=new WeakMap,ay={},PS=0,nD=function(n){return n&&(n.host||nD(n.parentNode))},J7=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=nD(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},Q7=function(n,e,t,i){var a=J7(e,Array.isArray(n)?n:[n]);ay[t]||(ay[t]=new WeakMap);var r=ay[t],o=[],c=new Set,d=new Set(a),f=function(g){!g||c.has(g)||(c.add(g),f(g.parentNode))};a.forEach(f);var m=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(y){if(c.has(y))m(y);else try{var _=y.getAttribute(i),S=_!==null&&_!=="false",A=(mp.get(y)||0)+1,T=(r.get(y)||0)+1;mp.set(y,A),r.set(y,T),o.push(y),A===1&&S&&iy.set(y,!0),T===1&&y.setAttribute(t,"true"),S||y.setAttribute(i,"true")}catch(w){console.error("aria-hidden: cannot operate on ",y,w)}})};return m(e),c.clear(),PS++,function(){o.forEach(function(g){var y=mp.get(g)-1,_=r.get(g)-1;mp.set(g,y),r.set(g,_),y||(iy.has(g)||g.removeAttribute(i),iy.delete(g)),_||g.removeAttribute(t)}),PS--,PS||(mp=new WeakMap,mp=new WeakMap,iy=new WeakMap,ay={})}},$7=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),a=Z7(n);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live], script"))),Q7(i,a,t,"aria-hidden")):function(){return null}};function eW(n){const e=tW(n),t=k.forwardRef((i,a)=>{const{children:r,...o}=i,c=k.Children.toArray(r),d=c.find(iW);if(d){const f=d.props.children,m=c.map(g=>g===d?k.Children.count(f)>1?k.Children.only(null):k.isValidElement(f)?f.props.children:null:g);return x.jsx(e,{...o,ref:a,children:k.isValidElement(f)?k.cloneElement(f,void 0,m):null})}return x.jsx(e,{...o,ref:a,children:r})});return t.displayName=`${n}.Slot`,t}function tW(n){const e=k.forwardRef((t,i)=>{const{children:a,...r}=t;if(k.isValidElement(a)){const o=rW(a),c=aW(r,a.props);return a.type!==k.Fragment&&(c.ref=i?j0(i,o):o),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var nW=Symbol("radix.slottable");function iW(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===nW}function aW(n,e){const t={...e};for(const i in e){const a=n[i],r=e[i];/^on[A-Z]/.test(i)?a&&r?t[i]=(...c)=>{const d=r(...c);return a(...c),d}:a&&(t[i]=a):i==="style"?t[i]={...a,...r}:i==="className"&&(t[i]=[a,r].filter(Boolean).join(" "))}return{...n,...t}}function rW(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var _1="Dialog",[iD,aD]=su(_1),[sW,ml]=iD(_1),rD=n=>{const{__scopeDialog:e,children:t,open:i,defaultOpen:a,onOpenChange:r,modal:o=!0}=n,c=k.useRef(null),d=k.useRef(null),[f,m]=H0({prop:i,defaultProp:a??!1,onChange:r,caller:_1});return x.jsx(sW,{scope:e,triggerRef:c,contentRef:d,contentId:Df(),titleId:Df(),descriptionId:Df(),open:f,onOpenChange:m,onOpenToggle:k.useCallback(()=>m(g=>!g),[m]),modal:o,children:t})};rD.displayName=_1;var sD="DialogTrigger",oD=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=ml(sD,t),r=oa(e,a.triggerRef);return x.jsx(Di.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":dM(a.open),...i,ref:r,onClick:ui(n.onClick,a.onOpenToggle)})});oD.displayName=sD;var cM="DialogPortal",[oW,lD]=iD(cM,{forceMount:void 0}),cD=n=>{const{__scopeDialog:e,forceMount:t,children:i,container:a}=n,r=ml(cM,e);return x.jsx(oW,{scope:e,forceMount:t,children:k.Children.map(i,o=>x.jsx(Oo,{present:t||r.open,children:x.jsx(lM,{asChild:!0,container:a,children:o})}))})};cD.displayName=cM;var bb="DialogOverlay",uD=k.forwardRef((n,e)=>{const t=lD(bb,n.__scopeDialog),{forceMount:i=t.forceMount,...a}=n,r=ml(bb,n.__scopeDialog);return r.modal?x.jsx(Oo,{present:i||r.open,children:x.jsx(cW,{...a,ref:e})}):null});uD.displayName=bb;var lW=eW("DialogOverlay.RemoveScroll"),cW=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=ml(bb,t);return x.jsx(tD,{as:lW,allowPinchZoom:!0,shards:[a.contentRef],children:x.jsx(Di.div,{"data-state":dM(a.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),Bf="DialogContent",dD=k.forwardRef((n,e)=>{const t=lD(Bf,n.__scopeDialog),{forceMount:i=t.forceMount,...a}=n,r=ml(Bf,n.__scopeDialog);return x.jsx(Oo,{present:i||r.open,children:r.modal?x.jsx(uW,{...a,ref:e}):x.jsx(dW,{...a,ref:e})})});dD.displayName=Bf;var uW=k.forwardRef((n,e)=>{const t=ml(Bf,n.__scopeDialog),i=k.useRef(null),a=oa(e,t.contentRef,i);return k.useEffect(()=>{const r=i.current;if(r)return $7(r)},[]),x.jsx(fD,{...n,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ui(n.onCloseAutoFocus,r=>{r.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:ui(n.onPointerDownOutside,r=>{const o=r.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&r.preventDefault()}),onFocusOutside:ui(n.onFocusOutside,r=>r.preventDefault())})}),dW=k.forwardRef((n,e)=>{const t=ml(Bf,n.__scopeDialog),i=k.useRef(!1),a=k.useRef(!1);return x.jsx(fD,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{n.onCloseAutoFocus?.(r),r.defaultPrevented||(i.current||t.triggerRef.current?.focus(),r.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:r=>{n.onInteractOutside?.(r),r.defaultPrevented||(i.current=!0,r.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=r.target;t.triggerRef.current?.contains(o)&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&a.current&&r.preventDefault()}})}),fD=k.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:r,...o}=n,c=ml(Bf,t),d=k.useRef(null),f=oa(e,d);return h7(),x.jsxs(x.Fragment,{children:[x.jsx(X5,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:a,onUnmountAutoFocus:r,children:x.jsx(oM,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":dM(c.open),...o,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),x.jsxs(x.Fragment,{children:[x.jsx(hW,{titleId:c.titleId}),x.jsx(mW,{contentRef:d,descriptionId:c.descriptionId})]})]})}),uM="DialogTitle",hD=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=ml(uM,t);return x.jsx(Di.h2,{id:a.titleId,...i,ref:e})});hD.displayName=uM;var pD="DialogDescription",mD=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=ml(pD,t);return x.jsx(Di.p,{id:a.descriptionId,...i,ref:e})});mD.displayName=pD;var gD="DialogClose",vD=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=ml(gD,t);return x.jsx(Di.button,{type:"button",...i,ref:e,onClick:ui(n.onClick,()=>a.onOpenChange(!1))})});vD.displayName=gD;function dM(n){return n?"open":"closed"}var xD="DialogTitleWarning",[fW,yD]=OV(xD,{contentName:Bf,titleName:uM,docsSlug:"dialog"}),hW=({titleId:n})=>{const e=yD(xD),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},pW="DialogDescriptionWarning",mW=({contentRef:n,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yD(pW).contentName}}.`;return k.useEffect(()=>{const a=n.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(i))},[i,n,e]),null},fM=rD,gW=oD,hM=cD,pM=uD,mM=dD,gM=hD,vM=mD,S1=vD;function gy({...n}){return x.jsx(fM,{"data-slot":"dialog",...n})}function vW({...n}){return x.jsx(hM,{"data-slot":"dialog-portal",...n})}function xW({className:n,...e}){return x.jsx(pM,{"data-slot":"dialog-overlay",className:en("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function vy({className:n,children:e,showCloseButton:t=!0,...i}){return x.jsxs(vW,{"data-slot":"dialog-portal",children:[x.jsx(xW,{}),x.jsxs(mM,{"data-slot":"dialog-content",className:en("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...i,children:[e,t&&x.jsxs(S1,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[x.jsx(g1,{}),x.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function F2({className:n,...e}){return x.jsx("div",{"data-slot":"dialog-header",className:en("flex flex-col gap-2 text-center sm:text-left",n),...e})}function j2({className:n,...e}){return x.jsx("div",{"data-slot":"dialog-footer",className:en("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...e})}function H2({className:n,...e}){return x.jsx(gM,{"data-slot":"dialog-title",className:en("text-lg leading-none font-semibold",n),...e})}function V2({className:n,...e}){return x.jsx(vM,{"data-slot":"dialog-description",className:en("text-muted-foreground text-sm",n),...e})}function Vg({className:n,...e}){return x.jsx("textarea",{"data-slot":"textarea",className:en("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}const IS=768;function yW(){const[n,e]=k.useState(void 0);return k.useEffect(()=>{const t=window.matchMedia(`(max-width: ${IS-1}px)`),i=()=>{e(window.innerWidth<IS)};return t.addEventListener("change",i),e(window.innerWidth<IS),()=>t.removeEventListener("change",i)},[]),!!n}var bW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_W=bW.reduce((n,e)=>{const t=Zw(`Primitive.${e}`),i=k.forwardRef((a,r)=>{const{asChild:o,...c}=a,d=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(d,{...c,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),SW="Separator",L3="horizontal",wW=["horizontal","vertical"],bD=k.forwardRef((n,e)=>{const{decorative:t,orientation:i=L3,...a}=n,r=MW(i)?i:L3,c=t?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return x.jsx(_W.div,{"data-orientation":r,...c,...a,ref:e})});bD.displayName=SW;function MW(n){return wW.includes(n)}var EW=bD;function TW({className:n,orientation:e="horizontal",decorative:t=!0,...i}){return x.jsx(EW,{"data-slot":"separator",decorative:t,orientation:e,className:en("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...i})}function AW({...n}){return x.jsx(fM,{"data-slot":"sheet",...n})}function CW({...n}){return x.jsx(hM,{"data-slot":"sheet-portal",...n})}function NW({className:n,...e}){return x.jsx(pM,{"data-slot":"sheet-overlay",className:en("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function RW({className:n,children:e,side:t="right",...i}){return x.jsxs(CW,{children:[x.jsx(NW,{}),x.jsxs(mM,{"data-slot":"sheet-content",className:en("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",t==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",t==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",t==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",t==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",n),...i,children:[e,x.jsxs(S1,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[x.jsx(g1,{className:"size-4"}),x.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function DW({className:n,...e}){return x.jsx("div",{"data-slot":"sheet-header",className:en("flex flex-col gap-1.5 p-4",n),...e})}function UW({className:n,...e}){return x.jsx(gM,{"data-slot":"sheet-title",className:en("text-foreground font-semibold",n),...e})}function OW({className:n,...e}){return x.jsx(vM,{"data-slot":"sheet-description",className:en("text-muted-foreground text-sm",n),...e})}const LW=["top","right","bottom","left"],fd=Math.min,Js=Math.max,_b=Math.round,ry=Math.floor,tc=n=>({x:n,y:n}),zW={left:"right",right:"left",bottom:"top",top:"bottom"},PW={start:"end",end:"start"};function G2(n,e,t){return Js(n,fd(e,t))}function tu(n,e){return typeof n=="function"?n(e):n}function nu(n){return n.split("-")[0]}function Jp(n){return n.split("-")[1]}function xM(n){return n==="x"?"y":"x"}function yM(n){return n==="y"?"height":"width"}const IW=new Set(["top","bottom"]);function $l(n){return IW.has(nu(n))?"y":"x"}function bM(n){return xM($l(n))}function BW(n,e,t){t===void 0&&(t=!1);const i=Jp(n),a=bM(n),r=yM(a);let o=a==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=Sb(o)),[o,Sb(o)]}function kW(n){const e=Sb(n);return[W2(n),e,W2(e)]}function W2(n){return n.replace(/start|end/g,e=>PW[e])}const z3=["left","right"],P3=["right","left"],FW=["top","bottom"],jW=["bottom","top"];function HW(n,e,t){switch(n){case"top":case"bottom":return t?e?P3:z3:e?z3:P3;case"left":case"right":return e?FW:jW;default:return[]}}function VW(n,e,t,i){const a=Jp(n);let r=HW(nu(n),t==="start",i);return a&&(r=r.map(o=>o+"-"+a),e&&(r=r.concat(r.map(W2)))),r}function Sb(n){return n.replace(/left|right|bottom|top/g,e=>zW[e])}function GW(n){return{top:0,right:0,bottom:0,left:0,...n}}function _D(n){return typeof n!="number"?GW(n):{top:n,right:n,bottom:n,left:n}}function wb(n){const{x:e,y:t,width:i,height:a}=n;return{width:i,height:a,top:t,left:e,right:e+i,bottom:t+a,x:e,y:t}}function I3(n,e,t){let{reference:i,floating:a}=n;const r=$l(e),o=bM(e),c=yM(o),d=nu(e),f=r==="y",m=i.x+i.width/2-a.width/2,g=i.y+i.height/2-a.height/2,y=i[c]/2-a[c]/2;let _;switch(d){case"top":_={x:m,y:i.y-a.height};break;case"bottom":_={x:m,y:i.y+i.height};break;case"right":_={x:i.x+i.width,y:g};break;case"left":_={x:i.x-a.width,y:g};break;default:_={x:i.x,y:i.y}}switch(Jp(e)){case"start":_[o]-=y*(t&&f?-1:1);break;case"end":_[o]+=y*(t&&f?-1:1);break}return _}const WW=async(n,e,t)=>{const{placement:i="bottom",strategy:a="absolute",middleware:r=[],platform:o}=t,c=r.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:n,floating:e,strategy:a}),{x:m,y:g}=I3(f,i,d),y=i,_={},S=0;for(let A=0;A<c.length;A++){const{name:T,fn:w}=c[A],{x:N,y:D,data:U,reset:O}=await w({x:m,y:g,initialPlacement:i,placement:y,strategy:a,middlewareData:_,rects:f,platform:o,elements:{reference:n,floating:e}});m=N??m,g=D??g,_={..._,[T]:{..._[T],...U}},O&&S<=50&&(S++,typeof O=="object"&&(O.placement&&(y=O.placement),O.rects&&(f=O.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:a}):O.rects),{x:m,y:g}=I3(f,y,d)),A=-1)}return{x:m,y:g,placement:y,strategy:a,middlewareData:_}};async function C0(n,e){var t;e===void 0&&(e={});const{x:i,y:a,platform:r,rects:o,elements:c,strategy:d}=n,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:y=!1,padding:_=0}=tu(e,n),S=_D(_),T=c[y?g==="floating"?"reference":"floating":g],w=wb(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(T)))==null||t?T:T.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:f,rootBoundary:m,strategy:d})),N=g==="floating"?{x:i,y:a,width:o.floating.width,height:o.floating.height}:o.reference,D=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),U=await(r.isElement==null?void 0:r.isElement(D))?await(r.getScale==null?void 0:r.getScale(D))||{x:1,y:1}:{x:1,y:1},O=wb(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:N,offsetParent:D,strategy:d}):N);return{top:(w.top-O.top+S.top)/U.y,bottom:(O.bottom-w.bottom+S.bottom)/U.y,left:(w.left-O.left+S.left)/U.x,right:(O.right-w.right+S.right)/U.x}}const XW=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:a,rects:r,platform:o,elements:c,middlewareData:d}=e,{element:f,padding:m=0}=tu(n,e)||{};if(f==null)return{};const g=_D(m),y={x:t,y:i},_=bM(a),S=yM(_),A=await o.getDimensions(f),T=_==="y",w=T?"top":"left",N=T?"bottom":"right",D=T?"clientHeight":"clientWidth",U=r.reference[S]+r.reference[_]-y[_]-r.floating[S],O=y[_]-r.reference[_],B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let z=B?B[D]:0;(!z||!await(o.isElement==null?void 0:o.isElement(B)))&&(z=c.floating[D]||r.floating[S]);const F=U/2-O/2,L=z/2-A[S]/2-1,I=fd(g[w],L),Y=fd(g[N],L),q=I,K=z-A[S]-Y,$=z/2-A[S]/2+F,ce=G2(q,$,K),G=!d.arrow&&Jp(a)!=null&&$!==ce&&r.reference[S]/2-($<q?I:Y)-A[S]/2<0,W=G?$<q?$-q:$-K:0;return{[_]:y[_]+W,data:{[_]:ce,centerOffset:$-ce-W,...G&&{alignmentOffset:W}},reset:G}}}),YW=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:a,middlewareData:r,rects:o,initialPlacement:c,platform:d,elements:f}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:A=!0,...T}=tu(n,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const w=nu(a),N=$l(c),D=nu(c)===c,U=await(d.isRTL==null?void 0:d.isRTL(f.floating)),O=y||(D||!A?[Sb(c)]:kW(c)),B=S!=="none";!y&&B&&O.push(...VW(c,A,S,U));const z=[c,...O],F=await C0(e,T),L=[];let I=((i=r.flip)==null?void 0:i.overflows)||[];if(m&&L.push(F[w]),g){const $=BW(a,o,U);L.push(F[$[0]],F[$[1]])}if(I=[...I,{placement:a,overflows:L}],!L.every($=>$<=0)){var Y,q;const $=(((Y=r.flip)==null?void 0:Y.index)||0)+1,ce=z[$];if(ce&&(!(g==="alignment"?N!==$l(ce):!1)||I.every(Q=>$l(Q.placement)===N?Q.overflows[0]>0:!0)))return{data:{index:$,overflows:I},reset:{placement:ce}};let G=(q=I.filter(W=>W.overflows[0]<=0).sort((W,Q)=>W.overflows[1]-Q.overflows[1])[0])==null?void 0:q.placement;if(!G)switch(_){case"bestFit":{var K;const W=(K=I.filter(Q=>{if(B){const ue=$l(Q.placement);return ue===N||ue==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(ue=>ue>0).reduce((ue,de)=>ue+de,0)]).sort((Q,ue)=>Q[1]-ue[1])[0])==null?void 0:K[0];W&&(G=W);break}case"initialPlacement":G=c;break}if(a!==G)return{reset:{placement:G}}}return{}}}};function B3(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function k3(n){return LW.some(e=>n[e]>=0)}const qW=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...a}=tu(n,e);switch(i){case"referenceHidden":{const r=await C0(e,{...a,elementContext:"reference"}),o=B3(r,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:k3(o)}}}case"escaped":{const r=await C0(e,{...a,altBoundary:!0}),o=B3(r,t.floating);return{data:{escapedOffsets:o,escaped:k3(o)}}}default:return{}}}}},SD=new Set(["left","top"]);async function KW(n,e){const{placement:t,platform:i,elements:a}=n,r=await(i.isRTL==null?void 0:i.isRTL(a.floating)),o=nu(t),c=Jp(t),d=$l(t)==="y",f=SD.has(o)?-1:1,m=r&&d?-1:1,g=tu(e,n);let{mainAxis:y,crossAxis:_,alignmentAxis:S}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof S=="number"&&(_=c==="end"?S*-1:S),d?{x:_*m,y:y*f}:{x:y*f,y:_*m}}const ZW=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:a,y:r,placement:o,middlewareData:c}=e,d=await KW(e,n);return o===((t=c.offset)==null?void 0:t.placement)&&(i=c.arrow)!=null&&i.alignmentOffset?{}:{x:a+d.x,y:r+d.y,data:{...d,placement:o}}}}},JW=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:a}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:c={fn:T=>{let{x:w,y:N}=T;return{x:w,y:N}}},...d}=tu(n,e),f={x:t,y:i},m=await C0(e,d),g=$l(nu(a)),y=xM(g);let _=f[y],S=f[g];if(r){const T=y==="y"?"top":"left",w=y==="y"?"bottom":"right",N=_+m[T],D=_-m[w];_=G2(N,_,D)}if(o){const T=g==="y"?"top":"left",w=g==="y"?"bottom":"right",N=S+m[T],D=S-m[w];S=G2(N,S,D)}const A=c.fn({...e,[y]:_,[g]:S});return{...A,data:{x:A.x-t,y:A.y-i,enabled:{[y]:r,[g]:o}}}}}},QW=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:a,rects:r,middlewareData:o}=e,{offset:c=0,mainAxis:d=!0,crossAxis:f=!0}=tu(n,e),m={x:t,y:i},g=$l(a),y=xM(g);let _=m[y],S=m[g];const A=tu(c,e),T=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(d){const D=y==="y"?"height":"width",U=r.reference[y]-r.floating[D]+T.mainAxis,O=r.reference[y]+r.reference[D]-T.mainAxis;_<U?_=U:_>O&&(_=O)}if(f){var w,N;const D=y==="y"?"width":"height",U=SD.has(nu(a)),O=r.reference[g]-r.floating[D]+(U&&((w=o.offset)==null?void 0:w[g])||0)+(U?0:T.crossAxis),B=r.reference[g]+r.reference[D]+(U?0:((N=o.offset)==null?void 0:N[g])||0)-(U?T.crossAxis:0);S<O?S=O:S>B&&(S=B)}return{[y]:_,[g]:S}}}},$W=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:a,rects:r,platform:o,elements:c}=e,{apply:d=()=>{},...f}=tu(n,e),m=await C0(e,f),g=nu(a),y=Jp(a),_=$l(a)==="y",{width:S,height:A}=r.floating;let T,w;g==="top"||g==="bottom"?(T=g,w=y===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(w=g,T=y==="end"?"top":"bottom");const N=A-m.top-m.bottom,D=S-m.left-m.right,U=fd(A-m[T],N),O=fd(S-m[w],D),B=!e.middlewareData.shift;let z=U,F=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(F=D),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(z=N),B&&!y){const I=Js(m.left,0),Y=Js(m.right,0),q=Js(m.top,0),K=Js(m.bottom,0);_?F=S-2*(I!==0||Y!==0?I+Y:Js(m.left,m.right)):z=A-2*(q!==0||K!==0?q+K:Js(m.top,m.bottom))}await d({...e,availableWidth:F,availableHeight:z});const L=await o.getDimensions(c.floating);return S!==L.width||A!==L.height?{reset:{rects:!0}}:{}}}};function w1(){return typeof window<"u"}function Qp(n){return wD(n)?(n.nodeName||"").toLowerCase():"#document"}function no(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function dc(n){var e;return(e=(wD(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function wD(n){return w1()?n instanceof Node||n instanceof no(n).Node:!1}function fl(n){return w1()?n instanceof Element||n instanceof no(n).Element:!1}function oc(n){return w1()?n instanceof HTMLElement||n instanceof no(n).HTMLElement:!1}function F3(n){return!w1()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof no(n).ShadowRoot}const eX=new Set(["inline","contents"]);function G0(n){const{overflow:e,overflowX:t,overflowY:i,display:a}=hl(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!eX.has(a)}const tX=new Set(["table","td","th"]);function nX(n){return tX.has(Qp(n))}const iX=[":popover-open",":modal"];function M1(n){return iX.some(e=>{try{return n.matches(e)}catch{return!1}})}const aX=["transform","translate","scale","rotate","perspective"],rX=["transform","translate","scale","rotate","perspective","filter"],sX=["paint","layout","strict","content"];function _M(n){const e=SM(),t=fl(n)?hl(n):n;return aX.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||rX.some(i=>(t.willChange||"").includes(i))||sX.some(i=>(t.contain||"").includes(i))}function oX(n){let e=hd(n);for(;oc(e)&&!kp(e);){if(_M(e))return e;if(M1(e))return null;e=hd(e)}return null}function SM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lX=new Set(["html","body","#document"]);function kp(n){return lX.has(Qp(n))}function hl(n){return no(n).getComputedStyle(n)}function E1(n){return fl(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function hd(n){if(Qp(n)==="html")return n;const e=n.assignedSlot||n.parentNode||F3(n)&&n.host||dc(n);return F3(e)?e.host:e}function MD(n){const e=hd(n);return kp(e)?n.ownerDocument?n.ownerDocument.body:n.body:oc(e)&&G0(e)?e:MD(e)}function N0(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const a=MD(n),r=a===((i=n.ownerDocument)==null?void 0:i.body),o=no(a);if(r){const c=X2(o);return e.concat(o,o.visualViewport||[],G0(a)?a:[],c&&t?N0(c):[])}return e.concat(a,N0(a,[],t))}function X2(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function ED(n){const e=hl(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const a=oc(n),r=a?n.offsetWidth:t,o=a?n.offsetHeight:i,c=_b(t)!==r||_b(i)!==o;return c&&(t=r,i=o),{width:t,height:i,$:c}}function wM(n){return fl(n)?n:n.contextElement}function Ep(n){const e=wM(n);if(!oc(e))return tc(1);const t=e.getBoundingClientRect(),{width:i,height:a,$:r}=ED(e);let o=(r?_b(t.width):t.width)/i,c=(r?_b(t.height):t.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const cX=tc(0);function TD(n){const e=no(n);return!SM()||!e.visualViewport?cX:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uX(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==no(n)?!1:e}function kf(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const a=n.getBoundingClientRect(),r=wM(n);let o=tc(1);e&&(i?fl(i)&&(o=Ep(i)):o=Ep(n));const c=uX(r,t,i)?TD(r):tc(0);let d=(a.left+c.x)/o.x,f=(a.top+c.y)/o.y,m=a.width/o.x,g=a.height/o.y;if(r){const y=no(r),_=i&&fl(i)?no(i):i;let S=y,A=X2(S);for(;A&&i&&_!==S;){const T=Ep(A),w=A.getBoundingClientRect(),N=hl(A),D=w.left+(A.clientLeft+parseFloat(N.paddingLeft))*T.x,U=w.top+(A.clientTop+parseFloat(N.paddingTop))*T.y;d*=T.x,f*=T.y,m*=T.x,g*=T.y,d+=D,f+=U,S=no(A),A=X2(S)}}return wb({width:m,height:g,x:d,y:f})}function T1(n,e){const t=E1(n).scrollLeft;return e?e.left+t:kf(dc(n)).left+t}function AD(n,e){const t=n.getBoundingClientRect(),i=t.left+e.scrollLeft-T1(n,t),a=t.top+e.scrollTop;return{x:i,y:a}}function dX(n){let{elements:e,rect:t,offsetParent:i,strategy:a}=n;const r=a==="fixed",o=dc(i),c=e?M1(e.floating):!1;if(i===o||c&&r)return t;let d={scrollLeft:0,scrollTop:0},f=tc(1);const m=tc(0),g=oc(i);if((g||!g&&!r)&&((Qp(i)!=="body"||G0(o))&&(d=E1(i)),oc(i))){const _=kf(i);f=Ep(i),m.x=_.x+i.clientLeft,m.y=_.y+i.clientTop}const y=o&&!g&&!r?AD(o,d):tc(0);return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-d.scrollLeft*f.x+m.x+y.x,y:t.y*f.y-d.scrollTop*f.y+m.y+y.y}}function fX(n){return Array.from(n.getClientRects())}function hX(n){const e=dc(n),t=E1(n),i=n.ownerDocument.body,a=Js(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=Js(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+T1(n);const c=-t.scrollTop;return hl(i).direction==="rtl"&&(o+=Js(e.clientWidth,i.clientWidth)-a),{width:a,height:r,x:o,y:c}}const j3=25;function pX(n,e){const t=no(n),i=dc(n),a=t.visualViewport;let r=i.clientWidth,o=i.clientHeight,c=0,d=0;if(a){r=a.width,o=a.height;const m=SM();(!m||m&&e==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}const f=T1(i);if(f<=0){const m=i.ownerDocument,g=m.body,y=getComputedStyle(g),_=m.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,S=Math.abs(i.clientWidth-g.clientWidth-_);S<=j3&&(r-=S)}else f<=j3&&(r+=f);return{width:r,height:o,x:c,y:d}}const mX=new Set(["absolute","fixed"]);function gX(n,e){const t=kf(n,!0,e==="fixed"),i=t.top+n.clientTop,a=t.left+n.clientLeft,r=oc(n)?Ep(n):tc(1),o=n.clientWidth*r.x,c=n.clientHeight*r.y,d=a*r.x,f=i*r.y;return{width:o,height:c,x:d,y:f}}function H3(n,e,t){let i;if(e==="viewport")i=pX(n,t);else if(e==="document")i=hX(dc(n));else if(fl(e))i=gX(e,t);else{const a=TD(n);i={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return wb(i)}function CD(n,e){const t=hd(n);return t===e||!fl(t)||kp(t)?!1:hl(t).position==="fixed"||CD(t,e)}function vX(n,e){const t=e.get(n);if(t)return t;let i=N0(n,[],!1).filter(c=>fl(c)&&Qp(c)!=="body"),a=null;const r=hl(n).position==="fixed";let o=r?hd(n):n;for(;fl(o)&&!kp(o);){const c=hl(o),d=_M(o);!d&&c.position==="fixed"&&(a=null),(r?!d&&!a:!d&&c.position==="static"&&!!a&&mX.has(a.position)||G0(o)&&!d&&CD(n,o))?i=i.filter(m=>m!==o):a=c,o=hd(o)}return e.set(n,i),i}function xX(n){let{element:e,boundary:t,rootBoundary:i,strategy:a}=n;const o=[...t==="clippingAncestors"?M1(e)?[]:vX(e,this._c):[].concat(t),i],c=o[0],d=o.reduce((f,m)=>{const g=H3(e,m,a);return f.top=Js(g.top,f.top),f.right=fd(g.right,f.right),f.bottom=fd(g.bottom,f.bottom),f.left=Js(g.left,f.left),f},H3(e,c,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function yX(n){const{width:e,height:t}=ED(n);return{width:e,height:t}}function bX(n,e,t){const i=oc(e),a=dc(e),r=t==="fixed",o=kf(n,!0,r,e);let c={scrollLeft:0,scrollTop:0};const d=tc(0);function f(){d.x=T1(a)}if(i||!i&&!r)if((Qp(e)!=="body"||G0(a))&&(c=E1(e)),i){const _=kf(e,!0,r,e);d.x=_.x+e.clientLeft,d.y=_.y+e.clientTop}else a&&f();r&&!i&&a&&f();const m=a&&!i&&!r?AD(a,c):tc(0),g=o.left+c.scrollLeft-d.x-m.x,y=o.top+c.scrollTop-d.y-m.y;return{x:g,y,width:o.width,height:o.height}}function BS(n){return hl(n).position==="static"}function V3(n,e){if(!oc(n)||hl(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return dc(n)===t&&(t=t.ownerDocument.body),t}function ND(n,e){const t=no(n);if(M1(n))return t;if(!oc(n)){let a=hd(n);for(;a&&!kp(a);){if(fl(a)&&!BS(a))return a;a=hd(a)}return t}let i=V3(n,e);for(;i&&nX(i)&&BS(i);)i=V3(i,e);return i&&kp(i)&&BS(i)&&!_M(i)?t:i||oX(n)||t}const _X=async function(n){const e=this.getOffsetParent||ND,t=this.getDimensions,i=await t(n.floating);return{reference:bX(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function SX(n){return hl(n).direction==="rtl"}const wX={convertOffsetParentRelativeRectToViewportRelativeRect:dX,getDocumentElement:dc,getClippingRect:xX,getOffsetParent:ND,getElementRects:_X,getClientRects:fX,getDimensions:yX,getScale:Ep,isElement:fl,isRTL:SX};function RD(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function MX(n,e){let t=null,i;const a=dc(n);function r(){var c;clearTimeout(i),(c=t)==null||c.disconnect(),t=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),r();const f=n.getBoundingClientRect(),{left:m,top:g,width:y,height:_}=f;if(c||e(),!y||!_)return;const S=ry(g),A=ry(a.clientWidth-(m+y)),T=ry(a.clientHeight-(g+_)),w=ry(m),D={rootMargin:-S+"px "+-A+"px "+-T+"px "+-w+"px",threshold:Js(0,fd(1,d))||1};let U=!0;function O(B){const z=B[0].intersectionRatio;if(z!==d){if(!U)return o();z?o(!1,z):i=setTimeout(()=>{o(!1,1e-7)},1e3)}z===1&&!RD(f,n.getBoundingClientRect())&&o(),U=!1}try{t=new IntersectionObserver(O,{...D,root:a.ownerDocument})}catch{t=new IntersectionObserver(O,D)}t.observe(n)}return o(!0),r}function EX(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,f=wM(n),m=a||r?[...f?N0(f):[],...N0(e)]:[];m.forEach(w=>{a&&w.addEventListener("scroll",t,{passive:!0}),r&&w.addEventListener("resize",t)});const g=f&&c?MX(f,t):null;let y=-1,_=null;o&&(_=new ResizeObserver(w=>{let[N]=w;N&&N.target===f&&_&&(_.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var D;(D=_)==null||D.observe(e)})),t()}),f&&!d&&_.observe(f),_.observe(e));let S,A=d?kf(n):null;d&&T();function T(){const w=kf(n);A&&!RD(A,w)&&t(),A=w,S=requestAnimationFrame(T)}return t(),()=>{var w;m.forEach(N=>{a&&N.removeEventListener("scroll",t),r&&N.removeEventListener("resize",t)}),g?.(),(w=_)==null||w.disconnect(),_=null,d&&cancelAnimationFrame(S)}}const TX=ZW,AX=JW,CX=YW,NX=$W,RX=qW,G3=XW,DX=QW,UX=(n,e,t)=>{const i=new Map,a={platform:wX,...t},r={...a.platform,_c:i};return WW(n,e,{...a,platform:r})};var OX=typeof document<"u",LX=function(){},xy=OX?k.useLayoutEffect:LX;function Mb(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,a;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!Mb(n[i],e[i]))return!1;return!0}if(a=Object.keys(n),t=a.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,a[i]))return!1;for(i=t;i--!==0;){const r=a[i];if(!(r==="_owner"&&n.$$typeof)&&!Mb(n[r],e[r]))return!1}return!0}return n!==n&&e!==e}function DD(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function W3(n,e){const t=DD(n);return Math.round(e*t)/t}function kS(n){const e=k.useRef(n);return xy(()=>{e.current=n}),e}function zX(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:a,elements:{reference:r,floating:o}={},transform:c=!0,whileElementsMounted:d,open:f}=n,[m,g]=k.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,_]=k.useState(i);Mb(y,i)||_(i);const[S,A]=k.useState(null),[T,w]=k.useState(null),N=k.useCallback(Q=>{Q!==B.current&&(B.current=Q,A(Q))},[]),D=k.useCallback(Q=>{Q!==z.current&&(z.current=Q,w(Q))},[]),U=r||S,O=o||T,B=k.useRef(null),z=k.useRef(null),F=k.useRef(m),L=d!=null,I=kS(d),Y=kS(a),q=kS(f),K=k.useCallback(()=>{if(!B.current||!z.current)return;const Q={placement:e,strategy:t,middleware:y};Y.current&&(Q.platform=Y.current),UX(B.current,z.current,Q).then(ue=>{const de={...ue,isPositioned:q.current!==!1};$.current&&!Mb(F.current,de)&&(F.current=de,Q2.flushSync(()=>{g(de)}))})},[y,e,t,Y,q]);xy(()=>{f===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,g(Q=>({...Q,isPositioned:!1})))},[f]);const $=k.useRef(!1);xy(()=>($.current=!0,()=>{$.current=!1}),[]),xy(()=>{if(U&&(B.current=U),O&&(z.current=O),U&&O){if(I.current)return I.current(U,O,K);K()}},[U,O,K,I,L]);const ce=k.useMemo(()=>({reference:B,floating:z,setReference:N,setFloating:D}),[N,D]),G=k.useMemo(()=>({reference:U,floating:O}),[U,O]),W=k.useMemo(()=>{const Q={position:t,left:0,top:0};if(!G.floating)return Q;const ue=W3(G.floating,m.x),de=W3(G.floating,m.y);return c?{...Q,transform:"translate("+ue+"px, "+de+"px)",...DD(G.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ue,top:de}},[t,c,G.floating,m.x,m.y]);return k.useMemo(()=>({...m,update:K,refs:ce,elements:G,floatingStyles:W}),[m,K,ce,G,W])}const PX=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:a}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?G3({element:i.current,padding:a}).fn(t):{}:i?G3({element:i,padding:a}).fn(t):{}}}},IX=(n,e)=>({...TX(n),options:[n,e]}),BX=(n,e)=>({...AX(n),options:[n,e]}),kX=(n,e)=>({...DX(n),options:[n,e]}),FX=(n,e)=>({...CX(n),options:[n,e]}),jX=(n,e)=>({...NX(n),options:[n,e]}),HX=(n,e)=>({...RX(n),options:[n,e]}),VX=(n,e)=>({...PX(n),options:[n,e]});var GX="Arrow",UD=k.forwardRef((n,e)=>{const{children:t,width:i=10,height:a=5,...r}=n;return x.jsx(Di.svg,{...r,ref:e,width:i,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});UD.displayName=GX;var WX=UD,MM="Popper",[OD,LD]=su(MM),[XX,zD]=OD(MM),PD=n=>{const{__scopePopper:e,children:t}=n,[i,a]=k.useState(null);return x.jsx(XX,{scope:e,anchor:i,onAnchorChange:a,children:t})};PD.displayName=MM;var ID="PopperAnchor",BD=k.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...a}=n,r=zD(ID,t),o=k.useRef(null),c=oa(e,o),d=k.useRef(null);return k.useEffect(()=>{const f=d.current;d.current=i?.current||o.current,f!==d.current&&r.onAnchorChange(d.current)}),i?null:x.jsx(Di.div,{...a,ref:c})});BD.displayName=ID;var EM="PopperContent",[YX,qX]=OD(EM),kD=k.forwardRef((n,e)=>{const{__scopePopper:t,side:i="bottom",sideOffset:a=0,align:r="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:g="partial",hideWhenDetached:y=!1,updatePositionStrategy:_="optimized",onPlaced:S,...A}=n,T=zD(EM,t),[w,N]=k.useState(null),D=oa(e,le=>N(le)),[U,O]=k.useState(null),B=BV(U),z=B?.width??0,F=B?.height??0,L=i+(r!=="center"?"-"+r:""),I=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},Y=Array.isArray(f)?f:[f],q=Y.length>0,K={padding:I,boundary:Y.filter(ZX),altBoundary:q},{refs:$,floatingStyles:ce,placement:G,isPositioned:W,middlewareData:Q}=zX({strategy:"fixed",placement:L,whileElementsMounted:(...le)=>EX(...le,{animationFrame:_==="always"}),elements:{reference:T.anchor},middleware:[IX({mainAxis:a+F,alignmentAxis:o}),d&&BX({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?kX():void 0,...K}),d&&FX({...K}),jX({...K,apply:({elements:le,rects:ve,availableWidth:ze,availableHeight:qe})=>{const{width:Ke,height:Pe}=ve.reference,gt=le.floating.style;gt.setProperty("--radix-popper-available-width",`${ze}px`),gt.setProperty("--radix-popper-available-height",`${qe}px`),gt.setProperty("--radix-popper-anchor-width",`${Ke}px`),gt.setProperty("--radix-popper-anchor-height",`${Pe}px`)}}),U&&VX({element:U,padding:c}),JX({arrowWidth:z,arrowHeight:F}),y&&HX({strategy:"referenceHidden",...K})]}),[ue,de]=HD(G),j=Ns(S);sc(()=>{W&&j?.()},[W,j]);const ee=Q.arrow?.x,ne=Q.arrow?.y,oe=Q.arrow?.centerOffset!==0,[re,se]=k.useState();return sc(()=>{w&&se(window.getComputedStyle(w).zIndex)},[w]),x.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...ce,transform:W?ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[Q.transformOrigin?.x,Q.transformOrigin?.y].join(" "),...Q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:x.jsx(YX,{scope:t,placedSide:ue,onArrowChange:O,arrowX:ee,arrowY:ne,shouldHideArrow:oe,children:x.jsx(Di.div,{"data-side":ue,"data-align":de,...A,ref:D,style:{...A.style,animation:W?void 0:"none"}})})})});kD.displayName=EM;var FD="PopperArrow",KX={top:"bottom",right:"left",bottom:"top",left:"right"},jD=k.forwardRef(function(e,t){const{__scopePopper:i,...a}=e,r=qX(FD,i),o=KX[r.placedSide];return x.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:x.jsx(WX,{...a,ref:t,style:{...a.style,display:"block"}})})});jD.displayName=FD;function ZX(n){return n!==null}var JX=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:i,middlewareData:a}=e,o=a.arrow?.centerOffset!==0,c=o?0:n.arrowWidth,d=o?0:n.arrowHeight,[f,m]=HD(t),g={start:"0%",center:"50%",end:"100%"}[m],y=(a.arrow?.x??0)+c/2,_=(a.arrow?.y??0)+d/2;let S="",A="";return f==="bottom"?(S=o?g:`${y}px`,A=`${-d}px`):f==="top"?(S=o?g:`${y}px`,A=`${i.floating.height+d}px`):f==="right"?(S=`${-d}px`,A=o?g:`${_}px`):f==="left"&&(S=`${i.floating.width+d}px`,A=o?g:`${_}px`),{data:{x:S,y:A}}}});function HD(n){const[e,t="center"]=n.split("-");return[e,t]}var QX=PD,$X=BD,eY=kD,tY=jD,nY=Symbol("radix.slottable");function iY(n){const e=({children:t})=>x.jsx(x.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=nY,e}var aY=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),rY="VisuallyHidden",VD=k.forwardRef((n,e)=>x.jsx(Di.span,{...n,ref:e,style:{...aY,...n.style}}));VD.displayName=rY;var sY=VD,[A1]=su("Tooltip",[LD]),C1=LD(),GD="TooltipProvider",oY=700,Y2="tooltip.open",[lY,TM]=A1(GD),WD=n=>{const{__scopeTooltip:e,delayDuration:t=oY,skipDelayDuration:i=300,disableHoverableContent:a=!1,children:r}=n,o=k.useRef(!0),c=k.useRef(!1),d=k.useRef(0);return k.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),x.jsx(lY,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:k.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,i)},[i]),isPointerInTransitRef:c,onPointerInTransitChange:k.useCallback(f=>{c.current=f},[]),disableHoverableContent:a,children:r})};WD.displayName=GD;var R0="Tooltip",[cY,W0]=A1(R0),XD=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:a,onOpenChange:r,disableHoverableContent:o,delayDuration:c}=n,d=TM(R0,n.__scopeTooltip),f=C1(e),[m,g]=k.useState(null),y=Df(),_=k.useRef(0),S=o??d.disableHoverableContent,A=c??d.delayDuration,T=k.useRef(!1),[w,N]=H0({prop:i,defaultProp:a??!1,onChange:z=>{z?(d.onOpen(),document.dispatchEvent(new CustomEvent(Y2))):d.onClose(),r?.(z)},caller:R0}),D=k.useMemo(()=>w?T.current?"delayed-open":"instant-open":"closed",[w]),U=k.useCallback(()=>{window.clearTimeout(_.current),_.current=0,T.current=!1,N(!0)},[N]),O=k.useCallback(()=>{window.clearTimeout(_.current),_.current=0,N(!1)},[N]),B=k.useCallback(()=>{window.clearTimeout(_.current),_.current=window.setTimeout(()=>{T.current=!0,N(!0),_.current=0},A)},[A,N]);return k.useEffect(()=>()=>{_.current&&(window.clearTimeout(_.current),_.current=0)},[]),x.jsx(QX,{...f,children:x.jsx(cY,{scope:e,contentId:y,open:w,stateAttribute:D,trigger:m,onTriggerChange:g,onTriggerEnter:k.useCallback(()=>{d.isOpenDelayedRef.current?B():U()},[d.isOpenDelayedRef,B,U]),onTriggerLeave:k.useCallback(()=>{S?O():(window.clearTimeout(_.current),_.current=0)},[O,S]),onOpen:U,onClose:O,disableHoverableContent:S,children:t})})};XD.displayName=R0;var q2="TooltipTrigger",YD=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,a=W0(q2,t),r=TM(q2,t),o=C1(t),c=k.useRef(null),d=oa(e,c,a.onTriggerChange),f=k.useRef(!1),m=k.useRef(!1),g=k.useCallback(()=>f.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),x.jsx($X,{asChild:!0,...o,children:x.jsx(Di.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...i,ref:d,onPointerMove:ui(n.onPointerMove,y=>{y.pointerType!=="touch"&&!m.current&&!r.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:ui(n.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:ui(n.onPointerDown,()=>{a.open&&a.onClose(),f.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:ui(n.onFocus,()=>{f.current||a.onOpen()}),onBlur:ui(n.onBlur,a.onClose),onClick:ui(n.onClick,a.onClose)})})});YD.displayName=q2;var AM="TooltipPortal",[uY,dY]=A1(AM,{forceMount:void 0}),qD=n=>{const{__scopeTooltip:e,forceMount:t,children:i,container:a}=n,r=W0(AM,e);return x.jsx(uY,{scope:e,forceMount:t,children:x.jsx(Oo,{present:t||r.open,children:x.jsx(lM,{asChild:!0,container:a,children:i})})})};qD.displayName=AM;var Fp="TooltipContent",KD=k.forwardRef((n,e)=>{const t=dY(Fp,n.__scopeTooltip),{forceMount:i=t.forceMount,side:a="top",...r}=n,o=W0(Fp,n.__scopeTooltip);return x.jsx(Oo,{present:i||o.open,children:o.disableHoverableContent?x.jsx(ZD,{side:a,...r,ref:e}):x.jsx(fY,{side:a,...r,ref:e})})}),fY=k.forwardRef((n,e)=>{const t=W0(Fp,n.__scopeTooltip),i=TM(Fp,n.__scopeTooltip),a=k.useRef(null),r=oa(e,a),[o,c]=k.useState(null),{trigger:d,onClose:f}=t,m=a.current,{onPointerInTransitChange:g}=i,y=k.useCallback(()=>{c(null),g(!1)},[g]),_=k.useCallback((S,A)=>{const T=S.currentTarget,w={x:S.clientX,y:S.clientY},N=gY(w,T.getBoundingClientRect()),D=vY(w,N),U=xY(A.getBoundingClientRect()),O=bY([...D,...U]);c(O),g(!0)},[g]);return k.useEffect(()=>()=>y(),[y]),k.useEffect(()=>{if(d&&m){const S=T=>_(T,m),A=T=>_(T,d);return d.addEventListener("pointerleave",S),m.addEventListener("pointerleave",A),()=>{d.removeEventListener("pointerleave",S),m.removeEventListener("pointerleave",A)}}},[d,m,_,y]),k.useEffect(()=>{if(o){const S=A=>{const T=A.target,w={x:A.clientX,y:A.clientY},N=d?.contains(T)||m?.contains(T),D=!yY(w,o);N?y():D&&(y(),f())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[d,m,o,f,y]),x.jsx(ZD,{...n,ref:r})}),[hY,pY]=A1(R0,{isInside:!1}),mY=iY("TooltipContent"),ZD=k.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":a,onEscapeKeyDown:r,onPointerDownOutside:o,...c}=n,d=W0(Fp,t),f=C1(t),{onClose:m}=d;return k.useEffect(()=>(document.addEventListener(Y2,m),()=>document.removeEventListener(Y2,m)),[m]),k.useEffect(()=>{if(d.trigger){const g=y=>{y.target?.contains(d.trigger)&&m()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[d.trigger,m]),x.jsx(oM,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:g=>g.preventDefault(),onDismiss:m,children:x.jsxs(eY,{"data-state":d.stateAttribute,...f,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(mY,{children:i}),x.jsx(hY,{scope:t,isInside:!0,children:x.jsx(sY,{id:d.contentId,role:"tooltip",children:a||i})})]})})});KD.displayName=Fp;var JD="TooltipArrow",QD=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,a=C1(t);return pY(JD,t).isInside?null:x.jsx(tY,{...a,...i,ref:e})});QD.displayName=JD;function gY(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),a=Math.abs(e.right-n.x),r=Math.abs(e.left-n.x);switch(Math.min(t,i,a,r)){case r:return"left";case a:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function vY(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function xY(n){const{top:e,right:t,bottom:i,left:a}=n;return[{x:a,y:e},{x:t,y:e},{x:t,y:i},{x:a,y:i}]}function yY(n,e){const{x:t,y:i}=n;let a=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const c=e[r],d=e[o],f=c.x,m=c.y,g=d.x,y=d.y;m>i!=y>i&&t<(g-f)*(i-m)/(y-m)+f&&(a=!a)}return a}function bY(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),_Y(e)}function _Y(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const a=n[i];for(;e.length>=2;){const r=e[e.length-1],o=e[e.length-2];if((r.x-o.x)*(a.y-o.y)>=(r.y-o.y)*(a.x-o.x))e.pop();else break}e.push(a)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const a=n[i];for(;t.length>=2;){const r=t[t.length-1],o=t[t.length-2];if((r.x-o.x)*(a.y-o.y)>=(r.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var SY=WD,wY=XD,MY=YD,EY=qD,TY=KD,AY=QD;function CM({delayDuration:n=0,...e}){return x.jsx(SY,{"data-slot":"tooltip-provider",delayDuration:n,...e})}function $D({...n}){return x.jsx(CM,{children:x.jsx(wY,{"data-slot":"tooltip",...n})})}function e4({...n}){return x.jsx(MY,{"data-slot":"tooltip-trigger",...n})}function t4({className:n,sideOffset:e=0,children:t,...i}){return x.jsx(EY,{children:x.jsxs(TY,{"data-slot":"tooltip-content",sideOffset:e,className:en("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",n),...i,children:[t,x.jsx(AY,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const CY="sidebar_state",NY=3600*24*7,RY="16rem",DY="18rem",UY="3rem",OY="b",n4=k.createContext(null);function NM(){const n=k.useContext(n4);if(!n)throw new Error("useSidebar must be used within a SidebarProvider.");return n}function LY({defaultOpen:n=!0,open:e,onOpenChange:t,className:i,style:a,children:r,...o}){const c=yW(),[d,f]=k.useState(!1),[m,g]=k.useState(n),y=e??m,_=k.useCallback(w=>{const N=typeof w=="function"?w(y):w;t?t(N):g(N),document.cookie=`${CY}=${N}; path=/; max-age=${NY}`},[t,y]),S=k.useCallback(()=>c?f(w=>!w):_(w=>!w),[c,_,f]);k.useEffect(()=>{const w=N=>{N.key===OY&&(N.metaKey||N.ctrlKey)&&(N.preventDefault(),S())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[S]);const A=y?"expanded":"collapsed",T=k.useMemo(()=>({state:A,open:y,setOpen:_,isMobile:c,openMobile:d,setOpenMobile:f,toggleSidebar:S}),[A,y,_,c,d,f,S]);return x.jsx(n4.Provider,{value:T,children:x.jsx(CM,{delayDuration:0,children:x.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":RY,"--sidebar-width-icon":UY,...a},className:en("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",i),...o,children:r})})})}function zY({side:n="left",variant:e="sidebar",collapsible:t="offcanvas",className:i,children:a,...r}){const{isMobile:o,state:c,openMobile:d,setOpenMobile:f}=NM();return t==="none"?x.jsx("div",{"data-slot":"sidebar",className:en("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",i),...r,children:a}):o?x.jsx(AW,{open:d,onOpenChange:f,...r,children:x.jsxs(RW,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":DY},side:n,children:[x.jsxs(DW,{className:"sr-only",children:[x.jsx(UW,{children:"Sidebar"}),x.jsx(OW,{children:"Displays the mobile sidebar."})]}),x.jsx("div",{className:"flex h-full w-full flex-col",children:a})]})}):x.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":c,"data-collapsible":c==="collapsed"?t:"","data-variant":e,"data-side":n,"data-slot":"sidebar",children:[x.jsx("div",{"data-slot":"sidebar-gap",className:en("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),x.jsx("div",{"data-slot":"sidebar-container",className:en("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",n==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",i),...r,children:x.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:a})})]})}function PY({className:n,onClick:e,...t}){const{toggleSidebar:i}=NM();return x.jsxs(Nn,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:en("size-7",n),onClick:a=>{e?.(a),i()},...t,children:[x.jsx(DG,{}),x.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function IY({className:n,...e}){return x.jsx("main",{"data-slot":"sidebar-inset",className:en("bg-background relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",n),...e})}function BY({className:n,...e}){return x.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:en("flex flex-col gap-2 p-2",n),...e})}function kY({className:n,...e}){return x.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:en("flex flex-col gap-2 p-2",n),...e})}function X3({className:n,...e}){return x.jsx(TW,{"data-slot":"sidebar-separator","data-sidebar":"separator",className:en("bg-sidebar-border mx-2 w-auto",n),...e})}function FY({className:n,...e}){return x.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:en("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",n),...e})}function FS({className:n,...e}){return x.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:en("relative flex w-full min-w-0 flex-col p-2",n),...e})}function jS({className:n,asChild:e=!1,...t}){const i=e?m1:"div";return x.jsx(i,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:en("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",n),...t})}function HS({className:n,...e}){return x.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:en("w-full text-sm",n),...e})}function jY({className:n,...e}){return x.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:en("flex w-full min-w-0 flex-col gap-1",n),...e})}function VS({className:n,...e}){return x.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:en("group/menu-item relative",n),...e})}const HY=Jw("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function GS({asChild:n=!1,isActive:e=!1,variant:t="default",size:i="default",tooltip:a,className:r,...o}){const c=n?m1:"button",{isMobile:d,state:f}=NM(),m=x.jsx(c,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":i,"data-active":e,className:en(HY({variant:t,size:i}),r),...o});return a?(typeof a=="string"&&(a={children:a}),x.jsxs($D,{children:[x.jsx(e4,{asChild:!0,children:m}),x.jsx(t4,{side:"right",align:"center",hidden:f!=="collapsed"||d,...a})]})):m}const qc=[{code:"fr",name:"French",flag:""},{code:"es",name:"Spanish",flag:""},{code:"de",name:"German",flag:""},{code:"ja",name:"Japanese",flag:""},{code:"ko",name:"Korean",flag:""},{code:"zh-HK",name:"Chinese (HK)",flag:""},{code:"zh-Hans",name:"Chinese (Simplified)",flag:""},{code:"ar",name:"Arabic",flag:""},{code:"tr",name:"Turkish",flag:""},{code:"id",name:"Indonesian",flag:""},{code:"pt-BR",name:"Portuguese (BR)",flag:""},{code:"it",name:"Italian",flag:""},{code:"ru",name:"Russian",flag:""},{code:"nl",name:"Dutch",flag:""},{code:"pl",name:"Polish",flag:""},{code:"th",name:"Thai",flag:""},{code:"vi",name:"Vietnamese",flag:""},{code:"hi",name:"Hindi",flag:""},{code:"sv",name:"Swedish",flag:""},{code:"da",name:"Danish",flag:""}],Qs={openai:{name:"OpenAI",models:["gpt-5-mini","gpt-5-nano-2025-08-07"],defaultModel:"gpt-5-mini"},bedrock:{name:"AWS Bedrock",models:["arn:aws:bedrock:us-east-1:471112516430:inference-profile/global.anthropic.claude-haiku-4-5-20251001-v1:0","arn:aws:bedrock:us-east-1:471112516430:inference-profile/global.anthropic.claude-sonnet-4-5-20250929-v1:0","arn:aws:bedrock:us-east-1:471112516430:inference-profile/global.anthropic.claude-opus-4-5-20251101-v1:0"],defaultModel:"arn:aws:bedrock:us-east-1:471112516430:inference-profile/global.anthropic.claude-haiku-4-5-20251001-v1:0",needsRegion:!0}},VY={fr:"French",es:"Spanish",de:"German",ja:"Japanese",ko:"Korean","zh-HK":"Traditional Chinese (Hong Kong)","zh-Hans":"Simplified Chinese",ar:"Arabic",tr:"Turkish",id:"Indonesian","pt-BR":"Portuguese (Brazilian)",it:"Italian",ru:"Russian",nl:"Dutch",pl:"Polish",th:"Thai",vi:"Vietnamese",hi:"Hindi",sv:"Swedish",da:"Danish"},RM=10,DM=5,GY=50;function WY(n){const e=[],t=/(%[@dislf\d.$+\-#]*[dislf@]|%[0-9]+\$[@dislf]|%[1-9]\$[@dislf]|%\.[0-9]f)/g;let i;for(;(i=t.exec(n))!==null;)e.push(i[0]);return e}async function XY(n){return new Promise(e=>setTimeout(e,n))}function YY(n,e,t){const i=t.length>0?t.join(", "):null,a=e.map(d=>`${d} (${VY[d]||d})`).join(", ");let r=`You are a professional translator for a mobile app. Translate multiple English texts to multiple languages.

CRITICAL RULES:
1. Preserve ALL formatting specifiers (%@, %d, %lld, %s, etc.) EXACTLY as they appear
2. Format specifiers MUST remain in the same order in ALL translations
3. DO NOT translate or modify any format specifiers
4. Maintain a natural, user-friendly tone`;i&&(r+=`
5. DO NOT translate these words/names, keep them exactly as-is: ${i}`),r+=`
${i?"6":"5"}. Your output must be ONLY a JSON object with translations for each text ID.`;const o=n.map((d,f)=>{const m=WY(d.text);return`[${f}] "${d.text}"${m.length>0?` (preserve: ${m.join(", ")})`:""}`}).join(`
`);let c=`Translate these English texts to: ${a}

${o}

${i?`Protected words (keep as-is): ${i}

`:""}Respond with ONLY a JSON object:
{
  "0": { "fr": "...", "es": "..." },
  "1": { "fr": "...", "es": "..." }
}`;return{systemMessage:r,userMessage:c}}async function qY(n,e,t,i){const r=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({model:e,response_format:{type:"json_object"},messages:[{role:"system",content:t},{role:"user",content:i}]})})).json();if(r.error)throw new Error(r.error.message);return r.choices[0].message.content}async function i4(n,e,t,i,a){const r=`https://bedrock-runtime.${t}.amazonaws.com/model/${encodeURIComponent(e)}/converse`,c=await(await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({messages:[{role:"user",content:[{text:a}]}],system:[{text:i}],inferenceConfig:{temperature:.3,maxTokens:4096}})})).json();if(c.message)throw new Error(c.message);return c.output.message.content[0].text}async function KY(n,e,t,i=[]){const{provider:a,apiKey:r,model:o,region:c}=t,{systemMessage:d,userMessage:f}=YY(n,e,i);try{let m;switch(a){case"openai":m=await qY(r,o,d,f);break;case"bedrock":m=await i4(r,o,c,d,f);break;default:throw new Error(`Unknown provider: ${a}`)}let g=m.trim();g.startsWith("```json")?g=g.slice(7):g.startsWith("```")&&(g=g.slice(3)),g.endsWith("```")&&(g=g.slice(0,-3)),g=g.trim();const y=JSON.parse(g);return{results:n.map((S,A)=>({key:S.key,englishText:S.text,translations:y[String(A)]||y[A]||{},error:null,missingLangs:S.missingLangs})),error:null}}catch(m){return console.error("Batch translation error:",m.message||m),{results:n.map(g=>({key:g.key,englishText:g.text,translations:{},error:m.message||"Unknown error",missingLangs:g.missingLangs})),error:m.message}}}async function a4(n){const{provider:e,apiKey:t,model:i,region:a}=n,r="Say 'API connection successful' in exactly those words.";try{let o;switch(e){case"openai":o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:i,max_completion_tokens:20,messages:[{role:"user",content:r}]})});break;case"anthropic":o=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"x-api-key":t,"Content-Type":"application/json","anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:i,max_tokens:20,messages:[{role:"user",content:r}]})});break;case"gemini":o=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${i}:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:r}]}],generationConfig:{maxOutputTokens:20}})});break;case"bedrock":o=await fetch(`https://bedrock-runtime.${a}.amazonaws.com/model/${encodeURIComponent(i)}/converse`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({messages:[{role:"user",content:[{text:r}]}],inferenceConfig:{maxTokens:20}})});break;default:throw new Error(`Unknown provider: ${e}`)}const c=await o.json();if(c.error)throw new Error(c.error.message||JSON.stringify(c.error));if(c.message&&e==="bedrock")throw new Error(c.message);return{success:!0,message:"API connection successful!"}}catch(o){return{success:!1,message:o.message}}}async function ZY(n,e,t,i){const{provider:a,apiKey:r,model:o,region:c}=i,d="You are a helpful assistant. Follow the user's instructions precisely and respond with only the requested output.";try{let f;switch(a){case"openai":const y=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({model:o,messages:[{role:"system",content:d},{role:"user",content:n}]})})).json();if(y.error)throw new Error(y.error.message);f=y.choices[0].message.content;break;case"bedrock":f=await i4(r,o,c,d,n);break;default:throw new Error(`Unknown provider: ${a}`)}let m=f.trim();return m.startsWith("```")&&(m=m.replace(/^```\w*\n?/,"").replace(/```$/,"").trim()),m}catch(f){throw new Error(f.message||"Translation failed")}}async function r4(n,e,t,i=[],a,r=RM,o=DM){const c=JSON.parse(JSON.stringify(n)),d=c.strings||{},f=[];for(const[_,S]of Object.entries(d)){if(!S||typeof S!="object")continue;const A=S.localizations||{},T=A.en?.stringUnit?.value||_;if(!T||!T.trim())continue;const w=e.filter(N=>!A[N]);w.length>0&&f.push({key:_,englishText:T,missingLangs:w})}if(f.length===0)return a({current:0,total:0,currentText:"No translations needed",log:"All strings are already translated for selected languages",logType:"info"}),c;const m=f.length;let g=0;const y=[];for(let _=0;_<f.length;_+=o)y.push(f.slice(_,_+o).map(S=>({key:S.key,text:S.englishText,missingLangs:S.missingLangs})));a({current:0,total:m,currentText:"Starting translations...",log:`Translating ${m} strings in ${y.length} batches (${o} texts/batch, ${r} parallel)`,logType:"info"});for(let _=0;_<y.length;_+=r){const A=y.slice(_,_+r).map(N=>KY(N,e,t,i)),w=(await Promise.all(A)).flatMap(N=>N.results);for(const{key:N,englishText:D,translations:U,error:O,missingLangs:B}of w){g++;const z=D.length>40?D.substring(0,40)+"...":D;if(O){a({current:g,total:m,currentText:z,log:`Error translating "${z}": ${O}`,logType:"error"});continue}d[N].localizations||(d[N].localizations={}),d[N].localizations.en||(d[N].localizations.en={stringUnit:{state:"translated",value:D}});let F=0;for(const L of B){const I=U[L];I&&(d[N].localizations[L]={stringUnit:{state:"translated",value:I}},F++)}a({current:g,total:m,currentText:z,log:`Translated "${z}" to ${F} languages`,logType:F>0?"success":"error"})}_+o<f.length&&await XY(GY)}return c}const Y3=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_CONCURRENT_REQUESTS:RM,DEFAULT_TEXTS_PER_BATCH:DM,PROVIDERS:Qs,SUPPORTED_LANGUAGES:qc,testApiConnection:a4,translateStrings:r4,translateText:ZY},Symbol.toStringTag,{value:"Module"}));function JY(n){try{const e=JSON.parse(n);return e.sourceLanguage||(e.sourceLanguage="en"),e.strings||(e.strings={}),e.version||(e.version="1.0"),e}catch(e){throw new Error(`Failed to parse .xcstrings file: ${e.message}`)}}function QY(n){const e={sourceLanguage:n.sourceLanguage||"en",version:n.version||"1.0",strings:{}},t=Object.keys(n.strings||{}).sort();for(const i of t){const a=n.strings[i];if(e.strings[i]=a,a.localizations){const r={},o=Object.keys(a.localizations).sort();for(const c of o)r[c]=a.localizations[c];e.strings[i].localizations=r}}return JSON.stringify(e,null,2)}function WS(n,e=[]){const t=n.strings||{},i=Object.keys(t),a=new Set;for(const d of i){const f=t[d]?.localizations||{};for(const m of Object.keys(f))a.add(m)}const r=Array.from(a).sort(),o={},c={};for(const d of r){o[d]=0,c[d]=0;for(const f of i)t[f]?.localizations?.[d]?.stringUnit?.value?o[d]++:c[d]++}for(const d of e)r.includes(d)||(o[d]=0,c[d]=i.length);return{totalStrings:i.length,languages:r,translationCounts:o,missingCounts:c,sourceLanguage:n.sourceLanguage||"en"}}const s4=new TextEncoder,q3=new TextDecoder;function $Y(...n){const e=n.reduce((a,{length:r})=>a+r,0),t=new Uint8Array(e);let i=0;for(const a of n)t.set(a,i),i+=a.length;return t}function XS(n){const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);if(i>127)throw new TypeError("non-ASCII string encountered in encode()");e[t]=i}return e}function eq(n){if(Uint8Array.prototype.toBase64)return n.toBase64();const e=32768,t=[];for(let i=0;i<n.length;i+=e)t.push(String.fromCharCode.apply(null,n.subarray(i,i+e)));return btoa(t.join(""))}function o4(n){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(n);const e=atob(n),t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}function tq(n){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof n=="string"?n:q3.decode(n),{alphabet:"base64url"});let e=n;e instanceof Uint8Array&&(e=q3.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/");try{return o4(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function YS(n){let e=n;return typeof e=="string"&&(e=s4.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):eq(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class UM extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class Jc extends UM{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class Pg extends UM{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class nq extends UM{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}const ql=(n,e="algorithm.name")=>new TypeError(`CryptoKey does not support this operation, its ${e} must be ${n}`),gp=(n,e)=>n.name===e;function qS(n){return parseInt(n.name.slice(4),10)}function iq(n){switch(n){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function aq(n,e){if(!n.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function rq(n,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!gp(n.algorithm,"HMAC"))throw ql("HMAC");const i=parseInt(e.slice(2),10);if(qS(n.algorithm.hash)!==i)throw ql(`SHA-${i}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!gp(n.algorithm,"RSASSA-PKCS1-v1_5"))throw ql("RSASSA-PKCS1-v1_5");const i=parseInt(e.slice(2),10);if(qS(n.algorithm.hash)!==i)throw ql(`SHA-${i}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!gp(n.algorithm,"RSA-PSS"))throw ql("RSA-PSS");const i=parseInt(e.slice(2),10);if(qS(n.algorithm.hash)!==i)throw ql(`SHA-${i}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!gp(n.algorithm,"Ed25519"))throw ql("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!gp(n.algorithm,e))throw ql(e);break}case"ES256":case"ES384":case"ES512":{if(!gp(n.algorithm,"ECDSA"))throw ql("ECDSA");const i=iq(e);if(n.algorithm.namedCurve!==i)throw ql(i,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}aq(n,t)}function l4(n,e,...t){if(t=t.filter(Boolean),t.length>2){const i=t.pop();n+=`one of type ${t.join(", ")}, or ${i}.`}else t.length===2?n+=`one of type ${t[0]} or ${t[1]}.`:n+=`of type ${t[0]}.`;return e==null?n+=` Received ${e}`:typeof e=="function"&&e.name?n+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor?.name&&(n+=` Received an instance of ${e.constructor.name}`),n}const sq=(n,...e)=>l4("Key must be ",n,...e),c4=(n,e,...t)=>l4(`Key for the ${n} algorithm must be `,e,...t),u4=n=>{if(n?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return n instanceof CryptoKey}catch{return!1}},d4=n=>n?.[Symbol.toStringTag]==="KeyObject",f4=n=>u4(n)||d4(n);function oq(...n){const e=n.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const i of e){const a=Object.keys(i);if(!t||t.size===0){t=new Set(a);continue}for(const r of a){if(t.has(r))return!1;t.add(r)}}return!0}const lq=n=>typeof n=="object"&&n!==null;function h4(n){if(!lq(n)||Object.prototype.toString.call(n)!=="[object Object]")return!1;if(Object.getPrototypeOf(n)===null)return!0;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function cq(n,e){if(n.startsWith("RS")||n.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${n} requires key modulusLength to be 2048 bits or larger`)}}const KS=(n,e)=>{if(n.byteLength!==e.length)return!1;for(let t=0;t<n.byteLength;t++)if(n[t]!==e[t])return!1;return!0},uq=n=>({data:n,pos:0}),o0=n=>{const e=n.data[n.pos++];if(e&128){const t=e&127;let i=0;for(let a=0;a<t;a++)i=i<<8|n.data[n.pos++];return i}return e},l0=(n,e,t)=>{if(n.data[n.pos++]!==e)throw new Error(t)},p4=(n,e)=>{const t=n.data.subarray(n.pos,n.pos+e);return n.pos+=e,t},dq=n=>{l0(n,6,"Expected algorithm OID");const e=o0(n);return p4(n,e)};function fq(n){l0(n,48,"Invalid PKCS#8 structure"),o0(n),l0(n,2,"Expected version field");const e=o0(n);n.pos+=e,l0(n,48,"Expected algorithm identifier");const t=o0(n);return{algIdStart:n.pos,algIdLength:t}}const hq=n=>{const e=dq(n);if(KS(e,[43,101,110]))return"X25519";if(!KS(e,[42,134,72,206,61,2,1]))throw new Error("Unsupported key algorithm");l0(n,6,"Expected curve OID");const t=o0(n),i=p4(n,t);for(const{name:a,oid:r}of[{name:"P-256",oid:[42,134,72,206,61,3,1,7]},{name:"P-384",oid:[43,129,4,0,34]},{name:"P-521",oid:[43,129,4,0,35]}])if(KS(i,r))return a;throw new Error("Unsupported named curve")},pq=async(n,e,t,i)=>{let a,r;const o=()=>["sign"],c=()=>["decrypt","unwrapKey"];switch(t){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${t.slice(-3)}`},r=o();break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.slice(-3)}`},r=o();break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(t.slice(-3),10)||1}`},r=c();break;case"ES256":case"ES384":case"ES512":{a={name:"ECDSA",namedCurve:{ES256:"P-256",ES384:"P-384",ES512:"P-521"}[t]},r=o();break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{try{const d=i.getNamedCurve(e);a=d==="X25519"?{name:"X25519"}:{name:"ECDH",namedCurve:d}}catch{throw new Jc("Invalid or unsupported key format")}r=["deriveBits"];break}case"Ed25519":case"EdDSA":a={name:"Ed25519"},r=o();break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":a={name:t},r=o();break;default:throw new Jc('Invalid or unsupported "alg" (Algorithm) value')}return crypto.subtle.importKey(n,e,a,i?.extractable??!1,r)},mq=(n,e)=>o4(n.replace(e,"")),gq=(n,e,t)=>{const i=mq(n,/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g);let a=t;return e?.startsWith?.("ECDH-ES")&&(a||={},a.getNamedCurve=r=>{const o=uq(r);return fq(o),hq(o)}),pq("pkcs8",i,e,a)};function vq(n){let e,t;switch(n.kty){case"AKP":{switch(n.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":e={name:n.alg},t=n.priv?["sign"]:["verify"];break;default:throw new Jc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(n.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(n.alg.slice(-3),10)||1}`},t=n.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Jc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(n.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=n.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=n.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new Jc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(n.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new Jc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Jc('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}async function xq(n){if(!n.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=vq(n),i={...n};return i.kty!=="AKP"&&delete i.alg,delete i.use,crypto.subtle.importKey("jwk",i,e,n.ext??!(n.d||n.priv),n.key_ops??t)}async function yq(n,e,t){if(typeof n!="string"||n.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return gq(n,e,t)}function bq(n,e,t,i,a){if(a.crit!==void 0&&i?.crit===void 0)throw new n('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||i.crit===void 0)return new Set;if(!Array.isArray(i.crit)||i.crit.length===0||i.crit.some(o=>typeof o!="string"||o.length===0))throw new n('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let r;t!==void 0?r=new Map([...Object.entries(t),...e.entries()]):r=e;for(const o of i.crit){if(!r.has(o))throw new Jc(`Extension Header Parameter "${o}" is not recognized`);if(a[o]===void 0)throw new n(`Extension Header Parameter "${o}" is missing`);if(r.get(o)&&i[o]===void 0)throw new n(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(i.crit)}const OM=n=>h4(n)&&typeof n.kty=="string",_q=n=>n.kty!=="oct"&&(n.kty==="AKP"&&typeof n.priv=="string"||typeof n.d=="string"),Sq=n=>n.kty!=="oct"&&n.d===void 0&&n.priv===void 0,wq=n=>n.kty==="oct"&&typeof n.k=="string";let Tp;const K3=async(n,e,t,i=!1)=>{Tp||=new WeakMap;let a=Tp.get(n);if(a?.[t])return a[t];const r=await xq({...e,alg:t});return i&&Object.freeze(n),a?a[t]=r:Tp.set(n,{[t]:r}),r},Mq=(n,e)=>{Tp||=new WeakMap;let t=Tp.get(n);if(t?.[e])return t[e];const i=n.type==="public",a=!!i;let r;if(n.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}r=n.toCryptoKey(n.asymmetricKeyType,a,i?[]:["deriveBits"])}if(n.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");r=n.toCryptoKey(n.asymmetricKeyType,a,[i?"verify":"sign"])}switch(n.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(e!==n.asymmetricKeyType.toUpperCase())throw new TypeError("given KeyObject instance cannot be used for this algorithm");r=n.toCryptoKey(n.asymmetricKeyType,a,[i?"verify":"sign"])}}if(n.asymmetricKeyType==="rsa"){let o;switch(e){case"RSA-OAEP":o="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":o="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":o="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":o="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return n.toCryptoKey({name:"RSA-OAEP",hash:o},a,i?["encrypt"]:["decrypt"]);r=n.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:o},a,[i?"verify":"sign"])}if(n.asymmetricKeyType==="ec"){const c=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(n.asymmetricKeyDetails?.namedCurve);if(!c)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&c==="P-256"&&(r=n.toCryptoKey({name:"ECDSA",namedCurve:c},a,[i?"verify":"sign"])),e==="ES384"&&c==="P-384"&&(r=n.toCryptoKey({name:"ECDSA",namedCurve:c},a,[i?"verify":"sign"])),e==="ES512"&&c==="P-521"&&(r=n.toCryptoKey({name:"ECDSA",namedCurve:c},a,[i?"verify":"sign"])),e.startsWith("ECDH-ES")&&(r=n.toCryptoKey({name:"ECDH",namedCurve:c},a,i?[]:["deriveBits"]))}if(!r)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=r:Tp.set(n,{[e]:r}),r};async function Eq(n,e){if(n instanceof Uint8Array||u4(n))return n;if(d4(n)){if(n.type==="secret")return n.export();if("toCryptoKey"in n&&typeof n.toCryptoKey=="function")try{return Mq(n,e)}catch(i){if(i instanceof TypeError)throw i}let t=n.export({format:"jwk"});return K3(n,t,e)}if(OM(n))return n.k?tq(n.k):K3(n,n,e,!0);throw new Error("unreachable")}const xp=n=>n?.[Symbol.toStringTag],K2=(n,e,t)=>{if(e.use!==void 0){let i;switch(t){case"sign":case"verify":i="sig";break;case"encrypt":case"decrypt":i="enc";break}if(e.use!==i)throw new TypeError(`Invalid key for this operation, its "use" must be "${i}" when present`)}if(e.alg!==void 0&&e.alg!==n)throw new TypeError(`Invalid key for this operation, its "alg" must be "${n}" when present`);if(Array.isArray(e.key_ops)){let i;switch(!0){case t==="sign":case n==="dir":case n.includes("CBC-HS"):i=t;break;case n.startsWith("PBES2"):i="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(n):!n.includes("GCM")&&n.endsWith("KW")?i="unwrapKey":i=t;break;case t==="encrypt":i="wrapKey";break;case t==="decrypt":i=n.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(i&&e.key_ops?.includes?.(i)===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${i}" when present`)}return!0},Tq=(n,e,t)=>{if(!(e instanceof Uint8Array)){if(OM(e)){if(wq(e)&&K2(n,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!f4(e))throw new TypeError(c4(n,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${xp(e)} instances for symmetric algorithms must be of type "secret"`)}},Aq=(n,e,t)=>{if(OM(e))switch(t){case"decrypt":case"sign":if(_q(e)&&K2(n,e,t))return;throw new TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(Sq(e)&&K2(n,e,t))return;throw new TypeError("JSON Web Key for this operation must be a public JWK")}if(!f4(e))throw new TypeError(c4(n,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${xp(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${xp(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${xp(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${xp(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${xp(e)} instances for asymmetric algorithm encryption must be of type "public"`)}};function Cq(n,e,t){switch(n.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":Tq(n,e,t);break;default:Aq(n,e,t)}}function Nq(n,e){const t=`SHA-${n.slice(-3)}`;switch(n){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(n.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:n};default:throw new Jc(`alg ${n} is not supported either by JOSE or your javascript runtime`)}}async function Rq(n,e,t){if(e instanceof Uint8Array){if(!n.startsWith("HS"))throw new TypeError(sq(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${n.slice(-3)}`,name:"HMAC"},!1,[t])}return rq(e,n,t),e}const vf=n=>Math.floor(n.getTime()/1e3),m4=60,g4=m4*60,LM=g4*24,Dq=LM*7,Uq=LM*365.25,Oq=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function ZS(n){const e=Oq.exec(n);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),i=e[3].toLowerCase();let a;switch(i){case"sec":case"secs":case"second":case"seconds":case"s":a=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":a=Math.round(t*m4);break;case"hour":case"hours":case"hr":case"hrs":case"h":a=Math.round(t*g4);break;case"day":case"days":case"d":a=Math.round(t*LM);break;case"week":case"weeks":case"w":a=Math.round(t*Dq);break;default:a=Math.round(t*Uq);break}return e[1]==="-"||e[4]==="ago"?-a:a}function xf(n,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${n} input`);return e}class Lq{#e;constructor(e){if(!h4(e))throw new TypeError("JWT Claims Set MUST be an object");this.#e=structuredClone(e)}data(){return s4.encode(JSON.stringify(this.#e))}get iss(){return this.#e.iss}set iss(e){this.#e.iss=e}get sub(){return this.#e.sub}set sub(e){this.#e.sub=e}get aud(){return this.#e.aud}set aud(e){this.#e.aud=e}set jti(e){this.#e.jti=e}set nbf(e){typeof e=="number"?this.#e.nbf=xf("setNotBefore",e):e instanceof Date?this.#e.nbf=xf("setNotBefore",vf(e)):this.#e.nbf=vf(new Date)+ZS(e)}set exp(e){typeof e=="number"?this.#e.exp=xf("setExpirationTime",e):e instanceof Date?this.#e.exp=xf("setExpirationTime",vf(e)):this.#e.exp=vf(new Date)+ZS(e)}set iat(e){e===void 0?this.#e.iat=vf(new Date):e instanceof Date?this.#e.iat=xf("setIssuedAt",vf(e)):typeof e=="string"?this.#e.iat=xf("setIssuedAt",vf(new Date)+ZS(e)):this.#e.iat=xf("setIssuedAt",e)}}async function zq(n,e,t){const i=await Rq(n,e,"sign");cq(n,i);const a=await crypto.subtle.sign(Nq(n,i.algorithm),i,t);return new Uint8Array(a)}class Pq{#e;#t;#n;constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this.#e=e}setProtectedHeader(e){if(this.#t)throw new TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setUnprotectedHeader(e){if(this.#n)throw new TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}async sign(e,t){if(!this.#t&&!this.#n)throw new Pg("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!oq(this.#t,this.#n))throw new Pg("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const i={...this.#t,...this.#n},a=bq(Pg,new Map([["b64",!0]]),t?.crit,this.#t,i);let r=!0;if(a.has("b64")&&(r=this.#t.b64,typeof r!="boolean"))throw new Pg('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=i;if(typeof o!="string"||!o)throw new Pg('JWS "alg" (Algorithm) Header Parameter missing or invalid');Cq(o,e,"sign");let c,d;r?(c=YS(this.#e),d=XS(c)):(d=this.#e,c="");let f,m;this.#t?(f=YS(JSON.stringify(this.#t)),m=XS(f)):(f="",m=new Uint8Array);const g=$Y(m,XS("."),d),y=await Eq(e,o),_=await zq(o,y,g),S={signature:YS(_),payload:c};return this.#n&&(S.header=this.#n),this.#t&&(S.protected=f),S}}class Iq{#e;constructor(e){this.#e=new Pq(e)}setProtectedHeader(e){return this.#e.setProtectedHeader(e),this}async sign(e,t){const i=await this.#e.sign(e,t);if(i.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${i.protected}.${i.payload}.${i.signature}`}}class Bq{#e;#t;constructor(e={}){this.#t=new Lq(e)}setIssuer(e){return this.#t.iss=e,this}setSubject(e){return this.#t.sub=e,this}setAudience(e){return this.#t.aud=e,this}setJti(e){return this.#t.jti=e,this}setNotBefore(e){return this.#t.nbf=e,this}setExpirationTime(e){return this.#t.exp=e,this}setIssuedAt(e){return this.#t.iat=e,this}setProtectedHeader(e){return this.#e=e,this}async sign(e,t){const i=new Iq(this.#t.data());if(i.setProtectedHeader(this.#e),Array.isArray(this.#e?.crit)&&this.#e.crit.includes("b64")&&this.#e.b64===!1)throw new nq("JWTs MUST NOT use unencoded payload");return i.sign(e,t)}}const kq="https://api.localizer.fayhe.com/v1",ts=[{code:"en-US",name:"English (US)",flag:""},{code:"en-GB",name:"English (UK)",flag:""},{code:"en-AU",name:"English (AU)",flag:""},{code:"fr-FR",name:"French",flag:""},{code:"de-DE",name:"German",flag:""},{code:"es-ES",name:"Spanish (Spain)",flag:""},{code:"es-MX",name:"Spanish (Mexico)",flag:""},{code:"it",name:"Italian",flag:""},{code:"pt-BR",name:"Portuguese (BR)",flag:""},{code:"pt-PT",name:"Portuguese (PT)",flag:""},{code:"nl-NL",name:"Dutch",flag:""},{code:"ja",name:"Japanese",flag:""},{code:"ko",name:"Korean",flag:""},{code:"zh-Hans",name:"Chinese (Simplified)",flag:""},{code:"zh-Hant",name:"Chinese (Traditional)",flag:""},{code:"ar-SA",name:"Arabic",flag:""},{code:"tr",name:"Turkish",flag:""},{code:"ru",name:"Russian",flag:""},{code:"th",name:"Thai",flag:""},{code:"vi",name:"Vietnamese",flag:""},{code:"id",name:"Indonesian",flag:""},{code:"ms",name:"Malay",flag:""},{code:"pl",name:"Polish",flag:""},{code:"uk",name:"Ukrainian",flag:""},{code:"ro",name:"Romanian",flag:""},{code:"cs",name:"Czech",flag:""},{code:"sk",name:"Slovak",flag:""},{code:"da",name:"Danish",flag:""},{code:"fi",name:"Finnish",flag:""},{code:"sv",name:"Swedish",flag:""},{code:"no",name:"Norwegian",flag:""},{code:"el",name:"Greek",flag:""},{code:"he",name:"Hebrew",flag:""},{code:"hi",name:"Hindi",flag:""},{code:"hu",name:"Hungarian",flag:""},{code:"ca",name:"Catalan",flag:""},{code:"hr",name:"Croatian",flag:""}];async function Fq(n){const e=n.replace(/-----BEGIN PRIVATE KEY-----/,"").replace(/-----END PRIVATE KEY-----/,"").replace(/-----BEGIN EC PRIVATE KEY-----/,"").replace(/-----END EC PRIVATE KEY-----/,"").replace(/\s/g,"");return await yq(`-----BEGIN PRIVATE KEY-----
${e}
-----END PRIVATE KEY-----`,"ES256")}const v4="asc-token-cache";function zM(){try{const n=sessionStorage.getItem(v4);if(n)return JSON.parse(n)}catch{}return null}function jq(n,e,t){try{sessionStorage.setItem(v4,JSON.stringify({token:n,expiry:e,credHash:t}))}catch{}}function PM(n,e){return`${n}:${e}`}function JS(n,e){const t=PM(n,e),i=zM(),a=Date.now();return i&&i.credHash===t&&i.expiry-a>6e4}function Hq(n,e){const t=PM(n,e),i=zM();if(!i||i.credHash!==t)return 0;const a=Math.max(0,Math.floor((i.expiry-Date.now())/1e3));return a>60?a:0}async function Lr(n,e,t){const i=PM(n,e),a=Date.now(),r=zM(),o=r&&r.credHash===i&&r.expiry-a>6e4;if(console.log("[JWT] generateToken called:",{hasPrivateKey:!!t&&t.length>0,cacheValid:o,cacheExpiry:r?new Date(r.expiry).toISOString():null,timeLeft:r?Math.round((r.expiry-a)/1e3)+"s":null}),o)return console.log("[JWT] Using cached token"),r.token;if(!t||t.trim()==="")throw new Error("Private key required - cached token expired");console.log("[JWT] Generating new token...");const c=await Fq(t),d=await new Bq({}).setProtectedHeader({alg:"ES256",kid:n,typ:"JWT"}).setIssuer(e).setAudience("appstoreconnect-v1").setExpirationTime("20m").sign(c);return jq(d,a+1140*1e3,i),console.log("[JWT] New token cached for 19 min"),d}async function tr(n,e,t={}){const i=n.startsWith("http")?n:`${kq}${n}`,a=await fetch(i,{...t,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",...t.headers}});if(a.status===204)return null;let r=null;const o=await a.text();if(o)try{r=JSON.parse(o)}catch{}if(!a.ok){const c=r?.errors?.[0]?.detail||r?.errors?.[0]?.title||`API request failed: ${a.status}`;throw new Error(c)}return r}async function Z3(n){const{keyId:e,issuerId:t,privateKey:i}=n;try{const a=await Lr(e,t,i);return await tr("/apps?limit=1",a),{success:!0,message:"Connected successfully!"}}catch(a){return{success:!1,message:a.message}}}async function Vq(n){try{const t=await(await fetch(`https://itunes.apple.com/lookup?bundleId=${n}`)).json();if(t.results&&t.results.length>0)return t.results[0].artworkUrl512||t.results[0].artworkUrl100||null}catch{}return null}async function J3(n){const{keyId:e,issuerId:t,privateKey:i}=n,a=await Lr(e,t,i),c=(await tr("/apps?fields[apps]=name,bundleId&limit=200",a)).data.map(d=>({id:d.id,name:d.attributes.name,bundleId:d.attributes.bundleId,iconUrl:null})).map(async d=>(d.iconUrl=await Vq(d.bundleId),d));return Promise.all(c)}async function QS(n,e){const{keyId:t,issuerId:i,privateKey:a}=n,r=await Lr(t,i,a);return(await tr(`/apps/${e}/appStoreVersions?fields[appStoreVersions]=versionString,appVersionState,platform,createdDate&limit=50`,r)).data.map(c=>({id:c.id,versionString:c.attributes.versionString,state:c.attributes.appVersionState,platform:c.attributes.platform,createdDate:c.attributes.createdDate})).sort((c,d)=>new Date(d.createdDate)-new Date(c.createdDate))}async function vp(n,e){const{keyId:t,issuerId:i,privateKey:a}=n,r=await Lr(t,i,a);return(await tr(`/appStoreVersions/${e}/appStoreVersionLocalizations?fields[appStoreVersionLocalizations]=locale,description,keywords,marketingUrl,promotionalText,supportUrl,whatsNew`,r)).data.map(c=>({id:c.id,locale:c.attributes.locale,description:c.attributes.description||"",keywords:c.attributes.keywords||"",marketingUrl:c.attributes.marketingUrl||"",promotionalText:c.attributes.promotionalText||"",supportUrl:c.attributes.supportUrl||"",whatsNew:c.attributes.whatsNew||""}))}async function Q3(n,e){const{keyId:t,issuerId:i,privateKey:a}=n,r=await Lr(t,i,a),o=await tr(`/apps/${e}/appInfos?limit=1`,r);if(!o.data||o.data.length===0)return{appInfoId:null,localizations:[]};const c=o.data[0].id,d=await tr(`/appInfos/${c}/appInfoLocalizations?fields[appInfoLocalizations]=locale,name,subtitle,privacyPolicyText,privacyPolicyUrl`,r);return{appInfoId:c,localizations:d.data.map(f=>({id:f.id,locale:f.attributes.locale,name:f.attributes.name||"",subtitle:f.attributes.subtitle||"",privacyPolicyText:f.attributes.privacyPolicyText||"",privacyPolicyUrl:f.attributes.privacyPolicyUrl||""}))}}async function Ig(n,e,t){const{keyId:i,issuerId:a,privateKey:r}=n,o=await Lr(i,a,r),c={data:{type:"appStoreVersionLocalizations",id:e,attributes:{}}};return t.description!==void 0&&(c.data.attributes.description=t.description),t.keywords!==void 0&&(c.data.attributes.keywords=t.keywords),t.promotionalText!==void 0&&(c.data.attributes.promotionalText=t.promotionalText),t.whatsNew!==void 0&&(c.data.attributes.whatsNew=t.whatsNew),t.marketingUrl!==void 0&&(c.data.attributes.marketingUrl=t.marketingUrl),t.supportUrl!==void 0&&(c.data.attributes.supportUrl=t.supportUrl),await tr(`/appStoreVersionLocalizations/${e}`,o,{method:"PATCH",body:JSON.stringify(c)}),!0}async function Gq(n,e,t,i){const{keyId:a,issuerId:r,privateKey:o}=n,c=await Lr(a,r,o),d={data:{type:"appStoreVersionLocalizations",attributes:{locale:t,...i},relationships:{appStoreVersion:{data:{type:"appStoreVersions",id:e}}}}};return(await tr("/appStoreVersionLocalizations",c,{method:"POST",body:JSON.stringify(d)})).data.id}async function Wq(n,e,t,i="IOS"){const{keyId:a,issuerId:r,privateKey:o}=n,c=await Lr(a,r,o),f=await tr("/appStoreVersions",c,{method:"POST",body:JSON.stringify({data:{type:"appStoreVersions",attributes:{versionString:t,platform:i,releaseType:"MANUAL"},relationships:{app:{data:{type:"apps",id:e}}}}})});return{id:f.data.id,versionString:f.data.attributes.versionString,state:f.data.attributes.appVersionState,platform:f.data.attributes.platform,createdDate:f.data.attributes.createdDate}}async function $3(n,e,t){const{keyId:i,issuerId:a,privateKey:r}=n,o=await Lr(i,a,r),c={data:{type:"appInfoLocalizations",id:e,attributes:{}}};return t.name!==void 0&&(c.data.attributes.name=t.name),t.subtitle!==void 0&&(c.data.attributes.subtitle=t.subtitle),t.privacyPolicyUrl!==void 0&&(c.data.attributes.privacyPolicyUrl=t.privacyPolicyUrl),await tr(`/appInfoLocalizations/${e}`,o,{method:"PATCH",body:JSON.stringify(c)}),!0}async function Xq(n,e,t,i){const{keyId:a,issuerId:r,privateKey:o}=n,c=await Lr(a,r,o),d={data:{type:"appInfoLocalizations",attributes:{locale:t,...i},relationships:{appInfo:{data:{type:"appInfos",id:e}}}}};return(await tr("/appInfoLocalizations",c,{method:"POST",body:JSON.stringify(d)})).data.id}async function Yq(n,e,t,i="description"){const{provider:a,apiKey:r,model:o,region:c}=t,f={description:4e3,keywords:100,promotionalText:170,whatsNew:4e3,name:30,subtitle:30}[i]||4e3,g=ts.find(S=>S.code===e)?.name||e,y=`You are a professional App Store content translator. Translate the following text to ${g}.

RULES:
1. Maintain the tone and style appropriate for an App Store listing
2. The translation MUST NOT exceed ${f} characters
3. Keep proper nouns, brand names, and app names unchanged unless they have an official localized version
4. For keywords, keep them comma-separated and translate each keyword individually
5. Output ONLY the translated text, nothing else`,_=`Translate to ${g} (max ${f} chars):

${n}`;try{let S;if(a==="openai"){console.log("[ASC Translation] Calling OpenAI API...");const T=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({model:o,messages:[{role:"system",content:y},{role:"user",content:_}]})})).json();if(console.log("[ASC Translation] OpenAI response:",T.error?T.error:"OK"),T.error)throw new Error(T.error.message);S=T.choices[0].message.content.trim()}else if(a==="bedrock"){console.log("[ASC Translation] Calling Bedrock API...");const A=`https://bedrock-runtime.${c}.amazonaws.com/model/${encodeURIComponent(o)}/converse`,w=await(await fetch(A,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({messages:[{role:"user",content:[{text:_}]}],system:[{text:y}],inferenceConfig:{maxTokens:4096}})})).json();if(console.log("[ASC Translation] Bedrock response:",w.message?w.message:"OK"),w.message)throw new Error(w.message);S=w.output.message.content[0].text.trim()}else throw new Error(`Unknown provider: ${a}`);return S.length>f&&(S=S.substring(0,f-3)+"..."),{translation:S,error:null}}catch(S){return{translation:null,error:S.message}}}const Eb={APP_IPHONE_67:{name:'iPhone 6.7"',device:"iPhone 14/15 Pro Max"},APP_IPHONE_61:{name:'iPhone 6.1"',device:"iPhone 14/15"},APP_IPHONE_65:{name:'iPhone 6.5"',device:"iPhone 11 Pro Max"},APP_IPHONE_58:{name:'iPhone 5.8"',device:"iPhone X/11 Pro"},APP_IPHONE_55:{name:'iPhone 5.5"',device:"iPhone 6+/7+/8+"},APP_IPHONE_47:{name:'iPhone 4.7"',device:"iPhone 6/7/8"},APP_IPAD_PRO_3GEN_129:{name:'iPad Pro 12.9"',device:"iPad Pro 3rd gen+"},APP_IPAD_PRO_3GEN_11:{name:'iPad Pro 11"',device:'iPad Pro 11"'},APP_IPAD_PRO_129:{name:'iPad Pro 12.9"',device:"iPad Pro 1-2 gen"},APP_IPAD_105:{name:'iPad 10.5"',device:'iPad Pro 10.5"'},APP_IPAD_97:{name:'iPad 9.7"',device:'iPad 9.7"'},APP_DESKTOP:{name:"Mac",device:"macOS"},APP_WATCH_ULTRA:{name:"Watch Ultra",device:"Apple Watch Ultra"},APP_WATCH_SERIES_10:{name:"Watch Series 10",device:"Apple Watch S10"},APP_WATCH_SERIES_7:{name:"Watch Series 7",device:"Apple Watch S7+"},APP_WATCH_SERIES_4:{name:"Watch Series 4",device:"Apple Watch S4-6"},APP_WATCH_SERIES_3:{name:"Watch Series 3",device:"Apple Watch S3"},APP_APPLE_TV:{name:"Apple TV",device:"tvOS"},APP_APPLE_VISION_PRO:{name:"Vision Pro",device:"visionOS"}};async function x4(n,e){const{keyId:t,issuerId:i,privateKey:a}=n,r=await Lr(t,i,a),o=await tr(`/appStoreVersionLocalizations/${e}/appScreenshotSets?fields[appScreenshotSets]=screenshotDisplayType&limit=50`,r);if(!o.data||o.data.length===0)return[];const c=[];for(const d of o.data)try{const f=await tr(`/appScreenshotSets/${d.id}?include=appScreenshots&fields[appScreenshots]=fileSize,fileName,imageAsset,assetDeliveryState&limit[appScreenshots]=50`,r),m=[];if(f.included)for(const g of f.included)g.type==="appScreenshots"&&m.push({id:g.id,fileName:g.attributes.fileName,fileSize:g.attributes.fileSize,imageAsset:g.attributes.imageAsset,assetDeliveryState:g.attributes.assetDeliveryState});c.push({id:d.id,displayType:d.attributes.screenshotDisplayType,displayInfo:Eb[d.attributes.screenshotDisplayType]||{name:d.attributes.screenshotDisplayType,device:"Unknown"},screenshots:m})}catch(f){console.error(`Error fetching screenshot set ${d.id}:`,f),c.push({id:d.id,displayType:d.attributes.screenshotDisplayType,displayInfo:Eb[d.attributes.screenshotDisplayType]||{name:d.attributes.screenshotDisplayType,device:"Unknown"},screenshots:[],error:f.message})}return c}const qq={en:"en-US",fr:"fr-FR",de:"de-DE",es:"es-ES",it:"it",pt:"pt-BR",ja:"ja",ko:"ko",zh:"zh-Hans","zh-hans":"zh-Hans","zh-hant":"zh-Hant",ar:"ar-SA",tr:"tr",ru:"ru",th:"th",vi:"vi",id:"id",ms:"ms",pl:"pl",uk:"uk",nl:"nl-NL",sv:"sv",da:"da",fi:"fi",no:"no",el:"el",he:"he",hi:"hi",hu:"hu",cs:"cs",sk:"sk",ro:"ro",hr:"hr",ca:"ca"};function Kq(n){const e=n.toLowerCase();return qq[e]||n}async function Zq(n,e,t){const{keyId:i,issuerId:a,privateKey:r}=n,o=await Lr(i,a,r);return(await tr("/appScreenshotSets",o,{method:"POST",body:JSON.stringify({data:{type:"appScreenshotSets",attributes:{screenshotDisplayType:t},relationships:{appStoreVersionLocalization:{data:{type:"appStoreVersionLocalizations",id:e}}}}})})).data.id}async function Jq(n,e,t,i){const{keyId:a,issuerId:r,privateKey:o}=n,c=await Lr(a,r,o),f=await tr("/appScreenshots",c,{method:"POST",body:JSON.stringify({data:{type:"appScreenshots",attributes:{fileName:t,fileSize:i},relationships:{appScreenshotSet:{data:{type:"appScreenshotSets",id:e}}}}})});return{id:f.data.id,uploadOperations:f.data.attributes.uploadOperations}}async function Qq(n,e){const{method:t,url:i,length:a,offset:r,requestHeaders:o}=n,c=e.slice(r,r+a),d={};for(const m of o)d[m.name]=m.value;const f=await fetch(i,{method:t,headers:d,body:c});if(!f.ok)throw new Error(`Upload failed: ${f.status} ${f.statusText}`);return!0}async function $q(n,e,t){const{keyId:i,issuerId:a,privateKey:r}=n,o=await Lr(i,a,r),c={data:{type:"appScreenshots",id:e,attributes:{uploaded:!0,sourceFileChecksum:t}}};return await tr(`/appScreenshots/${e}`,o,{method:"PATCH",body:JSON.stringify(c)}),!0}async function eK(n){const e=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(e)).map(a=>a.toString(16).padStart(2,"0")).join("")}async function tK(n,e){const{keyId:t,issuerId:i,privateKey:a}=n,r=await Lr(t,i,a);return await tr(`/appScreenshots/${e}`,r,{method:"DELETE"}),!0}async function nK(n,e){const{keyId:t,issuerId:i,privateKey:a}=n,r=await Lr(t,i,a),c=(await tr(`/appScreenshotSets/${e}?include=appScreenshots&fields[appScreenshots]=fileName&limit[appScreenshots]=50`,r)).included?.filter(d=>d.type==="appScreenshots")||[];for(const d of c)await tK(n,d.id);return c.length}async function iK(n,e,t,i){try{i?.({status:"reserving",fileName:t.name});const a=await t.arrayBuffer(),{id:r,uploadOperations:o}=await Jq(n,e,t.name,t.size);i?.({status:"uploading",fileName:t.name,total:o.length});for(let d=0;d<o.length;d++)await Qq(o[d],a),i?.({status:"uploading",fileName:t.name,current:d+1,total:o.length});i?.({status:"committing",fileName:t.name});const c=await eK(a);return await $q(n,r,c),i?.({status:"done",fileName:t.name}),{success:!0,screenshotId:r}}catch(a){return i?.({status:"error",fileName:t.name,error:a.message}),{success:!1,error:a.message}}}async function aK(n,e){const t={};for(const i of e)try{const a=await x4(n,i.id);t[i.locale]={localizationId:i.id,sets:a,totalScreenshots:a.reduce((r,o)=>r+o.screenshots.length,0)}}catch(a){console.error(`Error fetching screenshots for ${i.locale}:`,a),t[i.locale]={localizationId:i.id,sets:[],totalScreenshots:0,error:a.message}}return t}async function rK(n,e,t,i,a){const r={},o=[],c=i.length;let d=0;console.log("[ASC Translation] Config:",{provider:t.provider,model:t.model,hasApiKey:!!t.apiKey,region:t.region});for(const f of i){const m=n[f];if(!m||m.trim()===""){r[f]="",d++;continue}a?.({current:++d,total:c,field:f,status:"translating"}),console.log(`[ASC Translation] Translating ${f} to ${e}...`);const{translation:g,error:y}=await Yq(m,e,t,f);y?(console.error(`[ASC Translation] Error for ${f}:`,y),a?.({current:d,total:c,field:f,status:"error",error:y}),o.push({field:f,error:y}),r[f]=m):(console.log(`[ASC Translation] Success for ${f}:`,g?.substring(0,50)+"..."),r[f]=g,a?.({current:d,total:c,field:f,status:"success"}))}return{results:r,errors:o}}const Gg=16,Z2=12,sK=1e5;async function y4(n,e){const t=new TextEncoder,i=await crypto.subtle.importKey("raw",t.encode(n),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:sK,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function oK(n,e){const t=new TextEncoder,i=crypto.getRandomValues(new Uint8Array(Gg)),a=crypto.getRandomValues(new Uint8Array(Z2)),r=await y4(e,i),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},r,t.encode(n)),c=new Uint8Array(i.length+a.length+o.byteLength);return c.set(i,0),c.set(a,i.length),c.set(new Uint8Array(o),i.length+a.length),btoa(String.fromCharCode(...c))}async function b4(n,e){try{const t=Uint8Array.from(atob(n),f=>f.charCodeAt(0)),i=t.slice(0,Gg),a=t.slice(Gg,Gg+Z2),r=t.slice(Gg+Z2),o=await y4(e,i),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},o,r);return{success:!0,data:new TextDecoder().decode(c)}}catch{return{success:!1,error:"Invalid password or corrupted data"}}}const eC="asc-encrypted-p8-key";function lK({credentials:n,onCredentialsChange:e,aiConfig:t}){const[i,a]=k.useState(!1),[r,o]=k.useState(null),[c,d]=k.useState(0);k.useEffect(()=>{const ae=()=>{n.keyId&&n.issuerId&&d(Hq(n.keyId,n.issuerId))};ae();const De=setInterval(ae,1e3);return()=>clearInterval(De)},[n.keyId,n.issuerId]);const f=ae=>{const De=Math.floor(ae/60),st=ae%60;return`${De}:${st.toString().padStart(2,"0")}`},[m]=k.useState(()=>typeof window>"u"?!1:!!window.localStorage.getItem(eC)),[g,y]=k.useState(""),[_,S]=k.useState(!1),[A,T]=k.useState(""),w=async()=>{if(!g){T("Enter password");return}const ae=localStorage.getItem(eC);if(!ae){T("No stored key found");return}S(!0),T("");const De=await b4(ae,g);De.success?(e(st=>({...st,privateKey:De.data})),y(""),v_.success("Private key unlocked!")):T("Wrong password"),S(!1)},[N,D]=k.useState([]),[U,O]=k.useState(null),[B,z]=k.useState([]),[F,L]=k.useState(null),[I,Y]=k.useState(!1),[q,K]=k.useState(!1);k.useEffect(()=>{U&&sessionStorage.setItem("asc-selected-app",JSON.stringify({id:U.id,name:U.name,bundleId:U.bundleId}))},[U]),k.useEffect(()=>{F&&sessionStorage.setItem("asc-selected-version",JSON.stringify({id:F.id,versionString:F.versionString}))},[F]);const[$,ce]=k.useState([]),[G,W]=k.useState({appInfoId:null,localizations:[]}),[Q,ue]=k.useState(!1),[de,j]=k.useState([]),[ee,ne]=k.useState(!1),[oe,re]=k.useState({}),[se,le]=k.useState(!1),[ve,ze]=k.useState(null),[qe,Ke]=k.useState(""),[Pe,gt]=k.useState("en-US"),[Te,je]=k.useState([]),[Le,$e]=k.useState(["description","whatsNew","promotionalText","keywords"]),[J,et]=k.useState(!1),[We,Se]=k.useState({current:0,total:0,status:""}),[Ee,X]=k.useState({open:!1,locale:"",localization:null,type:"version"}),[V,fe]=k.useState({open:!1,versionString:"",platform:"IOS",isCreating:!1}),[Ce,Ae]=k.useState({show:!1,success:!0,message:"",errorCount:0}),[we,ot]=k.useState(null),[it,ht]=k.useState([]),[xt,ke]=k.useState(null),[Fe,Ze]=k.useState(""),[rt,ut]=k.useState(!1),[Ut,me]=k.useState({}),[tt,nt]=k.useState(!1),[ge,xe]=k.useState([]),[pe,Ie]=k.useState({open:!1,screenshot:null,locale:"",deviceType:""}),[pt,yt]=k.useState(!1),[Nt,Kt]=k.useState([]),[dn,Xn]=k.useState(!1),[Rn,Jn]=k.useState({current:0,total:0,currentFile:""}),[Qn,Si]=k.useState("APP_IPHONE_67"),[Ui,ai]=k.useState(!0),[jn,on]=k.useState([]),bt=k.useCallback((ae,De="info")=>{const st=new Date().toLocaleTimeString();on(Et=>[...Et.slice(-100),{message:ae,type:De,timestamp:st}]),De==="error"?v_.error(ae):De==="success"&&v_.success(ae)},[]),$n=t.apiKeys[t.provider]||"",ja=t.models[t.provider]||Qs[t.provider]?.defaultModel||"";k.useEffect(()=>{if(n.keyId&&n.issuerId&&JS(n.keyId,n.issuerId)&&N.length===0&&!i&&!I){console.log("[Auto-connect] Valid JWT found, connecting automatically...");const De=setTimeout(()=>{ls()},100);return()=>clearTimeout(De)}},[]);const ls=async()=>{a(!0);try{const ae=await Z3(n);if(ae.success){o(ae);const De=await J3(n);D(De),bt(`Auto-connected! Loaded ${De.length} apps`,"success");const st=sessionStorage.getItem("asc-selected-app");if(st)try{const Et=JSON.parse(st),Dt=De.find(Ct=>Ct.id===Et.id);if(Dt){O(Dt);const Ct=await QS(n,Dt.id);z(Ct);const mt=sessionStorage.getItem("asc-selected-version");if(mt){const jt=JSON.parse(mt),Vt=Ct.find(On=>On.id===jt.id);if(Vt){L(Vt);const[On,Wt]=await Promise.all([vp(n,Vt.id),Q3(n,Dt.id)]);ce(On),W(Wt),bt(`Restored selection: ${Dt.name} v${Vt.versionString}`,"success")}}}}catch(Et){console.log("[Auto-connect] Could not restore selection:",Et)}}}catch(ae){console.log("[Auto-connect] Failed:",ae.message)}a(!1)},Os=async()=>{const ae=n.privateKey&&n.privateKey.trim()!=="",De=JS(n.keyId,n.issuerId);if(!n.keyId||!n.issuerId){bt("Please fill in Key ID and Issuer ID","error");return}if(!ae&&!De){bt("Please upload your .p8 key or wait for a valid session","error");return}a(!0),o(null);const st=await Z3(n);o(st),st.success?(bt("Successfully connected to App Store Connect!","success"),zr()):bt(`Connection failed: ${st.message}`,"error"),a(!1)},zr=async()=>{Y(!0);try{const ae=await J3(n);D(ae),bt(`Loaded ${ae.length} apps`,"success")}catch(ae){bt(`Error loading apps: ${ae.message}`,"error")}Y(!1)},Pr=async ae=>{const De=N.find(st=>st.id===ae);if(O(De),L(null),ce([]),W({appInfoId:null,localizations:[]}),!!De){K(!0);try{const st=await QS(n,ae);z(st),bt(`Loaded ${st.length} versions for ${De.name}`,"success")}catch(st){bt(`Error loading versions: ${st.message}`,"error")}K(!1)}},Ha=async ae=>{const De=B.find(st=>st.id===ae);if(L(De),j([]),!!De){ue(!0);try{const[st,Et]=await Promise.all([vp(n,ae),Q3(n,U.id)]);ce(st),W(Et),bt(`Loaded localizations for v${De.versionString}`,"success");const Dt=B.findIndex(Ct=>Ct.id===ae);if(Dt<B.length-1){const Ct=B[Dt+1];try{const mt=await vp(n,Ct.id);j(mt),bt(`Loaded previous version (v${Ct.versionString}) for copying`,"info")}catch{}}}catch(st){bt(`Error loading localizations: ${st.message}`,"error")}ue(!1)}},hi=async()=>{if(de.length===0){bt("No previous version localizations available","error");return}ne(!0);let ae=0,De=0;for(const st of $){const Et=de.find(mt=>mt.locale===st.locale);if(!Et)continue;const Dt=!st.whatsNew&&Et.whatsNew,Ct=!st.promotionalText&&Et.promotionalText;if(Dt||Ct){const mt={};Dt&&(mt.whatsNew=Et.whatsNew),Ct&&(mt.promotionalText=Et.promotionalText);try{await Ig(n,st.id,mt),ae++,bt(`Copied to ${st.locale}: ${Dt?"What's New":""}${Dt&&Ct?" & ":""}${Ct?"Promo Text":""}`,"success")}catch(jt){De++,bt(`Failed to copy to ${st.locale}: ${jt.message}`,"error")}}}if(ae>0){const st=await vp(n,F.id);ce(st)}bt(`Copied content to ${ae} locale(s)${De>0?`, ${De} error(s)`:""}`,ae>0?"success":"error"),ne(!1)},zn=$.filter(ae=>{const De=de.find(st=>st.locale===ae.locale);return De?!ae.whatsNew&&De.whatsNew||!ae.promotionalText&&De.promotionalText:!1}),ba=async ae=>{if(!$n){bt("Please configure your AI provider API key","error");return}const De=$.find(mt=>mt.locale===ae);if(!De){bt(`No localization found for ${ae}`,"error");return}const st=De.description||$.find(mt=>mt.locale===Pe)?.description;if(!st){bt("No description found to generate keywords from","error");return}const Et=ts.find(mt=>mt.code===ae),Dt=Et?.name||ae,Ct=Et?.country||Dt;ot(ae),bt(`Generating optimized keywords for ${Dt}...`,"info");try{const{translateText:mt}=await t3(async()=>{const{translateText:pi}=await Promise.resolve().then(()=>Y3);return{translateText:pi}},void 0),jt=`You are an App Store Optimization (ASO) expert. Generate keywords for an iOS/macOS app.

CRITICAL: You MUST use between 95-100 characters total (including commas). This is mandatory - do not use less than 95 characters.

RULES:
1. Language: ${Dt} (${Ct} market)
2. Format: comma-separated, NO spaces after commas
3. Character count: MUST be 95-100 characters total. Count carefully!
4. Use high-search-volume terms users would search for
5. Mix short keywords with longer phrases to fill the space
6. NO app name, NO generic words (app, best, free), NO trademarks
7. NO duplicate words across keywords

APP DESCRIPTION:
${st}

${De.keywords?`CURRENT KEYWORDS (improve these, but use 95-100 chars):
${De.keywords}`:""}

IMPORTANT: Count your characters! You have 100 max, use at least 95. Add more keywords if under 95 chars.

Respond with ONLY the keywords, nothing else:`,Vt={provider:t.provider,apiKey:$n,model:ja,region:t.region};let Wt=(await mt(jt,"en-US",ae,Vt)).replace(/^["']|["']$/g,"").replace(/\n/g,",").replace(/\s*,\s*/g,",").replace(/,+/g,",").replace(/^,|,$/g,"").trim();if(Wt.length>100){const pi=Wt.split(",");Wt="";for(const Ei of pi)if((Wt?Wt.length+1+Ei.length:Ei.length)<=100)Wt=Wt?`${Wt},${Ei}`:Ei;else break}const yi=Wt.length;yi<95&&bt(`Warning: Only ${yi}/100 chars used for ${Dt}. Consider adding more keywords manually.`,"error"),await Ig(n,De.id,{keywords:Wt}),bt(`Generated keywords for ${Dt} (${yi}/100 chars): ${Wt}`,"success");const ji=await vp(n,F.id);ce(ji)}catch(mt){bt(`Error generating keywords for ${Dt}: ${mt.message}`,"error")}ot(null)},kt=ae=>{ht(De=>De.includes(ae)?De.filter(st=>st!==ae):[...De,ae])},Z=(ae,De)=>{ke(ae),Ze(De||"")},Me=()=>{ke(null),Ze("")},Ge=async ae=>{const De=$.find(st=>st.locale===ae);if(De){ut(!0);try{const st=Fe.split(",").map(Dt=>Dt.trim()).filter(Dt=>Dt.length>0).join(",");await Ig(n,De.id,{keywords:st}),bt(`Saved keywords for ${ts.find(Dt=>Dt.code===ae)?.name||ae}`,"success");const Et=await vp(n,F.id);ce(Et),ke(null),Ze("")}catch(st){bt(`Error saving keywords: ${st.message}`,"error")}ut(!1)}},Be=async()=>{if($.length!==0){nt(!0),bt("Loading screenshots for all localizations...","info");try{const ae=await aK(n,$);me(ae);const De=Object.values(ae).reduce((st,Et)=>st+Et.totalScreenshots,0);bt(`Loaded ${De} screenshots across ${Object.keys(ae).length} locales`,"success")}catch(ae){bt(`Error loading screenshots: ${ae.message}`,"error")}nt(!1)}},Ue=ae=>{xe(De=>De.includes(ae)?De.filter(st=>st!==ae):[...De,ae])},wt=ae=>ae.includes("IPHONE")?g3:ae.includes("IPAD")?WG:ae.includes("DESKTOP")||ae.includes("MAC")?eM:ae.includes("WATCH")?JG:g3,At=async ae=>{ae.preventDefault(),ae.stopPropagation(),yt(!1);const De=ae.dataTransfer.items,st=[];for(const Et of De)if(Et.kind==="file"){const Dt=Et.webkitGetAsEntry?.();if(Dt)if(Dt.isDirectory){const Ct=await Mt(Dt),mt={};for(const{file:jt,path:Vt}of Ct){const On=Vt.split("/"),Wt=On.length>1?On[0]:Dt.name,yi=Kq(Wt);mt[yi]||(mt[yi]=[]),jt.type.startsWith("image/")&&mt[yi].push(jt)}for(const[jt,Vt]of Object.entries(mt))Vt.length>0&&(Vt.sort((On,Wt)=>On.name.localeCompare(Wt.name)),st.push({locale:jt,files:Vt,status:"pending"}))}else{const Ct=Et.getAsFile();if(Ct?.type.startsWith("image/")){const mt=Pe||"en-US",jt=st.find(Vt=>Vt.locale===mt);jt?jt.files.push(Ct):st.push({locale:mt,files:[Ct],status:"pending"})}}}st.length>0?(Kt(st),bt(`Detected ${st.length} locale(s) with screenshots to upload`,"info")):bt("No valid screenshot images found in dropped items","error")},Mt=async(ae,De="")=>{const st=[],Et=ae.createReader(),Dt=()=>new Promise((mt,jt)=>{Et.readEntries(mt,jt)});let Ct=await Dt();for(;Ct.length>0;){for(const mt of Ct){const jt=De?`${De}/${mt.name}`:mt.name;if(mt.isFile){const Vt=await new Promise(On=>mt.file(On));st.push({file:Vt,path:jt})}else if(mt.isDirectory){const Vt=await Mt(mt,jt);st.push(...Vt)}}Ct=await Dt()}return st},zt=ae=>{Kt(De=>De.filter(st=>st.locale!==ae))},It=ae=>ae<1024?ae+" B":ae<1024*1024?(ae/1024).toFixed(1)+" KB":(ae/(1024*1024)).toFixed(1)+" MB",Zt=async()=>{if(Nt.length===0)return;Xn(!0);const ae=Nt.reduce((st,Et)=>st+Et.files.length,0);let De=0;for(const st of Nt){const{locale:Et,files:Dt}=st,Ct=$.find(mt=>mt.locale===Et);if(!Ct){bt(`Locale ${Et} not found in current version, skipping`,"error"),Kt(mt=>mt.map(jt=>jt.locale===Et?{...jt,status:"error"}:jt));continue}Kt(mt=>mt.map(jt=>jt.locale===Et?{...jt,status:"uploading"}:jt));try{const mt=await x4(n,Ct.id);let jt=mt.find(Vt=>Vt.displayType===Qn)?.id;if(!jt)bt(`Creating screenshot set for ${Et} (${Eb[Qn]?.name})...`,"info"),jt=await Zq(n,Ct.id,Qn);else if(Ui){const Vt=mt.find(On=>On.displayType===Qn);if(Vt&&Vt.screenshots.length>0){bt(`Deleting ${Vt.screenshots.length} existing screenshot(s) for ${Et}...`,"info");const On=await nK(n,jt);bt(`Deleted ${On} screenshot(s) for ${Et}`,"success")}}for(const Vt of Dt){Jn({current:De+1,total:ae,currentFile:Vt.name}),bt(`Uploading ${Vt.name} to ${Et} (${It(Vt.size)})...`,"info");const On=await iK(n,jt,Vt,Wt=>{Wt.status==="error"&&bt(`Error uploading ${Vt.name}: ${Wt.error}`,"error")});On.success?bt(`Uploaded ${Vt.name} to ${Et}`,"success"):bt(`Failed to upload ${Vt.name}: ${On.error}`,"error"),De++}Kt(Vt=>Vt.map(On=>On.locale===Et?{...On,status:"done"}:On))}catch(mt){bt(`Error uploading to ${Et}: ${mt.message}`,"error"),Kt(jt=>jt.map(Vt=>Vt.locale===Et?{...Vt,status:"error"}:Vt))}}Xn(!1),Jn({current:0,total:0,currentFile:""}),bt(`Screenshot upload complete! ${De} files uploaded.`,"success"),Be()},Bt=ae=>{je(De=>De.includes(ae)?De.filter(st=>st!==ae):[...De,ae])},$t=ae=>{$e(De=>De.includes(ae)?De.filter(st=>st!==ae):[...De,ae])},Tn=async()=>{if(!$n){bt("Please configure your AI provider API key","error");return}if(Te.length===0){bt("Please select at least one target language","error");return}if(Le.length===0){bt("Please select at least one field to translate","error");return}const ae=$.find(mt=>mt.locale===Pe);if(!ae){bt(`No source localization found for ${Pe}`,"error");return}et(!0),Ae({show:!1,success:!0,message:"",errorCount:0});const De=Te.length;let st=0,Et=0,Dt=0;const Ct={provider:t.provider,apiKey:$n,model:ja,region:t.region};for(const mt of Te){st++,Se({current:st,total:De,status:`Translating to ${ts.find(jt=>jt.code===mt)?.name||mt}...`}),bt(`Translating to ${mt}...`,"info");try{const{results:jt,errors:Vt}=await rK(ae,mt,Ct,Le,Wt=>{Se(yi=>({...yi,status:`${mt}: ${Wt.field} (${Wt.current}/${Wt.total})${Wt.error?" - ERROR":""}`})),Wt.error&&bt(`  ${Wt.field}: ${Wt.error}`,"error")});Vt&&Vt.length>0&&(bt(`${mt}: ${Vt.length} field(s) failed to translate (kept original)`,"error"),Et+=Vt.length);const On=$.find(Wt=>Wt.locale===mt);if(On)await Ig(n,On.id,jt),bt(`Updated ${mt} localization`,"success");else if(await Gq(n,F.id,mt,jt),bt(`Created ${mt} localization`,"success"),G.appInfoId&&!G.localizations.find(yi=>yi.locale===mt)){const yi=G.localizations.find(ji=>ji.locale===Pe);if(yi?.privacyPolicyUrl)try{await Xq(n,G.appInfoId,mt,{privacyPolicyUrl:yi.privacyPolicyUrl}),bt(`Copied privacy policy URL to ${mt}`,"success")}catch(ji){bt(`Note: Could not copy privacy URL to ${mt}: ${ji.message}`,"info")}}Dt++}catch(jt){bt(`Error translating ${mt}: ${jt.message}`,"error"),Et++}}await Ha(F.id),et(!1),Se({current:0,total:0,status:""}),Ae(Et===0?{show:!0,success:!0,message:`Successfully translated to ${Dt} language${Dt!==1?"s":""}!`,errorCount:0}:{show:!0,success:!1,message:`Translation completed with ${Et} error${Et!==1?"s":""}. Some fields kept original text.`,errorCount:Et}),bt("Translation completed!","success")},ei=async()=>{if(!V.versionString.trim()){bt("Please enter a version number","error");return}fe(ae=>({...ae,isCreating:!0}));try{const ae=await Wq(n,U.id,V.versionString.trim(),V.platform);bt(`Created version ${ae.versionString} (${ae.platform})`,"success");const De=await QS(n,U.id);z(De),L(ae),await Ha(ae.id),fe({open:!1,versionString:"",platform:"IOS",isCreating:!1})}catch(ae){bt(`Error creating version: ${ae.message}`,"error"),fe(De=>({...De,isCreating:!1}))}},Pn=(ae,De="version")=>{X({open:!0,locale:ae.locale,localization:{...ae},type:De})},Un=async()=>{if(Ee.localization){try{Ee.type==="version"?await Ig(n,Ee.localization.id,{description:Ee.localization.description,keywords:Ee.localization.keywords,promotionalText:Ee.localization.promotionalText,whatsNew:Ee.localization.whatsNew}):await $3(n,Ee.localization.id,{name:Ee.localization.name,subtitle:Ee.localization.subtitle,privacyPolicyUrl:Ee.localization.privacyPolicyUrl}),bt(`Saved ${Ee.locale} localization`,"success"),await Ha(F.id)}catch(ae){bt(`Error saving: ${ae.message}`,"error")}X({open:!1,locale:"",localization:null,type:"version"})}},Ft=(ae,De,st)=>{re(Et=>({...Et,[ae]:{...Et[ae]||{},[De]:st}}))},_n=(ae,De)=>oe[ae.id]?.hasOwnProperty(De)?oe[ae.id][De]:ae[De]||"",qt=(ae,De)=>oe[ae]?.hasOwnProperty(De),Hi=Object.keys(oe).length>0,Na=Object.values(oe).reduce((ae,De)=>ae+Object.keys(De).length,0),wi=async()=>{if(!Hi)return;le(!0);let ae=0,De=0;for(const[st,Et]of Object.entries(oe)){const Dt=G.localizations.find(mt=>mt.id===st),Ct=ts.find(mt=>mt.code===Dt?.locale)?.name||Dt?.locale||st;for(const[mt,jt]of Object.entries(Et))try{await $3(n,st,{[mt]:jt}),ae++}catch(Vt){De++,Vt.message.includes("can not be modified")?bt(`${Ct}: "${mt}" locked (app not in editable state)`,"error"):bt(`${Ct}: Failed to save "${mt}" - ${Vt.message}`,"error")}}ae>0&&bt(`Saved ${ae} field(s)${De>0?`, ${De} failed`:""}`,ae>0?"success":"error"),re({}),await Ha(F.id),le(!1)},_a=async(ae=null)=>{if(!$n){bt("Please configure your AI provider API key","error");return}const De=G.localizations.find(Wt=>Wt.locale===Pe);if(!De){bt(`No source App Info found for ${Pe}`,"error");return}if(!De.name&&!De.subtitle){bt("Source locale has no name or subtitle to translate","error");return}const st=qe.split(",").map(Wt=>Wt.trim()).filter(Wt=>Wt.length>0),Et=st.length>0?`
CRITICAL: Do NOT translate these words, keep them exactly as-is: ${st.join(", ")}`:"";ze(ae||"all");const Dt=ae?G.localizations.filter(Wt=>Wt.locale===ae):G.localizations.filter(Wt=>Wt.locale!==Pe);if(Dt.length===0){ze(null);return}bt(`Translating App Info to ${Dt.length} locale(s) in parallel...`,"info");const Ct={provider:t.provider,apiKey:$n,model:ja,region:t.region},{translateText:mt}=await t3(async()=>{const{translateText:Wt}=await Promise.resolve().then(()=>Y3);return{translateText:Wt}},void 0),jt=Dt.filter(Wt=>Wt.locale!==Pe).map(async Wt=>{const ji=ts.find(pi=>pi.code===Wt.locale)?.name||Wt.locale;try{const pi={};if(De.name||De.subtitle){const Ei=`Translate to ${ji}. Max 30 chars each. Keep short & catchy.${Et}
Return ONLY a JSON object like: {"name": "...", "subtitle": "..."}

${De.name?`Name: ${De.name}`:""}
${De.subtitle?`Subtitle: ${De.subtitle}`:""}`,cs=await mt(Ei,Pe,Wt.locale,Ct);let Sa;try{const ao=cs.match(/\{[\s\S]*\}/);Sa=ao?JSON.parse(ao[0]):{}}catch{Sa={}}Sa.name&&De.name&&(pi.name=Sa.name.replace(/^["']|["']$/g,"").trim().substring(0,30)),Sa.subtitle&&De.subtitle&&(pi.subtitle=Sa.subtitle.replace(/^["']|["']$/g,"").trim().substring(0,30))}return{targetLoc:Wt,updates:pi,localeName:ji,error:null}}catch(pi){return{targetLoc:Wt,updates:{},localeName:ji,error:pi.message}}}),Vt=await Promise.all(jt);let On=0;for(const{targetLoc:Wt,updates:yi,localeName:ji,error:pi}of Vt){if(pi){bt(`Error translating App Info for ${ji}: ${pi}`,"error");continue}Object.keys(yi).length>0&&(re(Ei=>({...Ei,[Wt.id]:{...Ei[Wt.id]||{},...yi}})),bt(`Translated App Info for ${ji}`,"success"),On++)}ze(null),On>0&&bt(`Done! ${On} locale(s) ready for review. Click "Save All Changes" to confirm.`,"info")},Sn=ts.filter(ae=>ae.code!==Pe),di=$.map(ae=>ae.locale),Mi=[{key:"description",label:"Description",limit:4e3},{key:"whatsNew",label:"What's New",limit:4e3},{key:"promotionalText",label:"Promotional Text",limit:170},{key:"keywords",label:"Keywords",limit:100}],Oi=n.keyId&&n.issuerId&&n.privateKey,Li=n.keyId&&n.issuerId&&JS(n.keyId,n.issuerId),fr=Oi||Li;return x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"relative overflow-hidden rounded-2xl gradient-card border border-border/50 p-8 shadow-xl",children:[x.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),x.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center gap-6",children:[x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[x.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 shadow-lg",children:x.jsx(tM,{className:"h-6 w-6 text-white"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:"App Store Connect"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"Translate your app metadata"})]})]}),x.jsx("p",{className:"text-muted-foreground max-w-xl",children:"Connect to Apple's App Store Connect API to automatically translate your app descriptions, what's new, keywords, and promotional text across all locales."})]}),N.length>0&&x.jsxs("div",{className:"flex gap-4",children:[x.jsxs("div",{className:"text-center px-4 py-3 rounded-xl bg-background/50 border border-border/50",children:[x.jsx("div",{className:"text-2xl font-bold text-blue-500",children:N.length}),x.jsx("div",{className:"text-xs text-muted-foreground",children:"Apps"})]}),F&&x.jsxs("div",{className:"text-center px-4 py-3 rounded-xl bg-background/50 border border-border/50",children:[x.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:$.length}),x.jsx("div",{className:"text-xs text-muted-foreground",children:"Locales"})]})]})]})]}),x.jsxs(ws,{id:"asc-connection",className:"border-border/50 shadow-sm card-hover scroll-mt-6",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/10",children:x.jsx(c5,{className:"h-5 w-5 text-blue-500"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Connect to App Store"}),x.jsx(Ts,{children:"Configure credentials in the sidebar, then connect"})]})]})}),x.jsxs(As,{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.keyId?x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 text-xs font-medium",children:[x.jsx(Ba,{className:"h-3.5 w-3.5"}),"Key ID set"]}):x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-amber-500/10 text-amber-500 text-xs font-medium",children:[x.jsx(Nr,{className:"h-3.5 w-3.5"}),"No Key ID"]}),n.issuerId?x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 text-xs font-medium",children:[x.jsx(Ba,{className:"h-3.5 w-3.5"}),"Issuer ID set"]}):x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-amber-500/10 text-amber-500 text-xs font-medium",children:[x.jsx(Nr,{className:"h-3.5 w-3.5"}),"No Issuer ID"]}),n.privateKey?x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 text-xs font-medium",children:[x.jsx(Ba,{className:"h-3.5 w-3.5"}),"Private key loaded"]}):m?x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-blue-500/10 text-blue-500 text-xs font-medium",children:[x.jsx(a0,{className:"h-3.5 w-3.5"}),"Key encrypted"]}):x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-amber-500/10 text-amber-500 text-xs font-medium",children:[x.jsx(Nr,{className:"h-3.5 w-3.5"}),"No .p8 key"]})]}),!n.privateKey&&m&&x.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-blue-500/5 border border-blue-500/20",children:[x.jsx(xa,{type:"password",placeholder:"Enter password to unlock key...",value:g,onChange:ae=>{y(ae.target.value),T("")},onKeyDown:ae=>ae.key==="Enter"&&w(),className:"h-9 text-sm flex-1 max-w-[250px]"}),x.jsx(Nn,{size:"sm",onClick:w,disabled:_,className:"h-9",children:_?x.jsx(Ks,{className:"h-4 w-4 animate-spin"}):"Unlock"}),A&&x.jsx("span",{className:"text-xs text-red-500",children:A})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Nn,{onClick:Os,disabled:i||!fr,className:N.length>0?"":"gradient-primary border-0",children:i?x.jsxs(x.Fragment,{children:[x.jsx(Ks,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):N.length>0?"Reconnect":"Connect to App Store"}),r&&x.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${r.success?"bg-emerald-500/10 text-emerald-500":"bg-red-500/10 text-red-500"}`,children:[r.success?x.jsx(Ba,{className:"h-4 w-4"}):x.jsx(Nr,{className:"h-4 w-4"}),x.jsx("span",{className:"text-sm font-medium",children:r.message})]}),c>0&&!n.privateKey&&x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 text-xs font-medium font-mono",children:[x.jsx(a0,{className:"h-3.5 w-3.5"}),f(c)]})]}),!fr&&x.jsx("p",{className:"text-sm text-muted-foreground px-4 py-3 rounded-lg bg-muted/30 border border-border/50",children:"Configure your App Store Connect credentials in the sidebar to get started."})]})]}),N.length>0&&x.jsxs(ws,{id:"asc-app-version",className:"border-border/50 shadow-sm card-hover scroll-mt-6",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[U?.iconUrl?x.jsx("img",{src:U.iconUrl,alt:U.name,className:"h-10 w-10 rounded-xl shadow-sm"}):x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-violet-500/10",children:x.jsx(R2,{className:"h-5 w-5 text-violet-500"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Select App & Version"}),x.jsx(Ts,{children:"Choose which app version to translate"})]})]})}),x.jsx(As,{className:"space-y-4",children:x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{className:"text-sm font-medium",children:"App"}),x.jsxs("select",{value:U?.id||"",onChange:ae=>Pr(ae.target.value),disabled:I,className:"w-full h-10 rounded-lg border border-input bg-background px-4 text-sm font-medium focus:border-primary/50 focus:outline-none transition-colors",children:[x.jsx("option",{value:"",children:"Select an app..."}),N.map(ae=>x.jsxs("option",{value:ae.id,children:[ae.name," (",ae.bundleId,")"]},ae.id))]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{className:"text-sm font-medium",children:"Version"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("select",{value:F?.id||"",onChange:ae=>Ha(ae.target.value),disabled:q||!U,className:"flex-1 h-10 rounded-lg border border-input bg-background px-4 text-sm font-medium focus:border-primary/50 focus:outline-none transition-colors",children:[x.jsx("option",{value:"",children:"Select a version..."}),B.map(ae=>x.jsxs("option",{value:ae.id,children:["v",ae.versionString," (",ae.platform,") - ",ae.state]},ae.id))]}),x.jsx(Nn,{variant:"outline",size:"sm",onClick:()=>fe(ae=>({...ae,open:!0})),disabled:!U,className:"h-10 w-10 p-0",title:"Create new version",children:x.jsx(d5,{className:"h-4 w-4"})})]})]})]})})]}),F&&x.jsxs(ws,{id:"asc-localizations",className:"border-border/50 shadow-sm scroll-mt-6",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-500/10",children:x.jsx(D2,{className:"h-5 w-5 text-emerald-500"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Current Localizations"}),x.jsxs(Ts,{children:["View and edit existing localizations for v",F.versionString]})]})]}),zn.length>0&&x.jsx(Nn,{onClick:hi,disabled:ee,variant:"outline",size:"sm",className:"h-9",children:ee?x.jsxs(x.Fragment,{children:[x.jsx(Ks,{className:"h-4 w-4 mr-2 animate-spin"}),"Copying..."]}):x.jsxs(x.Fragment,{children:[x.jsx(f3,{className:"h-4 w-4 mr-2"}),"Copy from Previous (",zn.length,")"]})})]})}),x.jsx(As,{children:Q?x.jsxs("div",{className:"flex items-center justify-center py-12 text-muted-foreground",children:[x.jsx(Ks,{className:"h-6 w-6 animate-spin mr-3"}),x.jsx("span",{children:"Loading localizations..."})]}):$.length===0?x.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[x.jsx(l5,{className:"h-10 w-10 mb-3 opacity-30"}),x.jsx("p",{className:"font-medium",children:"No localizations found"}),x.jsx("p",{className:"text-sm",children:"Add translations using the section below"})]}):x.jsxs("div",{className:"space-y-6",children:[zn.length>0&&x.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-amber-500/10 border border-amber-500/20",children:[x.jsx(f3,{className:"h-5 w-5 text-amber-500 shrink-0"}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("p",{className:"text-sm font-medium text-amber-500",children:[zn.length," locale(s) have empty What's New or Promo Text"]}),x.jsx("p",{className:"text-xs text-amber-500/70 mt-0.5",children:"Content available from previous version can be copied"})]})]}),x.jsxs("div",{children:[x.jsxs("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[x.jsx(D2,{className:"h-4 w-4 text-muted-foreground"}),"Version Content"]}),x.jsx("div",{className:"rounded-xl border border-border/50 overflow-hidden",children:x.jsxs(z2,{children:[x.jsx(P2,{children:x.jsxs(Tf,{className:"bg-muted/30 hover:bg-muted/30",children:[x.jsx(Ao,{className:"w-[150px] font-semibold",children:"Locale"}),x.jsx(Ao,{className:"font-semibold",children:"Description"}),x.jsx(Ao,{className:"w-[120px] font-semibold",children:"What's New"}),x.jsx(Ao,{className:"w-[100px] font-semibold",children:"Actions"})]})}),x.jsx(I2,{children:$.map(ae=>{const De=ts.find(st=>st.code===ae.locale);return x.jsxs(Tf,{className:"group hover:bg-muted/20",children:[x.jsx(Zs,{children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-lg",children:De?.flag||""}),x.jsx("span",{className:"font-medium text-sm",children:De?.name||ae.locale})]})}),x.jsx(Zs,{className:"max-w-[300px]",children:x.jsx("span",{className:"text-sm text-muted-foreground truncate block",children:ae.description?ae.description.substring(0,80)+"...":x.jsx("span",{className:"italic text-muted-foreground/50",children:"No description"})})}),x.jsx(Zs,{children:ae.whatsNew?x.jsxs("div",{className:"flex items-center gap-1.5 text-emerald-500",children:[x.jsx(Ba,{className:"h-4 w-4"}),x.jsx("span",{className:"text-xs font-medium",children:"Added"})]}):x.jsx("span",{className:"text-xs text-muted-foreground/50 italic",children:"Empty"})}),x.jsx(Zs,{children:x.jsxs(Nn,{variant:"ghost",size:"sm",onClick:()=>Pn(ae,"version"),className:"h-8 px-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[x.jsx(r0,{className:"h-3.5 w-3.5 mr-1.5"}),"Edit"]})})]},ae.id)})})]})})]}),G.localizations.length>0&&x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[x.jsx(R2,{className:"h-4 w-4 text-muted-foreground"}),"App Info (Name, Subtitle, Privacy Policy URL)"]}),x.jsx("div",{className:"flex items-center gap-2",children:Hi&&x.jsx(Nn,{size:"sm",onClick:wi,disabled:se,className:"gradient-primary border-0",children:se?x.jsxs(x.Fragment,{children:[x.jsx(Ks,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Save All Changes (",Na,")"]})})})]}),x.jsxs("div",{className:"flex items-center gap-3 mb-3 p-3 rounded-xl bg-muted/30 border border-border/50",children:[x.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Protected words:"}),x.jsx(xa,{placeholder:"Chill, Pro, Plus...",value:qe,onChange:ae=>Ke(ae.target.value),className:"h-8 text-sm flex-1 max-w-[200px]"}),x.jsx("span",{className:"text-xs text-muted-foreground",children:"Won't be translated"})]}),x.jsx(Nn,{size:"sm",variant:"outline",onClick:()=>_a(),disabled:ve||!$n,className:"gap-2",children:ve==="all"?x.jsxs(x.Fragment,{children:[x.jsx(Ks,{className:"h-4 w-4 animate-spin"}),"Translating..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Kl,{className:"h-4 w-4"}),"Translate All"]})})]}),x.jsx("div",{className:"rounded-xl border border-border/50 overflow-hidden",children:x.jsxs(z2,{children:[x.jsx(P2,{children:x.jsxs(Tf,{className:"bg-muted/30 hover:bg-muted/30",children:[x.jsx(Ao,{className:"w-[140px] font-semibold",children:"Locale"}),x.jsx(Ao,{className:"w-[180px] font-semibold",children:"Name (30)"}),x.jsx(Ao,{className:"w-[200px] font-semibold",children:"Subtitle (30)"}),x.jsx(Ao,{className:"w-[180px] font-semibold",children:"Privacy URL"}),x.jsx(Ao,{className:"w-[50px]"})]})}),x.jsx(I2,{children:G.localizations.map(ae=>{const De=ts.find(Ct=>Ct.code===ae.locale),st=oe.hasOwnProperty(ae.id),Et=ae.locale===Pe,Dt=ve===ae.locale;return x.jsxs(Tf,{className:st?"bg-amber-500/5":"hover:bg-muted/20",children:[x.jsx(Zs,{children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-lg",children:De?.flag||""}),x.jsx("span",{className:"font-medium text-sm",children:De?.name||ae.locale}),Et&&x.jsx(ll,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:"Source"})]})}),x.jsx(Zs,{children:x.jsx(xa,{placeholder:"App Name",value:_n(ae,"name"),onChange:Ct=>Ft(ae.id,"name",Ct.target.value),maxLength:30,className:`text-sm h-9 ${qt(ae.id,"name")?"border-amber-500 bg-amber-500/5":""}`})}),x.jsx(Zs,{children:x.jsx(xa,{placeholder:"Subtitle",value:_n(ae,"subtitle"),onChange:Ct=>Ft(ae.id,"subtitle",Ct.target.value),maxLength:30,className:`text-sm h-9 ${qt(ae.id,"subtitle")?"border-amber-500 bg-amber-500/5":""}`})}),x.jsx(Zs,{children:x.jsx(xa,{type:"url",placeholder:"https://...",value:_n(ae,"privacyPolicyUrl"),onChange:Ct=>Ft(ae.id,"privacyPolicyUrl",Ct.target.value),className:`text-sm h-9 ${qt(ae.id,"privacyPolicyUrl")?"border-amber-500 bg-amber-500/5":""}`})}),x.jsx(Zs,{children:!Et&&x.jsx(Nn,{size:"sm",variant:"ghost",onClick:()=>_a(ae.locale),disabled:ve||!$n,className:"h-8 w-8 p-0",title:"Translate this locale",children:Dt?x.jsx(Ks,{className:"h-4 w-4 animate-spin"}):x.jsx(Kl,{className:"h-4 w-4"})})})]},ae.id)})})]})})]})]})})]}),F&&$.length>0&&x.jsxs(ws,{id:"asc-aso-keywords",className:"border-border/50 shadow-sm scroll-mt-6",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-orange-500 to-amber-500 shadow-lg",children:x.jsx(O2,{className:"h-5 w-5 text-white"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"ASO Keywords"}),x.jsx(Ts,{children:"Optimize keywords for each locale using AI"})]})]})}),x.jsxs(As,{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-gradient-to-r from-orange-500/10 to-amber-500/10 border border-orange-500/20",children:[x.jsx(U2,{className:"h-5 w-5 text-orange-500 mt-0.5 shrink-0"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-foreground",children:"Smart Keyword Generation"}),x.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Generate optimized, country-specific keywords based on your app description. Keywords are tailored for each market, not just translated."})]})]}),x.jsx("div",{className:"space-y-2",children:$.map(ae=>{const De=ts.find(mt=>mt.code===ae.locale),st=it.includes(ae.locale),Et=we===ae.locale,Dt=ae.keywords?ae.keywords.split(",").length:0,Ct=ae.keywords?.length||0;return x.jsxs("div",{className:"rounded-xl border border-border/50 overflow-hidden transition-all duration-200 hover:border-border",children:[x.jsxs("div",{className:"flex items-center gap-3 p-4 cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>kt(ae.locale),children:[x.jsx("span",{className:"text-xl",children:De?.flag||""}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"font-medium text-sm",children:De?.name||ae.locale}),ae.keywords?x.jsxs(ll,{variant:"outline",className:"text-xs",children:[Dt," keywords"]}):x.jsx(ll,{variant:"secondary",className:"text-xs text-muted-foreground",children:"No keywords"})]}),ae.keywords&&x.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:ae.keywords})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[ae.keywords&&x.jsxs("span",{className:`text-xs font-mono ${Ct>90?"text-amber-500":"text-muted-foreground"}`,children:[Ct,"/100"]}),x.jsx(vb,{className:`h-4 w-4 text-muted-foreground transition-transform ${st?"rotate-180":""}`})]})]}),st&&x.jsx("div",{className:"px-4 pb-4 pt-2 border-t border-border/50 bg-muted/20",children:x.jsxs("div",{className:"space-y-3",children:[xt===ae.locale?x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground",children:"Edit Keywords"}),x.jsxs("span",{className:`text-xs font-mono ${Fe.length>90?"text-amber-500":Fe.length>100?"text-red-500":"text-muted-foreground"}`,children:[Fe.length,"/100"]})]}),x.jsx(Vg,{value:Fe,onChange:mt=>Ze(mt.target.value),placeholder:"keyword1,keyword2,keyword3",className:"min-h-[80px] text-sm font-mono resize-none",maxLength:100,onClick:mt=>mt.stopPropagation()}),x.jsx("p",{className:"text-xs text-muted-foreground",children:"Separate keywords with commas. No spaces after commas."})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx(Nn,{onClick:mt=>{mt.stopPropagation(),Ge(ae.locale)},disabled:rt||Fe.length>100,size:"sm",className:"flex-1 h-9",children:rt?x.jsxs(x.Fragment,{children:[x.jsx(Ks,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Save Keywords"]})}),x.jsx(Nn,{onClick:mt=>{mt.stopPropagation(),Me()},variant:"outline",size:"sm",className:"h-9",disabled:rt,children:"Cancel"})]})]}):x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground",children:"Current Keywords"}),x.jsxs(Nn,{onClick:mt=>{mt.stopPropagation(),Z(ae.locale,ae.keywords)},variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",children:[x.jsx(r0,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),ae.keywords?x.jsx("div",{className:"flex flex-wrap gap-1.5 p-3 rounded-lg bg-background/50 border border-border/30 cursor-pointer hover:border-primary/30 transition-colors",onClick:mt=>{mt.stopPropagation(),Z(ae.locale,ae.keywords)},children:ae.keywords.split(",").map((mt,jt)=>x.jsx("span",{className:"px-2.5 py-1 rounded-lg bg-background border border-border/50 text-xs font-medium hover:border-primary/50 hover:bg-primary/5 transition-colors",children:mt.trim()},jt))}):x.jsxs("div",{className:"p-4 rounded-lg bg-background/50 border border-dashed border-border/50 cursor-pointer hover:border-primary/30 transition-colors text-center",onClick:mt=>{mt.stopPropagation(),Z(ae.locale,"")},children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"No keywords set"}),x.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Click to add keywords"})]})]}),xt!==ae.locale&&x.jsxs(x.Fragment,{children:[x.jsx(Nn,{onClick:mt=>{mt.stopPropagation(),ba(ae.locale)},disabled:Et||!$n,variant:"outline",size:"sm",className:"w-full h-9",children:Et?x.jsxs(x.Fragment,{children:[x.jsx(Ks,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating optimized keywords..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Kl,{className:"h-4 w-4 mr-2"}),ae.keywords?"AI Regenerate Keywords":"AI Generate Keywords"]})}),!$n&&x.jsxs("p",{className:"text-xs text-amber-500 flex items-center gap-1",children:[x.jsx(Nr,{className:"h-3 w-3"}),"Configure AI API key in sidebar"]})]})]})})]},ae.id)})}),x.jsx("div",{className:"pt-2",children:x.jsxs(Nn,{onClick:async()=>{for(const ae of $)await ba(ae.locale)},disabled:we!==null||!$n,className:"w-full h-11 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 border-0",children:[x.jsx(O2,{className:"h-4 w-4 mr-2"}),"Generate Keywords for All Locales (",$.length,")"]})})]})]}),F&&$.length>0&&x.jsxs(ws,{id:"asc-screenshots",className:"border-border/50 shadow-sm scroll-mt-6",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 shadow-lg",children:x.jsx(ad,{className:"h-5 w-5 text-white"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Screenshots"}),x.jsx(Ts,{children:"View screenshots for each locale"})]})]}),x.jsx(Nn,{onClick:Be,disabled:tt,variant:Object.keys(Ut).length>0?"outline":"default",size:"sm",className:Object.keys(Ut).length>0?"h-9":"h-9 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 border-0",children:tt?x.jsxs(x.Fragment,{children:[x.jsx(Ks,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):Object.keys(Ut).length>0?x.jsxs(x.Fragment,{children:[x.jsx(zG,{className:"h-4 w-4 mr-2"}),"Refresh"]}):x.jsxs(x.Fragment,{children:[x.jsx(ad,{className:"h-4 w-4 mr-2"}),"Load Screenshots"]})})]})}),x.jsxs(As,{children:[Object.keys(Ut).length===0?x.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[x.jsx(ad,{className:"h-10 w-10 mb-3 opacity-30"}),x.jsx("p",{className:"font-medium",children:"No screenshots loaded"}),x.jsx("p",{className:"text-sm mt-1",children:'Click "Load Screenshots" to view all locale screenshots'})]}):x.jsx("div",{className:"space-y-2",children:$.map(ae=>{const De=ts.find(Ct=>Ct.code===ae.locale),st=Ut[ae.locale],Et=ge.includes(ae.locale),Dt=st?.totalScreenshots||0;return x.jsxs("div",{className:"rounded-xl border border-border/50 overflow-hidden transition-all duration-200 hover:border-border",children:[x.jsxs("div",{className:"flex items-center gap-3 p-4 cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>Ue(ae.locale),children:[x.jsx("span",{className:"text-xl",children:De?.flag||""}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"font-medium text-sm",children:De?.name||ae.locale}),Dt>0?x.jsxs(ll,{variant:"outline",className:"text-xs",children:[Dt," screenshot",Dt!==1?"s":""]}):x.jsx(ll,{variant:"secondary",className:"text-xs text-muted-foreground",children:"No screenshots"})]}),st?.sets?.length>0&&x.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[st.sets.length," device type",st.sets.length!==1?"s":""]})]}),x.jsx(vb,{className:`h-4 w-4 text-muted-foreground transition-transform ${Et?"rotate-180":""}`})]}),Et&&st&&x.jsx("div",{className:"px-4 pb-4 pt-2 border-t border-border/50 bg-muted/20",children:st.error?x.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[x.jsx(Nr,{className:"h-4 w-4"}),x.jsx("span",{children:st.error})]}):st.sets.length===0?x.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No screenshot sets found"}):x.jsx("div",{className:"space-y-4",children:st.sets.map(Ct=>{const mt=wt(Ct.displayType);return x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(mt,{className:"h-4 w-4 text-muted-foreground"}),x.jsx("span",{className:"text-sm font-medium",children:Ct.displayInfo.name}),x.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",Ct.displayInfo.device,")"]}),x.jsx(ll,{variant:"outline",className:"text-xs ml-auto",children:Ct.screenshots.length})]}),Ct.screenshots.length>0&&x.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Ct.screenshots.map((jt,Vt)=>x.jsxs("div",{className:"flex-shrink-0 relative group cursor-pointer",onClick:()=>Ie({open:!0,screenshot:jt,locale:De?.name||ae.locale,deviceType:Ct.displayInfo.name}),children:[jt.imageAsset?.templateUrl?x.jsx("img",{src:jt.imageAsset.templateUrl.replace("{w}","150").replace("{h}","300").replace("{f}","png"),alt:jt.fileName,className:"h-32 w-auto rounded-lg border border-border/50 object-cover hover:border-primary/50 hover:scale-105 transition-all duration-200"}):x.jsx("div",{className:"h-32 w-16 rounded-lg border border-border/50 bg-muted/50 flex items-center justify-center",children:x.jsx(ad,{className:"h-6 w-6 text-muted-foreground/50"})}),x.jsx("div",{className:"absolute bottom-1 left-1 right-1 text-center",children:x.jsx("span",{className:"text-[10px] bg-black/60 text-white px-1.5 py-0.5 rounded",children:Vt+1})})]},jt.id))})]},Ct.id)})})})]},ae.id)})}),x.jsxs("div",{className:"mt-6 pt-6 border-t border-border/50",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(s0,{className:"h-5 w-5 text-pink-500"}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium text-sm",children:"Upload Screenshots"}),x.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag & drop a folder with language subfolders (en, fr, de...)"})]})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Target Device"}),x.jsx("select",{value:Qn,onChange:ae=>Si(ae.target.value),className:"w-full h-9 rounded-lg bg-muted/30 border border-border/50 px-3 text-sm focus:border-primary/50 focus:outline-none transition-colors",children:Object.entries(Eb).map(([ae,De])=>x.jsxs("option",{value:ae,children:[De.name," - ",De.device]},ae))})]}),x.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-muted/20 border border-border/30",children:[x.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:Ui,onChange:ae=>ai(ae.target.checked),className:"h-4 w-4 rounded border-border text-pink-500 focus:ring-pink-500"}),x.jsx("span",{className:"text-sm",children:"Replace existing screenshots"})]}),Ui&&x.jsxs("p",{className:"text-xs text-amber-500 flex items-center gap-1 mt-2",children:[x.jsx(Nr,{className:"h-3 w-3"}),"Existing screenshots for the selected device type will be deleted before uploading"]})]}),x.jsxs("div",{onDragOver:ae=>{ae.preventDefault(),yt(!0)},onDragLeave:ae=>{ae.preventDefault(),yt(!1)},onDrop:At,className:`
                  relative rounded-xl border-2 border-dashed p-8 text-center transition-all duration-200
                  ${pt?"border-pink-500 bg-pink-500/10 scale-[1.02]":"border-border/50 hover:border-pink-500/50 hover:bg-muted/30"}
                `,children:[x.jsx(gG,{className:`h-10 w-10 mx-auto mb-3 ${pt?"text-pink-500":"text-muted-foreground/50"}`}),x.jsx("p",{className:`font-medium ${pt?"text-pink-500":"text-muted-foreground"}`,children:pt?"Drop your folder here!":"Drop screenshot folder here"}),x.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Folder structure: /en/*.png, /fr/*.png, /de/*.png..."})]}),Nt.length>0&&x.jsxs("div",{className:"mt-4 space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h5",{className:"text-sm font-medium",children:"Upload Queue"}),x.jsx(Nn,{variant:"ghost",size:"sm",onClick:()=>Kt([]),disabled:dn,className:"h-7 text-xs text-muted-foreground hover:text-destructive",children:"Clear all"})]}),x.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Nt.map(({locale:ae,files:De,status:st})=>{const Et=ts.find(Ct=>Ct.code===ae),Dt=$.find(Ct=>Ct.locale===ae);return x.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-colors ${st==="done"?"bg-emerald-500/10 border-emerald-500/30":st==="error"?"bg-red-500/10 border-red-500/30":st==="uploading"?"bg-pink-500/10 border-pink-500/30":"bg-muted/30 border-border/50"}`,children:[x.jsx("span",{className:"text-xl",children:Et?.flag||""}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"font-medium text-sm",children:Et?.name||ae}),x.jsxs(ll,{variant:"outline",className:"text-xs",children:[De.length," file",De.length!==1?"s":""]}),!Dt&&x.jsx(ll,{variant:"destructive",className:"text-xs",children:"Not in version"})]}),x.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:De.map(Ct=>Ct.name).join(", ")})]}),st==="uploading"?x.jsx(Ks,{className:"h-4 w-4 animate-spin text-pink-500"}):st==="done"?x.jsx(Ba,{className:"h-4 w-4 text-emerald-500"}):st==="error"?x.jsx(Nr,{className:"h-4 w-4 text-red-500"}):x.jsx("button",{onClick:()=>zt(ae),className:"p-1 rounded hover:bg-muted transition-colors",children:x.jsx(g1,{className:"h-4 w-4 text-muted-foreground"})})]},ae)})}),dn&&Rn.total>0&&x.jsxs("div",{className:"p-3 rounded-lg bg-pink-500/10 border border-pink-500/30",children:[x.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[x.jsx("span",{className:"text-pink-500 font-medium",children:"Uploading..."}),x.jsxs("span",{className:"text-muted-foreground",children:[Rn.current,"/",Rn.total]})]}),x.jsx("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:x.jsx("div",{className:"h-full bg-pink-500 transition-all duration-300",style:{width:`${Rn.current/Rn.total*100}%`}})}),x.jsx("p",{className:"text-xs text-muted-foreground mt-2 truncate",children:Rn.currentFile})]}),x.jsx(Nn,{onClick:Zt,disabled:dn||Nt.every(ae=>ae.status==="done"),className:"w-full h-10 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 border-0",children:dn?x.jsxs(x.Fragment,{children:[x.jsx(Ks,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):x.jsxs(x.Fragment,{children:[x.jsx(s0,{className:"h-4 w-4 mr-2"}),"Upload ",Nt.reduce((ae,De)=>ae+De.files.length,0)," Screenshots"]})})]})]})]})]}),F&&$.length>0&&x.jsxs(ws,{id:"asc-translation",className:"border-border/50 shadow-sm scroll-mt-6",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl gradient-primary shadow-lg",children:x.jsx(Kl,{className:"h-5 w-5 text-white"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"AI Translation"}),x.jsx(Ts,{children:"Auto-translate metadata to other languages"})]})]})}),x.jsxs(As,{className:"space-y-5",children:[x.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-muted/30 border border-border/50",children:[x.jsx("span",{className:"text-sm text-muted-foreground",children:"Using:"}),x.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-background",children:[x.jsx("span",{className:"text-sm font-medium",children:Qs[t.provider]?.name||t.provider}),x.jsx("span",{className:"text-muted-foreground",children:"/"}),x.jsx("span",{className:"text-sm text-muted-foreground",children:ja?.includes("inference-profile/")?ja.split("/").pop().replace("global.anthropic.","").replace(/-v\d+:\d+$/,""):ja||"No model"})]}),!$n&&x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-amber-500/10 text-amber-500 text-xs font-medium ml-auto",children:[x.jsx(Nr,{className:"h-3.5 w-3.5"}),"Configure API key in sidebar"]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{className:"text-sm font-medium",children:"Source Language"}),x.jsx("select",{value:Pe,onChange:ae=>gt(ae.target.value),className:"w-full h-10 rounded-lg border border-input bg-background px-4 text-sm font-medium max-w-xs focus:border-primary/50 focus:outline-none transition-colors",children:$.map(ae=>{const De=ts.find(st=>st.code===ae.locale);return x.jsxs("option",{value:ae.locale,children:[De?.flag," ",De?.name||ae.locale]},ae.locale)})})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx(xi,{className:"text-sm font-medium",children:"Fields to Translate"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:Mi.map(ae=>{const De=Le.includes(ae.key);return x.jsxs("button",{onClick:()=>$t(ae.key),className:`
                        flex items-center gap-2 px-4 py-2.5 rounded-xl border text-sm font-medium transition-all duration-200
                        ${De?"border-primary bg-primary/10 text-foreground shadow-sm":"border-border/50 bg-background hover:border-border hover:bg-muted/30"}
                      `,children:[x.jsx("div",{className:`
                        flex h-4 w-4 items-center justify-center rounded border-2 transition-all
                        ${De?"bg-primary border-primary":"border-muted-foreground/30"}
                      `,children:De&&x.jsx("svg",{className:"h-2.5 w-2.5 text-primary-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),x.jsx("span",{children:ae.label}),x.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",ae.limit,")"]})]},ae.key)})})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx(xi,{className:"text-sm font-medium",children:"Target Languages"}),x.jsx(Nn,{variant:"outline",size:"sm",onClick:()=>{Te.length===Sn.length?je([]):je(Sn.map(ae=>ae.code))},className:"h-9",children:Te.length===Sn.length?"Deselect All":"Select All"})]}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:Sn.map(ae=>{const De=di.includes(ae.code),st=Te.includes(ae.code);return x.jsxs("button",{onClick:()=>Bt(ae.code),className:`
                        flex items-center gap-2 p-3 rounded-xl border text-left transition-all duration-200
                        ${st?"border-primary bg-primary/5 shadow-sm":De?"border-emerald-500/30 bg-emerald-500/5 hover:border-emerald-500/50":"border-border/50 bg-background hover:border-border hover:bg-muted/30"}
                      `,children:[x.jsx("div",{className:`
                        flex h-4 w-4 items-center justify-center rounded border-2 transition-all
                        ${st?"bg-primary border-primary":"border-muted-foreground/30"}
                      `,children:st&&x.jsx("svg",{className:"h-2.5 w-2.5 text-primary-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),x.jsx("span",{className:"text-lg",children:ae.flag}),x.jsx("span",{className:"text-sm font-medium flex-1",children:ae.name}),De&&x.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-500",children:x.jsx(Ba,{className:"h-3 w-3"})})]},ae.code)})})]}),x.jsx(Nn,{onClick:Tn,disabled:J||!$n||Te.length===0||Le.length===0,className:"w-full h-12 text-base font-semibold gradient-primary border-0",size:"lg",children:J?x.jsxs(x.Fragment,{children:[x.jsx(Ks,{className:"h-5 w-5 mr-2 animate-spin"}),"Translating..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Kl,{className:"h-5 w-5 mr-2"}),"Translate to ",Te.length," language",Te.length!==1?"s":""]})}),J&&x.jsxs("div",{className:"space-y-4 p-5 rounded-xl bg-gradient-to-br from-primary/5 to-primary/10 border border-primary/20",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"h-2 w-2 rounded-full bg-primary animate-pulse"}),x.jsx("span",{className:"text-sm font-medium",children:"Translation in progress"})]}),x.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:[We.current," / ",We.total]})]}),x.jsx("div",{className:"relative h-3 rounded-full bg-background overflow-hidden",children:x.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full gradient-primary transition-all duration-300",style:{width:`${We.current/We.total*100}%`}})}),x.jsx("p",{className:"text-sm text-muted-foreground",children:We.status})]}),Ce.show&&x.jsxs("div",{className:`relative flex items-start gap-3 p-4 rounded-xl border ${Ce.success?"bg-emerald-500/10 border-emerald-500/20 text-emerald-500":"bg-red-500/10 border-red-500/20 text-red-500"}`,children:[Ce.success?x.jsx(Ba,{className:"h-5 w-5 mt-0.5"}):x.jsx(Nr,{className:"h-5 w-5 mt-0.5"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-semibold",children:Ce.success?"Success!":"Completed with errors"}),x.jsx("p",{className:"text-sm opacity-80",children:Ce.message})]}),x.jsx("button",{onClick:()=>Ae(ae=>({...ae,show:!1})),className:"p-1 rounded-lg hover:bg-background/50 transition-colors",children:x.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),x.jsxs(ws,{id:"asc-logs",className:"border-border/50 shadow-sm scroll-mt-6",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-500/10",children:x.jsx(A0,{className:"h-5 w-5 text-slate-500"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Activity Log"}),x.jsx(Ts,{children:"Track API calls and events"})]})]})}),x.jsx(As,{children:x.jsx(A5,{className:"h-48 rounded-xl border border-border/50 bg-muted/20",children:jn.length===0?x.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[x.jsx(A0,{className:"h-8 w-8 mb-2 opacity-50"}),x.jsx("p",{className:"text-sm",children:"No activity yet"})]}):x.jsx("div",{className:"p-4 space-y-2",children:jn.map((ae,De)=>x.jsxs("div",{className:`flex items-start gap-3 text-sm py-1.5 px-3 rounded-lg transition-colors ${ae.type==="error"?"bg-red-500/10":ae.type==="success"?"bg-emerald-500/10":"hover:bg-muted/50"}`,children:[x.jsx("span",{className:`mt-0.5 ${ae.type==="error"?"text-red-500":ae.type==="success"?"text-emerald-500":"text-muted-foreground"}`,children:ae.type==="error"?x.jsx(Nr,{className:"h-4 w-4"}):ae.type==="success"?x.jsx(Ba,{className:"h-4 w-4"}):x.jsx(a0,{className:"h-4 w-4"})}),x.jsx("span",{className:"font-mono text-xs text-muted-foreground shrink-0 pt-0.5",children:ae.timestamp}),x.jsx("span",{className:`break-all ${ae.type==="error"?"text-red-400":ae.type==="success"?"text-emerald-400":"text-foreground"}`,children:ae.message})]},De))})})})]}),x.jsx(gy,{open:Ee.open,onOpenChange:ae=>!ae&&X({...Ee,open:!1}),children:x.jsxs(vy,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[x.jsxs(F2,{children:[x.jsx(H2,{children:"Edit Localization"}),x.jsxs(V2,{children:[ts.find(ae=>ae.code===Ee.locale)?.flag," ",ts.find(ae=>ae.code===Ee.locale)?.name||Ee.locale]})]}),Ee.localization&&Ee.type==="version"&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{children:"Description (max 4000 chars)"}),x.jsx(Vg,{value:Ee.localization.description,onChange:ae=>X(De=>({...De,localization:{...De.localization,description:ae.target.value}})),rows:6,maxLength:4e3}),x.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ee.localization.description?.length||0,"/4000"]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{children:"What's New (max 4000 chars)"}),x.jsx(Vg,{value:Ee.localization.whatsNew,onChange:ae=>X(De=>({...De,localization:{...De.localization,whatsNew:ae.target.value}})),rows:4,maxLength:4e3}),x.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ee.localization.whatsNew?.length||0,"/4000"]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{children:"Promotional Text (max 170 chars)"}),x.jsx(Vg,{value:Ee.localization.promotionalText,onChange:ae=>X(De=>({...De,localization:{...De.localization,promotionalText:ae.target.value}})),rows:2,maxLength:170}),x.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ee.localization.promotionalText?.length||0,"/170"]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{children:"Keywords (max 100 chars, comma-separated)"}),x.jsx(xa,{value:Ee.localization.keywords,onChange:ae=>X(De=>({...De,localization:{...De.localization,keywords:ae.target.value}})),maxLength:100}),x.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ee.localization.keywords?.length||0,"/100"]})]})]}),Ee.localization&&Ee.type==="appInfo"&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{children:"App Name (max 30 chars)"}),x.jsx(xa,{value:Ee.localization.name,onChange:ae=>X(De=>({...De,localization:{...De.localization,name:ae.target.value}})),maxLength:30})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{children:"Subtitle (max 30 chars)"}),x.jsx(xa,{value:Ee.localization.subtitle,onChange:ae=>X(De=>({...De,localization:{...De.localization,subtitle:ae.target.value}})),maxLength:30})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{children:"Privacy Policy URL"}),x.jsx(xa,{type:"url",placeholder:"https://example.com/privacy",value:Ee.localization.privacyPolicyUrl,onChange:ae=>X(De=>({...De,localization:{...De.localization,privacyPolicyUrl:ae.target.value}}))})]})]}),x.jsxs(j2,{children:[x.jsx(Nn,{variant:"outline",onClick:()=>X({...Ee,open:!1}),children:"Cancel"}),x.jsx(Nn,{onClick:Un,children:"Save to App Store Connect"})]})]})}),x.jsx(gy,{open:V.open,onOpenChange:ae=>!ae&&fe(De=>({...De,open:!1})),children:x.jsxs(vy,{className:"sm:max-w-[400px]",children:[x.jsxs(F2,{children:[x.jsx(H2,{children:"Create New Version"}),x.jsxs(V2,{children:["Create a new App Store version for ",U?.name]})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{children:"Version Number"}),x.jsx(xa,{placeholder:"1.0.0",value:V.versionString,onChange:ae=>fe(De=>({...De,versionString:ae.target.value}))})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{children:"Platform"}),x.jsxs("select",{value:V.platform,onChange:ae=>fe(De=>({...De,platform:ae.target.value})),className:"w-full h-9 rounded-md border border-input bg-background px-3 text-sm",children:[x.jsx("option",{value:"IOS",children:"iOS"}),x.jsx("option",{value:"MAC_OS",children:"macOS"}),x.jsx("option",{value:"TV_OS",children:"tvOS"}),x.jsx("option",{value:"VISION_OS",children:"visionOS"})]})]})]}),x.jsxs(j2,{children:[x.jsx(Nn,{variant:"outline",onClick:()=>fe({open:!1,versionString:"",platform:"IOS",isCreating:!1}),disabled:V.isCreating,children:"Cancel"}),x.jsx(Nn,{onClick:ei,disabled:V.isCreating||!V.versionString.trim(),children:V.isCreating?"Creating...":"Create Version"})]})]})}),x.jsx(gy,{open:pe.open,onOpenChange:ae=>!ae&&Ie({open:!1,screenshot:null,locale:"",deviceType:""}),children:x.jsx(vy,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[900px] max-h-[90vh] p-0 overflow-hidden",children:x.jsxs("div",{className:"relative",children:[x.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/60 to-transparent",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(ll,{variant:"outline",className:"bg-black/40 border-white/20 text-white",children:pe.locale}),x.jsx(ll,{variant:"outline",className:"bg-black/40 border-white/20 text-white",children:pe.deviceType})]}),x.jsx("button",{onClick:()=>Ie({open:!1,screenshot:null,locale:"",deviceType:""}),className:"p-2 rounded-full bg-black/40 hover:bg-black/60 text-white transition-colors",children:x.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x.jsx("div",{className:"flex items-center justify-center bg-black/95 min-h-[60vh]",children:pe.screenshot?.imageAsset?.templateUrl?x.jsx("img",{src:pe.screenshot.imageAsset.templateUrl.replace("{w}","1200").replace("{h}","2400").replace("{f}","png"),alt:pe.screenshot.fileName,className:"max-h-[85vh] w-auto object-contain"}):x.jsxs("div",{className:"flex flex-col items-center justify-center text-white/50 py-20",children:[x.jsx(ad,{className:"h-16 w-16 mb-4"}),x.jsx("p",{children:"Image not available"})]})}),pe.screenshot?.fileName&&x.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/60 to-transparent",children:x.jsx("p",{className:"text-white/80 text-sm text-center truncate",children:pe.screenshot.fileName})})]})})})]})}const _4=k.createContext({theme:"system",setTheme:()=>null,resolvedTheme:"dark"});function cK({children:n,defaultTheme:e="system",storageKey:t="localizer-theme"}){const[i,a]=k.useState(()=>typeof window<"u"&&localStorage.getItem(t)||e),r=f=>f==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":f,[o,c]=k.useState(()=>typeof window<"u"?r(localStorage.getItem(t)||e):"dark");k.useEffect(()=>{const f=window.document.documentElement;f.classList.remove("light","dark");const m=r(i);f.classList.add(m),c(m)},[i]),k.useEffect(()=>{if(i!=="system")return;const f=window.matchMedia("(prefers-color-scheme: dark)"),m=g=>{const y=window.document.documentElement;y.classList.remove("light","dark");const _=g.matches?"dark":"light";y.classList.add(_),c(_)};return f.addEventListener("change",m),()=>f.removeEventListener("change",m)},[i]);const d={theme:i,setTheme:f=>{localStorage.setItem(t,f),a(f)},resolvedTheme:o};return x.jsx(_4.Provider,{value:d,children:n})}function S4(){const n=k.useContext(_4);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n}var N1="Collapsible",[uK]=su(N1),[dK,IM]=uK(N1),w4=k.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:i,defaultOpen:a,disabled:r,onOpenChange:o,...c}=n,[d,f]=H0({prop:i,defaultProp:a??!1,onChange:o,caller:N1});return x.jsx(dK,{scope:t,disabled:r,contentId:Df(),open:d,onOpenToggle:k.useCallback(()=>f(m=>!m),[f]),children:x.jsx(Di.div,{"data-state":kM(d),"data-disabled":r?"":void 0,...c,ref:e})})});w4.displayName=N1;var M4="CollapsibleTrigger",E4=k.forwardRef((n,e)=>{const{__scopeCollapsible:t,...i}=n,a=IM(M4,t);return x.jsx(Di.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":kM(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...i,ref:e,onClick:ui(n.onClick,a.onOpenToggle)})});E4.displayName=M4;var BM="CollapsibleContent",T4=k.forwardRef((n,e)=>{const{forceMount:t,...i}=n,a=IM(BM,n.__scopeCollapsible);return x.jsx(Oo,{present:t||a.open,children:({present:r})=>x.jsx(fK,{...i,ref:e,present:r})})});T4.displayName=BM;var fK=k.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:i,children:a,...r}=n,o=IM(BM,t),[c,d]=k.useState(i),f=k.useRef(null),m=oa(e,f),g=k.useRef(0),y=g.current,_=k.useRef(0),S=_.current,A=o.open||c,T=k.useRef(A),w=k.useRef(void 0);return k.useEffect(()=>{const N=requestAnimationFrame(()=>T.current=!1);return()=>cancelAnimationFrame(N)},[]),sc(()=>{const N=f.current;if(N){w.current=w.current||{transitionDuration:N.style.transitionDuration,animationName:N.style.animationName},N.style.transitionDuration="0s",N.style.animationName="none";const D=N.getBoundingClientRect();g.current=D.height,_.current=D.width,T.current||(N.style.transitionDuration=w.current.transitionDuration,N.style.animationName=w.current.animationName),d(i)}},[o.open,i]),x.jsx(Di.div,{"data-state":kM(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!A,...r,ref:m,style:{"--radix-collapsible-content-height":y?`${y}px`:void 0,"--radix-collapsible-content-width":S?`${S}px`:void 0,...n.style},children:A&&a})});function kM(n){return n?"open":"closed"}var hK=w4;function tC({...n}){return x.jsx(hK,{"data-slot":"collapsible",...n})}function nC({...n}){return x.jsx(E4,{"data-slot":"collapsible-trigger",...n})}function iC({...n}){return x.jsx(T4,{"data-slot":"collapsible-content",...n})}var pK=Symbol("radix.slottable");function mK(n){const e=({children:t})=>x.jsx(x.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=pK,e}var A4="AlertDialog",[gK]=su(A4,[aD]),ou=aD(),C4=n=>{const{__scopeAlertDialog:e,...t}=n,i=ou(e);return x.jsx(fM,{...i,...t,modal:!0})};C4.displayName=A4;var vK="AlertDialogTrigger",N4=k.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...i}=n,a=ou(t);return x.jsx(gW,{...a,...i,ref:e})});N4.displayName=vK;var xK="AlertDialogPortal",R4=n=>{const{__scopeAlertDialog:e,...t}=n,i=ou(e);return x.jsx(hM,{...i,...t})};R4.displayName=xK;var yK="AlertDialogOverlay",D4=k.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...i}=n,a=ou(t);return x.jsx(pM,{...a,...i,ref:e})});D4.displayName=yK;var Ap="AlertDialogContent",[bK,_K]=gK(Ap),SK=mK("AlertDialogContent"),U4=k.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:i,...a}=n,r=ou(t),o=k.useRef(null),c=oa(e,o),d=k.useRef(null);return x.jsx(fW,{contentName:Ap,titleName:O4,docsSlug:"alert-dialog",children:x.jsx(bK,{scope:t,cancelRef:d,children:x.jsxs(mM,{role:"alertdialog",...r,...a,ref:c,onOpenAutoFocus:ui(a.onOpenAutoFocus,f=>{f.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[x.jsx(SK,{children:i}),x.jsx(MK,{contentRef:o})]})})})});U4.displayName=Ap;var O4="AlertDialogTitle",L4=k.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...i}=n,a=ou(t);return x.jsx(gM,{...a,...i,ref:e})});L4.displayName=O4;var z4="AlertDialogDescription",P4=k.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...i}=n,a=ou(t);return x.jsx(vM,{...a,...i,ref:e})});P4.displayName=z4;var wK="AlertDialogAction",I4=k.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...i}=n,a=ou(t);return x.jsx(S1,{...a,...i,ref:e})});I4.displayName=wK;var B4="AlertDialogCancel",k4=k.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...i}=n,{cancelRef:a}=_K(B4,t),r=ou(t),o=oa(e,a);return x.jsx(S1,{...r,...i,ref:o})});k4.displayName=B4;var MK=({contentRef:n})=>{const e=`\`${Ap}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ap}\` by passing a \`${z4}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ap}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return k.useEffect(()=>{document.getElementById(n.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},EK=C4,TK=N4,AK=R4,CK=D4,NK=U4,RK=I4,DK=k4,UK=L4,OK=P4;function aC({...n}){return x.jsx(EK,{"data-slot":"alert-dialog",...n})}function rC({...n}){return x.jsx(TK,{"data-slot":"alert-dialog-trigger",...n})}function LK({...n}){return x.jsx(AK,{"data-slot":"alert-dialog-portal",...n})}function zK({className:n,...e}){return x.jsx(CK,{"data-slot":"alert-dialog-overlay",className:en("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function sC({className:n,...e}){return x.jsxs(LK,{children:[x.jsx(zK,{}),x.jsx(NK,{"data-slot":"alert-dialog-content",className:en("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...e})]})}function oC({className:n,...e}){return x.jsx("div",{"data-slot":"alert-dialog-header",className:en("flex flex-col gap-2 text-center sm:text-left",n),...e})}function lC({className:n,...e}){return x.jsx("div",{"data-slot":"alert-dialog-footer",className:en("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...e})}function cC({className:n,...e}){return x.jsx(UK,{"data-slot":"alert-dialog-title",className:en("text-lg font-semibold",n),...e})}function uC({className:n,...e}){return x.jsx(OK,{"data-slot":"alert-dialog-description",className:en("text-muted-foreground text-sm",n),...e})}function dC({className:n,...e}){return x.jsx(RK,{className:en($w(),n),...e})}function fC({className:n,...e}){return x.jsx(DK,{className:en($w({variant:"outline"}),n),...e})}const sy="asc-encrypted-p8-key";function PK({activePage:n,onPageChange:e,providerConfig:t,onProviderConfigChange:i,ascCredentials:a,onAscCredentialsChange:r}){const{theme:o,setTheme:c}=S4(),[d,f]=k.useState(!1),[m,g]=k.useState(!0),[y,_]=k.useState(!0),[S,A]=k.useState(()=>typeof window>"u"?!1:!!window.localStorage.getItem(sy)),[T,w]=k.useState(""),[N,D]=k.useState(!1),[U,O]=k.useState(""),[B,z]=k.useState(""),[F,L]=k.useState(!1),I=t.apiKeys[t.provider]||"",Y=t.models[t.provider]||Qs[t.provider]?.defaultModel||"",q=re=>{i(se=>({...se,provider:re}))},K=re=>{i(se=>({...se,apiKeys:{...se.apiKeys,[se.provider]:re}}))},$=re=>{i(se=>({...se,models:{...se.models,[se.provider]:re}}))},ce=async re=>{if(re&&re.name.endsWith(".p8"))try{const se=await re.text(),le=re.name.match(/AuthKey_([A-Z0-9]+)\.p8$/i),ve=le?le[1]:null;r(ze=>({...ze,privateKey:se,...ve&&!ze.keyId?{keyId:ve}:{}}))}catch{}},G=async re=>{await ce(re.target.files[0])},W=re=>{re.preventDefault(),re.stopPropagation(),f(!0)},Q=re=>{re.preventDefault(),re.stopPropagation(),f(!1)},ue=async re=>{re.preventDefault(),re.stopPropagation(),f(!1);const se=re.dataTransfer.files;se.length>0&&await ce(se[0])},de=re=>re?re.includes("inference-profile/")?re.split("/").pop().replace("global.anthropic.","").replace(/-v\d+:\d+$/,""):re:"Select model",j=async()=>{if(!T||T.length<4){z("Password must be at least 4 characters");return}if(!a.privateKey){z("No key loaded to save");return}L(!0),z("");try{const re=await oK(a.privateKey,T);localStorage.setItem(sy,re),A(!0),D(!1),w(""),O("")}catch{z("Failed to encrypt key")}L(!1)},ee=async()=>{if(!T){z("Please enter your password");return}const re=localStorage.getItem(sy);if(!re){z("No stored key found");return}L(!0),z("");const se=await b4(re,T);se.success?(r(le=>({...le,privateKey:se.data})),D(!1),w(""),O("")):z("Wrong password"),L(!1)},ne=()=>{localStorage.removeItem(sy),A(!1)},oe=()=>{D(!1),w(""),O(""),z("")};return x.jsxs(zY,{variant:"inset",collapsible:"offcanvas",children:[x.jsx(BY,{className:"border-b border-sidebar-border/50 bg-gradient-to-b from-sidebar to-sidebar/80",children:x.jsxs("div",{className:"flex items-center gap-3 px-3 py-4",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-violet-500 to-purple-600 shadow-lg shadow-violet-500/25",children:x.jsx(l5,{className:"h-5 w-5 text-white"})}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("span",{className:"text-base font-bold tracking-tight",children:"Localizer"}),x.jsx("span",{className:"text-xs text-muted-foreground",children:"iOS & macOS Translation"})]})]})}),x.jsxs(FY,{className:"px-2",children:[x.jsxs(FS,{className:"pt-4",children:[x.jsx(jS,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 px-2 mb-2",children:"Tools"}),x.jsxs(HS,{children:[x.jsxs(jY,{className:"space-y-1",children:[x.jsx(VS,{children:x.jsxs(GS,{isActive:n==="xcstrings",onClick:()=>e("xcstrings"),tooltip:"XCStrings Translator",className:`rounded-xl h-11 px-3 transition-all duration-200 ${n==="xcstrings"?"bg-primary/10 text-primary font-medium shadow-sm":"hover:bg-muted/50"}`,children:[x.jsx(Hg,{className:`h-5 w-5 ${n==="xcstrings"?"text-primary":""}`}),x.jsx("span",{children:"XCStrings"}),n==="xcstrings"&&x.jsx("div",{className:"ml-auto h-2 w-2 rounded-full bg-primary animate-pulse"})]})}),x.jsx(VS,{children:x.jsxs(GS,{isActive:n==="appstore",onClick:()=>e("appstore"),tooltip:"App Store Connect",className:`rounded-xl h-11 px-3 transition-all duration-200 ${n==="appstore"?"bg-primary/10 text-primary font-medium shadow-sm":"hover:bg-muted/50"}`,children:[x.jsx(tM,{className:`h-5 w-5 ${n==="appstore"?"text-primary":""}`}),x.jsx("span",{children:"App Store Connect"}),n==="appstore"&&x.jsx("div",{className:"ml-auto h-2 w-2 rounded-full bg-primary animate-pulse"})]})}),x.jsx(VS,{children:x.jsxs(GS,{isActive:n==="screenshots",onClick:()=>e("screenshots"),tooltip:"Screenshot Maker",className:`rounded-xl h-11 px-3 transition-all duration-200 ${n==="screenshots"?"bg-primary/10 text-primary font-medium shadow-sm":"hover:bg-muted/50"}`,children:[x.jsx(ad,{className:`h-5 w-5 ${n==="screenshots"?"text-primary":""}`}),x.jsx("span",{children:"Screenshots"}),n==="screenshots"&&x.jsx("div",{className:"ml-auto h-2 w-2 rounded-full bg-primary animate-pulse"})]})})]}),n==="appstore"&&x.jsxs("div",{className:"mt-3 ml-3 pl-3 border-l-2 border-primary/20 space-y-1",children:[x.jsxs("button",{onClick:()=>document.getElementById("asc-connection")?.scrollIntoView({behavior:"smooth"}),className:"flex items-center gap-2 w-full px-2 py-1.5 rounded-lg text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors",children:[x.jsx(c5,{className:"h-3.5 w-3.5"}),x.jsx("span",{children:"Connection"})]}),x.jsxs("button",{onClick:()=>document.getElementById("asc-app-version")?.scrollIntoView({behavior:"smooth"}),className:"flex items-center gap-2 w-full px-2 py-1.5 rounded-lg text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors",children:[x.jsx(R2,{className:"h-3.5 w-3.5"}),x.jsx("span",{children:"App & Version"})]}),x.jsxs("button",{onClick:()=>document.getElementById("asc-localizations")?.scrollIntoView({behavior:"smooth"}),className:"flex items-center gap-2 w-full px-2 py-1.5 rounded-lg text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors",children:[x.jsx(D2,{className:"h-3.5 w-3.5"}),x.jsx("span",{children:"Localizations"})]}),x.jsxs("button",{onClick:()=>document.getElementById("asc-aso-keywords")?.scrollIntoView({behavior:"smooth"}),className:"flex items-center gap-2 w-full px-2 py-1.5 rounded-lg text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors",children:[x.jsx(O2,{className:"h-3.5 w-3.5"}),x.jsx("span",{children:"ASO Keywords"})]}),x.jsxs("button",{onClick:()=>document.getElementById("asc-screenshots")?.scrollIntoView({behavior:"smooth"}),className:"flex items-center gap-2 w-full px-2 py-1.5 rounded-lg text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors",children:[x.jsx(ad,{className:"h-3.5 w-3.5"}),x.jsx("span",{children:"Screenshots"})]}),x.jsxs("button",{onClick:()=>document.getElementById("asc-translation")?.scrollIntoView({behavior:"smooth"}),className:"flex items-center gap-2 w-full px-2 py-1.5 rounded-lg text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors",children:[x.jsx(Kl,{className:"h-3.5 w-3.5"}),x.jsx("span",{children:"AI Translation"})]}),x.jsxs("button",{onClick:()=>document.getElementById("asc-logs")?.scrollIntoView({behavior:"smooth"}),className:"flex items-center gap-2 w-full px-2 py-1.5 rounded-lg text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors",children:[x.jsx(A0,{className:"h-3.5 w-3.5"}),x.jsx("span",{children:"Activity Log"})]})]})]})]}),x.jsx(X3,{className:"my-4 opacity-50"}),x.jsx(tC,{open:m,onOpenChange:g,children:x.jsxs(FS,{children:[x.jsx(jS,{asChild:!0,children:x.jsxs(nC,{className:"flex w-full items-center justify-between px-2 py-2 rounded-xl hover:bg-muted/50 transition-colors [&[data-state=open]>svg]:rotate-180",children:[x.jsxs("div",{className:"flex items-center gap-2.5",children:[x.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-lg bg-violet-500/10",children:x.jsx(Kl,{className:"h-4 w-4 text-violet-500"})}),x.jsx("span",{className:"font-medium",children:"AI Provider"})]}),x.jsx(vb,{className:"h-4 w-4 text-muted-foreground transition-transform duration-200"})]})}),x.jsx(iC,{children:x.jsxs(HS,{className:"px-2 pt-3 space-y-4",children:[x.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.entries(Qs).map(([re,se])=>x.jsx("button",{onClick:()=>q(re),className:`
                        px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                        ${t.provider===re?"bg-primary text-primary-foreground shadow-sm":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"}
                      `,children:se.name},re))}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground",children:"API Key"}),x.jsx(xa,{type:"password",placeholder:t.provider==="openai"?"sk-...":"Enter your API key...",value:I,onChange:re=>K(re.target.value),className:"h-9 text-sm bg-muted/30 border-border/50 focus:border-primary/50"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground",children:"Model"}),x.jsx("select",{value:Y,onChange:re=>$(re.target.value),className:"w-full h-9 rounded-lg bg-muted/30 border border-border/50 px-3 text-sm focus:border-primary/50 focus:outline-none transition-colors",children:Qs[t.provider]?.models.map(re=>x.jsx("option",{value:re,children:de(re)},re))})]}),Qs[t.provider]?.needsRegion&&x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground",children:"AWS Region"}),x.jsx(xa,{placeholder:"us-east-1",value:t.region,onChange:re=>i(se=>({...se,region:re.target.value})),className:"h-9 text-sm bg-muted/30 border-border/50 focus:border-primary/50"})]}),x.jsx("div",{className:"pt-1",children:I?x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-emerald-500/10 text-emerald-500",children:[x.jsx(Ba,{className:"h-4 w-4"}),x.jsx("span",{className:"text-xs font-medium",children:"Ready to translate"})]}):x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-amber-500/10 text-amber-500",children:[x.jsx(Nr,{className:"h-4 w-4"}),x.jsx("span",{className:"text-xs font-medium",children:"API key required"})]})})]})})]})}),x.jsx(X3,{className:"my-4 opacity-50"}),x.jsx(tC,{open:y,onOpenChange:_,children:x.jsxs(FS,{children:[x.jsx(jS,{asChild:!0,children:x.jsxs(nC,{className:"flex w-full items-center justify-between px-2 py-2 rounded-xl hover:bg-muted/50 transition-colors [&[data-state=open]>svg]:rotate-180",children:[x.jsxs("div",{className:"flex items-center gap-2.5",children:[x.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-lg bg-blue-500/10",children:x.jsx(CS,{className:"h-4 w-4 text-blue-500"})}),x.jsx("span",{className:"font-medium",children:"App Store Connect"})]}),x.jsx(vb,{className:"h-4 w-4 text-muted-foreground transition-transform duration-200"})]})}),x.jsx(iC,{children:x.jsxs(HS,{className:"px-2 pt-3 space-y-4",children:[x.jsxs("a",{href:"https://appstoreconnect.apple.com/access/integrations/api",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-500/10 text-blue-500 text-xs font-medium hover:bg-blue-500/20 transition-colors",children:[x.jsx(hG,{className:"h-3.5 w-3.5"}),x.jsx("span",{children:"Get API Key from Apple"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground",children:"Key ID"}),x.jsx(xa,{placeholder:"XXXXXXXXXX",value:a.keyId,onChange:re=>r(se=>({...se,keyId:re.target.value})),className:"h-9 text-sm bg-muted/30 border-border/50 focus:border-primary/50"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground",children:"Issuer ID"}),x.jsx(xa,{placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",value:a.issuerId,onChange:re=>r(se=>({...se,issuerId:re.target.value})),className:"h-9 text-sm bg-muted/30 border-border/50 focus:border-primary/50"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground",children:"Private Key (.p8)"}),x.jsx(xa,{type:"file",accept:".p8",onChange:G,className:"hidden",id:"sidebar-p8-input"}),x.jsx("label",{htmlFor:"sidebar-p8-input",onDragOver:W,onDragLeave:Q,onDrop:ue,className:`
                      flex flex-col items-center justify-center h-20 rounded-xl border-2 border-dashed cursor-pointer transition-all duration-200 text-xs
                      ${d?"border-primary bg-primary/10 text-primary scale-[1.02]":a.privateKey?"border-emerald-500/50 bg-emerald-500/10 text-emerald-500":"border-border/50 hover:border-primary/50 hover:bg-muted/30 text-muted-foreground"}
                    `,children:d?x.jsxs(x.Fragment,{children:[x.jsx(CS,{className:"h-5 w-5 mb-1 animate-bounce"}),x.jsx("span",{className:"font-medium",children:"Drop your key here"})]}):a.privateKey?x.jsxs(x.Fragment,{children:[x.jsx(Ba,{className:"h-5 w-5 mb-1"}),x.jsx("span",{className:"font-medium",children:"Private key loaded"})]}):x.jsxs(x.Fragment,{children:[x.jsx(CS,{className:"h-5 w-5 mb-1 opacity-50"}),x.jsx("span",{className:"font-medium",children:"Drop .p8 file here"})]})}),x.jsxs("div",{className:"flex gap-2 pt-2",children:[a.privateKey&&!N&&x.jsxs(Nn,{variant:"outline",size:"sm",className:"flex-1 h-8 text-xs gap-1.5",onClick:()=>{D(!0),O("save"),z("")},children:[x.jsx(IG,{className:"h-3.5 w-3.5"}),"Save Encrypted"]}),S&&!a.privateKey&&!N&&x.jsxs(Nn,{variant:"outline",size:"sm",className:"flex-1 h-8 text-xs gap-1.5",onClick:()=>{D(!0),O("load"),z("")},children:[x.jsx(EG,{className:"h-3.5 w-3.5"}),"Load Saved Key"]}),S&&!N&&x.jsxs(aC,{children:[x.jsx(rC,{asChild:!0,children:x.jsx(Nn,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",title:"Delete saved key",children:x.jsx(v3,{className:"h-3.5 w-3.5"})})}),x.jsxs(sC,{children:[x.jsxs(oC,{children:[x.jsx(cC,{children:"Delete Saved Key?"}),x.jsx(uC,{children:"This will permanently delete the encrypted key from storage. You'll need to upload the .p8 file again."})]}),x.jsxs(lC,{children:[x.jsx(fC,{children:"Cancel"}),x.jsx(dC,{onClick:ne,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]}),N&&x.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-muted/30 border border-border/50 mt-2",children:[x.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[x.jsx(AG,{className:"h-3.5 w-3.5"}),x.jsx("span",{className:"font-medium",children:U==="save"?"Encrypt & save key":"Enter password to decrypt"})]}),x.jsx(xa,{type:"password",placeholder:"Enter password...",value:T,onChange:re=>{w(re.target.value),z("")},onKeyDown:re=>{re.key==="Enter"?U==="save"?j():ee():re.key==="Escape"&&oe()},className:"h-9 text-sm",autoFocus:!0}),B&&x.jsx("p",{className:"text-xs text-destructive font-medium",children:B}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx(Nn,{size:"sm",className:"flex-1 h-8 text-xs",onClick:U==="save"?j:ee,disabled:F,children:F?"Processing...":U==="save"?"Save Key":"Unlock"}),x.jsx(Nn,{variant:"ghost",size:"sm",className:"h-8 text-xs",onClick:oe,children:"Cancel"})]})]})]}),x.jsxs("div",{className:"flex items-center justify-between pt-2",children:[a.keyId&&a.issuerId&&a.privateKey?x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-emerald-500/10 text-emerald-500 flex-1",children:[x.jsx(Ba,{className:"h-4 w-4"}),x.jsx("span",{className:"text-xs font-medium",children:"Ready to connect"})]}):x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-muted/50 text-muted-foreground flex-1",children:[x.jsx(Nr,{className:"h-4 w-4"}),x.jsx("span",{className:"text-xs font-medium",children:"Credentials incomplete"})]}),(a.keyId||a.issuerId||a.privateKey)&&x.jsxs(aC,{children:[x.jsx(rC,{asChild:!0,children:x.jsx(Nn,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 ml-2 text-muted-foreground hover:text-destructive hover:bg-destructive/10",children:x.jsx(v3,{className:"h-4 w-4"})})}),x.jsxs(sC,{children:[x.jsxs(oC,{children:[x.jsx(cC,{children:"Clear ASC Credentials?"}),x.jsx(uC,{children:"This will clear your Key ID, Issuer ID, and loaded private key. You'll need to enter them again to connect."})]}),x.jsxs(lC,{children:[x.jsx(fC,{children:"Cancel"}),x.jsx(dC,{onClick:()=>r({keyId:"",issuerId:"",privateKey:""}),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Clear"})]})]})]})]})]})})]})})]}),x.jsx(kY,{className:"border-t border-sidebar-border/50 bg-gradient-to-t from-sidebar to-transparent",children:x.jsxs("div",{className:"px-4 py-4 space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between p-2 rounded-xl bg-muted/30",children:[x.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Theme"}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>c("light"),className:`p-2 rounded-lg transition-all ${o==="light"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"Light mode",children:x.jsx(f5,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>c("dark"),className:`p-2 rounded-lg transition-all ${o==="dark"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"Dark mode",children:x.jsx(u5,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>c("system"),className:`p-2 rounded-lg transition-all ${o==="system"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"System theme",children:x.jsx(eM,{className:"h-4 w-4"})})]})]}),x.jsxs("div",{className:"flex items-center justify-center gap-2",children:[x.jsx("span",{className:"text-xs text-muted-foreground",children:"Crafted with"}),x.jsx("span",{className:"text-red-500",children:""}),x.jsx("span",{className:"text-xs text-muted-foreground",children:"by"}),x.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Fayhe"})]})]})})]})}const IK=`<div class="app-container">
        <!-- Left Sidebar - Screenshots -->
        <div class="sidebar">
            <div class="sidebar-content">
                <div class="sidebar-header">
                    <h2>Project</h2>
                    <div class="sidebar-header-buttons">
                        <div class="language-picker" id="language-picker">
                            <button class="language-btn" id="language-btn" title="Language">
                                <span class="language-btn-flag" id="language-btn-flag"></span>
                            </button>
                            <div class="language-menu" id="language-menu">
                                <div class="language-menu-items" id="language-menu-items">
                                    <!-- Language options populated by JS -->
                                </div>
                                <div class="language-menu-divider"></div>
                                <button class="language-menu-edit" id="edit-languages-btn">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                                        <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                    </svg>
                                    Edit Languages...
                                </button>
                                <div class="language-menu-divider"></div>
                                <button class="language-menu-edit" id="translate-all-btn">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M5 8l6 6M4 14l6-6 2-3M2 5h12M7 2v3M22 22l-5-10-5 10M14 18h6"/>
                                    </svg>
                                    Translate All...
                                </button>
                            </div>
                        </div>
                        <button class="settings-btn" id="magical-titles-btn" title="Magical Titles - AI-generated headlines">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2l2.4 7.4H22l-6 4.6 2.3 7-6.3-4.6L5.7 21l2.3-7-6-4.6h7.6z"/>
                            </svg>
                        </button>
                        <button class="settings-btn" id="about-btn" title="About">
                            <img src="/appscreen/img/info.svg" width="18" height="18" alt="About">
                        </button>
                        <button class="settings-btn" id="settings-btn" title="Settings">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="project-controls">
                    <div class="project-dropdown" id="project-dropdown">
                        <button class="project-trigger" id="project-trigger">
                            <div class="project-trigger-info">
                                <span class="project-trigger-name" id="project-trigger-name">Default Project</span>
                                <span class="project-trigger-meta" id="project-trigger-meta">0 screenshots</span>
                            </div>
                            <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </button>
                        <div class="project-menu" id="project-menu">
                            <!-- Projects will be added here dynamically -->
                        </div>
                    </div>
                    <div class="project-buttons">
                        <button class="project-btn" id="new-project-btn" title="New Project">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14M5 12h14"/>
                            </svg>
                        </button>
                        <button class="project-btn" id="rename-project-btn" title="Rename Project">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
                            </svg>
                        </button>
                        <button class="project-btn danger" id="delete-project-btn" title="Delete Project">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3,6 5,6 21,6"/>
                                <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="divider"></div>

                <h2>Screenshots</h2>

                <input type="file" id="file-input" multiple accept="image/*" hidden>
                <div class="screenshot-list" id="screenshot-list">
                    <!-- Screenshots will be added here dynamically, including upload zone -->
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="export-output-section">
                    <div class="export-row">
                        <div class="output-size-dropdown" id="output-size-dropdown">
                            <button class="output-size-trigger" id="output-size-trigger">
                                <div class="output-size-info">
                                    <span class="output-size-name" id="output-size-name">iPhone 6.9"</span>
                                    <span class="output-size-dims" id="output-size-dims">1320  2868</span>
                                </div>
                                <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </button>
                            <div class="output-size-menu" id="output-size-menu">
                                <div class="device-option selected" data-device="iphone-6.9">
                                    <span class="device-option-name">iPhone 6.9"</span>
                                    <span class="device-option-size">1320  2868</span>
                                </div>
                                <div class="device-option" data-device="iphone-6.7">
                                    <span class="device-option-name">iPhone 6.7"</span>
                                    <span class="device-option-size">1290  2796</span>
                                </div>
                                <div class="device-option" data-device="iphone-6.5">
                                    <span class="device-option-name">iPhone 6.5"</span>
                                    <span class="device-option-size">1284  2778</span>
                                </div>
                                <div class="device-option" data-device="iphone-5.5">
                                    <span class="device-option-name">iPhone 5.5"</span>
                                    <span class="device-option-size">1242  2208</span>
                                </div>
                                <div class="output-size-divider"></div>
                                <div class="device-option" data-device="ipad-12.9">
                                    <span class="device-option-name">iPad 12.9"</span>
                                    <span class="device-option-size">2048  2732</span>
                                </div>
                                <div class="device-option" data-device="ipad-11">
                                    <span class="device-option-name">iPad 11"</span>
                                    <span class="device-option-size">1668  2388</span>
                                </div>
                                <div class="output-size-divider"></div>
                                <div class="device-option" data-device="android-phone">
                                    <span class="device-option-name">Android Phone</span>
                                    <span class="device-option-size">1080  1920</span>
                                </div>
                                <div class="device-option" data-device="android-phone-hd">
                                    <span class="device-option-name">Android Phone HD</span>
                                    <span class="device-option-size">1440  2560</span>
                                </div>
                                <div class="device-option" data-device="android-tablet-7">
                                    <span class="device-option-name">Android Tablet 7"</span>
                                    <span class="device-option-size">1200  1920</span>
                                </div>
                                <div class="device-option" data-device="android-tablet-10">
                                    <span class="device-option-name">Android Tablet 10"</span>
                                    <span class="device-option-size">1600  2560</span>
                                </div>
                                <div class="output-size-divider"></div>
                                <div class="device-option" data-device="web-og">
                                    <span class="device-option-name">Open Graph</span>
                                    <span class="device-option-size">1200  630</span>
                                </div>
                                <div class="device-option" data-device="web-twitter">
                                    <span class="device-option-name">Twitter/X Card</span>
                                    <span class="device-option-size">1200  675</span>
                                </div>
                                <div class="device-option" data-device="web-hero">
                                    <span class="device-option-name">Website Hero</span>
                                    <span class="device-option-size">1920  1080</span>
                                </div>
                                <div class="device-option" data-device="web-feature">
                                    <span class="device-option-name">Feature Graphic</span>
                                    <span class="device-option-size">1024  500</span>
                                </div>
                                <div class="output-size-divider"></div>
                                <div class="device-option" data-device="custom">
                                    <span class="device-option-name">Custom Size</span>
                                    <span class="device-option-size">Set dimensions</span>
                                </div>
                                <div id="custom-size-inputs" class="custom-size-inputs">
                                    <input type="number" id="custom-width" value="1290" min="100" max="4000" placeholder="Width">
                                    <span class="custom-size-x"></span>
                                    <input type="number" id="custom-height" value="2796" min="100" max="4000" placeholder="Height">
                                </div>
                            </div>
                        </div>
                        <button class="export-btn secondary" id="export-current" title="Export current screenshot">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                            </svg>
                        </button>
                    </div>
                    <button class="export-btn export-all-btn" id="export-all" title="Export all screenshots as ZIP">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                        </svg>
                        Export All
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Canvas Area -->
        <div class="canvas-area">
            <div class="preview-strip">
                <div class="side-preview side-preview-far-left" id="side-preview-far-left">
                    <canvas id="preview-canvas-far-left"></canvas>
                </div>
                <div class="side-preview side-preview-left" id="side-preview-left">
                    <canvas id="preview-canvas-left"></canvas>
                </div>
                <div class="canvas-wrapper" id="canvas-wrapper">
                    <canvas id="preview-canvas"></canvas>
                    <div id="threejs-container" style="display: none;"></div>
                    <div class="no-screenshot" id="no-screenshot">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <path d="M21 15l-5-5L5 21"/>
                        </svg>
                        <p>Upload screenshots to get started</p>
                    </div>
                </div>
                <div class="side-preview side-preview-right" id="side-preview-right">
                    <canvas id="preview-canvas-right"></canvas>
                </div>
                <div class="side-preview side-preview-far-right" id="side-preview-far-right">
                    <canvas id="preview-canvas-far-right"></canvas>
                </div>
            </div>
        </div>

        <!-- Right Sidebar - Settings -->
        <div class="sidebar sidebar-right">
            <div class="sidebar-header">
                <div class="tabs">
                    <button class="tab active" data-tab="background">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <path d="M21 15l-5-5L5 21"/>
                        </svg>
                        <span>Background</span>
                    </button>
                    <button class="tab" data-tab="screenshot">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="5" y="2" width="14" height="20" rx="2"/>
                            <line x1="12" y1="18" x2="12" y2="18"/>
                        </svg>
                        <span>Device</span>
                    </button>
                    <button class="tab" data-tab="text">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 7V4h16v3"/>
                            <path d="M9 20h6"/>
                            <path d="M12 4v16"/>
                        </svg>
                        <span>Text</span>
                    </button>
                </div>
            </div>

            <div class="sidebar-content">
            <!-- Background Tab -->
            <div class="tab-content active" id="tab-background">
                <div class="control-group">
                    <label class="control-label">Background Type</label>
                    <div class="btn-group" id="bg-type-selector">
                        <button class="active" data-type="gradient">Gradient</button>
                        <button data-type="solid">Solid</button>
                        <button data-type="image">Image</button>
                    </div>
                </div>

                <!-- Gradient Options -->
                <div id="gradient-options">
                    <div class="control-group">
                        <div class="preset-dropdown" id="gradient-preset-dropdown">
                            <button class="preset-dropdown-trigger" id="gradient-preset-trigger">
                                <span>Gradient Presets</span>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </button>
                            <div class="preset-dropdown-content" id="gradient-preset-content">
                                <div class="preset-grid" id="gradient-presets">
                                    <!-- Purples & Blues -->
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)" data-gradient="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)" data-gradient="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)" data-gradient="linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #09203f 0%, #537895 100%)" data-gradient="linear-gradient(135deg, #09203f 0%, #537895 100%)"></div>
                                    <!-- Pinks & Reds -->
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%)" data-gradient="linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)" data-gradient="linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%)" data-gradient="linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #ee9ca7 0%, #ffdde1 100%)" data-gradient="linear-gradient(135deg, #ee9ca7 0%, #ffdde1 100%)"></div>
                                    <!-- Greens & Teals -->
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)" data-gradient="linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #96deda 0%, #50c9c3 100%)" data-gradient="linear-gradient(135deg, #96deda 0%, #50c9c3 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #13547a 0%, #80d0c7 100%)" data-gradient="linear-gradient(135deg, #13547a 0%, #80d0c7 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #B7F8DB 0%, #50A7C2 100%)" data-gradient="linear-gradient(135deg, #B7F8DB 0%, #50A7C2 100%)"></div>
                                    <!-- Oranges & Yellows -->
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%)" data-gradient="linear-gradient(135deg, #fa709a 0%, #fee140 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)" data-gradient="linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #ffc3a0 0%, #ffafbd 100%)" data-gradient="linear-gradient(135deg, #ffc3a0 0%, #ffafbd 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #c79081 0%, #dfa579 100%)" data-gradient="linear-gradient(135deg, #c79081 0%, #dfa579 100%)"></div>
                                    <!-- Darks & Neutrals -->
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #434343 0%, #000000 100%)" data-gradient="linear-gradient(135deg, #434343 0%, #000000 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #29323c 0%, #485563 100%)" data-gradient="linear-gradient(135deg, #29323c 0%, #485563 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #868f96 0%, #596164 100%)" data-gradient="linear-gradient(135deg, #868f96 0%, #596164 100%)"></div>
                                    <div class="preset-swatch" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)" data-gradient="linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Gradient Direction</label>
                        <div class="control-row">
                            <input type="range" id="gradient-angle" min="0" max="360" value="135">
                            <span class="range-value" id="gradient-angle-value">135</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Colors</label>
                        <div class="gradient-stops" id="gradient-stops">
                            <div class="gradient-stop">
                                <input type="color" value="#667eea" data-stop="0">
                                <input type="number" value="0" min="0" max="100" data-stop="0">
                                <span>%</span>
                            </div>
                            <div class="gradient-stop">
                                <input type="color" value="#764ba2" data-stop="1">
                                <input type="number" value="100" min="0" max="100" data-stop="1">
                                <span>%</span>
                            </div>
                        </div>
                        <button class="add-stop-btn" id="add-gradient-stop">+ Add Color Stop</button>
                    </div>
                </div>

                <!-- Solid Color Options -->
                <div id="solid-options" style="display: none;">
                    <div class="control-group">
                        <label class="control-label">Background Color</label>
                        <div class="color-input-wrapper">
                            <input type="color" id="solid-color" value="#1a1a2e">
                            <input type="text" id="solid-color-hex" value="#1a1a2e">
                        </div>
                    </div>
                </div>

                <!-- Image Options -->
                <div id="image-options" style="display: none;">
                    <div class="control-group">
                        <label class="control-label">Background Image</label>
                        <div class="bg-image-upload" id="bg-image-upload">
                            <p>Click to upload image</p>
                        </div>
                        <input type="file" id="bg-image-input" accept="image/*" hidden>
                        <img class="bg-image-preview" id="bg-image-preview" style="display: none;">
                    </div>
                    <div class="control-group">
                        <label class="control-label">Image Fit</label>
                        <select id="bg-image-fit">
                            <option value="cover">Cover</option>
                            <option value="contain">Contain</option>
                            <option value="stretch">Stretch</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Blur</label>
                        <div class="control-row">
                            <input type="range" id="bg-blur" min="0" max="50" value="0">
                            <span class="range-value" id="bg-blur-value">0px</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Overlay Color</label>
                        <div class="color-input-wrapper">
                            <input type="color" id="bg-overlay-color" value="#000000">
                            <input type="text" id="bg-overlay-hex" value="#000000">
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Overlay Opacity</label>
                        <div class="control-row">
                            <input type="range" id="bg-overlay-opacity" min="0" max="100" value="0">
                            <span class="range-value" id="bg-overlay-opacity-value">0%</span>
                        </div>
                    </div>
                </div>

                <div class="divider"></div>

                <div class="control-group">
                    <div class="toggle-row collapsible collapsed" data-target="noise-options">
                        <span class="toggle-label">
                            <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                            Noise
                        </span>
                        <div class="toggle" id="noise-toggle"></div>
                    </div>
                </div>
                <div id="noise-options" style="display: none;">
                    <div class="control-group">
                        <label class="control-label">Noise Intensity</label>
                        <div class="control-row">
                            <input type="range" id="noise-intensity" min="0" max="100" value="10">
                            <span class="range-value" id="noise-intensity-value">10%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screenshot Tab -->
            <div class="tab-content" id="tab-screenshot">
                <div class="control-group">
                    <label class="control-label">Device Type</label>
                    <div class="btn-group" id="device-type-selector">
                        <button class="active" data-type="2d">2D</button>
                        <button data-type="3d">3D</button>
                    </div>
                </div>

                <div id="rotation-3d-options" style="display: none;">
                    <div class="control-group">
                        <label class="control-label">Device Model</label>
                        <div class="btn-group" id="device-3d-selector">
                            <button class="active" data-model="iphone">iPhone</button>
                            <button data-model="samsung">Samsung</button>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Rotation X (Tilt)</label>
                        <div class="control-row">
                            <input type="range" id="rotation-3d-x" min="-45" max="45" value="0">
                            <span class="range-value" id="rotation-3d-x-value">0</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Rotation Y (Turn)</label>
                        <div class="control-row">
                            <input type="range" id="rotation-3d-y" min="-45" max="45" value="0">
                            <span class="range-value" id="rotation-3d-y-value">0</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Rotation Z (Roll)</label>
                        <div class="control-row">
                            <input type="range" id="rotation-3d-z" min="-45" max="45" value="0">
                            <span class="range-value" id="rotation-3d-z-value">0</span>
                        </div>
                    </div>
                </div>

                <div id="position-presets-section">
                <div class="control-group">
                    <div class="preset-dropdown" id="position-preset-dropdown">
                        <button class="preset-dropdown-trigger" id="position-preset-trigger">
                            <span>Position Presets</span>
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </button>
                        <div class="preset-dropdown-content" id="position-preset-content">
                            <div class="preset-positions" id="position-presets">
                                <button class="position-preset active" data-preset="centered" title="Centered">
                                    <svg viewBox="0 0 40 60" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="8" y="12" width="24" height="36" rx="2"/>
                                    </svg>
                                    <span>Centered</span>
                                </button>
                                <button class="position-preset" data-preset="bleed-bottom" title="Bleed Bottom">
                                    <svg viewBox="0 0 40 60" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="8" y="20" width="24" height="45" rx="2"/>
                                    </svg>
                                    <span>Bleed Bottom</span>
                                </button>
                                <button class="position-preset" data-preset="bleed-top" title="Bleed Top">
                                    <svg viewBox="0 0 40 60" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="8" y="-5" width="24" height="45" rx="2"/>
                                    </svg>
                                    <span>Bleed Top</span>
                                </button>
                                <button class="position-preset" data-preset="float-center" title="Float Center">
                                    <svg viewBox="0 0 40 60" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="10" y="15" width="20" height="30" rx="2"/>
                                    </svg>
                                    <span>Float Center</span>
                                </button>
                                <button class="position-preset" data-preset="tilt-left" title="Tilt Left">
                                    <svg viewBox="0 0 40 60" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="8" y="12" width="24" height="36" rx="2" transform="rotate(-8 20 30)"/>
                                    </svg>
                                    <span>Tilt Left</span>
                                </button>
                                <button class="position-preset" data-preset="tilt-right" title="Tilt Right">
                                    <svg viewBox="0 0 40 60" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="8" y="12" width="24" height="36" rx="2" transform="rotate(8 20 30)"/>
                                    </svg>
                                    <span>Tilt Right</span>
                                </button>
                                <button class="position-preset" data-preset="perspective" title="Perspective">
                                    <svg viewBox="0 0 40 60" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 15 L28 12 L30 48 L10 45 Z"/>
                                    </svg>
                                    <span>Perspective</span>
                                </button>
                                <button class="position-preset" data-preset="float-bottom" title="Float Bottom">
                                    <svg viewBox="0 0 40 60" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="10" y="25" width="20" height="30" rx="2"/>
                                    </svg>
                                    <span>Float Bottom</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                </div><!-- end position-presets-section -->

                <div class="divider"></div>

                <div class="control-group">
                    <label class="control-label">Screenshot Scale</label>
                    <div class="control-row">
                        <input type="range" id="screenshot-scale" min="30" max="100" value="70">
                        <span class="range-value" id="screenshot-scale-value">70%</span>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Vertical Position</label>
                    <div class="control-row">
                        <input type="range" id="screenshot-y" min="-30" max="130" value="55">
                        <span class="range-value" id="screenshot-y-value">55%</span>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Horizontal Position</label>
                    <div class="control-row">
                        <input type="range" id="screenshot-x" min="-30" max="130" value="50">
                        <span class="range-value" id="screenshot-x-value">50%</span>
                    </div>
                </div>

                <div id="2d-only-settings">
                    <div class="divider"></div>

                    <div class="control-group">
                        <label class="control-label">Corner Radius</label>
                        <div class="control-row">
                            <input type="range" id="corner-radius" min="0" max="100" value="24">
                            <span class="range-value" id="corner-radius-value">24px</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Tilt / Rotation</label>
                        <div class="control-row">
                            <input type="range" id="screenshot-rotation" min="-45" max="45" value="0">
                            <span class="range-value" id="screenshot-rotation-value">0</span>
                        </div>
                    </div>

                    <div class="divider"></div>

                <div class="control-group">
                    <div class="toggle-row collapsible" data-target="shadow-options">
                        <span class="toggle-label">
                            <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                            Shadow
                        </span>
                        <div class="toggle active" id="shadow-toggle"></div>
                    </div>
                </div>

                <div id="shadow-options">
                    <div class="control-group">
                        <label class="control-label">Shadow Color</label>
                        <div class="color-input-wrapper">
                            <input type="color" id="shadow-color" value="#000000">
                            <input type="text" id="shadow-color-hex" value="#000000">
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Blur</label>
                        <div class="control-row">
                            <input type="range" id="shadow-blur" min="0" max="100" value="40">
                            <span class="range-value" id="shadow-blur-value">40px</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Opacity</label>
                        <div class="control-row">
                            <input type="range" id="shadow-opacity" min="0" max="100" value="30">
                            <span class="range-value" id="shadow-opacity-value">30%</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Offset Y</label>
                        <div class="control-row">
                            <input type="range" id="shadow-y" min="-50" max="100" value="20">
                            <span class="range-value" id="shadow-y-value">20px</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Offset X</label>
                        <div class="control-row">
                            <input type="range" id="shadow-x" min="-50" max="50" value="0">
                            <span class="range-value" id="shadow-x-value">0px</span>
                        </div>
                    </div>
                </div>

                <div class="divider"></div>

                <div class="control-group">
                    <div class="toggle-row collapsible collapsed" data-target="frame-options">
                        <span class="toggle-label">
                            <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                            Border
                        </span>
                        <div class="toggle" id="frame-toggle"></div>
                    </div>
                </div>

                <div id="frame-options" style="display: none;">
                    <div class="control-group">
                        <label class="control-label">Border Color</label>
                        <div class="color-input-wrapper">
                            <input type="color" id="frame-color" value="#1d1d1f">
                            <input type="text" id="frame-color-hex" value="#1d1d1f">
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Border Width</label>
                        <div class="control-row">
                            <input type="range" id="frame-width" min="1" max="50" value="12">
                            <span class="range-value" id="frame-width-value">12px</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Border Opacity</label>
                        <div class="control-row">
                            <input type="range" id="frame-opacity" min="0" max="100" value="100">
                            <span class="range-value" id="frame-opacity-value">100%</span>
                        </div>
                    </div>
                </div>
                </div><!-- end 2d-only-settings -->

                <div id="3d-tip" class="tip-box" style="display: none;">
                    <img src="/appscreen/img/info.svg" width="16" height="16" alt="Info">
                    <div class="tip-content">
                        <strong>Interactive Controls</strong>
                        <span>Drag on preview to rotate  Alt+drag to move</span>
                    </div>
                </div>
            </div>

            <!-- Text Tab -->
            <div class="tab-content" id="tab-text">
                <div class="control-group">
                    <div class="toggle-row collapsible" data-target="headline-options">
                        <span class="toggle-label">
                            <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                            Headline
                        </span>
                        <div class="toggle active" id="headline-toggle"></div>
                    </div>
                </div>

                <div id="headline-options">
                <div class="control-group">
                    <div class="textarea-with-button">
                        <textarea id="headline-text" rows="2" placeholder="Your feature headline"></textarea>
                        <button class="magic-translate-btn" id="translate-headline-btn" title="Translate to all languages">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 8l6 6M4 14l6-6 2-3M2 5h12M7 2v3M22 22l-5-10-5 10M14 18h6"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Headline Font</label>
                    <div class="font-picker" id="font-picker">
                        <button class="font-picker-trigger" id="font-picker-trigger">
                            <span class="font-picker-preview" id="font-picker-preview">SF Pro Display</span>
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </button>
                        <div class="font-picker-dropdown" id="font-picker-dropdown">
                            <div class="font-picker-search">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="M21 21l-4.35-4.35"/>
                                </svg>
                                <input type="text" id="font-search" placeholder="Search fonts..." autocomplete="off">
                            </div>
                            <div class="font-picker-categories">
                                <button class="font-category active" data-category="popular">Popular</button>
                                <button class="font-category" data-category="system">System</button>
                                <button class="font-category" data-category="all">All</button>
                            </div>
                            <div class="font-picker-list" id="font-picker-list">
                                <!-- Font options populated by JS -->
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="headline-font" value="-apple-system, BlinkMacSystemFont, 'SF Pro Display'">
                    <div class="text-style-bar" id="headline-style">
                        <input type="number" id="headline-size" min="12" max="300" value="100" title="Font Size">
                        <input type="color" id="headline-color" value="#ffffff" title="Text Color">
                        <select id="headline-weight" title="Font Weight">
                            <option value="300">Light</option>
                            <option value="400">Regular</option>
                            <option value="500">Medium</option>
                            <option value="600" selected>Semibold</option>
                            <option value="700">Bold</option>
                            <option value="800">Heavy</option>
                            <option value="900">Black</option>
                        </select>
                        <button data-style="italic" title="Italic">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="19" y1="4" x2="10" y2="4"/>
                                <line x1="14" y1="20" x2="5" y2="20"/>
                                <line x1="15" y1="4" x2="9" y2="20"/>
                            </svg>
                        </button>
                        <button data-style="underline" title="Underline">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"/>
                                <line x1="4" y1="21" x2="20" y2="21"/>
                            </svg>
                        </button>
                        <button data-style="strikethrough" title="Strikethrough">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="4" y1="12" x2="20" y2="12"/>
                                <path d="M17.5 7.5c-1-1.5-2.5-2.5-5.5-2.5-4 0-6 2-6 4.5 0 1.5.5 2.5 2 3.5"/>
                                <path d="M10 16.5c.5.5 1.5 1 3 1 4 0 5.5-2 5.5-4"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Text Position</label>
                    <div class="btn-group" id="text-position">
                        <button class="active" data-position="top">Top</button>
                        <button data-position="bottom">Bottom</button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Text Align</label>
                    <div class="btn-group" id="text-align">
                        <button data-align="left">Left</button>
                        <button class="active" data-align="center">Center</button>
                        <button data-align="right">Right</button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Text Vertical Offset</label>
                    <div class="control-row">
                        <input type="range" id="text-offset-y" min="0" max="100" value="12">
                        <span class="range-value" id="text-offset-y-value">12%</span>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Text Horizontal Offset</label>
                    <div class="control-row">
                        <input type="range" id="text-offset-x" min="-50" max="50" value="0">
                        <span class="range-value" id="text-offset-x-value">0%</span>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Line Height</label>
                    <div class="control-row">
                        <input type="range" id="line-height" min="80" max="250" value="110">
                        <span class="range-value" id="line-height-value">110%</span>
                    </div>
                </div>

                <div class="control-group">
                    <div class="toggle-row" id="highlight-toggle-row">
                        <span class="toggle-label">Highlight Words</span>
                        <div class="toggle" id="highlight-toggle"></div>
                    </div>
                </div>

                <div class="control-group" id="highlight-options" style="display: none;">
                    <label class="control-label">Words to highlight (comma-separated)</label>
                    <div class="control-row">
                        <input type="text" id="highlight-words" placeholder="pro, fast, secure">
                        <input type="color" id="highlight-color" value="#ffd166" title="Highlight Color">
                    </div>
                </div>
                </div><!-- end headline-options -->

                <div class="divider"></div>

                <div class="control-group">
                    <div class="toggle-row collapsible collapsed" data-target="subheadline-options">
                        <span class="toggle-label">
                            <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                            Subheadline
                        </span>
                        <div class="toggle" id="subheadline-toggle"></div>
                    </div>
                </div>

                <div id="subheadline-options" style="display: none;">
                <div class="control-group">
                    <div class="textarea-with-button">
                        <textarea id="subheadline-text" rows="2" placeholder="Optional subheadline"></textarea>
                        <button class="magic-translate-btn" id="translate-subheadline-btn" title="Translate to all languages">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 8l6 6M4 14l6-6 2-3M2 5h12M7 2v3M22 22l-5-10-5 10M14 18h6"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Subheadline Font</label>
                    <div class="font-picker" id="subheadline-font-picker">
                        <button class="font-picker-trigger" id="subheadline-font-picker-trigger">
                            <span class="font-picker-preview" id="subheadline-font-picker-preview">SF Pro Display</span>
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </button>
                        <div class="font-picker-dropdown" id="subheadline-font-picker-dropdown">
                            <div class="font-picker-search">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="M21 21l-4.35-4.35"/>
                                </svg>
                                <input type="text" id="subheadline-font-search" placeholder="Search fonts..." autocomplete="off">
                            </div>
                            <div class="font-picker-categories">
                                <button class="font-category active" data-category="popular">Popular</button>
                                <button class="font-category" data-category="system">System</button>
                                <button class="font-category" data-category="all">All</button>
                            </div>
                            <div class="font-picker-list" id="subheadline-font-picker-list">
                                <!-- Font options populated by JS -->
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="subheadline-font" value="-apple-system, BlinkMacSystemFont, 'SF Pro Display'">
                    <div class="text-style-bar" id="subheadline-style">
                        <input type="number" id="subheadline-size" min="12" max="200" value="50" title="Font Size">
                        <input type="color" id="subheadline-color" value="#ffffff" title="Text Color">
                        <select id="subheadline-weight" title="Font Weight">
                            <option value="300">Light</option>
                            <option value="400" selected>Regular</option>
                            <option value="500">Medium</option>
                            <option value="600">Semibold</option>
                            <option value="700">Bold</option>
                            <option value="800">Heavy</option>
                            <option value="900">Black</option>
                        </select>
                        <button data-style="italic" title="Italic">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="19" y1="4" x2="10" y2="4"/>
                                <line x1="14" y1="20" x2="5" y2="20"/>
                                <line x1="15" y1="4" x2="9" y2="20"/>
                            </svg>
                        </button>
                        <button data-style="underline" title="Underline">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"/>
                                <line x1="4" y1="21" x2="20" y2="21"/>
                            </svg>
                        </button>
                        <button data-style="strikethrough" title="Strikethrough">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="4" y1="12" x2="20" y2="12"/>
                                <path d="M17.5 7.5c-1-1.5-2.5-2.5-5.5-2.5-4 0-6 2-6 4.5 0 1.5.5 2.5 2 3.5"/>
                                <path d="M10 16.5c.5.5 1.5 1 3 1 4 0 5.5-2 5.5-4"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Subheadline Opacity</label>
                    <div class="control-row">
                        <input type="range" id="subheadline-opacity" min="0" max="100" value="70">
                        <span class="range-value" id="subheadline-opacity-value">70%</span>
                    </div>
                </div>
                </div><!-- end subheadline-options -->
            </div>

            </div><!-- end sidebar-content -->
        </div>
    </div>

    <!-- Project Name Modal -->
    <div class="modal-overlay" id="project-modal">
        <div class="modal">
            <div class="modal-icon" style="background: rgba(10, 132, 255, 0.2);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--accent);">
                    <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
                </svg>
            </div>
            <h3 class="modal-title" id="project-modal-title">New Project</h3>
            <div class="control-group" style="margin: 20px 0; text-align: left;">
                <label class="control-label">Project Name</label>
                <input type="text" id="project-name-input" placeholder="My App Screenshots">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" id="project-modal-cancel">Cancel</button>
                <button class="modal-btn modal-btn-confirm" id="project-modal-confirm" style="background: var(--accent);">Create</button>
            </div>
        </div>
    </div>

    <!-- Delete Project Modal -->
    <div class="modal-overlay" id="delete-project-modal">
        <div class="modal">
            <div class="modal-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            <h3 class="modal-title">Delete Project?</h3>
            <p class="modal-message" id="delete-project-message">Are you sure you want to delete this project? This cannot be undone.</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" id="delete-project-cancel">Cancel</button>
                <button class="modal-btn modal-btn-confirm" id="delete-project-confirm">Delete</button>
            </div>
        </div>
    </div>

    <!-- Apply Style to All Confirmation Modal -->
    <div class="modal-overlay" id="apply-style-modal">
        <div class="modal">
            <div class="modal-icon" style="background: rgba(10, 132, 255, 0.2);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--accent);">
                    <rect x="9" y="9" width="13" height="13" rx="2"/>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                </svg>
            </div>
            <h3 class="modal-title">Apply Style to All?</h3>
            <p class="modal-message">This will copy the background, device, and text settings from this screenshot to all other screenshots. This cannot be undone.</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" id="apply-style-cancel">Cancel</button>
                <button class="modal-btn modal-btn-confirm" id="apply-style-confirm" style="background: var(--accent);">Apply to All</button>
            </div>
        </div>
    </div>

    <!-- Magical Titles Confirmation Modal -->
    <div class="modal-overlay" id="magical-titles-modal">
        <div class="modal">
            <div class="modal-icon" style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 140, 0, 0.2) 100%);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: #ffa500;">
                    <path d="M12 2l2.4 7.4H22l-6 4.6 2.3 7-6.3-4.6L5.7 21l2.3-7-6-4.6h7.6z"/>
                </svg>
            </div>
            <h3 class="modal-title">Generate Magical Titles</h3>
            <p class="modal-message">This will use AI to analyze your screenshots and generate marketing headlines and subheadlines for each screen.</p>
            <p class="modal-message" style="margin-top: 8px; font-size: 12px; color: var(--text-tertiary);">Screenshots: <span id="magical-titles-count">0</span>  Provider: <span id="magical-titles-provider">-</span></p>
            <div class="translate-source" style="margin-top: 16px;">
                <label class="control-label">Generate titles in</label>
                <select id="magical-titles-language" style="margin-bottom: 0;">
                    <!-- Populated dynamically -->
                </select>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" id="magical-titles-cancel">Cancel</button>
                <button class="modal-btn modal-btn-confirm" id="magical-titles-confirm" style="background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);">Generate Titles</button>
            </div>
        </div>
    </div>

    <!-- Migration Modal -->
    <div class="modal-overlay" id="migration-modal">
        <div class="modal">
            <div class="modal-icon modal-icon-info">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            <h3 class="modal-title">Old Project Format Detected</h3>
            <p class="modal-message">This project uses an older format where all screenshots share the same settings. The new format allows each screenshot to have its own background, position, and text settings.</p>
            <p class="modal-message" style="margin-top: 8px;">Would you like to convert this project to the new format?</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" onclick="hideMigrationPrompt()">Keep Old Format</button>
                <button class="modal-btn modal-btn-primary" onclick="convertProject()">Convert Project</button>
            </div>
        </div>
    </div>

    <!-- Translate Modal -->
    <div class="modal-overlay" id="translate-modal">
        <div class="modal translate-modal">
            <div class="modal-icon" style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: #764ba2;">
                    <path d="M5 8l6 6M4 14l6-6 2-3M2 5h12M7 2v3M22 22l-5-10-5 10M14 18h6"/>
                </svg>
            </div>
            <h3 class="modal-title">Translate <span id="translate-target-type">Headline</span></h3>
            <p class="modal-message">Select a source language and enter translations for each active language.</p>
            
            <div class="translate-source">
                <label class="control-label">Source Language</label>
                <select id="translate-source-lang">
                    <option value="en"> English (US)</option>
                </select>
                <div class="source-text-preview" id="source-text-preview">No text entered</div>
                <button class="ai-translate-btn" id="ai-translate-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    <span>Auto-translate with AI</span>
                </button>
                <div class="ai-translate-status" id="ai-translate-status"></div>
            </div>

            <div class="translate-targets" id="translate-targets">
                <!-- Target languages will be populated here -->
            </div>

            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" id="translate-modal-cancel">Cancel</button>
                <button class="modal-btn modal-btn-confirm" id="translate-modal-apply" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">Apply Translations</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal settings-modal">
            <div class="modal-header">
                <h3 class="modal-title">Settings</h3>
                <button class="modal-close" id="settings-modal-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <div class="settings-section">
                <h4 class="settings-section-title">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    AI Translation Provider
                </h4>
                <p class="settings-description">Choose which AI provider to use for translations. API keys are stored locally in your browser.</p>
                <div class="settings-provider-selector">
                    <label class="settings-provider-option">
                        <input type="radio" name="ai-provider" value="anthropic" checked>
                        <span class="provider-label">Anthropic (Claude)</span>
                    </label>
                    <label class="settings-provider-option">
                        <input type="radio" name="ai-provider" value="openai">
                        <span class="provider-label">OpenAI (GPT)</span>
                    </label>
                    <label class="settings-provider-option">
                        <input type="radio" name="ai-provider" value="google">
                        <span class="provider-label">Google (Gemini)</span>
                    </label>
                </div>
            </div>

            <div class="settings-section settings-api-section" id="settings-anthropic" data-provider="anthropic">
                <h4 class="settings-section-title">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
                    </svg>
                    Claude API Key
                </h4>
                <div class="settings-input-group">
                    <input type="password" id="settings-api-key-anthropic" placeholder="sk-ant-api03-..." />
                    <button class="settings-show-key" data-target="settings-api-key-anthropic" title="Show/hide key">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </button>
                </div>
                <div class="settings-key-status" id="settings-key-status-anthropic"></div>
                <div class="settings-model-group">
                    <label class="settings-model-label">Model</label>
                    <select id="settings-model-anthropic" class="settings-model-select">
                        <!-- Populated dynamically from llm.js -->
                    </select>
                </div>
                <a href="https://console.anthropic.com/settings/keys" target="_blank" class="settings-link">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"/>
                    </svg>
                    Get your API key from Anthropic Console
                </a>
            </div>

            <div class="settings-section settings-api-section" id="settings-openai" data-provider="openai" style="display: none;">
                <h4 class="settings-section-title">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
                    </svg>
                    OpenAI API Key
                </h4>
                <div class="settings-input-group">
                    <input type="password" id="settings-api-key-openai" placeholder="sk-..." />
                    <button class="settings-show-key" data-target="settings-api-key-openai" title="Show/hide key">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </button>
                </div>
                <div class="settings-key-status" id="settings-key-status-openai"></div>
                <div class="settings-model-group">
                    <label class="settings-model-label">Model</label>
                    <select id="settings-model-openai" class="settings-model-select">
                        <!-- Populated dynamically from llm.js -->
                    </select>
                </div>
                <a href="https://platform.openai.com/api-keys" target="_blank" class="settings-link">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"/>
                    </svg>
                    Get your API key from OpenAI Platform
                </a>
            </div>

            <div class="settings-section settings-api-section" id="settings-google" data-provider="google" style="display: none;">
                <h4 class="settings-section-title">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
                    </svg>
                    Google AI API Key
                </h4>
                <div class="settings-input-group">
                    <input type="password" id="settings-api-key-google" placeholder="AIza..." />
                    <button class="settings-show-key" data-target="settings-api-key-google" title="Show/hide key">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </button>
                </div>
                <div class="settings-key-status" id="settings-key-status-google"></div>
                <div class="settings-model-group">
                    <label class="settings-model-label">Model</label>
                    <select id="settings-model-google" class="settings-model-select">
                        <!-- Populated dynamically from llm.js -->
                    </select>
                </div>
                <a href="https://aistudio.google.com/app/apikey" target="_blank" class="settings-link">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"/>
                    </svg>
                    Get your API key from Google AI Studio
                </a>
            </div>

            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" id="settings-modal-cancel">Cancel</button>
                <button class="modal-btn modal-btn-confirm" id="settings-modal-save">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal-overlay" id="about-modal">
        <div class="modal">
            <div class="modal-icon" style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);">
                <img src="/appscreen/img/info.svg" width="32" height="32" alt="Info" style="filter: invert(0.5) sepia(1) saturate(5) hue-rotate(200deg);">
            </div>
            <h3 class="modal-title">App Store Screenshot Generator</h3>
            <p class="modal-message" style="margin-bottom: 16px;">A free vibe coded tool for creating beautiful App Store screenshots with customizable backgrounds, text overlays, and device frames.</p>
            <p class="modal-message" style="margin-bottom: 16px;">This is an improved fork of the original project. Original repository: <a href="https://github.com/yuzu-hub/appscreen" target="_blank" style="color: var(--accent);">github.com/yuzu-hub/appscreen</a> by <a href="https://yuzuhub.com/en" target="_blank" style="color: var(--accent);">Stefan from yuzuhub.com</a>.</p>
          
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-confirm" id="about-modal-close" style="background: var(--accent);">Close</button>
            </div>
        </div>
    </div>

    <!-- Languages Modal -->
    <div class="modal-overlay" id="languages-modal">
        <div class="modal languages-modal">
            <div class="modal-header">
                <h3 class="modal-title">Project Languages</h3>
                <button class="modal-close" id="languages-modal-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <p class="modal-message">Manage the languages available for text in this project.</p>

            <div class="languages-list" id="languages-list">
                <!-- Languages will be populated by JS -->
            </div>

            <div class="add-language-section">
                <select id="add-language-select" class="control-select">
                    <option value="">Add a language...</option>
                </select>
            </div>

            <div class="modal-buttons">
                <button class="modal-btn modal-btn-confirm" id="languages-modal-done" style="background: var(--accent);">Done</button>
            </div>
        </div>
    </div>

    <!-- Screenshot Translations Modal -->
    <div class="modal-overlay" id="screenshot-translations-modal">
        <div class="modal translations-modal">
            <div class="modal-header">
                <h3 class="modal-title">Screenshot Translations</h3>
                <button class="modal-close" id="screenshot-translations-modal-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <p class="modal-message">Upload localized versions of this screenshot for each language.</p>

            <div class="translations-list" id="screenshot-translations-list">
                <!-- Translation items will be populated by JS -->
            </div>

            <input type="file" id="translation-file-input" accept="image/*" style="display: none;">

            <div class="modal-buttons">
                <button class="modal-btn modal-btn-confirm" id="screenshot-translations-modal-done" style="background: var(--accent);">Done</button>
            </div>
        </div>
    </div>

    <!-- Export Language Choice Modal -->
    <div class="modal-overlay" id="export-language-modal">
        <div class="modal">
            <div class="modal-icon" style="background: rgba(10, 132, 255, 0.2);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--accent);">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            </div>
            <h3 class="modal-title">Export Screenshots</h3>
            <p class="modal-message">Choose which language versions to export.</p>

            <div class="export-options">
                <button class="export-option" id="export-current-only">
                    <span class="export-option-title">Current Language Only</span>
                    <span class="export-option-desc" id="export-current-lang">English</span>
                </button>
                <button class="export-option" id="export-all-languages">
                    <span class="export-option-title">All Languages</span>
                    <span class="export-option-desc">Separate folder per language</span>
                </button>
            </div>

            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" id="export-language-modal-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Duplicate Screenshot Modal -->
    <div class="modal-overlay" id="duplicate-screenshot-modal">
        <div class="modal duplicate-screenshot-modal">
            <div class="modal-icon" style="background: rgba(255, 159, 10, 0.2);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: #ff9f0a;">
                    <path d="M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            <h3 class="modal-title">Screenshot Already Exists</h3>
            <p class="modal-message">A screenshot with this filename already exists. What would you like to do?</p>

            <div class="duplicate-comparison">
                <div class="duplicate-item">
                    <span class="duplicate-label">Existing</span>
                    <div class="duplicate-thumb" id="duplicate-existing-thumb"></div>
                    <span class="duplicate-name" id="duplicate-existing-name">screenshot.png</span>
                </div>
                <div class="duplicate-arrow">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </div>
                <div class="duplicate-item">
                    <span class="duplicate-label">New</span>
                    <div class="duplicate-thumb" id="duplicate-new-thumb"></div>
                    <span class="duplicate-name" id="duplicate-new-name">screenshot_de.png</span>
                </div>
            </div>

            <div class="duplicate-options">
                <button class="duplicate-option" id="duplicate-replace">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 2v6h-6M3 12a9 9 0 0115-6.7L21 8M3 22v-6h6M21 12a9 9 0 01-15 6.7L3 16"/>
                    </svg>
                    <div class="duplicate-option-text">
                        <span class="duplicate-option-title">Replace</span>
                        <span class="duplicate-option-desc">Replace the <span id="duplicate-lang-name">language</span> version</span>
                    </div>
                </button>
                <button class="duplicate-option" id="duplicate-create-new">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                    <div class="duplicate-option-text">
                        <span class="duplicate-option-title">Create New</span>
                        <span class="duplicate-option-desc">Add as a separate screenshot</span>
                    </div>
                </button>
                <button class="duplicate-option" id="duplicate-ignore">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                    <div class="duplicate-option-text">
                        <span class="duplicate-option-title">Skip</span>
                        <span class="duplicate-option-desc">Don't upload this file</span>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Export Progress Modal -->
    <div class="modal-overlay" id="export-progress-modal">
        <div class="modal export-progress-modal">
            <div class="modal-icon" style="background: rgba(10, 132, 255, 0.2);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--accent);">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            </div>
            <h2>Exporting Screenshots</h2>
            <p id="export-progress-status">Preparing export...</p>
            <div class="export-progress-bar">
                <div class="export-progress-fill" id="export-progress-fill"></div>
            </div>
            <p class="export-progress-detail" id="export-progress-detail"></p>
        </div>
    </div>
`,BK=`* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --bg-primary: #0a0a0b;
    --bg-secondary: #141416;
    --bg-tertiary: #1c1c1f;
    --border-color: #2a2a2e;
    --text-primary: #ffffff;
    --text-secondary: #a1a1a6;
    --accent: #0a84ff;
    --accent-hover: #409cff;
}

html, body {
    /* Prevent browser back/forward gesture from horizontal swipe */
    overscroll-behavior-x: none;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
}

/* Electron: Make top area draggable for window movement */
html.electron-app {
    --electron-titlebar-height: 38px;
}

html.electron-app body {
    padding-top: var(--electron-titlebar-height);
    overflow: hidden; /* Prevent body scroll in Electron */
}

/* Fixed drag region - added via JS as a real DOM element */
.electron-titlebar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: var(--electron-titlebar-height, 38px);
    -webkit-app-region: drag;
    z-index: 99999;
    background: var(--bg-secondary);
    pointer-events: auto;
}

/* Adjust heights for Electron titlebar */
html.electron-app .app-container {
    min-height: calc(100vh - var(--electron-titlebar-height));
    max-height: calc(100vh - var(--electron-titlebar-height));
}

html.electron-app .sidebar {
    max-height: calc(100vh - var(--electron-titlebar-height));
}

html.electron-app .right-sidebar {
    max-height: calc(100vh - var(--electron-titlebar-height));
}

/* Hide About and Settings buttons in Electron (available via menu instead) */
html.electron-app #about-btn,
html.electron-app #settings-btn {
    display: none;
}

.app-container {
    display: grid;
    grid-template-columns: 320px 1fr 340px;
    min-height: 100vh;
}

/* Sidebar styles */
.sidebar {
    background: var(--bg-secondary);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    max-height: 100vh;
}

.sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    padding-bottom: 0;
}

.sidebar-footer {
    flex-shrink: 0;
    padding: 16px 20px 20px;
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

.sidebar-right {
    border-right: none;
    border-left: 1px solid var(--border-color);
}

.sidebar-right .sidebar-header {
    flex-shrink: 0;
}

.sidebar-right .sidebar-header .tabs {
    display: flex;
    width: 100%;
    border-radius: 0;
    padding: 0;
    gap: 0;
    background: transparent;
    border-bottom: 1px solid var(--border-color);
}

.sidebar-right .sidebar-header .tab {
    flex: 1 1 0;
    width: 0;
    border-radius: 0;
    padding: 12px 8px;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
}

.sidebar-right .sidebar-header .tab.active {
    background: transparent;
    border-bottom-color: var(--accent);
}

.sidebar-right .sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

.sidebar h2 {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 16px;
}

.sidebar h3 {
    font-size: 15px;
    font-weight: 600;
    margin-bottom: 12px;
    color: var(--text-primary);
}

/* Upload item (in screenshot list) */
.upload-item {
    border: 2px dashed var(--border-color);
    cursor: pointer;
}

.upload-item:hover {
    border-color: var(--accent);
    background: rgba(10, 132, 255, 0.05);
}

.upload-item.dragover {
    border-color: var(--accent);
    background: rgba(10, 132, 255, 0.1);
}

.upload-item-icon {
    width: 24px;
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    opacity: 0.5;
    flex-shrink: 0;
}

.upload-item-icon svg {
    width: 18px;
    height: 18px;
}

.upload-item:hover .upload-item-icon {
    opacity: 0.8;
    color: var(--accent);
}

/* Screenshot list */
.screenshot-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
    border-radius: 8px;
    border: 2px dashed transparent;
    transition: all 0.2s;
}

.screenshot-list.drop-active {
    border-color: var(--accent);
    background: rgba(99, 102, 241, 0.1);
}

.screenshot-item {
    position: relative;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 8px;
    background: var(--bg-tertiary);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
    border: 2px solid transparent;
}

.screenshot-item:hover {
    background: var(--bg-primary);
}

.screenshot-item.selected {
    border-color: var(--accent);
    background: rgba(10, 132, 255, 0.1);
}

.screenshot-thumb {
    width: 24px;
    height: 42px;
    object-fit: cover;
    border-radius: 3px;
    background: var(--bg-primary);
}

.screenshot-info {
    flex: 1;
    min-width: 0;
}

.screenshot-name {
    font-size: 13px;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.screenshot-device {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 2px;
}

/* Screenshot item menu */
.screenshot-menu-wrapper {
    position: relative;
}

.screenshot-menu-btn {
    width: 28px;
    height: 28px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.screenshot-menu-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.screenshot-menu {
    display: none;
    position: absolute;
    right: 0;
    top: 100%;
    margin-top: 4px;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 4px;
    min-width: 200px;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.screenshot-menu.open {
    display: block;
}

.screenshot-menu-item {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    border: none;
    background: transparent;
    color: var(--text-primary);
    font-size: 12px;
    cursor: pointer;
    border-radius: 6px;
    text-align: left;
    transition: background 0.15s;
}

.screenshot-menu-item:hover {
    background: var(--bg-hover);
}

.screenshot-menu-item.danger:hover {
    background: #ff453a20;
    color: #ff453a;
}

.screenshot-menu-item svg {
    flex-shrink: 0;
    opacity: 0.7;
}

/* Transfer mode styles */
.transfer-hint {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    background: rgba(10, 132, 255, 0.15);
    border: 1px solid var(--accent);
    border-radius: 8px;
    margin-bottom: 8px;
    font-size: 12px;
    color: var(--accent);
}

.transfer-cancel {
    padding: 4px 10px;
    border: none;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border-radius: 4px;
    cursor: pointer;
    font-size: 11px;
    transition: background 0.2s;
}

.transfer-cancel:hover {
    background: var(--bg-secondary);
}

.screenshot-item.transfer-target {
    border-color: var(--accent);
    background: rgba(10, 132, 255, 0.1);
}

.screenshot-item.transfer-source-option {
    cursor: pointer;
    border-color: transparent;
}

.screenshot-item.transfer-source-option:hover {
    border-color: var(--accent);
    background: rgba(10, 132, 255, 0.05);
}

/* Drag handle */
.drag-handle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    color: var(--text-secondary);
    opacity: 0.4;
    cursor: grab;
    flex-shrink: 0;
}

.drag-handle:hover {
    opacity: 0.8;
}

.screenshot-item:active .drag-handle {
    cursor: grabbing;
}

/* Drag and drop states */
.screenshot-item.dragging {
    opacity: 0.5;
    background: var(--bg-primary);
}

.screenshot-item.drag-insert-after::after {
    content: '';
    position: absolute;
    bottom: -3px;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--accent);
    border-radius: 1px;
}

.screenshot-item.drag-insert-before::before {
    content: '';
    position: absolute;
    top: -3px;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--accent);
    border-radius: 1px;
}

/* Set as Default button */
.set-default-btn {
    width: 100%;
    padding: 8px 12px;
    margin-top: 8px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-secondary);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.set-default-btn:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--accent);
}

.set-default-btn:active {
    transform: scale(0.98);
}

/* Controls */
.control-group {
    margin-bottom: 20px;
}

.control-label {
    display: block;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.control-row {
    display: flex;
    gap: 12px;
    align-items: center;
}

.control-row input[type="range"] {
    flex: 1;
}

.control-row .range-value {
    min-width: 45px;
    text-align: right;
}

input[type="text"],
input[type="number"],
select,
textarea {
    width: 100%;
    padding: 10px 12px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 14px;
    transition: all 0.2s;
}

input[type="text"]:focus,
input[type="number"]:focus,
select:focus,
textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(10, 132, 255, 0.2);
}

input[type="color"] {
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: transparent;
}

input[type="range"] {
    width: 100%;
    height: 4px;
    border-radius: 2px;
    background: var(--bg-tertiary);
    appearance: none;
    cursor: pointer;
}

input[type="range"]::-webkit-slider-thumb {
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
}

.range-value {
    min-width: 40px;
    text-align: right;
    font-size: 13px;
    color: var(--text-secondary);
}

/* Button group */
.btn-group {
    display: flex;
    gap: 0;
    background: var(--bg-tertiary);
    padding: 3px;
    border-radius: 8px;
}

.btn-group button {
    flex: 1 1 0;
    width: 0;
    padding: 8px 12px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s;
}

.btn-group button.active {
    background: var(--bg-primary);
    color: var(--text-primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.btn-group button:hover:not(.active) {
    color: var(--text-primary);
}

/* Text style bar - compact row with all text formatting options */
.text-style-bar {
    display: flex;
    gap: 4px;
    margin-top: 8px;
    background: var(--bg-tertiary);
    padding: 4px;
    border-radius: 8px;
}

.text-style-bar input[type="number"] {
    width: 52px;
    padding: 6px 8px;
    background: var(--bg-primary);
    border: none;
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 12px;
    text-align: center;
    appearance: textfield;
    -moz-appearance: textfield;
}

.text-style-bar input[type="number"]::-webkit-outer-spin-button,
.text-style-bar input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.text-style-bar input[type="color"] {
    width: 32px;
    height: 32px;
    padding: 2px;
    background: var(--bg-primary);
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.text-style-bar input[type="color"]::-webkit-color-swatch-wrapper {
    padding: 2px;
}

.text-style-bar input[type="color"]::-webkit-color-swatch {
    border: none;
    border-radius: 4px;
}

.text-style-bar select {
    flex: 1;
    min-width: 70px;
    padding: 6px 8px;
    background: var(--bg-primary);
    border: none;
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 11px;
    cursor: pointer;
}

.text-style-bar input[type="range"] {
    width: 50px;
    height: 32px;
    margin: 0;
    padding: 0 4px;
    background: var(--bg-primary);
    border-radius: 6px;
    cursor: pointer;
    accent-color: var(--accent);
}

.text-style-bar button {
    flex: 0 0 auto;
    width: 32px;
    height: 32px;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 6px;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.text-style-bar button:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.text-style-bar button.active {
    background: var(--accent);
    color: white;
}

.text-style-bar button svg {
    width: 14px;
    height: 14px;
}

/* Legacy text-style-group - keeping for backwards compatibility */
.text-style-group {
    display: flex;
    gap: 4px;
}

.text-style-group select {
    flex: 1;
    min-width: 90px;
    padding: 8px 10px;
    background: var(--bg-primary);
    border: none;
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 12px;
    cursor: pointer;
}

.text-style-group button {
    flex: 0 0 auto;
    width: 36px;
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.text-style-group button svg {
    width: 16px;
    height: 16px;
}

/* Gradient editor */
.gradient-stops {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.gradient-stop {
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--bg-tertiary);
    padding: 8px;
    border-radius: 8px;
}

.gradient-stop input[type="color"] {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    cursor: pointer;
}

.gradient-stop input[type="number"] {
    flex: 1;
    width: auto;
}

.gradient-stop span {
    color: var(--text-secondary);
    font-size: 13px;
}

.add-stop-btn {
    padding: 10px;
    background: transparent;
    border: 1px dashed var(--border-color);
    border-radius: 8px;
    color: var(--text-secondary);
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    margin-top: 4px;
}

.add-stop-btn:hover {
    border-color: var(--accent);
    color: var(--accent);
    background: rgba(99, 102, 241, 0.1);
}

/* Canvas area */
.canvas-area {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    background: var(--bg-primary);
    overflow: hidden;
    position: relative;
}

.preview-strip {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    width: 100%;
    transition: transform 0.3s ease-out;
}

.preview-strip.sliding {
    pointer-events: none;
}

.side-preview {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0.6;
    transition: opacity 0.3s, left 0.3s ease-out, right 0.3s ease-out;
    cursor: pointer;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
}

.side-preview-left,
.side-preview-far-left {
    direction: rtl;
}

.side-preview-left canvas,
.side-preview-far-left canvas {
    direction: ltr;
}

.side-preview:hover {
    opacity: 0.85;
}

.side-preview.hidden {
    display: none;
}

.side-preview canvas {
    display: block;
}

.canvas-wrapper {
    position: relative;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
    border-radius: 8px;
    overflow: hidden;
    z-index: 1;
    transition: transform 0.3s ease-out, opacity 0.3s;
}

.canvas-wrapper.sliding-out-left {
    transform: translateX(-100%);
    opacity: 0;
}

.canvas-wrapper.sliding-out-right {
    transform: translateX(100%);
    opacity: 0;
}

#preview-canvas {
    display: block;
}

#preview-canvas-left,
#preview-canvas-right {
    display: block;
}

#threejs-container {
    width: 400px;
    height: 700px;
    display: block;
}

#threejs-container canvas {
    display: block;
}

.no-screenshot {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: var(--text-secondary);
    pointer-events: none;
    z-index: 10;
}

.no-screenshot svg {
    width: 80px;
    height: 80px;
    margin-bottom: 16px;
    opacity: 0.3;
}

.no-screenshot p {
    font-size: 16px;
    opacity: 0.8;
}

/* Export and Output Size Section */
.export-output-section {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.export-row {
    display: flex;
    gap: 8px;
    align-items: stretch;
}

.output-size-dropdown {
    flex: 1;
    position: relative;
}

.output-size-trigger {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 8px 12px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
}

.output-size-trigger:hover {
    background: var(--bg-primary);
    border-color: var(--text-secondary);
}

.output-size-dropdown.open .output-size-trigger {
    border-color: var(--accent);
}

.output-size-info {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 1px;
}

.output-size-name {
    font-size: 12px;
    font-weight: 500;
    color: var(--text-primary);
}

.output-size-dims {
    font-size: 10px;
    color: var(--text-secondary);
}

.dropdown-arrow {
    color: var(--text-secondary);
    transition: transform 0.2s;
}

.output-size-dropdown.open .dropdown-arrow {
    transform: rotate(180deg);
}

.output-size-menu {
    position: absolute;
    bottom: calc(100% + 4px);
    left: 0;
    right: 0;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 6px;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.2s;
    z-index: 100;
}

.output-size-dropdown.open .output-size-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.output-size-menu .device-option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 10px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s;
    border: none;
    background: transparent;
}

.output-size-menu .device-option:hover {
    background: var(--bg-tertiary);
}

.output-size-menu .device-option.selected {
    background: rgba(10, 132, 255, 0.15);
}

.output-size-menu .device-option-name {
    font-size: 12px;
    font-weight: 500;
}

.output-size-menu .device-option-size {
    font-size: 10px;
    color: var(--text-secondary);
}

.output-size-divider {
    height: 1px;
    background: var(--border-color);
    margin: 4px 6px;
}

.custom-size-inputs {
    display: none;
    align-items: center;
    gap: 6px;
    padding: 8px 10px;
}

.custom-size-inputs.visible {
    display: flex;
}

.custom-size-inputs input {
    flex: 1;
    width: 60px;
    padding: 6px 8px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 12px;
    text-align: center;
}

.custom-size-inputs input:focus {
    outline: none;
    border-color: var(--accent);
}

.custom-size-x {
    color: var(--text-secondary);
    font-size: 12px;
}

.export-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 10px 12px;
    background: var(--accent);
    border: none;
    border-radius: 8px;
    color: white;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}

.export-btn:hover {
    background: var(--accent-hover);
}

.export-btn.secondary {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    padding: 10px;
}

.export-btn.secondary:hover {
    background: var(--border-color);
}

.export-btn svg {
    flex-shrink: 0;
}

.export-all-btn {
    width: 100%;
}

/* Modal styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
}

.modal-overlay.visible {
    opacity: 1;
    visibility: visible;
}

.modal {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    padding: 32px;
    max-width: 400px;
    width: 90%;
    text-align: center;
    transform: scale(0.9);
    transition: transform 0.2s ease;
}

.modal-overlay.visible .modal {
    transform: scale(1);
}

.modal-icon {
    width: 56px;
    height: 56px;
    margin: 0 auto 20px;
    background: #ff453a20;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-icon svg {
    width: 28px;
    height: 28px;
    color: #ff453a;
}

.modal-title {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text-primary);
}

.modal-message {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.5;
    margin-bottom: 24px;
}

.modal-buttons {
    display: flex;
    gap: 12px;
}

.modal-btn {
    flex: 1;
    padding: 12px 20px;
    border: none;
    border-radius: 10px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.modal-btn-cancel {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.modal-btn-cancel:hover {
    background: var(--border-color);
}

.modal-btn-confirm {
    background: #ff453a;
    color: white;
}

.modal-btn-confirm:hover {
    background: #ff6961;
}

.modal-btn-primary {
    background: var(--accent);
    color: white;
}

.modal-btn-primary:hover {
    background: #409cff;
}

.modal-icon-info {
    background: rgba(10, 132, 255, 0.15);
}

.modal-icon-info svg {
    color: var(--accent);
}

/* Translate modal styles */
.translate-modal {
    max-width: 500px;
    text-align: left;
}

.translate-modal .modal-title {
    text-align: center;
}

.translate-modal .modal-message {
    text-align: center;
}

.translate-source {
    background: var(--bg-tertiary);
    padding: 16px;
    border-radius: 10px;
    margin-bottom: 16px;
}

.translate-source select {
    width: 100%;
    margin-bottom: 12px;
}

.source-text-preview {
    background: var(--bg-primary);
    padding: 12px;
    border-radius: 8px;
    font-size: 14px;
    color: var(--text-secondary);
    min-height: 40px;
    word-break: break-word;
}

.translate-targets {
    max-height: 300px;
    overflow-y: auto;
    margin-bottom: 20px;
}

.translate-target-item {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    background: var(--bg-tertiary);
    border-radius: 8px;
    margin-bottom: 8px;
}

.translate-target-header {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 500;
}

.translate-target-header .flag {
    font-size: 18px;
}

.translate-target-item textarea {
    width: 100%;
    min-height: 60px;
    resize: vertical;
}

.ai-translate-btn {
    width: 100%;
    margin-top: 12px;
    padding: 12px 16px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    border-radius: 8px;
    color: white;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.2s;
}

.ai-translate-btn:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.ai-translate-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.ai-translate-btn.loading {
    background: var(--bg-tertiary);
}

.ai-translate-btn.loading svg {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.ai-translate-status {
    margin-top: 8px;
    font-size: 12px;
    color: var(--text-secondary);
    text-align: center;
    min-height: 18px;
}

.ai-translate-status.error {
    color: #ff453a;
}

.ai-translate-status.success {
    color: #30d158;
}

.translate-target-item.translating {
    opacity: 0.7;
}

.translate-target-item.translating textarea {
    background: var(--bg-primary);
}

/* Settings Modal */
.settings-modal {
    max-width: 480px;
    text-align: left;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 24px;
}

.modal-header .modal-title {
    margin-bottom: 0;
}

.modal-close {
    width: 32px;
    height: 32px;
    border: none;
    border-radius: 8px;
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.modal-close:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.settings-section {
    background: var(--bg-tertiary);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
}

.settings-section-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 15px;
    font-weight: 600;
    margin: 0 0 8px 0;
    color: var(--text-primary);
}

.settings-description {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.5;
    margin: 0 0 16px 0;
}

.settings-provider-selector {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.settings-provider-option {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    flex: 1;
    min-width: 140px;
}

.settings-provider-option:hover {
    border-color: var(--accent);
}

.settings-provider-option input[type="radio"] {
    accent-color: var(--accent);
    width: 16px;
    height: 16px;
    margin: 0;
}

.settings-provider-option input[type="radio"]:checked + .provider-label {
    color: var(--accent);
}

.provider-label {
    font-size: 13px;
    color: var(--text-primary);
    white-space: nowrap;
}

.settings-input-group {
    display: flex;
    gap: 8px;
}

.settings-input-group input {
    flex: 1;
    padding: 12px 14px;
    font-size: 14px;
    font-family: monospace;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
}

.settings-input-group input:focus {
    outline: none;
    border-color: var(--accent);
}

.settings-show-key {
    width: 44px;
    height: 44px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--bg-primary);
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.settings-show-key:hover {
    color: var(--text-primary);
    border-color: var(--accent);
}

.settings-key-status {
    font-size: 12px;
    margin-top: 8px;
    min-height: 18px;
}

.settings-key-status.success {
    color: #30d158;
}

.settings-key-status.error {
    color: #ff453a;
}

.settings-model-group {
    margin-top: 12px;
}

.settings-model-label {
    display: block;
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 6px;
}

.settings-model-select {
    width: 100%;
    padding: 10px 12px;
    font-size: 14px;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23888' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
}

.settings-model-select:hover {
    border-color: var(--text-secondary);
}

.settings-model-select:focus {
    outline: none;
    border-color: var(--accent);
}

.settings-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: var(--accent);
    text-decoration: none;
    margin-top: 12px;
}

.settings-link:hover {
    text-decoration: underline;
}

/* Old device selector (replaced by dropdown) */
/* .device-selector {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
}

.device-option {
    padding: 12px;
    background: var(--bg-tertiary);
    border: 2px solid transparent;
    border-radius: 8px;
    cursor: pointer;
    text-align: center;
    transition: all 0.2s;
}

.device-option:hover {
    background: var(--bg-primary);
}

.device-option.selected {
    border-color: var(--accent);
    background: rgba(10, 132, 255, 0.1);
}

.device-option-name {
    font-size: 12px;
    font-weight: 500;
}

.device-option-size {
    font-size: 10px;
    color: var(--text-secondary);
    margin-top: 2px;
} */

/* Preset backgrounds */
.preset-dropdown {
    position: relative;
}

.preset-dropdown-trigger {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.15s;
}

.preset-dropdown-trigger:hover {
    background: var(--bg-hover);
}

.preset-dropdown-trigger svg {
    transition: transform 0.2s;
}

.preset-dropdown.open .preset-dropdown-trigger svg {
    transform: rotate(180deg);
}

.preset-dropdown-content {
    display: none;
    padding-top: 8px;
}

.preset-dropdown.open .preset-dropdown-content {
    display: block;
}

.preset-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 6px;
}

.preset-swatch {
    aspect-ratio: 1;
    border-radius: 6px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s;
    position: relative;
}

.preset-swatch:hover {
    transform: scale(1.05);
}

.preset-swatch.selected {
    border-color: #fff;
    box-shadow: 0 0 0 2px var(--accent), 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Tabs */
.tabs {
    display: flex;
    gap: 4px;
    background: var(--bg-tertiary);
    padding: 4px;
    border-radius: 8px;
}

.tab {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 8px 4px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    font-size: 11px;
    font-weight: 500;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s;
}

.tab svg {
    opacity: 0.7;
    transition: opacity 0.2s;
}

.tab:hover svg {
    opacity: 1;
}

.tab.active {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.tab.active svg {
    opacity: 1;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

/* Toggle switch */
.toggle-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 0;
}

.toggle-row.collapsible {
    cursor: pointer;
    user-select: none;
}

.toggle-row.collapsible:hover .toggle-label {
    color: var(--text-primary);
}

.toggle-label {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    transition: color 0.15s;
}

.toggle-label .chevron {
    width: 12px;
    height: 12px;
    opacity: 0.5;
    transition: transform 0.2s;
}

.toggle-row.collapsed .chevron {
    transform: rotate(-90deg);
}

.toggle {
    width: 44px;
    height: 24px;
    background: var(--bg-tertiary);
    border-radius: 12px;
    position: relative;
    cursor: pointer;
    transition: all 0.2s;
}

.toggle.active {
    background: var(--accent);
}

.toggle::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
    top: 2px;
    left: 2px;
    transition: all 0.2s;
}

.toggle.active::after {
    left: 22px;
}

/* Divider */
.divider {
    height: 1px;
    background: var(--border-color);
    margin: 20px 0;
}

/* Font picker */
.font-picker {
    position: relative;
}

.font-picker-trigger {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
}

.font-picker-trigger:hover {
    border-color: var(--accent);
}

.font-picker-trigger:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(10, 132, 255, 0.2);
}

.font-picker-preview {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.font-picker-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 4px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    z-index: 1000;
    display: none;
    max-height: 400px;
    overflow: hidden;
    flex-direction: column;
}

.font-picker-dropdown.open {
    display: flex;
}

.font-picker-search {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    border-bottom: 1px solid var(--border-color);
}

.font-picker-search svg {
    color: var(--text-secondary);
    flex-shrink: 0;
}

.font-picker-search input {
    flex: 1;
    background: transparent;
    border: none;
    color: var(--text-primary);
    font-size: 14px;
    outline: none;
}

.font-picker-search input::placeholder {
    color: var(--text-secondary);
}

.font-picker-categories {
    display: flex;
    gap: 4px;
    padding: 8px 12px;
    border-bottom: 1px solid var(--border-color);
}

.font-category {
    padding: 6px 12px;
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-secondary);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.font-category:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.font-category.active {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
}

.font-picker-list {
    overflow-y: auto;
    max-height: 300px;
    padding: 4px 0;
}

.font-option {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 12px;
    height: 40px;
    min-height: 40px;
    max-height: 40px;
    cursor: pointer;
    transition: background 0.15s;
}

.font-option:hover {
    background: var(--bg-tertiary);
}

.font-option.selected {
    background: rgba(10, 132, 255, 0.15);
}

.font-option-name {
    font-size: 14px;
    line-height: 40px;
    color: var(--text-primary);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.font-option-category {
    font-size: 11px;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.font-option-loading {
    font-size: 11px;
    color: var(--accent);
}

.font-picker-empty {
    padding: 20px;
    text-align: center;
    color: var(--text-secondary);
    font-size: 14px;
}

/* Legacy font preview (unused but kept for compatibility) */
.font-preview {
    padding: 8px 12px;
    background: var(--bg-tertiary);
    border-radius: 6px;
    margin-top: 8px;
    font-size: 14px;
}

/* Checkbox */
.checkbox-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 0;
}

.checkbox-row input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--accent);
}

.checkbox-row label {
    font-size: 14px;
    cursor: pointer;
}

/* Position presets */
.preset-positions {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
}

.position-preset {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 10px 4px;
    background: var(--bg-tertiary);
    border: 2px solid transparent;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    color: var(--text-secondary);
}

.position-preset:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.position-preset.active {
    border-color: var(--accent);
    background: rgba(10, 132, 255, 0.1);
    color: var(--text-primary);
}

.position-preset svg {
    width: 32px;
    height: 48px;
}

.position-preset span {
    font-size: 9px;
    font-weight: 500;
    text-align: center;
    line-height: 1.2;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
}

/* Section collapse */
.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    padding: 8px 0;
}

.section-header h3 {
    margin: 0;
}

.section-toggle {
    color: var(--text-secondary);
    transition: transform 0.2s;
}

.section-content {
    overflow: hidden;
    transition: max-height 0.3s ease;
}

/* Image background upload */
.bg-image-upload {
    border: 2px dashed var(--border-color);
    border-radius: 8px;
    padding: 16px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
}

.bg-image-upload:hover {
    border-color: var(--accent);
}

.bg-image-preview {
    width: 100%;
    height: 80px;
    object-fit: cover;
    border-radius: 6px;
    margin-top: 8px;
}

/* Output format selector */
.format-selector {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
}

.format-option {
    flex: 1;
    padding: 10px;
    background: var(--bg-tertiary);
    border: 2px solid transparent;
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
}

.format-option.selected {
    border-color: var(--accent);
}

.format-option-label {
    font-size: 13px;
    font-weight: 500;
}

.logo-section {
    background: var(--bg-primary);
    border-radius: 12px;
    padding: 16px;
    margin-top: 16px;
}

.color-input-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
}

.color-input-wrapper input[type="text"] {
    flex: 1;
    font-family: monospace;
}

.hint-text {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 8px;
    line-height: 1.4;
}

.tip-box {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 12px;
    margin-top: 16px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-secondary);
}

.tip-box img {
    flex-shrink: 0;
    margin-top: 2px;
    opacity: 0.5;
    filter: invert(1);
}

.tip-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
    font-size: 12px;
    line-height: 1.4;
}

.tip-content strong {
    color: var(--text-primary);
    font-weight: 500;
}

.tip-content span {
    opacity: 0.8;
}

/* Project controls */
.project-controls {
    display: flex;
    gap: 8px;
    align-items: stretch;
}

.project-dropdown {
    flex: 1;
    position: relative;
}

.project-trigger {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 8px 12px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
}

.project-trigger:hover {
    background: var(--bg-primary);
    border-color: var(--text-secondary);
}

.project-dropdown.open .project-trigger {
    border-color: var(--accent);
}

.project-trigger-info {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 1px;
    min-width: 0;
}

.project-trigger-name {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.project-trigger-meta {
    font-size: 10px;
    color: var(--text-secondary);
}

.project-dropdown .dropdown-arrow {
    color: var(--text-secondary);
    transition: transform 0.2s;
    flex-shrink: 0;
}

.project-dropdown.open .dropdown-arrow {
    transform: rotate(180deg);
}

.project-menu {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    width: calc(320px - 40px); /* Full sidebar width minus padding */
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 6px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.2s;
    z-index: 100;
    max-height: 300px;
    overflow-y: auto;
}

.project-dropdown.open .project-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.project-option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 10px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s;
}

.project-option:hover {
    background: var(--bg-tertiary);
}

.project-option.selected {
    background: rgba(10, 132, 255, 0.15);
}

.project-option-name {
    font-size: 13px;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.project-option-meta {
    font-size: 10px;
    color: var(--text-secondary);
    white-space: nowrap;
}

.project-buttons {
    display: flex;
    gap: 4px;
}

.project-btn {
    padding: 8px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.project-btn:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--accent);
}

.project-btn.danger:hover {
    border-color: #ff453a;
    color: #ff453a;
}

/* Sidebar header with settings */
.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
}

.sidebar-header h2 {
    margin-bottom: 0;
}

.settings-btn {
    width: 32px;
    height: 32px;
    border: none;
    border-radius: 8px;
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.settings-btn:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.sidebar-header-buttons {
    display: flex;
    gap: 4px;
}

.settings-btn img {
    filter: invert(0.6);
    transition: filter 0.2s;
}

.settings-btn:hover img {
    filter: invert(1);
}

/* Feature tooltip (appears below button) */
.feature-tooltip {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);
    color: #000;
    padding: 10px 14px;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 500;
    white-space: nowrap;
    z-index: 1000;
    box-shadow: 0 4px 20px rgba(255, 165, 0, 0.4);
    animation: tooltipPulse 2s ease-in-out infinite, tooltipFadeIn 0.3s ease-out;
    pointer-events: none;
}

.feature-tooltip::before {
    content: '';
    position: absolute;
    top: -6px;
    right: 12px;
    width: 12px;
    height: 12px;
    background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);
    transform: rotate(45deg);
    border-radius: 2px;
}

.feature-tooltip-close {
    position: absolute;
    top: -6px;
    left: -6px;
    width: 18px;
    height: 18px;
    background: var(--bg-tertiary);
    border: none;
    border-radius: 50%;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    pointer-events: auto;
    transition: all 0.2s;
}

.feature-tooltip-close:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
}

@keyframes tooltipPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
}

@keyframes tooltipFadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Language picker */
.language-picker {
    position: relative;
}

.language-btn {
    width: 32px;
    height: 32px;
    border: none;
    border-radius: 8px;
    background: var(--bg-tertiary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.language-btn:hover {
    background: var(--bg-primary);
}

.language-btn-flag {
    font-size: 18px;
    line-height: 1;
}

.language-menu {
    position: fixed;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 4px;
    min-width: 180px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    display: none;
}

.language-menu.visible {
    display: block;
}

.language-menu-items {
    display: flex;
    flex-direction: column;
    gap: 2px;
    max-height: 200px;
    overflow-y: auto;
}

.language-menu-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border: none;
    background: transparent;
    color: var(--text-primary);
    cursor: pointer;
    border-radius: 6px;
    font-size: 14px;
    text-align: left;
    transition: all 0.2s;
    width: 100%;
}

.language-menu-item:hover {
    background: var(--bg-tertiary);
}

.language-menu-item.active {
    background: rgba(10, 132, 255, 0.15);
    color: var(--accent);
}

.language-menu-item .flag {
    font-size: 16px;
}

.language-menu-divider {
    height: 1px;
    background: var(--border-color);
    margin: 4px 0;
}

.language-menu-edit {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: 6px;
    font-size: 13px;
    text-align: left;
    transition: all 0.2s;
    width: 100%;
}

.language-menu-edit:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.language-menu-edit svg {
    opacity: 0.7;
}

/* Textarea with button inside */
.textarea-with-button {
    position: relative;
}

.textarea-with-button textarea {
    padding-right: 36px;
}

.textarea-with-button .magic-translate-btn {
    position: absolute;
    top: 6px;
    right: 6px;
}

.magic-translate-btn {
    width: 24px;
    height: 24px;
    border: none;
    border-radius: 4px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    opacity: 0.8;
}

.magic-translate-btn:hover {
    opacity: 1;
    transform: scale(1.05);
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
}

.per-screenshot-active {
    background: rgba(10, 132, 255, 0.1);
    border: 1px solid var(--accent);
    border-radius: 8px;
    padding: 12px;
    margin: -12px;
    margin-bottom: 0;
}

/* Languages Modal */
.languages-modal {
    width: 400px;
    max-width: 90vw;
}

.languages-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin: 16px 0;
    max-height: 300px;
    overflow-y: auto;
}

.language-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: var(--bg-tertiary);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.language-item .flag {
    font-size: 20px;
}

.language-item .name {
    flex: 1;
    font-size: 14px;
    color: var(--text-primary);
}

.language-item .current-badge {
    font-size: 11px;
    padding: 2px 8px;
    background: rgba(10, 132, 255, 0.15);
    color: var(--accent);
    border-radius: 4px;
}

.language-item .remove-btn {
    width: 28px;
    height: 28px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.language-item .remove-btn:hover {
    background: rgba(255, 69, 58, 0.15);
    color: #ff453a;
}

.language-item .remove-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.language-item .remove-btn:disabled:hover {
    background: transparent;
    color: var(--text-secondary);
}

.add-language-section {
    margin-bottom: 16px;
}

/* Screenshot language flags indicator */
.screenshot-lang-flags {
    margin-left: 6px;
    font-size: 10px;
    letter-spacing: 1px;
}

.screenshot-complete {
    color: #30d158;
    font-weight: bold;
    margin-left: 2px;
}

/* Screenshot Translations Modal */
.translations-modal {
    width: 450px;
    max-width: 90vw;
}

.translations-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin: 16px 0;
    max-height: 350px;
    overflow-y: auto;
}

.translation-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    background: var(--bg-tertiary);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.translation-item.has-image {
    border-color: rgba(48, 209, 88, 0.3);
    background: rgba(48, 209, 88, 0.05);
}

.translation-thumb {
    width: 40px;
    height: 86px;
    border-radius: 4px;
    overflow: hidden;
    background: var(--bg-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.translation-thumb img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.translation-thumb.empty {
    border: 2px dashed var(--border-color);
    color: var(--text-secondary);
}

.translation-info {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 8px;
}

.translation-info .flag {
    font-size: 18px;
}

.translation-info .name {
    font-size: 14px;
    color: var(--text-primary);
}

.translation-upload {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    border: none;
    background: var(--accent);
    color: white;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.2s;
}

.translation-upload:hover {
    background: #0a84ff;
}

.translation-remove {
    width: 32px;
    height: 32px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.translation-remove:hover {
    background: rgba(255, 69, 58, 0.15);
    color: #ff453a;
}

/* Export Language Modal */
.export-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin: 20px 0;
}

.export-option {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
    padding: 16px;
    border: 1px solid var(--border-color);
    background: var(--bg-tertiary);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
    width: 100%;
}

.export-option:hover {
    border-color: var(--accent);
    background: rgba(10, 132, 255, 0.08);
}

.export-option-title {
    font-size: 15px;
    font-weight: 500;
    color: var(--text-primary);
}

.export-option-desc {
    font-size: 13px;
    color: var(--text-secondary);
}

/* Export Progress Modal */
.export-progress-modal {
    text-align: center;
}

.export-progress-modal h2 {
    margin-bottom: 8px;
}

.export-progress-bar {
    width: 100%;
    height: 8px;
    background: var(--bg-tertiary);
    border-radius: 4px;
    overflow: hidden;
    margin: 20px 0 12px;
}

.export-progress-fill {
    height: 100%;
    background: var(--accent);
    border-radius: 4px;
    width: 0%;
    transition: width 0.2s ease-out;
}

#export-progress-status {
    color: var(--text-primary);
    font-size: 14px;
    margin: 0;
}

#export-progress-detail {
    color: var(--text-secondary);
    font-size: 13px;
    margin: 0;
}

/* Duplicate Screenshot Modal */
.duplicate-screenshot-modal {
    max-width: 420px;
}

.duplicate-comparison {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin: 24px 0;
    padding: 16px;
    background: var(--bg-tertiary);
    border-radius: 12px;
}

.duplicate-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.duplicate-label {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    color: var(--text-secondary);
    letter-spacing: 0.5px;
}

.duplicate-thumb {
    width: 80px;
    height: 140px;
    border-radius: 8px;
    overflow: hidden;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
}

.duplicate-thumb img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.duplicate-name {
    font-size: 11px;
    color: var(--text-secondary);
    max-width: 100px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.duplicate-arrow {
    color: var(--text-secondary);
    flex-shrink: 0;
}

.duplicate-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 16px;
}

.duplicate-option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    border: 1px solid var(--border-color);
    background: var(--bg-tertiary);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
}

.duplicate-option:hover {
    border-color: var(--accent);
    background: rgba(10, 132, 255, 0.08);
}

.duplicate-option svg {
    flex-shrink: 0;
    color: var(--text-secondary);
}

.duplicate-option:hover svg {
    color: var(--accent);
}

.duplicate-option-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.duplicate-option-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.duplicate-option-desc {
    font-size: 12px;
    color: var(--text-secondary);
}`,kK=["https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js","https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js","https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js","https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js","/appscreen/llm.js","/appscreen/language-utils.js","/appscreen/magical-titles.js","/appscreen/three-renderer.js","/appscreen/app.js"],FK=(n,e)=>n.split(",").map(t=>{const i=t.trim();return i?i===":root"||i==="html"||i==="body"?e:i.startsWith("html")?i.replace(/^html/,e):i.startsWith("body")?i.replace(/^body/,e):`${e} ${i}`:""}).join(", "),hC=(n,e)=>{const t=n.indexOf("{",e);if(t===-1)return null;let i=0;for(let a=t;a<n.length;a+=1)if(n[a]==="{"&&(i+=1),n[a]==="}"&&(i-=1),i===0)return{header:n.slice(e,t).trim(),body:n.slice(t+1,a),endIndex:a+1};return null},F4=(n,e)=>{let t=0,i="";for(;t<n.length;){const a=n.indexOf("{",t),r=n.indexOf("@",t);if(r!==-1&&(a===-1||r<a)){const d=hC(n,r);if(!d){i+=n.slice(t);break}const f=d.header;if(f.startsWith("@keyframes")||f.startsWith("@-webkit-keyframes")||f.startsWith("@-moz-keyframes")||f.startsWith("@-o-keyframes")){i+=n.slice(r,d.endIndex),t=d.endIndex;continue}if(f.startsWith("@media")||f.startsWith("@supports")||f.startsWith("@container")||f.startsWith("@layer")){i+=`${f}{${F4(d.body,e)}}`,t=d.endIndex;continue}i+=n.slice(r,d.endIndex),t=d.endIndex;continue}if(a===-1){i+=n.slice(t);break}const o=n.slice(t,a).trim(),c=hC(n,t);if(!c)break;o&&(i+=`${FK(o,e)}{${c.body}}`),t=c.endIndex}return i},jK=n=>document.getElementById(n)?Promise.resolve():new Promise(e=>{const t=()=>{if(document.getElementById(n)){e();return}requestAnimationFrame(t)};t()}),HK=n=>{const e=document.querySelector(`script[src="${n}"]`);return e?e.dataset.loaded==="true"?Promise.resolve():new Promise((t,i)=>{e.addEventListener("load",t),e.addEventListener("error",i)}):new Promise((t,i)=>{const a=document.createElement("script");a.src=n,a.async=!1,a.dataset.loaded="false",a.onload=()=>{a.dataset.loaded="true",t()},a.onerror=i,document.body.appendChild(a)})};function VK({localizationPayload:n,aiConfig:e,active:t}){const[i,a]=k.useState(!1),r=k.useRef(!1),o=k.useRef(null),c=k.useMemo(()=>F4(BK,".appscreen-root"),[]),d=k.useMemo(()=>{if(!e)return null;const f=e.provider||"openai",m=e.apiKeys?.[f]||"",g=e.models?.[f]||"";return!m&&!g?null:{apiKey:m,model:g,provider:f}},[e]);return k.useEffect(()=>{o.current&&(o.current.innerHTML||(o.current.innerHTML=IK))},[]),k.useEffect(()=>{let f=!1;return(async()=>{if(window.__appscreenScriptsLoaded){a(!0);return}for(const g of kK)await HK(g);f||(window.__appscreenScriptsLoaded=!0,a(!0))})().catch(g=>{console.error("Failed to load screenshot maker scripts",g)}),()=>{f=!0}},[]),k.useEffect(()=>{if(!i||r.current)return;(async()=>{await jK("file-input"),window.AppscreenBridge?.init&&(window.AppscreenBridge.init(),r.current=!0)})().catch(m=>{console.error("Failed to init screenshot maker",m)})},[i]),k.useEffect(()=>{i&&window.AppscreenBridge?.mount&&window.AppscreenBridge.mount()},[i]),k.useEffect(()=>{if(!t||!i)return;requestAnimationFrame(()=>{window.AppscreenBridge?.mount&&window.AppscreenBridge.mount(),window.AppscreenBridge?.syncLocalizationData&&n&&window.AppscreenBridge.syncLocalizationData(n),window.AppscreenBridge?.syncAiConfig&&d&&window.AppscreenBridge.syncAiConfig(d)})},[t,i,n,d]),k.useEffect(()=>{!i||!n||window.AppscreenBridge?.syncLocalizationData&&window.AppscreenBridge.syncLocalizationData(n)},[i,n]),k.useEffect(()=>{!i||!d||window.AppscreenBridge?.syncAiConfig&&window.AppscreenBridge.syncAiConfig(d)},[i,d]),x.jsxs("div",{className:"space-y-4",children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:`${c}
.appscreen-root{
  --bg-primary: var(--background);
  --bg-secondary: var(--card);
  --bg-tertiary: var(--muted);
  --border-color: var(--border);
  --text-primary: var(--foreground);
  --text-secondary: var(--muted-foreground);
  --accent: var(--primary);
  --accent-hover: var(--primary);
  width: 100%;
}
.appscreen-root .app-container{
  width: 100%;
  max-width: none;
}
`}}),x.jsx("div",{ref:o,className:"appscreen-root w-full"})]})}function GK({variant:n="default"}){const{theme:e,setTheme:t,resolvedTheme:i}=S4(),a=()=>{t(e==="light"?"dark":e==="dark"?"system":"light")},r=()=>e==="system"?x.jsx(eM,{className:"h-4 w-4"}):i==="dark"?x.jsx(u5,{className:"h-4 w-4"}):x.jsx(f5,{className:"h-4 w-4"}),o=()=>e==="light"?"Light mode":e==="dark"?"Dark mode":"System theme";return n==="compact"?x.jsx(CM,{children:x.jsxs($D,{children:[x.jsx(e4,{asChild:!0,children:x.jsxs(Nn,{variant:"ghost",size:"icon",onClick:a,className:"h-9 w-9 rounded-lg",children:[r(),x.jsx("span",{className:"sr-only",children:o()})]})}),x.jsx(t4,{children:x.jsx("p",{children:o()})})]})}):x.jsxs(Nn,{variant:"outline",size:"sm",onClick:a,className:"h-9 gap-2",children:[r(),x.jsx("span",{className:"text-xs font-medium",children:o()})]})}const pC="xcstrings-localizer-provider-config",mC="asc-localizer-config",gC="xcstrings-localizer-protected-words",vC="xcstrings-localizer-active-page",xC="xcstrings-localizer-welcome-shown";function WK(){const[n,e]=k.useState(()=>!sessionStorage.getItem(xC)),t=()=>{sessionStorage.setItem(xC,"true"),e(!1)},[i,a]=k.useState(()=>localStorage.getItem(vC)||"xcstrings");k.useEffect(()=>{localStorage.setItem(vC,i)},[i]);const[r,o]=k.useState(()=>{const ge=localStorage.getItem(pC);if(ge)try{const xe=JSON.parse(ge);return xe.apiKey&&!xe.apiKeys&&(xe.apiKeys={[xe.provider]:xe.apiKey},delete xe.apiKey),{provider:Qs[xe.provider]?xe.provider:"openai",apiKeys:xe.apiKeys||{},models:xe.models||{},region:xe.region||"us-east-1"}}catch{}return{provider:"openai",apiKeys:{},models:{},region:"us-east-1"}}),[c,d]=k.useState(()=>{const ge=localStorage.getItem(mC);let xe={keyId:"",issuerId:"",privateKey:""};if(ge)try{xe=JSON.parse(ge)}catch{}return xe}),f=r.apiKeys[r.provider]||"",m=r.models[r.provider]||Qs[r.provider].defaultModel,[g,y]=k.useState(!1),[_,S]=k.useState(null),[A,T]=k.useState(RM),[w,N]=k.useState(DM),[D,U]=k.useState(null),[O,B]=k.useState(""),[z,F]=k.useState([]),[L,I]=k.useState(!1),[Y,q]=k.useState({current:0,total:0,currentText:""}),[K,$]=k.useState(null),[ce,G]=k.useState([]),[W,Q]=k.useState(""),[ue,de]=k.useState(""),[j,ee]=k.useState(!0),[ne,oe]=k.useState({open:!1,key:"",lang:"",value:""}),[re,se]=k.useState("all"),[le,ve]=k.useState(""),[ze,qe]=k.useState(!1),[Ke,Pe]=k.useState(0),gt=50,[Te,je]=k.useState(()=>{const ge=localStorage.getItem(gC);return ge?JSON.parse(ge):["MyAppName"]}),[Le,$e]=k.useState("");k.useEffect(()=>{localStorage.setItem(pC,JSON.stringify(r))},[r]),k.useEffect(()=>{const ge={keyId:c.keyId,issuerId:c.issuerId,privateKey:""};localStorage.setItem(mC,JSON.stringify(ge))},[c.keyId,c.issuerId]);const J=async()=>{if(!f){S({success:!1,message:"Please enter an API key first"});return}y(!0),S(null);const ge={provider:r.provider,apiKey:f,model:m,region:r.region},xe=await a4(ge);S(xe),y(!1),xe.success?Se(`${Qs[r.provider].name} API test successful!`,"success"):Se(`${Qs[r.provider].name} API test failed: ${xe.message}`,"error")};k.useEffect(()=>{localStorage.setItem(gC,JSON.stringify(Te))},[Te]);const et=()=>{const ge=Le.trim();ge&&!Te.includes(ge)&&(je([...Te,ge]),$e(""),Se(`Added "${ge}" to protected words`,"success"))},We=ge=>{je(Te.filter(xe=>xe!==ge)),Se(`Removed "${ge}" from protected words`,"info")},Se=k.useCallback((ge,xe="info")=>{const pe=new Date().toLocaleTimeString();G(Ie=>[...Ie.slice(-100),{message:ge,type:xe,timestamp:pe}])},[]),Ee=async ge=>{if(ge){if(!ge.name.endsWith(".xcstrings")){Se("Please upload a .xcstrings file","error");return}try{const xe=await ge.text(),pe=JY(xe);U(pe),B(ge.name);const Ie=WS(pe);$(Ie),Se(`Loaded ${ge.name} with ${Ie.totalStrings} strings`,"success")}catch(xe){Se(`Error loading file: ${xe.message}`,"error")}}},X=async ge=>{const xe=ge.target.files[0];await Ee(xe)},V=ge=>{ge.preventDefault(),ge.stopPropagation(),qe(!0)},fe=ge=>{ge.preventDefault(),ge.stopPropagation(),qe(!1)},Ce=async ge=>{ge.preventDefault(),ge.stopPropagation(),qe(!1);const xe=ge.dataTransfer.files;xe.length>0&&await Ee(xe[0])},Ae=ge=>{F(xe=>xe.includes(ge)?xe.filter(pe=>pe!==ge):[...xe,ge])},we=()=>{z.length===qc.length?F([]):F(qc.map(ge=>ge.code))},ot=async()=>{if(!f){Se(`Please enter your ${Qs[r.provider].name} API key`,"error");return}if(!D){Se("Please load an .xcstrings file first","error");return}if(z.length===0){Se("Please select at least one language","error");return}I(!0),q({current:0,total:0,currentText:"Starting..."});const ge={provider:r.provider,apiKey:f,model:m,region:r.region};try{const xe=await r4(D,z,ge,Te,Ie=>{q(Ie),Ie.log&&Se(Ie.log,Ie.logType||"info")},A,w);U(xe);const pe=WS(xe);$(pe),Se("Translation completed!","success")}catch(xe){Se(`Translation error: ${xe.message}`,"error")}finally{I(!1)}},it=()=>{if(!D){Se("No data to save","error");return}try{const ge=QY(D),xe=new Blob([ge],{type:"application/json"}),pe=URL.createObjectURL(xe),Ie=document.createElement("a");Ie.href=pe,Ie.download=O||"Localizable.xcstrings",document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(pe),Se(`Saved ${O||"Localizable.xcstrings"}`,"success")}catch(ge){Se(`Error saving file: ${ge.message}`,"error")}},ht=(ge,xe,pe)=>{oe({open:!0,key:ge,lang:xe,value:pe||""})},xt=()=>{if(!D||!ne.key)return;const ge=JSON.parse(JSON.stringify(D));ge.strings[ne.key]||(ge.strings[ne.key]={}),ge.strings[ne.key].localizations||(ge.strings[ne.key].localizations={}),ge.strings[ne.key].localizations[ne.lang]={stringUnit:{state:"translated",value:ne.value}},U(ge);const xe=WS(ge);$(xe),oe({open:!1,key:"",lang:"",value:""}),Se(`Updated ${ne.lang} translation for "${ne.key}"`,"success")},ke=k.useMemo(()=>K?K.languages.filter(ge=>ge!=="en"):[],[K]),Fe=k.useMemo(()=>D?.strings?Object.entries(D.strings).map(([xe,pe])=>{const Ie=pe?.localizations||{},pt=Ie.en?.stringUnit?.value||xe;return{key:xe,english:pt,translations:Ie}}).filter(xe=>{if(le){const pe=le.toLowerCase(),Ie=xe.key.toLowerCase().includes(pe),pt=xe.english.toLowerCase().includes(pe),yt=Object.values(xe.translations).some(Nt=>Nt?.stringUnit?.value?.toLowerCase().includes(pe));if(!Ie&&!pt&&!yt)return!1}return!(re!=="all"&&!xe.translations[re]?.stringUnit?.value)}).sort((xe,pe)=>xe.key.localeCompare(pe.key)):[],[D,le,re]);k.useEffect(()=>{Pe(0)},[le,re]);const Ze=k.useMemo(()=>{const ge=Ke*gt;return Fe.slice(ge,ge+gt)},[Fe,Ke]),rt=Math.ceil(Fe.length/gt),ut=(ge,xe=100)=>!ge||ge.length<=xe?ge:ge.substring(0,xe)+"...",Ut=k.useCallback((ge,xe)=>{if(!D?.strings?.[ge])return"";const pe=D.strings[ge]?.localizations?.[xe];return pe&&(pe.stringUnit?.value||pe.variations?.plural?.other?.stringUnit?.value||pe.variations?.device?.other?.stringUnit?.value)||""},[D]),me=k.useMemo(()=>{if(!D)return[];const ge=K?.languages?.length?K.languages:[],xe=D?.sourceLanguage||"en",pe=ge.length?ge:[xe];return Array.from(new Set(pe))},[K,D]);k.useMemo(()=>D?.strings?Object.keys(D.strings).sort():[],[D]);const tt=k.useMemo(()=>{if(!me.length)return null;const ge={},xe={};return W&&me.forEach(pe=>{const Ie=Ut(W,pe);Ie!==""&&(ge[pe]=Ie)}),ue&&me.forEach(pe=>{const Ie=Ut(ue,pe);Ie!==""&&(xe[pe]=Ie)}),{languages:me,headlinesByLang:ge,subheadlinesByLang:xe,applyToAll:j}},[j,W,ue,me,Ut]),nt=Y.total?Y.current/Y.total*100:0;return n?x.jsx(IH,{onComplete:t}):x.jsxs("div",{className:"min-h-svh bg-background",children:[x.jsx(hO,{position:"top-right",richColors:!0,closeButton:!0}),x.jsxs(LY,{children:[x.jsx(PK,{activePage:i,onPageChange:a,providerConfig:r,onProviderConfigChange:o,ascCredentials:c,onAscCredentialsChange:d}),x.jsxs(IY,{children:[x.jsxs("header",{className:"sticky top-0 z-20 flex h-16 items-center gap-4 border-b border-border/50 bg-background/80 px-6 backdrop-blur-xl supports-[backdrop-filter]:bg-background/60",children:[x.jsx(PY,{className:"text-muted-foreground hover:text-foreground transition-colors"}),x.jsxs("div",{className:"flex items-center gap-1 p-1 rounded-xl bg-muted/50",children:[x.jsxs("button",{onClick:()=>a("xcstrings"),className:`
                  flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
                  ${i==="xcstrings"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}
                `,children:[x.jsx(Hg,{className:"h-4 w-4"}),x.jsx("span",{className:"hidden sm:inline",children:"XCStrings"})]}),x.jsxs("button",{onClick:()=>a("appstore"),className:`
                  flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
                  ${i==="appstore"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}
                `,children:[x.jsx(tM,{className:"h-4 w-4"}),x.jsx("span",{className:"hidden sm:inline",children:"App Store Connect"})]}),x.jsxs("button",{onClick:()=>a("screenshots"),className:`
                  flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
                  ${i==="screenshots"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}
                `,children:[x.jsx(ad,{className:"h-4 w-4"}),x.jsx("span",{className:"hidden sm:inline",children:"Screenshots"})]})]}),x.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[x.jsx(GK,{variant:"compact"}),x.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20",children:[x.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),x.jsx("span",{className:"text-xs font-medium text-emerald-500",children:"Local-first"})]}),x.jsxs("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 border border-primary/20",children:[x.jsx(m3,{className:"h-3 w-3 text-primary"}),x.jsx("span",{className:"text-xs font-medium text-primary",children:"Secure"})]})]})]}),x.jsx("main",{className:"flex-1 p-6 md:p-8 lg:p-10",children:x.jsxs("div",{className:`mx-auto space-y-8 ${i==="screenshots"?"w-full max-w-none":"max-w-6xl"}`,children:[i==="appstore"&&x.jsx(lK,{credentials:c,onCredentialsChange:d,aiConfig:r}),x.jsx("div",{className:i==="screenshots"?"space-y-6":"hidden",children:x.jsx(VK,{localizationPayload:tt,aiConfig:r,active:i==="screenshots"})}),i==="xcstrings"&&x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"relative overflow-hidden rounded-2xl gradient-card border border-border/50 p-8 shadow-xl",children:[x.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),x.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center gap-6",children:[x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[x.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl gradient-primary shadow-lg",children:x.jsx(Hg,{className:"h-6 w-6 text-white"})}),x.jsxs("div",{children:[x.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:["Localizer ",x.jsx("span",{className:"text-muted-foreground font-normal text-lg",children:"by Fayhe"})]}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered translation for iOS & macOS"})]})]}),x.jsxs("p",{className:"text-muted-foreground max-w-xl",children:["Upload your ",x.jsx("code",{className:"px-1.5 py-0.5 rounded bg-muted text-sm font-mono text-foreground",children:".xcstrings"})," file, translate to 20+ languages with AI, and export back to Xcode instantly."]})]}),K&&x.jsxs("div",{className:"flex gap-4",children:[x.jsxs("div",{className:"text-center px-4 py-3 rounded-xl bg-background/50 border border-border/50",children:[x.jsx("div",{className:"text-2xl font-bold text-primary",children:K.totalStrings}),x.jsx("div",{className:"text-xs text-muted-foreground",children:"Strings"})]}),x.jsxs("div",{className:"text-center px-4 py-3 rounded-xl bg-background/50 border border-border/50",children:[x.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:K.languages.length}),x.jsx("div",{className:"text-xs text-muted-foreground",children:"Languages"})]})]})]})]}),x.jsxs(K9,{defaultValue:"translate",className:"space-y-6",children:[x.jsxs(Z9,{className:"grid w-full grid-cols-2 h-12 p-1 bg-muted/50 rounded-xl",children:[x.jsxs(b3,{value:"translate",className:"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm flex items-center gap-2",children:[x.jsx(Kl,{className:"h-4 w-4"}),"Translate"]}),x.jsxs(b3,{value:"editor",disabled:!D,className:"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm flex items-center gap-2",children:[x.jsx(r0,{className:"h-4 w-4"}),"View & Edit ",K&&x.jsx(ll,{variant:"secondary",className:"ml-1 text-xs",children:K.totalStrings})]})]}),x.jsxs(_3,{value:"translate",className:"space-y-6",children:[x.jsxs(ws,{className:"overflow-hidden border-border/50 shadow-sm card-hover",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-primary/10",children:x.jsx(e9,{className:"h-5 w-5 text-primary"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"AI Provider"}),x.jsx(Ts,{children:"Configure your AI service in the sidebar"})]})]})}),x.jsxs(As,{className:"space-y-5",children:[x.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-muted/50",children:[x.jsx("span",{className:"text-sm font-medium",children:Qs[r.provider]?.name}),x.jsx("span",{className:"text-muted-foreground",children:"/"}),x.jsx("span",{className:"text-sm text-muted-foreground",children:m?.includes("inference-profile/")?m.split("/").pop().replace("global.anthropic.","").replace(/-v\d+:\d+$/,""):m||"No model"})]}),f?x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-emerald-500/10 text-emerald-500",children:[x.jsx(Ba,{className:"h-4 w-4"}),x.jsx("span",{className:"text-sm font-medium",children:"Ready"})]}):x.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-amber-500/10 text-amber-500",children:[x.jsx(Nr,{className:"h-4 w-4"}),x.jsx("span",{className:"text-sm font-medium",children:"No API key"})]}),x.jsx(Nn,{variant:"outline",size:"sm",onClick:J,disabled:g||!f,className:"ml-auto",children:g?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"animate-spin mr-2",children:x.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),"Testing..."]}):"Test Connection"})]}),_&&x.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 rounded-lg ${_.success?"bg-emerald-500/10 text-emerald-500":"bg-red-500/10 text-red-500"}`,children:[_.success?x.jsx(Ba,{className:"h-4 w-4"}):x.jsx(Nr,{className:"h-4 w-4"}),x.jsx("span",{className:"text-sm font-medium",children:_.message})]}),x.jsxs("div",{className:"flex items-center gap-6 pt-2 border-t border-border/50",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(xi,{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Texts per batch"}),x.jsx(xa,{type:"number",min:"1",max:"30",value:w,onChange:ge=>N(Math.max(1,Math.min(30,parseInt(ge.target.value)||1))),className:"w-20 h-9 text-center"})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(xi,{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Parallel requests"}),x.jsx(xa,{type:"number",min:"1",max:"10",value:A,onChange:ge=>T(Math.max(1,Math.min(10,parseInt(ge.target.value)||1))),className:"w-20 h-9 text-center"})]})]})]})]}),x.jsxs(ws,{className:"border-border/50 shadow-sm card-hover",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-amber-500/10",children:x.jsx(m3,{className:"h-5 w-5 text-amber-500"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Protected Words"}),x.jsx(Ts,{children:"Brand names, app names, or terms that should stay untranslated"})]})]})}),x.jsxs(As,{className:"space-y-4",children:[x.jsxs("div",{className:"flex gap-2",children:[x.jsx(xa,{placeholder:"Enter a word to protect...",value:Le,onChange:ge=>$e(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&et(),className:"flex-1 h-10"}),x.jsxs(Nn,{onClick:et,size:"sm",className:"h-10 px-4",children:[x.jsx(d5,{className:"h-4 w-4 mr-1"}),"Add"]})]}),x.jsxs("div",{className:"flex flex-wrap gap-2 min-h-[48px] p-3 rounded-lg bg-muted/30 border border-border/50",children:[Te.map(ge=>x.jsxs("button",{onClick:()=>We(ge),className:"group flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-background border border-border/50 text-sm font-medium hover:border-red-500/50 hover:bg-red-500/10 hover:text-red-500 transition-all",children:[ge,x.jsx(g1,{className:"h-3 w-3 opacity-50 group-hover:opacity-100"})]},ge)),Te.length===0&&x.jsx("span",{className:"text-sm text-muted-foreground italic",children:"No protected words added yet"})]})]})]}),x.jsxs(ws,{className:"border-border/50 shadow-sm card-hover",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/10",children:x.jsx(s0,{className:"h-5 w-5 text-blue-500"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Upload File"}),x.jsx(Ts,{children:"Load your Xcode localization file to get started"})]})]})}),x.jsxs(As,{className:"space-y-4",children:[x.jsx(xa,{type:"file",accept:".xcstrings",onChange:X,className:"hidden",id:"file-input"}),x.jsx(xi,{htmlFor:"file-input",onDragOver:V,onDragLeave:fe,onDrop:Ce,className:`
                    relative flex flex-col items-center justify-center h-36 border-2 border-dashed rounded-xl cursor-pointer transition-all duration-300
                    ${ze?"border-primary bg-primary/10 scale-[1.02]":O?"border-emerald-500/50 bg-emerald-500/5":"border-border hover:border-primary/50 hover:bg-muted/30"}
                  `,children:O?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-500/10 mb-3",children:x.jsx(p3,{className:"h-6 w-6 text-emerald-500"})}),x.jsx("span",{className:"text-sm font-medium text-emerald-500",children:O}),x.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Click to replace"})]}):ze?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10 mb-3 animate-bounce",children:x.jsx(s0,{className:"h-6 w-6 text-primary"})}),x.jsx("span",{className:"text-sm font-medium text-primary",children:"Drop your file here"})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-muted mb-3",children:x.jsx(s0,{className:"h-6 w-6 text-muted-foreground"})}),x.jsx("span",{className:"text-sm font-medium",children:"Click to upload or drag and drop"}),x.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:".xcstrings files only"})]})}),K&&x.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30 border border-border/50",children:[x.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-background",children:[x.jsx(p3,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("span",{className:"text-sm font-medium",children:[K.totalStrings," strings"]})]}),x.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-background",children:[x.jsx(Hg,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("span",{className:"text-sm font-medium",children:[K.languages.length," languages"]})]}),z.length>0&&x.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-amber-500/10 text-amber-500 ml-auto",children:[x.jsx(a0,{className:"h-4 w-4"}),x.jsxs("span",{className:"text-sm font-medium",children:[z.reduce((ge,xe)=>{const pe=K.totalStrings-(K.translationCounts[xe]||0);return ge+pe},0)," translations needed"]})]})]})]})]}),x.jsxs(ws,{className:"border-border/50 shadow-sm card-hover",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-violet-500/10",children:x.jsx(Hg,{className:"h-5 w-5 text-violet-500"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Target Languages"}),x.jsx(Ts,{children:"Select languages to translate your content into"})]})]}),x.jsx(Nn,{variant:"outline",size:"sm",onClick:we,className:"h-9",children:z.length===qc.length?"Deselect All":"Select All"})]})}),x.jsx(As,{children:x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:qc.map(ge=>{const xe=K?.translationCounts?.[ge.code]||0,pe=K?K.totalStrings-xe:0,Ie=K&&pe===0,pt=z.includes(ge.code);return x.jsxs("button",{onClick:()=>Ae(ge.code),className:`
                          relative flex items-center gap-3 p-3 rounded-xl border text-left transition-all duration-200
                          ${pt?"border-primary bg-primary/5 shadow-sm":Ie?"border-emerald-500/30 bg-emerald-500/5 hover:border-emerald-500/50":"border-border/50 bg-background hover:border-border hover:bg-muted/30"}
                        `,children:[x.jsx("div",{className:`
                          flex h-5 w-5 items-center justify-center rounded-md border-2 transition-all
                          ${pt?"bg-primary border-primary":"border-muted-foreground/30"}
                        `,children:pt&&x.jsx("svg",{className:"h-3 w-3 text-primary-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),x.jsx("span",{className:"text-lg",children:ge.flag}),x.jsx("span",{className:"text-sm font-medium flex-1",children:ge.name}),K&&x.jsx("span",{className:`
                            text-xs font-medium px-2 py-0.5 rounded-full
                            ${Ie?"bg-emerald-500/10 text-emerald-500":"bg-amber-500/10 text-amber-500"}
                          `,children:Ie?x.jsx(Ba,{className:"h-3 w-3"}):pe})]},ge.code)})})})]}),x.jsxs(ws,{className:"border-border/50 shadow-sm overflow-hidden",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl gradient-primary shadow-lg",children:x.jsx(Kl,{className:"h-5 w-5 text-white"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Translate & Export"}),x.jsx(Ts,{children:"Run AI translation and download your localized file"})]})]})}),x.jsxs(As,{className:"space-y-5",children:[x.jsxs("div",{className:"flex gap-3",children:[x.jsx(Nn,{onClick:ot,disabled:L||!D||!f||z.length===0,className:"flex-1 h-12 text-base font-semibold gradient-primary hover:opacity-90 border-0",size:"lg",children:L?x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Translating..."]}):x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx(Kl,{className:"h-5 w-5"}),"Translate ",z.length>0&&`(${z.length} languages)`]})}),x.jsxs(Nn,{onClick:it,disabled:!D,variant:"outline",className:"h-12 px-6",size:"lg",children:[x.jsx(h3,{className:"h-5 w-5 mr-2"}),"Export"]})]}),L&&x.jsxs("div",{className:"space-y-4 p-5 rounded-xl bg-gradient-to-br from-primary/5 to-primary/10 border border-primary/20",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"h-2 w-2 rounded-full bg-primary animate-pulse"}),x.jsx("span",{className:"text-sm font-medium",children:"Translation in progress"})]}),x.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:[Y.current," / ",Y.total]})]}),x.jsx("div",{className:"relative h-3 rounded-full bg-background overflow-hidden",children:x.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full gradient-primary transition-all duration-300",style:{width:`${nt}%`}})}),x.jsx("p",{className:"text-sm text-muted-foreground truncate",children:Y.currentText})]})]})]}),x.jsxs(ws,{className:"border-border/50 shadow-sm",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-500/10",children:x.jsx(A0,{className:"h-5 w-5 text-slate-500"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Activity Log"}),x.jsx(Ts,{children:"Track translation progress and events"})]})]})}),x.jsx(As,{children:x.jsx(A5,{className:"h-64 rounded-xl border border-border/50 bg-muted/20",children:ce.length===0?x.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[x.jsx(A0,{className:"h-8 w-8 mb-2 opacity-50"}),x.jsx("p",{className:"text-sm",children:"No activity yet"})]}):x.jsx("div",{className:"p-4 space-y-2",children:ce.map((ge,xe)=>x.jsxs("div",{className:`flex items-start gap-3 text-sm py-1.5 px-3 rounded-lg transition-colors ${ge.type==="error"?"bg-red-500/10":ge.type==="success"?"bg-emerald-500/10":"hover:bg-muted/50"}`,children:[x.jsx("span",{className:`mt-0.5 ${ge.type==="error"?"text-red-500":ge.type==="success"?"text-emerald-500":"text-muted-foreground"}`,children:ge.type==="error"?x.jsx(Nr,{className:"h-4 w-4"}):ge.type==="success"?x.jsx(Ba,{className:"h-4 w-4"}):x.jsx(a0,{className:"h-4 w-4"})}),x.jsx("span",{className:"font-mono text-xs text-muted-foreground shrink-0 pt-0.5",children:ge.timestamp}),x.jsx("span",{className:`break-all ${ge.type==="error"?"text-red-400":ge.type==="success"?"text-emerald-400":"text-foreground"}`,children:ge.message})]},xe))})})})]})]}),x.jsx(_3,{value:"editor",className:"space-y-6",children:x.jsxs(ws,{className:"border-border/50 shadow-sm",children:[x.jsx(Ms,{className:"pb-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-500/10",children:x.jsx(r0,{className:"h-5 w-5 text-indigo-500"})}),x.jsxs("div",{children:[x.jsx(Es,{className:"text-lg",children:"Translations Editor"}),x.jsx(Ts,{children:"Browse, search, and edit all your translations"})]})]})}),x.jsxs(As,{className:"space-y-5",children:[x.jsxs("div",{className:"flex gap-3 flex-wrap items-center p-4 rounded-xl bg-muted/30 border border-border/50",children:[x.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[x.jsx(U2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),x.jsx(xa,{placeholder:"Search strings, keys, or translations...",value:le,onChange:ge=>ve(ge.target.value),className:"pl-10 h-10 bg-background"})]}),x.jsxs("select",{value:re,onChange:ge=>se(ge.target.value),className:"h-10 rounded-lg border border-input bg-background px-4 text-sm font-medium min-w-[160px]",children:[x.jsx("option",{value:"all",children:"All Languages"}),ke.map(ge=>{const xe=qc.find(pe=>pe.code===ge);return x.jsx("option",{value:ge,children:xe?`${xe.flag} ${xe.name}`:ge},ge)})]}),x.jsxs(Nn,{onClick:it,variant:"outline",className:"h-10",children:[x.jsx(h3,{className:"h-4 w-4 mr-2"}),"Export File"]})]}),x.jsx("div",{className:"rounded-xl border border-border/50 overflow-hidden",children:x.jsxs(z2,{children:[x.jsx(P2,{children:x.jsxs(Tf,{className:"bg-muted/30 hover:bg-muted/30",children:[x.jsx(Ao,{className:"w-[180px] font-semibold",children:"Key"}),x.jsx(Ao,{className:"w-[250px] font-semibold",children:"English"}),x.jsx(Ao,{className:"font-semibold",children:"Translations"})]})}),x.jsx(I2,{children:Ze.length===0?x.jsx(Tf,{children:x.jsx(Zs,{colSpan:3,className:"text-center py-16",children:x.jsxs("div",{className:"flex flex-col items-center text-muted-foreground",children:[x.jsx(U2,{className:"h-10 w-10 mb-3 opacity-30"}),x.jsx("p",{className:"text-sm font-medium",children:D?"No matching strings found":"Load a file to see translations"}),x.jsx("p",{className:"text-xs mt-1",children:D?"Try adjusting your search or filters":"Upload a .xcstrings file to get started"})]})})}):Ze.map(ge=>x.jsxs(Tf,{className:"group hover:bg-muted/20",children:[x.jsx(Zs,{className:"font-mono text-xs align-top py-3",children:x.jsx("div",{className:"max-w-[150px] truncate text-muted-foreground group-hover:text-foreground transition-colors",title:ge.key,children:ge.key})}),x.jsx(Zs,{className:"align-top py-3 min-w-[200px] max-w-[300px]",children:x.jsx("div",{className:"text-sm whitespace-pre-wrap break-words",children:ge.english})}),x.jsx(Zs,{className:"py-3",children:x.jsx("div",{className:"flex flex-wrap gap-2",children:(re==="all"?ke:[re]).map(xe=>{const pe=ge.translations[xe]?.stringUnit?.value,Ie=qc.find(pt=>pt.code===xe);return x.jsxs("button",{onClick:()=>ht(ge.key,xe,pe),title:pe||"Click to add translation",className:`
                                        group/btn flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all
                                        ${pe?"bg-muted/50 hover:bg-muted border border-transparent hover:border-border":"bg-amber-500/10 border border-amber-500/30 hover:bg-amber-500/20 text-amber-500"}
                                      `,children:[x.jsx("span",{className:"shrink-0 text-sm",children:Ie?.flag||xe}),x.jsx("span",{className:"max-w-[100px] truncate",children:pe?ut(pe,25):x.jsx("span",{className:"italic",children:"Add"})}),x.jsx(r0,{className:"h-3 w-3 opacity-0 group-hover/btn:opacity-50 transition-opacity"})]},xe)})})})]},ge.key))})]})}),x.jsxs("div",{className:"flex items-center justify-between pt-2",children:[x.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",x.jsxs("span",{className:"font-medium text-foreground",children:[Fe.length>0?Ke*gt+1:0,"-",Math.min((Ke+1)*gt,Fe.length)]})," of ",x.jsx("span",{className:"font-medium text-foreground",children:Fe.length})," strings"]}),rt>1&&x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(Nn,{variant:"outline",size:"sm",onClick:()=>Pe(ge=>Math.max(0,ge-1)),disabled:Ke===0,className:"h-9 w-9 p-0",children:x.jsx(aG,{className:"h-4 w-4"})}),x.jsx("div",{className:"flex items-center gap-1 px-2",children:Array.from({length:Math.min(5,rt)},(ge,xe)=>{let pe;return rt<=5||Ke<3?pe=xe:Ke>rt-4?pe=rt-5+xe:pe=Ke-2+xe,x.jsx("button",{onClick:()=>Pe(pe),className:`h-9 w-9 rounded-lg text-sm font-medium transition-all ${Ke===pe?"bg-primary text-primary-foreground":"hover:bg-muted text-muted-foreground hover:text-foreground"}`,children:pe+1},pe)})}),x.jsx(Nn,{variant:"outline",size:"sm",onClick:()=>Pe(ge=>Math.min(rt-1,ge+1)),disabled:Ke>=rt-1,className:"h-9 w-9 p-0",children:x.jsx(sG,{className:"h-4 w-4"})})]})]})]})]})})]})]})]})})]})]}),i==="xcstrings"&&x.jsx(gy,{open:ne.open,onOpenChange:ge=>!ge&&oe({...ne,open:!1}),children:x.jsxs(vy,{className:"sm:max-w-[550px] gap-0 p-0 overflow-hidden",children:[x.jsx(F2,{className:"p-6 pb-4 border-b border-border/50 bg-muted/30",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("span",{className:"text-3xl",children:qc.find(ge=>ge.code===ne.lang)?.flag}),x.jsxs("div",{children:[x.jsx(H2,{className:"text-xl",children:"Edit Translation"}),x.jsx(V2,{children:qc.find(ge=>ge.code===ne.lang)?.name||ne.lang})]})]})}),x.jsxs("div",{className:"p-6 space-y-5",children:[x.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50 space-y-3",children:[x.jsxs("div",{children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Key"}),x.jsx("p",{className:"font-mono text-sm break-all mt-1 text-muted-foreground",children:ne.key})]}),x.jsxs("div",{className:"pt-2 border-t border-border/50",children:[x.jsx(xi,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Original (English)"}),x.jsx("p",{className:"text-sm mt-1",children:D?.strings?.[ne.key]?.localizations?.en?.stringUnit?.value||ne.key})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx(xi,{htmlFor:"translation",className:"text-sm font-medium",children:"Translation"}),x.jsx(Vg,{id:"translation",value:ne.value,onChange:ge=>oe({...ne,value:ge.target.value}),rows:5,placeholder:"Enter your translation here...",className:"resize-none text-base"})]})]}),x.jsxs(j2,{className:"p-6 pt-4 border-t border-border/50 bg-muted/20",children:[x.jsx(Nn,{variant:"ghost",onClick:()=>oe({...ne,open:!1}),children:"Cancel"}),x.jsxs(Nn,{onClick:xt,className:"gradient-primary border-0",children:[x.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Save Translation"]})]})]})})]})}FU.createRoot(document.getElementById("root")).render(x.jsx(k.StrictMode,{children:x.jsx(cK,{defaultTheme:"system",storageKey:"localizer-theme",children:x.jsx(WK,{})})}));
